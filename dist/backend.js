"use strict";(()=>{var RY=Object.create;var Mp=Object.defineProperty;var xY=Object.getOwnPropertyDescriptor;var vY=Object.getOwnPropertyNames;var bY=Object.getPrototypeOf,CY=Object.prototype.hasOwnProperty;var t=(i,e)=>Mp(i,"name",{value:e,configurable:!0});var n=(i,e)=>()=>(i&&(e=i(i=0)),e);var P=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),Su=(i,e)=>{for(var r in e)Mp(i,r,{get:e[r],enumerable:!0})},nv=(i,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vY(e))!CY.call(i,s)&&s!==r&&Mp(i,s,{get:()=>e[s],enumerable:!(o=xY(e,s))||o.enumerable});return i};var T=(i,e,r)=>(r=i!=null?RY(bY(i)):{},nv(e||!i||!i.__esModule?Mp(r,"default",{value:i,enumerable:!0}):r,i)),O=i=>nv(Mp({},"__esModule",{value:!0}),i);var av=(i,e,r)=>{if(!e.has(i))throw TypeError("Cannot "+r)};var C=(i,e,r)=>(av(i,e,"read from private field"),r?r.call(i):e.get(i)),xe=(i,e,r)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,r)},ke=(i,e,r,o)=>(av(i,e,"write to private field"),o?o.call(i,r):e.set(i,r),r),sv=(i,e,r,o)=>({set _(s){ke(i,e,s,r)},get _(){return C(i,e,o)}});var S,Ql,de=n(()=>{S=class{#e=[];#t=[];constructor(...e){this.#e.push(...e)}accepts(e){return this.#e.some(r=>e instanceof r)}entries(){return this.#t.slice()}every(e){return this.entries().every(e)}filter(e){return this.entries().filter(e)}forEach(e){return this.entries().forEach(e)}getBy(e,r){return this.filter(o=>{let s=o[e];return s instanceof Function?s.bind(o)()===r:o[e]===r})}includes(e){return this.#t.includes(e)}indexOf(e){return this.#t.indexOf(e)}get length(){return this.entries().length}map(e){return this.entries().map(e)}register(...e){e.forEach(r=>{if(!this.accepts(r))throw new TypeError(`Registry#register: Invalid entity attempted to be registered: '${r}'.`);this.#t.includes(r)||this.#t.push(r)})}some(e){return this.entries().some(e)}unregister(...e){e.forEach(r=>{let o=this.#t.indexOf(r);o>-1&&this.#t.splice(o,1)})}};t(S,"EntityRegistry");Ql=S});var ku,X,Wt=n(()=>{ku=class{#e;#t;#r;constructor(e,r,o){this.#e=r,this.#t=o,this.#r=e}data(...e){return this.#t(...e)}key(){return this.#e}type(){return this.#r}};t(ku,"AdditionalData");X=ku});var Yu,ee,Et=n(()=>{de();Wt();Yu=class extends S{constructor(){super(X)}getByType(e){return this.filter(r=>r.type()===e||Object.prototype.isPrototypeOf.call(r.type(),e)||Object.prototype.isPrototypeOf.call(r.type().prototype,e))}};t(Yu,"AdditionalDataRegistry");ee=new Yu});var Lu,PY,Dp,k,We,Z=n(()=>{Et();de();Lu={},PY=t(i=>{let e=i.sourceClass().name,r=Lu[e];return r||(Lu[e]=0),r===Number.MAX_SAFE_INTEGER&&(Lu[e]=BigInt(r)),e+"-"+(++Lu[e]).toString(36)},"idProvider"),Dp=t((i,e,r=s=>s,o=ee)=>{if(i=r(i),i instanceof Ql&&(i=i.entries()),Array.isArray(i))return i.map(s=>Dp(s,e,r,o));if(i instanceof k){let s=i.id();if(!(s in e)){let a={_:i.sourceClass().name};e[s]=a,i.keys().forEach(m=>{let u=i[m]instanceof Function?i[m]():i[m];a[m]=Dp(u,e,r,o)}),o.getByType(i.sourceClass()).forEach(m=>{a[m.key()]=Dp(m.data(i),e,r,o)})}return{"#ref":s}}return i instanceof Function?{_:i.name}:i&&i instanceof Object?Object.entries(i).reduce((s,[a,m])=>(s[a]=Dp(m,e,r,o),s),{}):i},"toPlainObject"),k=class{#e;#t=["id"];constructor(){this.#e=PY(this)}addKey(...e){this.#t.push(...e)}id(){return this.#e}keys(){return this.#t}sourceClass(){return this.constructor}toPlainObject(e=o=>o,r=ee){let o={};return{hierarchy:Dp(this,o,e,r),objects:o}}};t(k,"DataObject");We=k});var zu,nr,ca=n(()=>{Z();zu=class extends k{#e;#t;constructor(e,r){super(),this.#e=e,this.#t=r,this.addKey("value")}player(){return this.#e}value(){return this.#t}};t(zu,"PlayerAction");nr=zu});var Nu,hi,yl=n(()=>{ca();Nu=class extends nr{};t(Nu,"MandatoryPlayerAction");hi=Nu});var cs,lv=n(()=>{yl();cs=class extends hi{};t(cs,"ActiveUnit")});var fs,mv=n(()=>{ca();fs=class extends nr{};t(fs,"InactiveUnit")});var Gh=n(()=>{lv();mv()});var ju,x,M=n(()=>{Z();ju=class extends We{};t(ju,"Advance");x=ju});var He,pv,ao=n(()=>{He=class{#e=[];#t=[];constructor(...e){this.#e.push(...e)}accepts(e){return typeof e=="function"&&this.#e.some(r=>Object.prototype.isPrototypeOf.call(r,e)||Object.prototype.isPrototypeOf.call(r.prototype,e))}entries(){return this.#t.slice()}every(e){return this.entries().every(e)}filter(e){return this.entries().filter(e)}forEach(e){return this.entries().forEach(e)}getBy(e,r){return this.filter(o=>{let s=o[e];return s instanceof Function?s.bind(o)()===r:o[e]===r})}includes(e){return this.#t.includes(e)}indexOf(e){return this.#t.indexOf(e)}get length(){return this.entries().length}map(e){return this.entries().map(e)}register(...e){e.forEach(r=>{if(!this.accepts(r))throw new TypeError(`Registry#register: Invalid entity attempted to be registered: '${r}'.`);this.#t.includes(r)||this.#t.push(r)})}some(e){return this.entries().some(e)}unregister(...e){e.forEach(r=>{let o=this.#t.indexOf(r);o>-1&&this.#t.splice(o,1)})}};t(He,"ConstructorRegistry");pv=He});var Wu,R,U=n(()=>{M();ao();Wu=class extends He{constructor(){super(x)}};t(Wu,"AdvanceRegistry");R=new Wu});var Xl,l,w=n(()=>{Xl=class{#e=null;constructor(e){e&&(this.#e=e)}validate(...e){return this.#e===null?!0:this.#e(...e)}};t(Xl,"Criterion");l=Xl});var Hu,_u,Uh=n(()=>{w();Hu=class extends l{#e=[];constructor(...e){super(),e.forEach(r=>{this.#e.push(r)})}criteria(){return this.#e}validate(...e){return this.#e.every(r=>r.validate(...e))}};t(Hu,"Criteria");_u=Hu});var Ku,ys,Mh=n(()=>{Uh();Ku=class extends _u{};t(Ku,"And");ys=Ku});var qu,p,v=n(()=>{qu=class{#e;constructor(e){this.#e=e}apply(...e){return this.#e(...e)}};t(qu,"Effect");p=qu});var Vu,_r,ds=n(()=>{Vu=class{#e;constructor(e=2e3){this.#e=e}value(){return this.#e}};t(Vu,"Priority");_r=Vu});var fa,gs,em=n(()=>{ds();fa=class extends _r{constructor(){super(1e3)}};t(fa,"High");gs=fa});var it,uv,Dh=n(()=>{ds();it=class extends _r{constructor(){super(3e3)}};t(it,"Low");uv=it});var tm,cv=n(()=>{ds();tm=class extends _r{constructor(){super(2e3)}};t(tm,"Normal")});var ya=n(()=>{em();Dh();cv()});var Ju,g,A=n(()=>{Mh();w();v();ya();Ju=class{#e;#t=!0;#r;#i=new tm;constructor(...e){let r=[];e.forEach(o=>{if(o instanceof p){if(this.#r)throw new TypeError("Rule: effect already specified, but another was provided.");this.#r=o;return}if(o instanceof l){r.push(o);return}this.#i=o}),r.length&&(this.#e=new ys(...r))}disable(){this.#t=!1}enable(){this.#t=!0}enabled(){return this.#t}priority(){return this.#i}process(...e){if(!!this.#t&&this.#r instanceof p)return this.#r.apply(...e)}validate(...e){return this.#t?this.#e instanceof l?this.#e.validate(...e):!0:!1}};t(Ju,"Rule");g=Ju});var $u,d,I=n(()=>{de();A();$u=class extends S{#e=new Map;constructor(){super(g)}entries(){return super.entries().sort((e,r)=>e.priority().value()-r.priority().value())}get(e){return this.#e.has(e)||this.#e.set(e,this.filter(r=>r.enabled()&&r instanceof e)),this.#e.get(e)||[]}invalidateCache(e){this.#e.delete(e instanceof g?e.constructor:e)}process(e,...r){return this.get(e).filter(o=>o.validate(...r)).map(o=>o.process(...r))}register(...e){super.register(...e),e.forEach(r=>this.invalidateCache(r))}unregister(...e){super.unregister(...e),e.forEach(r=>this.invalidateCache(r))}};t($u,"RuleRegistry");d=new $u});var Zu,hs,Qu=n(()=>{A();Zu=class extends g{};t(Zu,"Complete");hs=Zu});var Xu,ec,Eh=n(()=>{A();Xu=class extends g{};t(Xu,"Cost");ec=Xu});var tc,rc,Fh=n(()=>{A();tc=class extends g{};t(tc,"Requirements");rc=tc});var Os,L,Me=n(()=>{Z();Os=class extends k{#e=[];#t=null;constructor(e=0,r="initial"){super(),this.addKey("value","values"),this.add(e,r)}add(e,r=""){if(e instanceof Os)return this.add(e.value(),r);this.#e.push([e,r]),this.#t=null}clone(){return new this.constructor(this)}set(e,r=""){if(this.#e.splice(0),e instanceof Os)return this.set(e.value(),r);this.#e.push([e,r]),this.#t=e}subtract(e,r=""){if(e instanceof Os)return this.subtract(e.value(),r);this.#e.push([-e,r]),this.#t=null}value(){return this.#t===null&&(this.#t=this.#e.reduce((e,[r])=>e+r,0)),this.#t}values(){return this.#e}};t(Os,"Yield");L=Os});var dl,fv=n(()=>{Me();dl=class extends L{};t(dl,"Research")});var yv=n(()=>{fv()});var ic,rm,oc=n(()=>{A();ic=class extends g{};t(ic,"Started");rm=ic});var nc,im,ac=n(()=>{U();Z();I();Qu();Eh();Fh();yv();oc();nc=class extends k{#e;#t=[];#r=null;#i;#o=new dl(1/0);#n=new dl(0);#a;constructor(e,r=R,o=d){super(),this.#e=r,this.#i=e,this.#a=o,this.addKey("available","complete","cost","progress","researching")}add(e){this.#n.add(e),this.check()}addAdvance(e){if(this.#t.some(o=>o instanceof e))return;this.#r===e&&(this.#r=null);let r=new e;this.#t.push(r),this.#a.process(hs,this,r)}available(){let e=this.#a.get(rc);return this.#e.filter(r=>e.filter(o=>o.validate(r,this.#t)).every(o=>o.process(r,this.#t)===!0)&&!this.#t.some(o=>o instanceof r))}check(){if(this.#r!==null&&this.#n.value()>=this.#o.value()){let e=new this.#r;this.#t.push(e),this.#r=null,this.#n.subtract(this.#o),this.#o.set(1/0),this.#a.process(hs,this,e)}}complete(){return this.#t}completed(e){return this.#t.some(r=>r instanceof e)}cost(){return this.#o}player(){return this.#i}progress(){return this.#n}research(e){let[r]=this.#a.process(ec,e,this);this.#o.set(r),this.#r=e,this.#a.process(rm,this,e)}researching(){return this.#r}};t(nc,"PlayerResearch");im=nc});var sc,N,Ye=n(()=>{de();ac();sc=class extends S{constructor(){super(im)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError("Wrong number of results for player.");return r[0]}};t(sc,"PlayerResearchRegistry");N=new sc});var om,nm,Ep=n(()=>{om=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}goodyHut(){return this.#e}perform(){}unit(){return this.#t}};t(om,"Action");nm=om});var Rs,dv=n(()=>{Ye();Ep();Rs=class extends nm{#e;#t;constructor(e,r,o=N,s=()=>Math.random()){super(e,r),this.#e=o,this.#t=s}perform(){let e=this.#e.getByPlayer(this.unit().player()),r=e.available(),o=r[Math.floor(r.length*this.#t())];e.addAdvance(o)}};t(Rs,"Advance")});var lc,Pr,gl=n(()=>{A();lc=class extends g{};t(lc,"Captured");Pr=lc});var mc,ot,am=n(()=>{A();mc=class extends g{};t(mc,"Cost");ot=mc});var pc,an,uc=n(()=>{A();pc=class extends g{};t(pc,"Created");an=pc});var cc,Kr,hl=n(()=>{A();cc=class extends g{};t(cc,"Destroyed");Kr=cc});var fc,yc,Sh=n(()=>{A();fc=class extends g{};t(fc,"Created");yc=fc});var dc,zn,sm=n(()=>{Z();I();Sh();dc=class extends k{#e;constructor(e=d){super(),this.#e=e,this.#e.process(yc,this)}clone(){return new this.constructor(this.#e)}};t(dc,"Terrain");zn=dc});var _,gv=n(()=>{sm();_=class extends zn{};t(_,"Land")});var ar,kh=n(()=>{sm();ar=class extends zn{};t(ar,"Water")});var sr=n(()=>{gv();kh()});var gc,hc,Yh=n(()=>{A();gc=class extends g{};t(gc,"YieldModifier");hc=gc});var Oc,Oi,Lh=n(()=>{A();Oc=class extends g{};t(Oc,"Yield");Oi=Oc});var lm,ge,so=n(()=>{Z();sr();I();xc();Me();Yh();Lh();lm=class extends k{#e;#t=[];#r;#i;#o;#n;#a=new Map;constructor(e,r,o,s,a=d){super(),this.#o=e,this.#n=r,this.#i=o,this.#e=s,this.#r=a,this.addKey("terrain","isCoast","isLand","isWater","x","y","yields")}clearYieldCache(e=null){this.#a.delete(e)}getAdjacent(){return this.getAdjacentDirections().map(e=>this.getNeighbour(e))}getAdjacentDirections(){return["n","e","s","w"]}getNeighbour(e){return e==="n"?this.#e.get(this.#o,this.#n-1):e==="ne"?this.#e.get(this.#o+1,this.#n-1):e==="e"?this.#e.get(this.#o+1,this.#n):e==="se"?this.#e.get(this.#o+1,this.#n+1):e==="s"?this.#e.get(this.#o,this.#n+1):e==="sw"?this.#e.get(this.#o-1,this.#n+1):e==="w"?this.#e.get(this.#o-1,this.#n):this.#e.get(this.#o-1,this.#n-1)}getNeighbouringDirections(){return["n","ne","e","se","s","sw","w","nw"]}getNeighbours(){return this.#t.length||(this.#t=this.getNeighbouringDirections().map(e=>this.getNeighbour(e))),this.#t}getSurroundingArea(e=2){return Rc.fromSurrounding(this,e)}distanceFrom(e){let r=[[-1,1],[-1,0],[-1,-1],[0,1],[0,0],[0,-1],[1,1],[1,0],[1,-1]],[o]=r.map(([s,a])=>Math.hypot(this.#o-e.x()+s*this.#e.width(),this.#n-e.y()+a*this.#e.height())).sort((s,a)=>s-a);return o}isCoast(){let e=this;return e.isWater()&&e.getNeighbours().some(r=>r.isLand())||e.isLand()&&e.getNeighbours().some(r=>r.isWater())}isLand(){return this.#i instanceof _}isNeighbourOf(e){return this.getNeighbours().includes(e)}isWater(){return this.#i instanceof ar}map(){return this.#e}score(e=null,r=[[L,3]]){return this.yields(e).map(s=>{let[a]=r.filter(([u])=>s instanceof u),m=a?a[1]||1:0;return s.value()*m}).reduce((s,a)=>s+a,0)}terrain(){return this.#i}setTerrain(e){this.#i=e}x(){return this.#o}y(){return this.#n}yields(e=null){if(!this.#a.has(e)){let r=this.#r.process(Oi,this,e).flat();this.#r.process(hc,this,e,r).flat(),this.#a.set(e,r)}return this.#a.get(e)}};t(lm,"Tile");ge=lm});var mm,Rc,xc=n(()=>{de();so();mm=class extends S{static from(...e){return new this(...e)}static fromSurrounding(e,r=2){let o=t(s=>{let a=[];for(let m=e.x()-s;m<=e.x()+s;m++)for(let u=e.y()-s;u<=e.y()+s;u++)a.push([m,u]);return a},"gen");return this.from(...o(r).map(([s,a])=>e.map().get(s,a)))}constructor(...e){super(lm),this.register(...e)}push(...e){this.register(...e)}shift(){let[e]=this.entries();return this.unregister(e),e}score(e=null,r=[]){return this.entries().reduce((o,s)=>o+s.score(e,r),0)}yields(e=null){return this.entries().flatMap(r=>r.yields(e))}};t(mm,"Tileset");Rc=mm});var pm,sn,um=n(()=>{A();pm=class extends g{};t(pm,"Yield");sn=pm});var vc,Ol,bc=n(()=>{A();vc=class extends g{};t(vc,"YieldModifier");Ol=vc});var Cc,nt,da=n(()=>{Z();I();gl();am();uc();hl();xc();Me();um();bc();Cc=class extends k{#e=!1;#t;#r;#i;#o;#n;#a;#s=new Rc;constructor(e,r,o,s=d){super(),this.#t=o,this.#r=e,this.#i=e,this.#n=r,this.#a=this.#n.getSurroundingArea(),this.#s.push(r),this.#o=s,this.#o.process(an,this),this.addKey("destroyed","name","originalPlayer","player","tile","tiles","tilesWorked","yields")}capture(e){let r=this.#i;this.#i=e,this.#o.process(Pr,this,e,r)}destroy(e=null){this.#e=!0,this.#o.process(Kr,this,e)}destroyed(){return this.#e}name(){return this.#t}setName(e){this.#t=e}originalPlayer(){return this.#r}player(){return this.#i}tile(){return this.#n}tiles(){return this.#a}tilesWorked(){return this.#s}yields(){let e=[];return[this.#o.get(sn),this.#o.get(Ol),this.#o.get(ot)].flat().forEach(r=>{if(!r.validate(this,e))return;let o=r.process(this,e);if(!!o){if(o instanceof L){e.push(o);return}o.forEach(s=>e.push(s))}}),e}};t(Cc,"City");nt=Cc});var Pc,H,Ze=n(()=>{de();da();Pc=class extends S{constructor(){super(nt)}getByPlayer(e,r=!1){return r?this.getBy("player",e):this.filter(o=>o.player()===e&&!o.destroyed())}getByTile(e){let[r]=this.filter(o=>o.tile()===e&&!o.destroyed());return r??null}};t(Pc,"CityRegistry");H=new Pc});var xs,hv=n(()=>{Ze();I();Ep();da();xs=class extends nm{#e;constructor(e,r,o=H){super(e,r),this.#e=o}perform(e=d){let r=this.unit().player(),o=new nt(r,this.goodyHut().tile(),r.civilization().getCityName(!0),e);this.#e.register(o)}};t(xs,"City")});var Tc,lo,Rl=n(()=>{de();Tc=class extends S{constructor(){super(Function)}accepts(e){return"build"in e}};t(Tc,"AvailableCityBuildItemsRegistry");lo=new Tc});var ut,Ov,cm=n(()=>{w();A();ut=class extends g{process(e,r){let o=super.process(e,r);if(!(o instanceof Xl))throw new TypeError("Invalid build rule.");return o}};t(ut,"Build");Ov=ut});var Ic,wc,zh=n(()=>{Z();Ic=class extends We{#e;constructor(e){super(),this.addKey("value"),this.#e=e}value(){return this.#e}};t(Ic,"BuildCost");wc=Ic});var Fp,Rv,vs,TY,fm=n(()=>{zh();w();v();A();Fp=class extends g{};t(Fp,"BuildCost");Rv=Fp,vs=t((i,e)=>TY([[i,e]]),"buildCost"),TY=t(i=>i.map(([e,r])=>new Fp(new l(o=>o.item()===e),new p(()=>new wc(r)))),"buildCosts")});var Ac,Bc,Nh=n(()=>{I();zh();fm();Z();Ac=class extends We{#e;#t=new wc(1/0);#r;#i;constructor(e,r=null,o=d){super(),this.#r=e,this.#e=r,this.#i=o,this.addKey("cost","item")}cost(){if(!Number.isFinite(this.#t.value())){let[e]=this.#i.process(Rv,this,this.#e);e&&(this.#t=e)}return this.#t}item(){return this.#r}};t(Ac,"BuildItem");Bc=Ac});var xl,xv=n(()=>{Me();xl=class extends L{};t(xl,"BuildProgress")});var vv=n(()=>{xv()});var Gc,bv,Cv=n(()=>{A();Gc=class extends g{};t(Gc,"BuildingCancelled");bv=Gc});var Uc,Ri,ym=n(()=>{A();Uc=class extends g{};t(Uc,"BuildingComplete");Ri=Uc});var Mc,dm,Dc=n(()=>{Rl();Z();I();cm();Nh();vv();Cv();ym();Mc=class extends k{#e;#t=null;#r;#i=new xl(1/0);#o=new xl;#n;constructor(e,r=lo,o=d){super(),this.#e=r,this.#r=e,this.#n=o,this.addKey("available","building","city","cost","progress","remaining")}add(e){this.#o.add(e)}available(){let e=this.#n.get(Ov);return this.#e.filter(r=>e.filter(o=>o.validate(this.city(),r)).every(o=>o.process(this.city(),r).validate())).map(r=>new Bc(r,this.city(),this.#n))}build(e){let r=this.getAvailable(e);if(!r)throw new TypeError(`Cannot build ${e.name}, it's not available.`);this.#t=r,this.#i.set(this.#t.cost().value())}building(){return this.#t}check(){if(this.#o.value()>=this.#i.value()&&this.#t){let e=this.#t.item().build(this.#r,this.#n);return this.#o.set(0),this.#t=null,this.#i.set(1/0),this.#n.process(Ri,this,e),e}return null}city(){return this.#r}cost(){return this.#i}getAvailable(e){return this.available().filter(r=>r.item()===e)[0]}progress(){return this.#o}remaining(){return this.#i.value()-this.#o.value()}revalidate(){this.#t&&!this.getAvailable(this.#t.item())&&(this.#t=null,this.#i.set(1/0),this.#n.process(bv,this))}};t(Mc,"CityBuild");dm=Mc});var Ec,lr,ga=n(()=>{de();Dc();Ec=class extends S{constructor(){super(dm)}getByCity(e){let r=this.getBy("city",e);if(r.length!==1)throw new TypeError("Wrong number of entities returned.");return r[0]}};t(Ec,"CityBuildRegistry");lr=new Ec});var Fc,Nn,Sc=n(()=>{A();Fc=class extends g{};t(Fc,"Spend");Nn=Fc});var kc,Yc,jh=n(()=>{ga();I();Sc();Me();kc=class extends L{#e;#t;#r;constructor(e,r=lr,o=d){super(),this.#e=e,this.#t=o,this.#r=r}buy(e){let r=this.#r.getByCity(e),o=this.cost(e);e.player()!==this.#e||this.value()<o.value()||(r.add(new L(r.remaining())),this.subtract(o.value()))}cost(e){let r=this.#r.getByCity(e),o=new L;return this.#t.process(Nn,r,o).reduce((s,a)=>(s.add(a),s))}player(){return this.#e}};t(kc,"PlayerTreasury");Yc=kc});var Lc,xi,vl=n(()=>{de();jh();Lc=class extends S{constructor(){super(Yc)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError("Wrong number of PlayerTreasuries for player.");return r[0]}};t(Lc,"PlayerTreasuryRegistry");xi=new Lc});var mr,zc,gm=n(()=>{Me();mr=class extends L{};t(mr,"Gold");zc=mr});var bs,Pv=n(()=>{vl();Ep();gm();bs=class extends nm{#e;constructor(e,r,o=xi){super(e,r),this.#e=o}perform(){this.#e.getByPlayer(this.unit().player()).add(new mr(50))}};t(bs,"Gold")});var Nc,jc,Wh=n(()=>{A();Nc=class extends g{};t(Nc,"Unit");jc=Nc});var Cs,Tv=n(()=>{Ep();I();Wh();Cs=class extends om{#e;#t;constructor(e,r,o=()=>Math.random(),s=d){super(e,r),this.#e=o,this.#t=s}perform(){this.#t.process(jc,this.goodyHut(),this.unit())}};t(Cs,"Unit")});var Hh=n(()=>{dv();hv();Pv();Tv()});var Ps,Iv=n(()=>{ca();Ps=class extends nr{};t(Ps,"ChangeProduction")});var jn,wv=n(()=>{yl();jn=class extends hi{};t(jn,"CityBuild")});var _h=n(()=>{Iv();wv()});var Ts,Av,Wc=n(()=>{Ts=class{#e;constructor(e){this.#e=e}player(){return this.#e}takeTurn(){return new Promise((e,r)=>r(new TypeError("Client#takeTurn must be implemented.")))}};t(Ts,"Client");Av=Ts});var Hc,Is,Sp=n(()=>{Me();Hc=class extends L{#e;constructor(e,r){super(r),this.#e=e}leader(){return this.#e}};t(Hc,"Trait");Is=Hc});var _c,Kc,Kh=n(()=>{de();Sp();_c=class extends S{constructor(){super(Is)}getByLeader(e){return this.getBy("leader",e)}getBySubclass(e){return this.filter(r=>r instanceof e)}};t(_c,"TraitRegistry");Kc=new _c});var qc,ne,ct=n(()=>{Kh();Z();qc=class extends k{#e=[];constructor(e=Kc){super();let r=e.getByLeader(this.sourceClass());this.#e.push(...r),this.addKey("name")}static civilization(){throw new TypeError("Must be implemented in extending class")}name(){throw new TypeError("Must be implemented in extending class")}traits(){return[...this.#e]}};t(qc,"Leader");ne=qc});var Vc,Wn,hm=n(()=>{ao();ct();Vc=class extends He{constructor(){super(ne)}getByCivilization(e){return this.getBy("civilization",e)}};t(Vc,"LeaderRegistry");Wn=new Vc});var ws,Bv=n(()=>{ca();ws=class extends nr{};t(ws,"AdjustTradeRates")});var qh=n(()=>{Bv()});var Jc,we,Tr=n(()=>{A();Jc=class extends g{};t(Jc,"Busy");we=Jc});var bl,Gv,Vh=n(()=>{yl();bl=class extends hi{};t(bl,"ChooseResearch");Gv=bl});var $c,Zc,Jh=n(()=>{A();$c=class extends g{};t($c,"Cost");Zc=$c});var Hn,$h,Qc=n(()=>{Me();Hn=class extends L{};t(Hn,"FoodStorage");$h=Hn});var Xc,Yp,Zh=n(()=>{A();Xc=class extends g{};t(Xc,"FoodStorage");Yp=Xc});var ef,_n,tf=n(()=>{A();ef=class extends g{};t(ef,"Grow");_n=ef});var rf,Cl,Qh=n(()=>{A();rf=class extends g{};t(rf,"Shrink");Cl=rf});var of,Pl,nf=n(()=>{Z();I();Jh();Qc();Zh();tf();Qh();of=class extends k{#e;#t=new $h(1/0);#r=new $h;#i;#o=1;constructor(e,r=d){super(),this.#e=e,this.#i=r,this.setCost(),this.addKey("cost","progress","size")}add(e){this.#r.add(e)}check(){this.#i.process(Yp,this)}city(){return this.#e}cost(){return this.#t}setCost(){let e=this.#i.process(Zc,this);e.length>0&&this.#t.set(e[0],"setCost")}empty(){this.#r.subtract(this.#r.value())}grow(){this.#o++,this.#i.process(_n,this)}progress(){return this.#r}shrink(){this.#o--,this.#i.process(Cl,this)}size(){return this.#o}};t(of,"CityGrowth");Pl=of});var As,Uv,af=n(()=>{Z();I();As=class extends k{static build(e,r=d){throw new TypeError("createFromObject: Must be overridden in extending class")}};t(As,"Buildable");Uv=As});var sf,Lp,Xh=n(()=>{A();sf=class extends g{};t(sf,"Created");Lp=sf});var lf,z,De=n(()=>{af();I();Xh();lf=class extends As{#e;#t=!1;#r;constructor(e,r=d){super(),this.addKey("destroyed"),this.#e=e,this.#r=r,this.#r.process(Lp,this,e)}static build(e,r=d){return new this(e,r)}city(){return this.#e}destroy(){this.#t=!0}destroyed(){return this.#t}};t(lf,"CityImprovement");z=lf});var mf,ve,pr=n(()=>{Z();mf=class extends k{#e;#t;#r;constructor(e,r,o){super(),this.#e=e,this.#t=r,this.#r=o,this.addKey("name","value")}civilization(){return this.#e}name(){return this.#t}value(){return this.#r}};t(mf,"Attribute");ve=mf});var Om,be,ur=n(()=>{de();pr();Om=class extends S{constructor(){super(ve)}getByCivilization(e){return this.getBy("civilization",e)}getByName(e){return this.getBy("name",e)}};t(Om,"AttributeRegistry");be=new Om});var pf,te,Ht=n(()=>{pf=class{#e;#t;#r=!1;constructor(e,r,o=!1){this.#e=e,this.#t=r,this.#r=o}name(){return this.#e}civilization(){return this.#t}capital(){return this.#r}};t(pf,"CityName");te=pf});var uf,Q,Ct=n(()=>{de();Ht();uf=class extends S{#e=1;#t;constructor(e=()=>Math.random()){super(te),this.#t=e}takeByCivilization(e){let[r]=this.getBy("civilization",e).sort(()=>Math.floor(this.#t()*3)-1);return r instanceof te?(this.unregister(r),r.name()):this.takeUnassociated()}takeCapitalByCivilization(e){let[r]=this.getBy("civilization",e).sort(()=>Math.floor(this.#t()*3)-1).filter(o=>o.capital());return r instanceof te?(this.unregister(r),r.name()):this.takeByCivilization(e)}takeUnassociated(){let[e]=this.getBy("civilization",null).sort(()=>Math.floor(this.#t()*3)-1);return e instanceof te?(this.unregister(e),e.name()):`City #${this.#e++}`}};t(uf,"CityNameRegistry");Q=new uf});var cf,ce,_t=n(()=>{ur();Ct();Z();cf=class extends k{#e=null;#t;#r=new Om;constructor(e=be,r=Q){super(),this.#t=r,this.#r.register(...e.getByCivilization(this.sourceClass())),this.addKey("name","leader","attributes")}attributes(){return this.#r.entries()}name(){return this.constructor.name}leader(){return this.#e}setLeader(e){this.#e=e}getCityName(e=!1){let r=this.sourceClass();return e?this.#t.takeCapitalByCivilization(r):this.#t.takeByCivilization(r)}};t(cf,"Civilization");ce=cf});var Bs,Mv=n(()=>{ca();Bs=class extends nr{value(){return super.value()}};t(Bs,"CompleteProduction")});var eO=n(()=>{Mv()});var Tl,yf,df=n(()=>{yl();Tl=class extends hi{};t(Tl,"EndTurn");yf=Tl});var gf,hf,tO=n(()=>{gf=class{#e={};on(e,r){e in this.#e||(this.#e[e]=[]),this.#e[e].push(r)}once(e,r){let o=t((...s)=>{r(...s),this.off(e,o)},"onceHandler");this.on(e,o)}off(e,r){if(!(e in this.#e))return;let o=this.#e[e].indexOf(r);o!==-1&&this.#e[e].splice(o,1)}emit(e,...r){e in this.#e&&this.#e[e].forEach(o=>o(...r))}};t(gf,"EventEmitter");hf=gf});var Il,Ev,rO=n(()=>{ca();Il=class extends nr{};t(Il,"LaunchSpaceship");Ev=Il});var Of,at,Kn=n(()=>{A();Of=class extends g{};t(Of,"Action");at=Of});var Rf,vi,wl=n(()=>{A();Rf=class extends g{};t(Rf,"Added");vi=Rf});var xf,iO,Fv=n(()=>{ca();xf=class extends nr{};t(xf,"HiddenPlayerAction");iO=xf});var vf,K,mo=n(()=>{Z();I();Kn();wl();Fv();yl();vf=class extends k{#e=null;#t;constructor(e=d){super(),this.#t=e,this.#t.process(vi,this),this.addKey("actions","civilization","mandatoryActions")}action(){let[e]=this.actions();return e}actions(){return this.#t.process(at,this).flat().filter(e=>!(e instanceof iO))}civilization(){if(this.#e===null)throw new TypeError("Player#civilization is unset.");return this.#e}hasActions(){return!!this.action()}hasMandatoryActions(){return this.actions().some(e=>e instanceof hi)}hiddenActions(){return this.#t.process(at,this).flat().filter(e=>e instanceof iO)}mandatoryAction(){let[e]=this.mandatoryActions();return e}mandatoryActions(){return this.actions().filter(e=>e instanceof hi)}setCivilization(e){this.#e=e}};t(vf,"Player");K=vf});var bf,Rm,oO=n(()=>{Et();Z();so();bf=class extends k{#e={};#t;#r;#i;constructor(e,r,o=ee){super(),this.#t=o,this.#r=r,this.#i=e,this.addKey("isCoast","isLand","isWater","terrain","x","y","yields"),this.setAdditionalData()}addKey(...e){super.addKey(...e)}isCoast(){return this.#i.isCoast()}isLand(){return this.#i.isLand()}isWater(){return this.#i.isWater()}player(){return this.#r}setAdditionalData(){this.#t.getByType(ge).forEach(e=>{this.#e[e.key()]=e.data(this.#i),Object.defineProperty(this,e.key(),{configurable:!0,value:()=>e.data(this.#i)}),this.addKey(e.key())})}terrain(){return this.#i.terrain()}tile(){return this.#i}update(){this.#i.clearYieldCache(this.#r),this.setAdditionalData()}x(){return this.#i.x()}y(){return this.#i.y()}yields(){return this.#i.yields(this.#r)}};t(bf,"PlayerTile");Rm=bf});var Cf,Sv,kv=n(()=>{sm();Cf=class extends zn{};t(Cf,"Unknown");Sv=Cf});var Pf,Yv,Lv=n(()=>{so();kv();Pf=class extends ge{constructor(e,r,o){super(e,r,new Sv,o)}};t(Pf,"UndiscoveredTile");Yv=Pf});var Tf,If,nO=n(()=>{A();Tf=class extends g{};t(Tf,"VisibilityChanged");If=Tf});var wf,xm,Af=n(()=>{Z();I();oO();so();Lv();nO();wf=class extends k{#e;#t;#r=[];#i;constructor(e,r,o=d){super(),this.#e=e,this.#i=r,this.#t=o,this.addKey("height","tiles","width")}entries(){return this.#r}filter(e){return this.entries().filter(e)}forEach(e){return this.#r.forEach(e)}get(e,r){let[o]=this.entries().filter(s=>s.x()===e&&s.y()===r);return o||new Yv(e,r,this.#i)}getByTile(e){let[r]=this.filter(o=>o.tile()===e);return r??null}height(){return this.#i.height()}includes(e){return e instanceof ge?!!this.getByTile(e):this.#r.includes(e)}map(e){return this.#r.map(e)}player(){return this.#e}register(...e){e.forEach(r=>{this.includes(r)||(this.#r.push(new Rm(r,this.#e)),this.#t.process(If,r,this.player()))})}tiles(){return this.entries()}width(){return this.#i.width()}};t(wf,"PlayerWorld");xm=wf});var Us,jv=n(()=>{ca();Us=class extends nr{};t(Us,"Revolution")});var aO=n(()=>{jv()});var po,Wv=n(()=>{Me();po=class extends L{};t(po,"Attack")});var bi,Hv=n(()=>{Me();bi=class extends L{};t(bi,"Defence")});var uo,_v,sO=n(()=>{Me();uo=class extends L{};t(uo,"Movement");_v=uo});var Cm,Kv=n(()=>{sO();Cm=class extends _v{};t(Cm,"Moves")});var Ms,qv=n(()=>{Me();Ms=class extends L{};t(Ms,"Visibility")});var Pm=n(()=>{Wv();Hv();sO();Kv();qv()});var Pt,lO,Ci,qn,Tm,mO=n(()=>{w();v();A();Pt=class extends g{};t(Pt,"Action");lO=Pt,Ci=new l(i=>i.moves().value()>=.1),qn=new l((i,e,r=i.tile())=>r===e),Tm=new l((i,e,r=i.tile())=>e.isNeighbourOf(r))});var Df,Im,pO=n(()=>{A();Df=class extends g{};t(Df,"Activate");Im=Df});var Ef,ha,Ff=n(()=>{A();Ef=class extends g{};t(Ef,"Created");ha=Ef});var Sf,ln,_p=n(()=>{A();Sf=class extends g{};t(Sf,"Destroyed");ln=Sf});var kf,Yf,uO=n(()=>{A();kf=class extends g{};t(kf,"Visibility");Yf=kf});var Ds,Al,Kp,Vv,wm=n(()=>{Pm();w();v();A();Ds=class extends g{};t(Ds,"BaseYield");Al=class extends g{};t(Al,"Yield");Kp=Al,Vv=t((i,e=1,r=1,o=1,s=1)=>[...[[po,e],[bi,r],[uo,o],[Ms,s]].flatMap(([a,m])=>[new Al(new l(u=>u instanceof i),new l((u,f)=>f instanceof a),new p((u,f)=>f.set(m))),new Ds(new l(u=>u===i),new l((u,f)=>f instanceof a),new p((u,f)=>f.set(m)))])],"unitYield")});var Lf,Be,Oa=n(()=>{Pm();af();I();mO();pO();Ff();_p();uO();wm();Lf=class extends As{#e=!0;#t=null;#r;#i=!1;#o=new Cm;#n;#a;#s=null;#l;#m=!1;constructor(e,r,o,s=d){super(),this.#r=e,this.#n=r,this.#l=o,this.#a=s,this.addKey("actions","actionsForNeighbours","active","attack","busy","city","defence","destroyed","movement","moves","player","status","tile","visibility","waiting"),this.#a.process(ha,this)}static build(e,r=d){return new this(e,e.player(),e.tile(),r)}action(e,...r){return e.perform(...r)}actions(e=this.#l,r=this.#l){return typeof e=="string"&&(e=r.getNeighbour(e)),this.#a.process(lO,this,e,r)}actionsForNeighbours(e=this.#l){return e.getNeighbouringDirections().reduce((r,o)=>({...r,[o]:this.#a.process(lO,this,e.getNeighbour(o),e)}),{})}activate(){this.#a.process(Im,this)}active(){return this.#e}setActive(e=!0){this.#e=e}applyVisibility(){this.#l.getSurroundingArea(this.visibility().value()).forEach(e=>{this.#a.process(Yf,e,this.#n)})}attack(){let[e]=this.yield(new po);return e}busy(){return this.#t}setBusy(e=null){this.#t=e}city(){return this.#r}defence(){let[e]=this.yield(new bi);return e}destroy(e=null){this.#a.process(ln,this,e)}destroyed(){return this.#i}setDestroyed(){this.#i=!0}movement(){let[e]=this.yield(new uo);return e}moves(){return this.#o}player(){return this.#n}status(){return this.#s}setStatus(e){this.#s=e}tile(){return this.#l}setTile(e){this.#l=e}visibility(){let[e]=this.yield(new Ms);return e}waiting(){return this.#m}setWaiting(e=!0){this.#m=e}yield(...e){let r=this.#a.get(Kp);return e.forEach(o=>r.filter(s=>s.validate(this,o)).forEach(s=>s.process(this,o))),e}};t(Lf,"Unit");Be=Lf});var zf,he,cr=n(()=>{de();nf();zf=class extends S{constructor(){super(Pl)}getByCity(e){let r=this.getBy("city",e);if(r.length!==1)throw new TypeError("Wrong number of CityGrowths returned.");return r[0]}};t(zf,"CityGrowthRegistry");he=new zf});var Ce,Oe,Ae=n(()=>{De();Ce=class extends z{};t(Ce,"Wonder");Oe=Ce});var Am,Pi,Es=n(()=>{de();mo();Am=class extends S{constructor(){super(K)}};t(Am,"PlayerRegistry");Pi=new Am});var Hf,mn,Bm=n(()=>{Es();Hf=class extends Am{};t(Hf,"CurrentPlayerRegistry");mn=new Hf});var _f,b,q=n(()=>{tO();_f=class extends hf{#e={};#t=!1;debug(e){if(!!this.option("debug"))return e()}emit(e,...r){return this.debug(()=>console.log(`Engine#emit: ${String(e)}: ${r}`)),super.emit(e,...r)}loadPlugins(){return this.emit("plugins:load:start"),new Promise((e,r)=>{this.once("plugins:load:end",()=>e())})}option(e,r=null){return this.#e[e]||r}setOption(e,r){this.#e[e]!==r&&(this.#e[e]=r,this.emit("option:changed",e,r))}start(){this.#t||(this.#t=!0,this.emit("engine:initialise"),this.loadPlugins().then(()=>{this.emit("engine:start")}))}};t(_f,"Engine");b=new _f});var Kf,me,co=n(()=>{de();Af();Kf=class extends S{constructor(){super(xm)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError(`Wrong number of player worlds exist for player: ${e.id()}`);return r[0]}};t(Kf,"PlayerWorldRegistry");me=new Kf});var qf,ae,Kt=n(()=>{Z();qf=class extends k{#e=0;constructor(){super(),this.addKey("value")}increment(){return this.#e++,this.#e}value(){return this.#e}};t(qf,"Turn");ae=new qf});var Vf,W,Je=n(()=>{de();Oa();Vf=class extends S{constructor(){super(Be)}getByCity(e){return this.filter(r=>r.city()===e&&!r.destroyed())}getByPlayer(e,r=!1){return r?this.getBy("player",e):this.filter(o=>o.player()===e&&!o.destroyed())}getByTile(e){return this.filter(r=>r.tile()===e&&!r.destroyed())}};t(Vf,"UnitRegistry");W=new Vf});var Jf,Fs,dO=n(()=>{A();Jf=class extends g{};t(Jf,"Year");Fs=Jf});var $f,Gm,gO=n(()=>{Z();I();Kt();dO();$f=class extends k{#e=new Map;#t;#r;constructor(e=ae,r=d){super(),this.#t=r,this.#r=e,this.addKey("value")}value(e=this.#r.value()){if(!this.#e.has(e)){let[o]=this.#t.process(Fs,e);this.#e.set(e,o)}let r=this.#e.get(e);if(typeof r!="number")throw new TypeError("Invalid cache result.");return r}};t($f,"Year");Gm=new $f});var $,pn,Bl=n(()=>{Me();$=class extends L{};t($,"Food");pn=$});var V,Ra,Um=n(()=>{Me();V=class extends L{};t(V,"Production");Ra=V});var se,xa,va=n(()=>{Me();se=class extends L{};t(se,"Trade");xa=se});var ba=n(()=>{Bl();Um();va()});var Ca,Le,Ti=n(()=>{Ca=t((i,...e)=>i.reduce((r,o)=>{let s=e.findIndex(a=>o instanceof a);return s===-1||(r[s]+=o.value()),r},e.map(()=>0)),"reduceYields"),Le=t((i,e)=>Ca(i,e).shift()??0,"reduceYield")});var IY,wY,Qv,Xv,Ss,Mm=n(()=>{cr();ba();co();Ti();IY=t((i,e=[[$,8],[V,3*(Le(i.tilesWorked().yields(i.player()),V)===0?3:1)],[se,1*(Le(i.tilesWorked().yields(i.player()),se)===0?3:1)]])=>i.tiles().entries().sort((r,o)=>o.score(i.player(),e)-r.score(i.player(),e)),"getHighestValueCityTiles"),wY=t((i,e=me)=>IY(i).filter(r=>e.getByPlayer(i.player()).includes(r)&&!i.tilesWorked().includes(r)&&i.tile()!==r),"getHighestValueAvailableCityTiles"),Qv=t((i,e=me,r=he)=>{i.tilesWorked().unregister(...i.tilesWorked().entries()),i.tilesWorked().register(i.tile()),Xv(i,e,r)},"reassignWorkers"),Xv=t((i,e=me,r=he)=>{let o=r.getByCity(i);wY(i,e).some(s=>i.tilesWorked().length>=o.size()+1?!0:(i.tilesWorked().register(s),!1))},"assignWorkers"),Ss=Xv});var Jn,Ys,Ls=n(()=>{I();Z();Jn=class extends k{#e;#t;#r;#i;constructor(e,r,o,s=d){super(),this.#e=e,this.#t=s,this.#r=r,this.#i=o,this.addKey("from","to")}forUnit(e){return new this.constructor(this.#e,this.#r,e,this.#t)}from(){return this.#e}perform(...e){}ruleRegistry(){return this.#t}to(){return this.#r}unit(){return this.#i}};t(Jn,"Action");Ys=Jn});var Qf,un,ru=n(()=>{A();Qf=class extends g{};t(Qf,"Defeated");un=Qf});var zs,ib=n(()=>{I();Je();Ls();ru();zs=class extends Ys{#e;#t;constructor(e,r,o,s=d,a=W,m=()=>Math.random()){super(e,r,o,s),this.#t=a,this.#e=m}perform(){let[e]=this.#t.getByTile(this.to()).sort((o,s)=>s.defence().value()-o.defence().value()),r=Math.min(1,this.unit().moves().value());if(this.unit().attack().value()*r*this.#e()>=e.defence().value()*this.#e()){this.ruleRegistry().process(un,e,this.unit(),this),this.unit().moves().subtract(r,this.constructor.name);return}this.ruleRegistry().process(un,this.unit(),e,this)}};t(zs,"Attack")});var Xf,ob,nb=n(()=>{Tr();Xf=class extends we{};t(Xf,"BuildingIrrigation");ob=Xf});var ey,J,Ft=n(()=>{A();ey=class extends g{};t(ey,"Moved");J=ey});var ty,Qe,fo=n(()=>{Ls();I();Kt();Tr();w();v();Ft();ty=class extends Jn{#e;constructor(e,r,o,s=d,a=ae){super(e,r,o,s),this.#e=a}perform(e,r=()=>{},o=we){let s=this.#e.value()+e;this.unit().setActive(!1),this.unit().moves().set(0),this.unit().setBusy(new o(new l(()=>this.#e.value()===s),new p((...a)=>{let m=this.unit();m.setActive(),m.setBusy(),r(...a),this.ruleRegistry().process(J,this.unit(),this)})))}};t(ty,"DelayedAction");Qe=ty});var ry,Pa,iy=n(()=>{A();ry=class extends g{};t(ry,"Built");Pa=ry});var oy,cn,Ul=n(()=>{Z();I();iy();oy=class extends k{#e;constructor(e,r=d){super(),this.#e=e,r.process(Pa,e,this)}tile(){return this.#e}};t(oy,"TileImprovement");cn=oy});var Ge,ab,xO=n(()=>{Ul();Ge=class extends cn{};t(Ge,"Irrigation");ab=Ge});var ny,Te,Ii=n(()=>{A();ny=class extends g{};t(ny,"MovementCost");Te=ny});var Ns,sb=n(()=>{nb();fo();xO();Ft();Ii();Ns=class extends Qe{perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e||0,()=>{new ab(this.unit().tile())},ob),this.ruleRegistry().process(J,this.unit(),this)}};t(Ns,"BuildIrrigation")});var ay,lb,mb=n(()=>{Tr();ay=class extends we{};t(ay,"BuildingMine");lb=ay});var Xe,pb,vO=n(()=>{Ul();Xe=class extends cn{};t(Xe,"Mine");pb=Xe});var js,ub=n(()=>{mb();fo();vO();Ft();Ii();js=class extends Qe{perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e||0,()=>{new pb(this.unit().tile())},lb),this.ruleRegistry().process(J,this.unit(),this)}};t(js,"BuildMine")});var sy,cb,fb=n(()=>{Tr();sy=class extends we{};t(sy,"BuildingRoad");cb=sy});var Ne,yb,bO=n(()=>{Ul();Ne=class extends cn{};t(Ne,"Road");yb=Ne});var Ws,db=n(()=>{fb();fo();Ft();Ii();bO();Ws=class extends Qe{perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e||0,()=>{new yb(this.unit().tile())},cb),this.ruleRegistry().process(J,this.unit(),this)}};t(Ws,"BuildRoad")});var ly,gb,hb=n(()=>{Tr();ly=class extends we{};t(ly,"BuildingRailroad");gb=ly});var fr,Ob,CO=n(()=>{Ul();fr=class extends cn{};t(fr,"Railroad");Ob=fr});var Hs,Rb=n(()=>{hb();fo();Ft();Ii();CO();Hs=class extends Qe{perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e||0,()=>{new Ob(this.unit().tile())},gb),this.ruleRegistry().process(J,this.unit(),this)}};t(Hs,"BuildRailroad")});var my,iu,PO=n(()=>{A();my=class extends g{};t(my,"ValidateMove");iu=my});var qt,Dm,ou=n(()=>{Ls();Ft();Ii();PO();qt=class extends Jn{perform(){return this.validate()?(this.unit().setTile(this.to()),this.ruleRegistry().process(J,this.unit(),this),!0):!1}movementCost(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>r-o);return e}validate(){let[e]=this.ruleRegistry().process(iu,this.unit(),this.movementCost());return e}};t(qt,"Move");Dm=qt});var Em,xb=n(()=>{I();ou();Em=class extends Dm{#e;constructor(e,r,o,s,a=d){super(e,r,o,a),this.#e=s}perform(){return super.perform()?(this.#e.capture(this.unit().player()),!0):!1}};t(Em,"CaptureCity")});var py,_e,wi=n(()=>{Z();py=class extends We{#e;constructor(e){super(),this.#e=e}clone(e=this.terrain()){return new this.constructor(e)}terrain(){return this.#e}};t(py,"TerrainFeature");_e=py});var TO,uy,ft,fn=n(()=>{de();wi();TO=new Map,uy=class extends S{constructor(){super(_e)}getByTerrain(e){return TO.has(e)||TO.set(e,this.getBy("terrain",e)),TO.get(e)}};t(uy,"TerrainFeatureRegistry");ft=new uy});var cy,vb,bb=n(()=>{Tr();cy=class extends we{};t(cy,"ClearingForest");vb=cy});var le,Fm,nu=n(()=>{sr();le=class extends _{};t(le,"Plains");Fm=le});var _s,Cb=n(()=>{I();fn();Kt();bb();fo();Ft();Ii();nu();_s=class extends Qe{#e;constructor(e,r,o,s=d,a=ft,m=ae){super(e,r,o,s,m),this.#e=a}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{let r=new Fm,o=this.#e.getByTerrain(this.from().terrain());this.#e.register(...o.map(s=>s.clone(r))),this.#e.unregister(...o),this.from().setTerrain(r)},vb),this.ruleRegistry().process(J,this.unit(),this)}};t(_s,"ClearForest")});var fy,Pb,Tb=n(()=>{Tr();fy=class extends we{};t(fy,"ClearingJungle");Pb=fy});var au,Ks,Ib,Sm=n(()=>{fn();w();v();A();au=class extends g{};t(au,"Feature");Ks=au,Ib=t((i,e,r=.2,o=ft,s=()=>Math.random())=>[new au(new l(a=>a===e),new l((a,m)=>m instanceof i),new l(()=>s()<=r),new p((a,m)=>o.register(new a(m))))],"feature")});var Re,qs,km=n(()=>{sr();Re=class extends _{};t(Re,"Grassland");qs=Re});var yn,yy,dy=n(()=>{wi();yn=class extends _e{};t(yn,"Shield");yy=yn});var Vs,wb=n(()=>{I();fn();Kt();Tb();fo();Sm();km();Ft();Ii();dy();Vs=class extends Qe{#e;constructor(e,r,o,s=d,a=ft,m=ae){super(e,r,o,s,m),this.#e=a}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{let r=new qs,o=this.#e.getByTerrain(this.from().terrain());this.ruleRegistry().process(Ks,yy,r),this.#e.unregister(...o),this.from().setTerrain(r)},Pb),this.ruleRegistry().process(J,this.unit(),this)}};t(Vs,"ClearJungle")});var gy,Ab,Bb=n(()=>{Tr();gy=class extends we{};t(gy,"ClearingSwamp");Ab=gy});var Js,Gb=n(()=>{I();fn();Kt();Bb();fo();Sm();km();Ft();Ii();dy();Js=class extends Qe{#e;constructor(e,r,o,s=d,a=ft,m=ae){super(e,r,o,s,m),this.#e=a}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{let r=new qs,o=this.#e.getByTerrain(this.from().terrain());this.ruleRegistry().process(Ks,yy,r),this.#e.unregister(...o),this.from().setTerrain(r)},Ab),this.ruleRegistry().process(J,this.unit(),this)}};t(Js,"ClearSwamp")});var Ym,Ub=n(()=>{Ls();Ym=class extends Ys{perform(){this.unit().destroy()}};t(Ym,"Disband")});var $s,Mb=n(()=>{I();ou();$s=class extends Dm{#e;constructor(e,r,o,s,a=d){super(e,r,o,a),this.#e=s}perform(){return super.perform()?(this.unit().moves().set(0),this.#e.unload(this.unit()),!0):!1}};t($s,"Disembark")});var Lm,Db=n(()=>{I();Tr();w();ou();Ft();Lm=class extends Dm{#e;constructor(e,r,o,s,a=d){super(e,r,o,a),this.#e=s}perform(){return super.perform()?(this.#e.stow(this.unit()),this.unit().setBusy(new we(new l(()=>!1))),this.unit().setActive(!1),this.ruleRegistry().process(J,this.unit(),this),!0):!1}};t(Lm,"Embark")});var hy,zm,Oy=n(()=>{Z();hy=class extends We{#e;constructor(e){super(),this.#e=e}unit(){return this.#e}};t(hy,"UnitImprovement");zm=hy});var Ry,yr,Ta=n(()=>{de();Oy();Ry=class extends S{constructor(){super(zm)}getByUnit(e){return this.getBy("unit",e)}};t(Ry,"UnitImprovementRegistry");yr=new Ry});var xy,Eb,Fb=n(()=>{Tr();xy=class extends we{};t(xy,"Fortified");Eb=xy});var Ai,Sb,IO=n(()=>{Oy();Ai=class extends zm{};t(Ai,"Fortified");Sb=Ai});var vy,kb,Yb=n(()=>{Tr();vy=class extends we{};t(vy,"Fortifying");kb=vy});var Zs,Lb=n(()=>{I();Kt();Ta();Fb();w();fo();IO();Yb();Ft();Ii();Zs=class extends Qe{#e;constructor(e,r,o,s=d,a=ae,m=yr){super(e,r,o,s,a),this.#e=m}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{this.unit().moves().set(0),this.unit().setActive(!1),this.unit().setBusy(new Eb(new l(()=>!1))),this.#e.register(new Sb(this.unit()))},kb),this.ruleRegistry().process(J,this.unit(),this)}};t(Zs,"Fortify")});var Nm,zb=n(()=>{Ct();I();Ls();da();Ft();Nm=class extends Ys{#e;constructor(e,r,o,s=Q,a=d){super(e,r,o,a),this.#e=s}perform(){new nt(this.unit().player(),this.unit().tile(),this.#e.takeCapitalByCivilization(this.unit().player().civilization().constructor),this.ruleRegistry()),this.unit().destroy(),this.ruleRegistry().process(J,this.unit(),this)}};t(Nm,"FoundCity")});var yo,Nb=n(()=>{Ls();yo=class extends Jn{perform(){this.unit().moves().subtract(this.unit().moves())}};t(yo,"NoOrders")});var by,Ee,qr=n(()=>{de();Ul();by=class extends S{constructor(){super(cn)}getByTile(e){return this.getBy("tile",e)}};t(by,"TileImprovementRegistry");Ee=new by});var Qs,jb=n(()=>{I();qr();Kt();fo();Ft();Ii();Qs=class extends Qe{#e;constructor(e,r,o,s=d,a=Ee,m=ae){super(e,r,o,s,m),this.#e=a}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{let[r]=this.#e.getByTile(this.from());this.#e.unregister(r)}),this.ruleRegistry().process(J,this.unit(),this)}};t(Qs,"Pillage")});var $e,Cy,Py=n(()=>{sr();$e=class extends _{};t($e,"Forest");Cy=$e});var go,Wb,wO=n(()=>{wi();go=class extends _e{};t(go,"Horse");Wb=go});var Ty,Hb,_b=n(()=>{Tr();Ty=class extends we{};t(Ty,"PlantingForest");Hb=Ty});var Xs,Kb=n(()=>{I();fn();Kt();fo();Sm();Py();wO();Ft();Ii();_b();Xs=class extends Qe{#e;constructor(e,r,o,s=d,a=ft,m=ae){super(e,r,o,s,m),this.#e=a}perform(){let[e]=this.ruleRegistry().process(Te,this.unit(),this).sort((r,o)=>o-r);super.perform(e,()=>{let r=new Cy,o=this.#e.getByTerrain(this.from().terrain());this.ruleRegistry().process(Ks,Wb,r),this.#e.unregister(...o),this.from().setTerrain(r)},Hb),this.ruleRegistry().process(J,this.unit(),this)}};t(Xs,"PlantForest")});var Iy,qb,Vb=n(()=>{Tr();Iy=class extends we{};t(Iy,"Sleeping");qb=Iy});var Ia,Jb,AO=n(()=>{I();Kt();Je();w();fo();v();Vb();Ia=class extends Qe{#e;constructor(e,r,o,s=d,a=ae,m=W){super(e,r,o,s,a),this.#e=m}perform(){this.unit().setActive(!1),this.unit().moves().set(0),this.unit().setBusy(new qb(new l(()=>this.from().getSurroundingArea(this.unit().visibility().value()).some(e=>this.#e.getByTile(e).some(r=>r.player()!==this.unit().player()))),new p(()=>{this.unit().setActive(),this.unit().setBusy()})))}};t(Ia,"Sleep");Jb=Ia});var jm,$b=n(()=>{Ls();jm=class extends Ys{perform(){this.unit().setWaiting(),this.unit().cargo().forEach(e=>{e.moves().set(e.movement()),e.activate()})}};t(jm,"Unload")});var Wm=n(()=>{ib();sb();ub();db();Rb();xb();Cb();wb();Gb();Ub();Mb();Db();Lb();zb();ou();Nb();jb();Kb();AO();$b()});var St,Zb,BO=n(()=>{sr();St=class extends _{};t(St,"Arctic");Zb=St});var Ie,Qb,GO=n(()=>{sr();Ie=class extends _{};t(Ie,"Desert");Qb=Ie});var Ue,Xb,UO=n(()=>{sr();Ue=class extends _{};t(Ue,"Hills");Xb=Ue});var et,eC,MO=n(()=>{sr();et=class extends _{};t(et,"Jungle");eC=et});var je,tC,DO=n(()=>{sr();je=class extends _{};t(je,"Mountains");tC=je});var st,rC,EO=n(()=>{kh();st=class extends ar{};t(st,"Ocean");rC=st});var ie,wy,Ay=n(()=>{sr();ie=class extends _{};t(ie,"River");wy=ie});var tt,iC,FO=n(()=>{sr();tt=class extends _{};t(tt,"Swamp");iC=tt});var yt,oC,SO=n(()=>{sr();yt=class extends _{};t(yt,"Tundra");oC=yt});var ho=n(()=>{BO();GO();Py();km();UO();MO();DO();EO();nu();Ay();FO();SO()});var kt,el,Hm=n(()=>{Oa();kt=class extends Be{};t(kt,"Air");el=kt});var rt,By,Gy=n(()=>{Oa();rt=class extends Be{};t(rt,"Land");By=rt});var j,Vt=n(()=>{Gy();j=class extends By{};t(j,"Fortifiable")});var Ke,$n,Ml=n(()=>{Oa();Ke=class extends Be{};t(Ke,"Naval");$n=Ke});var Uy,My,kO=n(()=>{Uy=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}transport(){return this.#e}unit(){return this.#t}};t(Uy,"TransportManifest");My=Uy});var Dy,Zn,_m=n(()=>{de();kO();Dy=class extends S{constructor(){super(My)}getByTransport(e){return this.getBy("transport",e)}getByUnit(e){let r=this.getBy("unit",e);if(r.length!==1)throw new TypeError("Wrong number of results.");return r[0]}};t(Dy,"TransportRegistry");Zn=new Dy});var Ey,Fy,YO=n(()=>{A();Ey=class extends g{};t(Ey,"Stowed");Fy=Ey});var Sy,nC,aC=n(()=>{A();Sy=class extends g{};t(Sy,"Unloaded");nC=Sy});var AY,sC,lC=n(()=>{I();_m();YO();kO();aC();AY=t(i=>t(class extends i{#e=d;#t=Zn;canStow(r){return!this.cargo().includes(r)&&this.hasCapacity()}capacity(){return 0}cargo(){return this.#t.getByTransport(this).map(r=>r.unit())}hasCapacity(){return this.#t.getByTransport(this).length<this.capacity()}hasCargo(){return this.#t.getByTransport(this).length>0}setRuleRegistry(r){this.#e=r}setTransportRegistry(r){this.#t=r}stow(r){return!this.hasCapacity()||!this.canStow(r)?!1:(this.#t.register(new My(this,r)),this.#e.process(Fy,r,this),!0)}unload(r){try{let o=this.#t.getByUnit(r);return this.#t.unregister(o),this.#e.process(nC,r,this),!0}catch{return!1}}},"Transport"),"Transport"),sC=AY});var Jt,Qn,Dl=n(()=>{I();_m();Ml();lC();Jt=class extends sC($n){constructor(e,r,o,s=d,a=Zn){super(e,r,o,s),this.setRuleRegistry(s),this.setTransportRegistry(a)}};t(Jt,"NavalTransport");Qn=Jt});var Ir,LO=n(()=>{Gy();Ir=class extends By{};t(Ir,"Worker")});var Xn=n(()=>{Hm();Vt();Gy();Ml();Dl();LO()});var dn,mC=n(()=>{wi();dn=class extends _e{};t(dn,"Coal")});var gn,pC=n(()=>{wi();gn=class extends _e{};t(gn,"Fish")});var Bi,uC=n(()=>{wi();Bi=class extends _e{};t(Bi,"Game")});var hn,cC=n(()=>{wi();hn=class extends _e{};t(hn,"Gems")});var On,fC=n(()=>{wi();On=class extends _e{};t(On,"Gold")});var Gi,yC=n(()=>{wi();Gi=class extends _e{};t(Gi,"Oasis")});var Rn,dC=n(()=>{wi();Rn=class extends _e{};t(Rn,"Oil")});var xn,gC=n(()=>{wi();xn=class extends _e{};t(xn,"Seal")});var su=n(()=>{mC();pC();uC();cC();fC();wO();yC();dC();gC();dy()});var ky,El,zO=n(()=>{A();ky=class extends g{};t(ky,"Action");El=ky});var Yy,Ly,NO=n(()=>{A();Yy=class extends g{};t(Yy,"ActionPerformed");Ly=Yy});var zy,Km,jO=n(()=>{A();zy=class extends g{};t(zy,"Discovered");Km=zy});var Ny,jy,WO=n(()=>{Z();I();zO();NO();jO();Ny=class extends k{#e;#t;constructor(e,r=d){super(),this.#e=r,this.#t=e,this.addKey("tile")}action(e){e.perform(),this.#e.process(Ly,this,e)}actions(e){return this.#e.process(El,this,e)}process(e){this.#e.process(Km,this,e)}tile(){return this.#t}};t(Ny,"GoodyHut");jy=Ny});var Wy,Vr,tl=n(()=>{WO();de();Wy=class extends S{constructor(){super(jy)}getByTile(e){let r=this.filter(o=>o.tile()===e);return r.length===0?null:r[0]}};t(Wy,"GoodyHutRegistry");Vr=new Wy});var hC=n(()=>{Ul()});var ea=n(()=>{xO();vO();hC();bO();CO()});var Hy,OC,RC=n(()=>{Hy=class{#e;#t;#r;constructor(e,r,o){this.#e=o,this.#t=r,this.#r=e}end(){return this.#e}generate(){throw new Error(`PathFinder#generate: Must be overridden in '${this.constructor.name}'.`)}start(){return this.#t}unit(){return this.#r}};t(Hy,"PathFinder");OC=Hy});var _y,Ky,HO=n(()=>{ao();RC();_y=class extends He{constructor(){super(OC)}};t(_y,"PathFinderRegistry");Ky=new _y});var qy,Jr,rl=n(()=>{Z();qy=class extends We{};t(qy,"Government");Jr=qy});var Vy,qm,Jy=n(()=>{ao();rl();Vy=class extends He{constructor(){super(Jr)}};t(Vy,"AvailableGovernmentRegistry");qm=new Vy});var $y,lu,_O=n(()=>{A();$y=class extends g{};t($y,"Availability");lu=$y});var Zy,mu,KO=n(()=>{A();Zy=class extends g{};t(Zy,"Changed");mu=Zy});var Qy,Xy,qO=n(()=>{Jy();Z();I();_O();KO();Qy=class extends k{#e;#t=null;#r;#i;constructor(e,r=qm,o=d){super(),this.#r=e,this.#e=r,this.#i=o,this.addKey("available","current")}available(){return this.#e.filter(e=>this.#i.get(lu).some(r=>r.validate(e,this.#r)))}current(){return this.#t}is(...e){return e.some(r=>this.#t instanceof r)}player(){return this.#r}set(e){this.#t=e,this.#i.process(mu,this.#r,e)}};t(Qy,"PlayerGovernment");Xy=Qy});var ed,dt,vn=n(()=>{de();qO();ed=class extends S{constructor(){super(Xy)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError("Wrong number of PlayerGovernments for player.");return r[0]}};t(ed,"PlayerGovernmentRegistry");dt=new ed});var td,rd,VO=n(()=>{Wc();hm();td=class extends Ts{#e;#t;constructor(e,r=Wn,o=()=>Math.random()){super(e),this.#e=r,this.#t=o}chooseCivilization(e){let r=e[Math.floor(e.length*this.#t())],o=this.player(),s=new r;o.setCivilization(s),this.chooseLeader(s)}chooseLeader(e){let r=this.#e.getByCivilization(e.constructor),o=r[Math.floor(this.#t()*r.length)];e.setLeader(new o)}};t(td,"AIClient");rd=td});var xC=n(()=>{IO()});var wa,vC=n(()=>{Oy();wa=class extends zm{};t(wa,"Veteran")});var bC=n(()=>{vC()});var pu=n(()=>{xC();bC()});var Ui,CC,JO=n(()=>{M();Ui=class extends x{};t(Ui,"AdvancedFlight");CC=Ui});var Oo,PC,$O=n(()=>{M();Oo=class extends x{};t(Oo,"Alphabet");PC=Oo});var Mi,TC,ZO=n(()=>{M();Mi=class extends x{};t(Mi,"Astronomy");TC=Mi});var ta,IC,QO=n(()=>{M();ta=class extends x{};t(ta,"AtomicTheory");IC=ta});var gt,wC,XO=n(()=>{M();gt=class extends x{};t(gt,"Automobile");wC=gt});var Di,AC,eR=n(()=>{M();Di=class extends x{};t(Di,"Banking");AC=Di});var Ro,BC,tR=n(()=>{M();Ro=class extends x{};t(Ro,"BridgeBuilding");BC=Ro});var $r,GC,rR=n(()=>{M();$r=class extends x{};t($r,"BronzeWorking");GC=$r});var Ei,UC,iR=n(()=>{M();Ei=class extends x{};t(Ei,"CeremonialBurial");UC=Ei});var bn,MC,oR=n(()=>{M();bn=class extends x{};t(bn,"Chemistry");MC=bn});var xo,DC,nR=n(()=>{M();xo=class extends x{};t(xo,"Chivalry");DC=xo});var wr,EC,aR=n(()=>{M();wr=class extends x{};t(wr,"CodeOfLaws");EC=wr});var Zr,FC,sR=n(()=>{M();Zr=class extends x{};t(Zr,"Combustion");FC=Zr});var Tt,SC,lR=n(()=>{M();Tt=class extends x{};t(Tt,"Communism");SC=Tt});var Fi,kC,mR=n(()=>{M();Fi=class extends x{};t(Fi,"Computers");kC=Fi});var Qr,YC,pR=n(()=>{M();Qr=class extends x{};t(Qr,"Conscription");YC=Qr});var Xr,LC,uR=n(()=>{M();Xr=class extends x{};t(Xr,"Construction");LC=Xr});var vo,zC,cR=n(()=>{M();vo=class extends x{};t(vo,"Corporation");zC=vo});var Si,NC,fR=n(()=>{M();Si=class extends x{};t(Si,"Currency");NC=Si});var bo,jC,yR=n(()=>{M();bo=class extends x{};t(bo,"Democracy");jC=bo});var Ar,WC,dR=n(()=>{M();Ar=class extends x{};t(Ar,"Electricity");WC=Ar});var ht,HC,gR=n(()=>{M();ht=class extends x{};t(ht,"Electronics");HC=ht});var Cn,_C,hR=n(()=>{M();Cn=class extends x{};t(Cn,"Engineering");_C=Cn});var Pn,KC,OR=n(()=>{M();Pn=class extends x{};t(Pn,"Explosives");KC=Pn});var ra,qC,RR=n(()=>{M();ra=class extends x{};t(ra,"Feudalism");qC=ra});var Co,VC,xR=n(()=>{M();Co=class extends x{};t(Co,"Flight");VC=Co});var Aa,JC,vR=n(()=>{M();Aa=class extends x{};t(Aa,"FusionPower");JC=Aa});var Tn,$C,bR=n(()=>{M();Tn=class extends x{};t(Tn,"GeneticEngineering");$C=Tn});var Ot,ZC,CR=n(()=>{M();Ot=class extends x{};t(Ot,"Gunpowder");ZC=Ot});var In,QC,PR=n(()=>{M();In=class extends x{};t(In,"HorsebackRiding");QC=In});var It,XC,TR=n(()=>{M();It=class extends x{};t(It,"Industrialization");XC=It});var Br,eP,IR=n(()=>{M();Br=class extends x{};t(Br,"Invention");eP=Br});var ki,tP,wR=n(()=>{M();ki=class extends x{};t(ki,"IronWorking");tP=ki});var wn,rP,AR=n(()=>{M();wn=class extends x{};t(wn,"LaborUnion");rP=wn});var Gr,iP,BR=n(()=>{M();Gr=class extends x{};t(Gr,"Literacy");iP=Gr});var $t,oP,GR=n(()=>{M();$t=class extends x{};t($t,"Magnetism");oP=$t});var ei,nP,UR=n(()=>{M();ei=class extends x{};t(ei,"MapMaking");nP=ei});var Zt,aP,MR=n(()=>{M();Zt=class extends x{};t(Zt,"Masonry");aP=Zt});var Qt,sP,DR=n(()=>{M();Qt=class extends x{};t(Qt,"MassProduction");sP=Qt});var Ur,lP,ER=n(()=>{M();Ur=class extends x{};t(Ur,"Mathematics");lP=Ur});var Yi,mP,FR=n(()=>{M();Yi=class extends x{};t(Yi,"Medicine");mP=Yi});var ti,pP,SR=n(()=>{M();ti=class extends x{};t(ti,"Metallurgy");pP=ti});var ri,uP,kR=n(()=>{M();ri=class extends x{};t(ri,"Monarchy");uP=ri});var Xt,cP,YR=n(()=>{M();Xt=class extends x{};t(Xt,"Mysticism");cP=Xt});var dr,fP,LR=n(()=>{M();dr=class extends x{};t(dr,"Navigation");fP=dr});var ii,yP,zR=n(()=>{M();ii=class extends x{};t(ii,"NuclearFission");yP=ii});var Po,dP,NR=n(()=>{M();Po=class extends x{};t(Po,"NuclearPower");dP=Po});var oi,gP,jR=n(()=>{M();oi=class extends x{};t(oi,"Philosophy");gP=oi});var Li,hP,WR=n(()=>{M();Li=class extends x{};t(Li,"Physics");hP=Li});var An,uu,id=n(()=>{M();An=class extends x{};t(An,"Plastics");uu=An});var Bn,OP,HR=n(()=>{M();Bn=class extends x{};t(Bn,"Pottery");OP=Bn});var ni,RP,_R=n(()=>{M();ni=class extends x{};t(ni,"Railroad");RP=ni});var Gn,xP,KR=n(()=>{M();Gn=class extends x{};t(Gn,"Recycling");xP=Gn});var zi,vP,qR=n(()=>{M();zi=class extends x{};t(zi,"Refining");vP=zi});var wt,bP,VR=n(()=>{M();wt=class extends x{};t(wt,"Religion");bP=wt});var ai,Vm,od=n(()=>{M();ai=class extends x{};t(ai,"Robotics");Vm=ai});var To,CP,JR=n(()=>{M();To=class extends x{};t(To,"Rocketry");CP=To});var Io,nd,ad=n(()=>{M();Io=class extends x{};t(Io,"SpaceFlight");nd=Io});var wo,PP,$R=n(()=>{M();wo=class extends x{};t(wo,"SteamEngine");PP=wo});var Ao,TP,ZR=n(()=>{M();Ao=class extends x{};t(Ao,"Steel");TP=Ao});var Bo,IP,QR=n(()=>{M();Bo=class extends x{};t(Bo,"Superconductor");IP=Bo});var Ni,wP,XR=n(()=>{M();Ni=class extends x{};t(Ni,"TheRepublic");wP=Ni});var Un,AP,ex=n(()=>{M();Un=class extends x{};t(Un,"TheWheel");AP=Un});var Go,BP,tx=n(()=>{M();Go=class extends x{};t(Go,"TheoryOfGravity");BP=Go});var ji,GP,rx=n(()=>{M();ji=class extends x{};t(ji,"Trade");GP=ji});var gr,UP,ix=n(()=>{M();gr=class extends x{};t(gr,"University");UP=gr});var Mr,MP,ox=n(()=>{M();Mr=class extends x{};t(Mr,"Writing");MP=Mr});var hr=n(()=>{JO();$O();ZO();QO();XO();eR();tR();rR();iR();oR();nR();aR();sR();lR();mR();pR();uR();cR();fR();yR();dR();gR();hR();OR();RR();xR();vR();bR();CR();PR();TR();IR();wR();AR();BR();GR();UR();MR();DR();ER();FR();SR();kR();YR();LR();zR();NR();jR();WR();id();HR();_R();KR();qR();VR();od();JR();ad();$R();ZR();QR();XR();ex();tx();rx();ix();ox()});var Wi,DP=n(()=>{rl();Wi=class extends Jr{};t(Wi,"Anarchy")});var At,EP=n(()=>{rl();At=class extends Jr{};t(At,"Communism")});var lt,FP=n(()=>{rl();lt=class extends Jr{};t(lt,"Democracy")});var er,SP=n(()=>{rl();er=class extends Jr{};t(er,"Despotism")});var mt,kP=n(()=>{rl();mt=class extends Jr{};t(mt,"Monarchy")});var Rt,YP=n(()=>{rl();Rt=class extends Jr{};t(Rt,"Republic")});var Mn=n(()=>{DP();EP();FP();SP();kP();YP()});var si,LP=n(()=>{De();si=class extends z{};t(si,"Aqueduct")});var Or,zP=n(()=>{De();Or=class extends z{};t(Or,"Bank")});var li,NP=n(()=>{De();li=class extends z{};t(li,"Barracks")});var Rr,jP=n(()=>{De();Rr=class extends z{};t(Rr,"Cathedral")});var Uo,WP=n(()=>{De();Uo=class extends z{};t(Uo,"CityWalls")});var mi,HP=n(()=>{De();mi=class extends z{};t(mi,"Colosseum")});var Dr,_P=n(()=>{De();Dr=class extends z{};t(Dr,"Courthouse")});var tr,KP=n(()=>{De();tr=class extends z{};t(tr,"Factory")});var pi,qP=n(()=>{De();pi=class extends z{};t(pi,"Granary")});var Bt,VP=n(()=>{De();Bt=class extends z{};t(Bt,"HydroPlant")});var Er,JP=n(()=>{De();Er=class extends z{};t(Er,"Library")});var Fr,$P=n(()=>{De();Fr=class extends z{};t(Fr,"ManufacturingPlant")});var xr,ZP=n(()=>{De();xr=class extends z{};t(xr,"Marketplace")});var Mo,QP=n(()=>{De();Mo=class extends z{};t(Mo,"MassTransit")});var Gt,XP=n(()=>{De();Gt=class extends z{};t(Gt,"NuclearPlant")});var xt,eT,nx=n(()=>{De();xt=class extends z{};t(xt,"Palace");eT=xt});var Ut,tT=n(()=>{De();Ut=class extends z{};t(Ut,"PowerPlant")});var Do,rT=n(()=>{De();Do=class extends z{};t(Do,"RecyclingCenter")});var Eo,iT=n(()=>{De();Eo=class extends z{};t(Eo,"SdiDefence")});var Yt,oT=n(()=>{De();Yt=class extends z{};t(Yt,"Temple")});var Sr,nT=n(()=>{De();Sr=class extends z{};t(Sr,"University")});var Hi=n(()=>{LP();zP();NP();jP();WP();HP();_P();KP();qP();VP();JP();$P();ZP();QP();XP();nx();tT();rT();iT();oT();nT()});var sd,il,aT=n(()=>{HO();xc();sd=class extends mm{#e=1/0;end(){return this.entries()[this.length-1]}static for(e,r,o,s=Ky){let[a]=s.entries().map(m=>new m(e,r,o)).map(m=>m.generate()).sort((m,u)=>m.movementCost()-u.movementCost());return a&&(a.shift(),a)}movementCost(){return this.#e}setMovementCost(e){this.#e=e}push(...e){e.forEach(r=>{let o=this.end();if(this.length>0&&!r.isNeighbourOf(o))throw new TypeError(`Tile#push: Invalid element passed, ${r.x()},${r.y()} is not a neighbour of ${o.x()},${o.y()}.`);super.push(r)})}start(){return this.entries()[0]}};t(sd,"Path");il=sd});var Fo,sT=n(()=>{Vt();Fo=class extends j{};t(Fo,"Artillery")});var So,lT=n(()=>{Ml();So=class extends $n{};t(So,"Battleship")});var ko,mT=n(()=>{Hm();ko=class extends el{};t(ko,"Bomber")});var _i,pT=n(()=>{Vt();_i=class extends j{};t(_i,"Cannon")});var Yo,uT=n(()=>{Vt();Yo=class extends j{};t(Yo,"Caravan")});var Lo,cT=n(()=>{Hm();Dl();Lo=class extends Qn{canStow(e){return e instanceof el&&super.canStow(e)}capacity(){return 8}};t(Lo,"Carrier")});var Ki,fT=n(()=>{Vt();Ki=class extends j{};t(Ki,"Catapult")});var qi,yT=n(()=>{Vt();qi=class extends j{};t(qi,"Chariot")});var zo,dT=n(()=>{Ml();zo=class extends $n{};t(zo,"Cruiser")});var No,gT=n(()=>{Vt();No=class extends j{};t(No,"Diplomat")});var vr,hT=n(()=>{Hm();vr=class extends el{};t(vr,"Fighter")});var Vi,OT=n(()=>{Dl();Vi=class extends Qn{capacity(){return 4}};t(Vi,"Frigate")});var kr,RT=n(()=>{Vt();kr=class extends j{};t(kr,"Horseman")});var Ji,xT=n(()=>{Ml();Ji=class extends $n{};t(Ji,"Ironclad")});var $i,vT=n(()=>{Vt();$i=class extends j{};t($i,"Knight")});var jo,bT=n(()=>{Vt();jo=class extends j{};t(jo,"MechanizedInfantry")});var Zi,CT=n(()=>{Vt();Zi=class extends j{};t(Zi,"Musketman")});var Wo,PT=n(()=>{Hm();Wo=class extends el{};t(Wo,"Nuclear")});var Ho,TT=n(()=>{Vt();Ho=class extends j{};t(Ho,"Rifleman")});var Qi,IT=n(()=>{Dl();Qi=class extends Qn{capacity(){return 3}};t(Qi,"Sail")});var qe,wT,ax=n(()=>{LO();qe=class extends Ir{};t(qe,"Settlers");wT=qe});var Xi,AT=n(()=>{Vt();Xi=class extends j{};t(Xi,"Spearman")});var ui,BT=n(()=>{Ml();ui=class extends $n{};t(ui,"Submarine")});var Yr,GT=n(()=>{Vt();Yr=class extends j{};t(Yr,"Swordman")});var _o,UT=n(()=>{Vt();_o=class extends j{};t(_o,"Tank")});var Ko,MT=n(()=>{Dl();Ko=class extends Qn{capacity(){return 8}};t(Ko,"Transport")});var Lr,DT=n(()=>{Dl();Lr=class extends Qn{capacity(){return 2}};t(Lr,"Trireme")});var qo,ET=n(()=>{Vt();qo=class extends j{};t(qo,"Warrior")});var Dn=n(()=>{sT();lT();mT();pT();uT();cT();fT();yT();dT();gT();hT();OT();RT();xT();vT();bT();CT();PT();TT();IT();ax();AT();BT();GT();UT();MT();DT();ET()});var ld,md,ia,Jm=n(()=>{Pm();Wm();ga();cr();Ze();ho();q();ba();Xn();su();tl();ea();hm();HO();vn();Ye();vl();co();I();fn();qr();Ta();Je();VO();wm();Dc();df();pu();hr();Mn();Hi();aT();ac();Dn();so();Oa();Ae();Mm();ld=t((i,e,r=H)=>{let o=r.getByTile(i);return o===null?!1:o.player()===e},"hasPlayerCity"),md=class extends rd{#e=e=>{let r=this.#A.option("earth",!1),o=this.#p.getByPlayer(this.player()).length===0;if(r&&o)return!0;let s=this.#w.getByTerrain(e.terrain());return(e.terrain()instanceof Re||e.terrain()instanceof ie||e.terrain()instanceof le||s.some(a=>a instanceof Gi)||s.some(a=>a instanceof Bi))&&e.getSurroundingArea().score(this.player(),[[$,4],[V,2],[se,1]])>=160&&!e.getSurroundingArea(4).filter(a=>this.#p.getByTile(a)!==null).length};#t=e=>[Ie,le,Re,ie].some(r=>e.terrain()instanceof r)&&!this.#O.getByTile(e).some(r=>r instanceof Ge)&&e.getSurroundingArea().some(r=>ld(r,this.player(),this.#p))&&[...e.getAdjacent(),e].some(r=>r.terrain()instanceof ie||r.isCoast()||this.#O.getByTile(r).some(o=>o instanceof Ge)&&this.#p.getByTile(r)===null);#r=e=>[Ue,je].some(r=>e.terrain()instanceof r)&&!this.#O.getByTile(e).some(r=>r instanceof Xe)&&e.getSurroundingArea().some(r=>ld(r,this.player(),this.#p));#i=e=>!this.#O.getByTile(e).some(r=>r instanceof Ne)&&e.getSurroundingArea().some(r=>ld(r,this.player(),this.#p));#o=new Map;#n=new Map;#a=new Map;#s=[];#l=[];#m=[];#g=[];#f=[];#y=[];#u=[];#p;#v;#R;#b;#d;#C;#P;#T;#h;#I;#w;#O;#x;#c;#A;constructor(e,r=H,o=lr,s=he,a=Vr,m=Wn,u=Ky,f=dt,c=N,y=xi,h=me,G=d,D=ft,B=Ee,E=yr,Y=W,pe=b){super(e,m),this.#p=r,this.#v=o,this.#R=s,this.#b=a,this.#d=u,this.#C=f,this.#P=c,this.#T=y,this.#h=h,this.#I=G,this.#w=D,this.#x=E,this.#O=B,this.#c=Y,this.#A=pe}scoreUnitMove(e,r){let o=e.actions(r),{attack:s,buildIrrigation:a,buildMine:m,buildRoad:u,captureCity:f,disembark:c,embark:y,fortify:h,foundCity:G,noOrders:D}=o.reduce((ue,Ve)=>({...ue,[Ve.constructor.name.replace(/^./,gi=>gi.toLowerCase())]:Ve}),{});if(!o.length||o.length===1&&D||e instanceof j&&o.length===2&&h&&D)return-1;let B=0;this.#b.getByTile(r)!==null&&(B+=60),(G&&this.#e(r)||m&&this.#r(r)||a&&this.#t(r)||u&&this.#i(r))&&(B+=24);let Y=this.#c.getByTile(r).sort((ue,Ve)=>Ve.defence().value()-ue.defence().value()),[pe]=Y,Dt=Y.some(ue=>ue.player()===this.player());e instanceof Jt&&e.hasCapacity()&&Y.length&&Dt&&(B+=10),e instanceof Jt&&e.hasCargo()&&r.isCoast()&&r.isWater()&&(B+=16),y&&(B+=16),c&&(B+=16),f&&(B+=100),s&&e.attack()>pe.defence()&&(B+=24*(e.attack().value()-pe.defence().value())),s&&e.attack().value()>=pe.defence().value()&&(B+=16),s&&e.attack().value()>=pe.defence().value()*(2/3)&&(B+=8);let Hr=this.#h.getByPlayer(this.player()),$l=r.getNeighbours().filter(ue=>!Hr.includes(ue)).length;$l>0&&(B+=$l*3);let Zl=this.#a.get(e);return Zl instanceof ge&&r.distanceFrom(Zl)<e.tile().distanceFrom(Zl)&&(B+=14),(this.#o.get(e)||[]).includes(r)||(B*=4),B}moveUnit(e){let r=0;for(;e.active()&&e.moves().value()>=.1;){if(r++>1e3){console.log("SimpleAIClient#moveUnit: loopCheck: aborting"),console.log(`${e.player().civilization().name()} ${e.constructor.name}`),console.log(e.actions()),console.log(e.actionsForNeighbours()),e.action(new yo(e.tile(),e.tile(),e));return}let o=this.#n.get(e);if(o){let c=o.shift(),[y]=e.actions(c).filter(h=>h instanceof qt);if(y){e.action(y),o.length===0&&this.#n.delete(e);return}if(o.length>0){let h=il.for(e,e.tile(),o.end());if(h){this.#n.set(e,h);continue}}this.#n.delete(e)}let[s]=e.tile().getNeighbours().map(c=>[c,this.scoreUnitMove(e,c)]).filter(([,c])=>c>-1).sort(([,c],[,y])=>y-c||Math.floor(Math.random()*3)-1).map(([c])=>c);if(!s){e.action(new yo(e.tile(),e.tile(),e));return}let a=e.actions(s),[m]=a,u=this.#o.get(e)||[],f=this.#a.get(e);if(!m){e.action(new yo(e.tile(),e.tile(),e));return}f===s&&this.#a.delete(e),u.push(s),this.#o.set(e,u.slice(-50)),e.action(m)}e.moves().value()>0&&e.action(new yo(e.tile(),e.tile(),e))}preProcessTurn(){this.#s.splice(0),this.#l.splice(0),this.#m.splice(0),this.#g.splice(0),this.#f.splice(0),this.#y.splice(0),this.#u.splice(0);let e=this.#h.getByPlayer(this.player());e.entries().forEach(r=>{let o=r.tile(),s=this.#p.getByTile(o),a=this.#c.getBy("tile",o),m=this.#u.includes(o)&&![...this.#a.values(),...[...this.#n.values()].map(u=>u.end())].includes(o);s&&s.player()===this.player()&&!a.length&&!this.#u.includes(o)&&!m?this.#u.push(o):s&&s.player()!==this.player()&&s.originalPlayer()===this.player()?this.#s.push(o):s&&s.player()!==this.player()&&!this.#l.includes(o)?this.#l.push(o):a.length&&a.some(u=>u.player()!==this.player())&&this.#m.includes(o)?this.#m.push(o):o.isLand()&&o.getNeighbours().some(u=>!e.includes(u))&&!this.#f.includes(o)&&!m?this.#f.push(o):o.isWater()&&o.getNeighbours().some(u=>!e.includes(u))&&this.#y.includes(o)&&!m&&this.#y.push(o),this.#e(o)&&this.#g.includes(o)&&!m&&this.#g.push(o)}),this.#p.getByPlayer(this.player()).forEach(r=>{let o=this.#c.getByTile(r.tile());Ss(r,this.#h,this.#R),!o.length&&!this.#u.includes(r.tile())&&this.#u.push(r.tile())})}takeTurn(){return new Promise((e,r)=>{try{let o=0;this.preProcessTurn();let[s]=this.#C.filter(m=>m.player()===this.player()),[a]=this.#P.filter(m=>m.player()===this.player());for(a.completed(ri)&&!s.is(mt)&&s.set(new mt);this.player().hasMandatoryActions();){let m=this.player().mandatoryAction(),u=m.value();if(o++>1e3){console.log(""),console.log(""),console.log(u),u instanceof Be&&(console.log(u.actions()),u.tile().getNeighbours().forEach(f=>console.log(u.actions(f))),console.log(u.active()),console.log(u.busy()),console.log(u.moves().value()),console.log(this.#x.getByUnit(u))),u.action(new yo(u.tile(),u.tile(),u)),console.error("SimpleAIClient: Couldn't pick an action to do.");break}if(u instanceof Be){let f=u,c=f.tile(),y=this.#a.get(f),h=f.actions(),{buildIrrigation:G,buildMine:D,buildRoad:B,fortify:E,foundCity:Y,unload:pe}=h.reduce((Se,ue)=>({...Se,[ue.constructor.name.replace(/^./,Ve=>Ve.toLowerCase())]:ue}),{}),Dt=this.#c.getByTile(c);if(this.#o.get(f)||this.#o.set(f,[f.tile()]),f instanceof Jt&&pe&&c.isCoast()&&f.cargo().some(Se=>!c.getNeighbours().some(ue=>(this.#o.get(Se)||[]).includes(ue)))){f.action(pe),f.setWaiting();continue}if(f instanceof Ir){Y&&this.#e(c)?f.action(Y):G&&this.#t(c)?f.action(G):D&&this.#r(c)?f.action(D):B&&this.#i(c)?f.action(B):!y&&this.#g.length&&this.#a.set(f,this.#g.shift()),this.moveUnit(f);continue}let[$l]=Dt.filter(Se=>this.#x.getByUnit(Se).some(ue=>ue instanceof Ai)&&f.defence()>Se.defence()),Zl=this.#p.getByTile(c);if(E&&Zl&&($l||Dt.length<=Math.ceil(this.#R.getByCity(Zl).size()/5))){f.action(E),$l&&$l.activate();continue}if(!y){if(f instanceof j&&f.defence().value()>0&&this.#u.length>0){let[Se]=this.#u.sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#u.splice(this.#u.indexOf(Se),1),this.#n.set(f,ue))}else if(f.attack().value()>0&&this.#s.length>0){let[Se]=this.#s.filter(Ve=>f instanceof rt&&Ve.isLand()).sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#s.splice(this.#s.indexOf(Se),1),this.#n.set(f,ue))}else if(f.attack().value()>0&&this.#m.length>0){let[Se]=this.#m.filter(Ve=>f instanceof rt&&Ve.isLand()||f instanceof Ke&&Ve.isWater()).sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#m.splice(this.#m.indexOf(Se),1),this.#n.set(f,ue))}else if(f instanceof rt&&f.attack().value()>0&&this.#l.length>0){let[Se]=this.#l.sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#l.splice(this.#l.indexOf(Se),1),this.#n.set(f,ue))}else if(f instanceof rt&&this.#f.length>0){let[Se]=this.#f.sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#f.splice(this.#f.indexOf(Se),1),this.#n.set(f,ue))}else if(f instanceof Ke&&this.#y.length>0){let[Se]=this.#y.sort((Ve,gi)=>Ve.distanceFrom(f.tile())-gi.distanceFrom(f.tile())),ue=il.for(f,f.tile(),Se,this.#d);ue&&(this.#y.splice(this.#y.indexOf(Se),1),this.#n.set(f,ue))}}this.moveUnit(f);continue}if(u instanceof dm){this.buildItemInCity(u.city());continue}if(u instanceof im){let f=u.available();f.length&&u.research(f[Math.floor(f.length*Math.random())]);continue}if(m instanceof yf)break;console.log(`Can't process: '${u.constructor.name}'`);break}e()}catch(o){if(typeof o=="string"){r(new Error(o));return}if(o instanceof Error){r(o);return}r(new Error(`An unknown error occurred: ${o}`))}})}buildItemInCity(e){let r=e.tile(),o=this.#v.getByCity(e),s=this.#c.getByTile(r),a=o.available(),m=[xt,qe],u=a.filter(E=>!m.includes(E.item())&&!Object.prototype.isPrototypeOf.call(Oe,E.item())),f=a.filter(E=>Object.prototype.isPrototypeOf.call(Oe,E.item())),c=u.filter(E=>Object.prototype.isPrototypeOf.call(Be,E.item())),y=u[Math.floor(u.length*Math.random())].item(),h=t(E=>{let[[Y]]=c.map(pe=>{let Dt=pe.item(),Hr=new E;return this.#I.process(Ds,Dt,Hr),[Dt,Hr]}).sort(([,pe],[,Dt])=>Dt.value()-pe.value());return Y},"getUnitByYield"),G=(E=>()=>E||(E=h(bi)))(),D=(E=>()=>E||(E=h(po)))();if(this.#c.getByTile(r).length<2&&G()){o.build(G());return}let B=this.#R.getByCity(o.city());if(a.some(E=>E.item()===qe)&&!this.#c.getByCity(o.city()).some(E=>E instanceof qe)&&this.#c.getByPlayer(this.player()).filter(E=>E instanceof qe).length<3&&B.size()>1){o.build(qe);return}if(this.#s.length>0||this.#l.length>0||this.#m.length>4){o.build(D());return}if(s.filter(E=>this.#x.getByUnit(E).filter(Y=>Y instanceof Ai)).length<2||this.#u.length){o.build(G());return}if(o.city().yields().filter(E=>E instanceof V).some(E=>E.value()>4)){let E=f.map(Y=>Y.item());o.build(E[Math.floor(Math.random()*E.length)])}y&&o.build(y)}cityLost(e,r,o){if(!r)return;let s=this.#h.getByPlayer(this.player());if(o){this.#l.push(...s.entries().filter(a=>ld(a.tile(),this.player(),this.#p)).map(a=>a.tile())),this.#m.push(...s.entries().filter(a=>this.#c.getByTile(a.tile()).some(m=>m.player()===r)).map(a=>a.tile()));return}this.#s.push(e.tile())}unitDestroyed(e,r){let o=this.#p.getByTile(e.tile()),s=this.#c.getByTile(e.tile());o&&o.player()===this.player()&&s.length<2&&(this.buildItemInCity(o),this.#T.getByPlayer(this.player()).buy(o))}};t(md,"SimpleAIClient");ia=md});var pd,Vo,Fl=n(()=>{de();Wc();pd=class extends S{constructor(){super(Av)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError("Wrong number of Clients for Player.");return r[0]}};t(pd,"ClientRegistry");Vo=new pd});var Ba,Sl,$m=n(()=>{_t();Ba=class extends ce{};t(Ba,"American");Sl=Ba});var BY={};var FT=n(()=>{$m();pr();ur();Object.entries({people:"American",nation:"America",colors:["#0055A4","#FFF"]}).forEach(([i,e])=>be.register(new ve(Sl,i,e)))});var GY={};var ST=n(()=>{$m();Ht();Ct();["Washington","New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","Fort Worth","Columbus","San Francisco","Charlotte","Indianapolis","Seattle","Denver","Boston","El Paso","Detroit","Nashville","Portland","Memphis","Oklahoma City","Las Vegas","Louisville","Baltimore","Milwaukee","Albuquerque","Tucson","Fresno","Mesa","Sacramento","Atlanta","Kansas City","Colorado Springs","Miami","Raleigh","Omaha","Long Beach","Virginia Beach","Oakland","Minneapolis","Tulsa","Arlington","Tampa","New Orleans","Wichita","Cleveland","Bakersfield","Aurora","Anaheim","Honolulu","Santa Ana","Riverside","Corpus Christi","Lexington","Stockton","Henderson","Saint Paul","St. Louis","Cincinnati","Pittsburgh","Greensboro","Anchorage","Plano","Lincoln","Orlando","Irvine","Newark","Toledo","Durham","Chula Vista","Fort Wayne","Jersey City","St. Petersburg","Laredo","Madison","Chandler","Buffalo","Lubbock","Scottsdale","Reno","Glendale","Gilbert","Winston\u2013Salem","North Las Vegas","Norfolk","Chesapeake","Garland","Irving","Hialeah","Fremont","Boise","Richmond","Baton Rouge","Spokane","Des Moines","Tacoma","San Bernardino","Modesto","Fontana","Santa Clarita","Birmingham","Oxnard","Fayetteville","Moreno Valley","Rochester","Glendale","Huntington Beach","Salt Lake City","Grand Rapids","Amarillo","Yonkers","Aurora","Montgomery","Akron","Little Rock","Huntsville","Augusta","Port St. Lucie","Grand Prairie","Columbus","Tallahassee","Overland Park","Tempe","McKinney","Mobile","Cape Coral","Shreveport","Frisco","Knoxville","Worcester","Brownsville","Vancouver","Fort Lauderdale","Sioux Falls","Ontario","Chattanooga","Providence","Newport News","Rancho Cucamonga","Santa Rosa","Oceanside","Salem","Elk Grove","Garden Grove","Pembroke Pines","Peoria","Eugene","Corona","Cary","Springfield","Fort Collins","Jackson","Alexandria","Hayward","Lancaster","Lakewood","Clarksville","Palmdale","Salinas","Springfield","Hollywood","Pasadena","Sunnyvale","Macon","Kansas City","Pomona","Escondido","Killeen","Naperville","Joliet","Bellevue","Rockford","Savannah","Paterson","Torrance","Bridgeport","McAllen","Mesquite","Syracuse","Midland","Pasadena","Murfreesboro","Miramar","Dayton","Fullerton","Olathe","Orange","Thornton","Roseville","Denton","Waco","Surprise","Carrollton","West Valley City","Charleston","Warren","Hampton","Gainesville","Visalia","Coral Springs","Columbia","Cedar Rapids","Sterling Heights","New Haven","Stamford","Concord","Kent","Santa Clara","Elizabeth","Round Rock","Thousand Oaks","Lafayette","Athens","Topeka","Simi Valley","Fargo","Norman","Columbia","Abilene","Wilmington","Hartford","Victorville","Pearland","Vallejo","Ann Arbor","Berkeley","Allentown","Richardson","Odessa","Arvada","Cambridge","Sugar Land","Beaumont","Lansing","Evansville","Rochester","Independence","Fairfield","Provo","Clearwater","College Station","West Jordan","Carlsbad","El Monte","Murrieta","Temecula","Springfield","Palm Bay","Costa Mesa","Westminster","North Charleston","Miami Gardens","Manchester","High Point","Downey","Clovis","Pompano Beach","Pueblo","Elgin","Lowell","Antioch","West Palm Beach","Peoria","Everett","Ventura","Centennial","Lakeland","Gresham","Richmond","Billings","Inglewood","Broken Arrow","Sandy Springs","Jurupa Valley","Hillsboro","Waterbury","Santa Maria","Boulder","Greeley","Daly City","Meridian","Lewisville","Davie","West Covina","League City","Tyler","Norwalk","San Mateo","Green Bay","Wichita Falls","Sparks","Lakewood","Burbank","Rialto","Allen","El Cajon","Las Cruces","Renton","Davenport","South Bend","Vista","Tuscaloosa","Clinton","Edison","Woodbridge","San Angelo","Kenosha","Vacaville"].forEach((i,e)=>Q.register(new te(i,Sl,e===0)))});var YT=P(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});FT();ST()});var Ga,Zm,cu=n(()=>{_t();Ga=class extends ce{};t(Ga,"Aztec");Zm=Ga});var UY={};var LT=n(()=>{cu();pr();ur();Object.entries({people:"Aztec",nation:"Aztec",colors:["#A1DAB5","#EA6B76"]}).forEach(([i,e])=>be.register(new ve(Zm,i,e)))});var MY={};var zT=n(()=>{cu();Ht();Ct();["Tenochtitlan","Teotihuacan","Tlatelolco","Texcoco","Tlaxcala","Calixtlahuaca","Xochicalco","Tlacopan","Atzcapotzalco","Tzintzuntzan","Malinalco","Tula","Tamuin","Teayo","Cempoala","Chalco","Tlalmanalco","Ixtapaluca","Huexotla","Tepexpan","Tepetlaoxtoc","Chiconautla","Zitlaltepec","Coyotepec","Tequixquiac","Jilotzingo","Tlapanaloya","Tultitan","Ecatepec","Coatepec","Chalchiuites","Chiauhita","Chapultepec","Itzapalapa","Ayotzinco","Iztapam"].forEach((i,e)=>Q.register(new te(i,Zm,e===0)))});var jT=P(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});LT();zT()});var Ua,Qm,fu=n(()=>{_t();Ua=class extends ce{};t(Ua,"Babylonian");Qm=Ua});var DY={};var WT=n(()=>{fu();pr();ur();Object.entries({people:"Babylonian",nation:"Babylon",colors:["#D0B8A6","#2f7b00"]}).forEach(([i,e])=>be.register(new ve(Qm,i,e)))});var EY={};var HT=n(()=>{fu();Ht();Ct();["Babilim","Eshnunna","Diniktum","Tutub","Der","Sippar","Kutha","Jemdet Nasr","Kish","Borsippa","Mashkan-shapir","Dilbat","Nippur","Marad","Adab","Isin","Kisurra","Shuruppak","Bad-tibira","Zabalam","Umma","Girsu","Lagash","Urum","Uruk","Larsa","Ur","Kuara","Eridu","Akshak","Akkad"].forEach((i,e)=>Q.register(new te(i,Qm,e===0)))});var KT=P(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});WT();HT()});var Ma,Xm,yu=n(()=>{_t();Ma=class extends ce{};t(Ma,"Chinese");Xm=Ma});var FY={};var qT=n(()=>{yu();pr();ur();Object.entries({people:"Chinese",nation:"China",colors:["#ee1c25","#ff0"]}).forEach(([i,e])=>be.register(new ve(Xm,i,e)))});var SY={};var VT=n(()=>{yu();Ht();Ct();["Beijing","Shanghai","Chongqing","Tianjin","Guangzhou","Shenzhen\u2020","Chengdu","Nanjing","Wuhan","Xi'an","Hangzhou","Dongguan","Foshan","Shenyang","Harbin","Qingdao","Dalian","Jinan","Zhengzhou","Changsha","Kunming","Changchun","\xDCr\xFCmqi","Shantou","Hefei","Shijiazhuang","Ningbo","Taiyuan","Nanning","Xiamen\u2020","Fuzhou","Changzhou","Wenzhou","Nanchang","Tangshan","Guiyang","Wuxi","Lanzhou","Zhongshan","Handan","Huai'an","Weifang","Zibo","Shaoxing","Yantai","Huizhou","Luoyang","Nantong","Baotou","Liuzhou"].forEach((i,e)=>Q.register(new te(i,Xm,e===0)))});var $T=P(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});qT();VT()});var Da,ep,du=n(()=>{_t();Da=class extends ce{};t(Da,"Egyptian");ep=Da});var kY={};var ZT=n(()=>{du();pr();ur();Object.entries({people:"Egyptian",nation:"Egypt",colors:["#CE1126","#FFF"]}).forEach(([i,e])=>be.register(new ve(ep,i,e)))});var YY={};var QT=n(()=>{du();Ht();Ct();["Cairo","Alexandria","Gizeh","Shubra El-Kheima","Port Said","Suez","Luxor","al-Mansura","El-Mahalla El-Kubra","Tanta","Asyut","Ismailia","Fayyum","Zagazig","Aswan","Damietta","Damanhur","al-Minya","Beni Suef","Qena","Sohag","Hurghada","6th of October City","Shibin El Kom","Banha","Kafr el-Sheikh","Arish","Mallawi","10th of Ramadan City","Bilbais","Marsa Matruh","Idfu","Mit Ghamr","Al-Hamidiyya","Desouk","Qalyub","Abu Kabir","Kafr el-Dawwar","Girga","Akhmim","Matarey"].forEach((i,e)=>Q.register(new te(i,ep,e===0)))});var eI=P(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});ZT();QT()});var Ea,kl,tp=n(()=>{_t();Ea=class extends ce{};t(Ea,"English");kl=Ea});var LY={};var tI=n(()=>{tp();pr();ur();Object.entries({people:"English",nation:"England",colors:["#FFF","#C8102E"]}).forEach(([i,e])=>be.register(new ve(kl,i,e)))});var zY={};var rI=n(()=>{tp();Ht();Ct();["London","Birmingham","Liverpool","Leeds","Sheffield","Bristol","Manchester","Leicester","Coventry","Kingston upon Hull","Stoke-on-Trent","Wolverhampton","Nottingham","Plymouth","Southampton","Reading","Derby","Dudley","Newcastle upon Tyne","Northampton","Portsmouth","Luton","Preston","Sunderland","Norwich","Walsall","Bournemouth","Southend-on-Sea","Swindon","Huddersfield","Poole","Oxford","Middlesbrough","Blackpool","Oldbury","Boldon","Ipswich","York","West Bromwich","Peterborough","Stockport","Brighton","Slough","Gloucester","Rotherham","Cambridge","Exeter","Eastbourne","Sutton Coldfield","Blackburn","Colchester","Oldham","St Helens","Woking","Chesterfield","Crawley"].forEach((i,e)=>Q.register(new te(i,kl,e===0)))});var oI=P(iI=>{"use strict";Object.defineProperty(iI,"__esModule",{value:!0});tI();rI()});var Fa,rp,gu=n(()=>{_t();Fa=class extends ce{};t(Fa,"French");rp=Fa});var NY={};var nI=n(()=>{gu();pr();ur();Object.entries({people:"French",nation:"France",colors:["#FFF","#0055A4"]}).forEach(([i,e])=>be.register(new ve(rp,i,e)))});var jY={};var aI=n(()=>{gu();Ht();Ct();["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-\xC9tienne","Toulon","Grenoble","Dijon","N\xEEmes","Angers","Villeurbanne","Le Mans","Saint-Denis","Aix-en-Provence","Clermont-Ferrand","Brest","Limoges","Tours","Amiens","Perpignan","Metz","Besan\xE7on","Boulogne-Billancourt","Orl\xE9ans","Mulhouse","Rouen","Saint-Denis","Caen","Argenteuil","Saint-Paul","Montreuil","Nancy","Roubaix","Tourcoing","Nanterre","Avignon","Vitry-sur-Seine","Cr\xE9teil","Dunkirk","Poitiers","Asni\xE8res-sur-Seine","Courbevoie","Versailles","Colombes","Fort-de-France","Aulnay-sous-Bois","Saint-Pierre","Rueil-Malmaison","Pau","Aubervilliers","Le Tampon","Champigny-sur-Marne","Antibes","B\xE9ziers","La Rochelle","Saint-Maur-des-Foss\xE9s","Cannes","Calais","Saint-Nazaire","M\xE9rignac","Drancy","Colmar","Ajaccio","Bourges","Issy-les-Moulineaux","Levallois-Perret","La Seyne-sur-Mer","Quimper","Noisy-le-Grand","Villeneuve-d'Ascq","Neuilly-sur-Seine","Valence","Antony","Cergy","V\xE9nissieux","Pessac","Troyes","Clichy","Ivry-sur-Seine","Chamb\xE9ry","Lorient","Les Abymes","Montauban","Sarcelles","Niort","Villejuif","Saint-Andr\xE9","Hy\xE8res","Saint-Quentin","Beauvais","\xC9pinay-sur-Seine","Cayenne","Maisons-Alfort","Cholet","Meaux","Chelles","Pantin","\xC9vry","Fontenay-sous-Bois","Fr\xE9jus","Vannes","Bondy","Le Blanc-Mesnil","La Roche-sur-Yon","Saint-Louis","Arles","Clamart","Narbonne","Annecy","Sartrouville","Grasse","Laval","Belfort","Bobigny","\xC9vreux","Vincennes","Montrouge","Sevran","Albi","Charleville-M\xE9zi\xE8res","Suresnes","Martigues","Corbeil-Essonnes","Saint-Ouen","Bayonne","Cagnes-sur-Mer","Brive-la-Gaillarde","Carcassonne","Massy","Blois","Aubagne","Saint-Brieuc","Ch\xE2teauroux","Chalon-sur-Sa\xF4ne","Mantes-la-Jolie","Meudon","Saint-Malo","Ch\xE2lons-en-Champagne","Alfortville","S\xE8te","Salon-de-Provence","Vaulx-en-Velin","Puteaux","Rosny-sous-Bois","Saint-Herblain","Gennevilliers","Le Cannet","Livry-Gargan","Saint-Priest","Istres","Valenciennes","Choisy-le-Roi","Caluire-et-Cuire","Boulogne-sur-Mer","Bastia","Angoul\xEAme","Garges-l\xE8s-Gonesse","Castres","Thionville","Wattrelos","Talence","Saint-Laurent-du-Maroni","Douai","Noisy-le-Sec","Tarbes","Arras","Al\xE8s","La Courneuve","Bourg-en-Bresse","Compi\xE8gne","Gap","Melun","Le Lamentin","Rez\xE9","Saint-Germain-en-Laye","Marcq-en-Bar\u0153ul","Gagny","Anglet","Draguignan","Chartres","Bron","Bagneux","Colomiers","Saint-Martin-d'H\xE8res","Pontault-Combault","Montlu\xE7on","Jou\xE9-l\xE8s-Tours","Saint-Joseph","Poissy","Savigny-sur-Orge","Cherbourg-Octeville","Mont\xE9limar","Villefranche-sur-Sa\xF4ne","Stains","Saint-Beno\xEEt","Bagnolet","Ch\xE2tillon","Le Port","Sainte-Genevi\xE8ve-des-Bois","\xC9chirolles","Roanne","Villepinte","Saint-Chamond","Conflans-Sainte-Honorine","Auxerre","Nevers","Neuilly-sur-Marne","La Ciotat","Tremblay-en-France","Thonon-les-Bains","Vitrolles","Haguenau","Six-Fours-les-Plages","Agen","Creil","Annemasse","Saint-Rapha\xEBl","Marignane","Romans-sur-Is\xE8re","Montigny-le-Bretonneux","Le Perreux-sur-Marne","Franconville","M\xE2con","Saint-Leu","Cambrai","Ch\xE2tenay-Malabry","Sainte-Marie","Villeneuve-Saint-Georges","Houilles","\xC9pinal","Lens","Li\xE9vin","Les Mureaux","Schiltigheim","La Possession","Meyzieu","Dreux","Nogent-sur-Marne","Plaisir","Mont-de-Marsan","Palaiseau","Ch\xE2tellerault","Goussainville","L'Ha\xFF-les-Roses","Viry-Ch\xE2tillon","Vigneux-sur-Seine","Chatou","Trappes","Clichy-sous-Bois","Rillieux-la-Pape","Villenave-'Ornon","Maubeuge","Charenton-le-Pont","Malakoff","Matoury","Dieppe","Athis-Mons","Savigny-le-Temple","P\xE9rigueux","Baie-Mahault","Vandoeuvre-l\xE8s-Nancy","Pontoise","Aix-les-Bains","Cachan","Vienne","Thiais","Orange","Saint-M\xE9dard-en-Jalles","Villemomble","Saint-Cloud","Saint-Laurent-du-Var","Yerres","Saint-\xC9tienne-du-Rouvray","Sotteville-l\xE8s-Rouen","Draveil","Le Chesnay","Bois-Colombes","Le Plessis-Robinson","La Garenne-Colombes","Lambersart","Soissons","Pierrefitte-sur-Seine","Carpentras","Villiers-sur-Marne","Vanves","Menton","Bergerac","Ermont","Bezons","Grigny","Guyancourt","Saumur","Herblay","Ris-Orangis","Villiers-le-Bel","Bourgoin-Jallieu","Vierzon","Le Gosier","D\xE9cines-Charpieu","H\xE9nin-Beaumont","Fresnes","Aurillac","Sannois","Vallauris","Illkirch-Graffenstaden","Alen\xE7on","\xC9lancourt","Tournefeuille","B\xE8gles","Gonesse","Oullins","Brunoy","Taverny","Armenti\xE8res","Montfermeil","Rambouillet","Villeparisis","Le Kremlin-Bic\xEAtre","Sucy-en-Brie","Kourou","Montb\xE9liard","Romainville","Cavaillon","Saint-Dizier","Br\xE9tigny-sur-Orge","Saint-S\xE9bastien-sur-Loire","Saintes","La Teste-de-Buch","Villeneuve-la-Garenne","B\xE9thune","Bussy-Saint-Georges","Vichy","La Garde","Agde","Laon","Sens","Lunel","Miramas","Biarritz","Le Grand-Quevilly","Orvault","Les Ulis","Champs-sur-Marne","Rochefort","Muret","Sainte-Anne","Eaubonne","\xC9tampes","Gradignan","Vernon","Petit-Bourg","Libourne","Abbeville","Rodez","Saint-Ouen-l'Aum\xF4ne","Torcy","Maisons-Laffitte","Montgeron","Villeneuve-sur-Lot","Cormeilles-en-Parisis","\xC9pernay","S\xE8vres","Dole","Le Robert","Le Bouscat","Blagnac","Frontignan","Cenon","Mandelieu-la-Napoule","Vertou","Les Lilas","Bruay-la-Buissi\xE8re","Les Pavillons-sous-Bois","Chaumont","Roissy-en-Brie","Le Moule","Le Petit-Quevilly","Manosque","Saint-Mand\xE9","Fontenay-aux-Roses","Orly","Le Creusot","Oyonnax","La Madeleine","Sainte-Suzanne","Millau","Combs-la-Ville","Fontaine","Deuil-la-Barre","Coudekerque-Branche","Auch","Lanester","Beaune","Montigny-l\xE8s-Metz","Hazebrouck","Longjumeau","Sainte-Foy-l\xE8s-Lyon","Forbach","Sarreguemines","Mons-en-Bar\u0153ul","La Valette-du-Var","H\xE9rouville-Saint-Clair","Morsang-sur-Orge","Grande-Synthe","La Celle-Saint-Cloud","Lisieux","Croix","Dammarie-les-Lys","V\xE9lizy-Villacoublay","Wasquehal","Saint-Gratien","Halluin","Neuilly-Plaisance","Montmorency","Dax","Lagny-sur-Marne","Le M\xE9e-sur-Seine","Saint-Genis-Laval","Fleury-les-Aubrais","Loos","Gif-sur-Yvette","Denain","Saint-Di\xE9-des-Vosges","Sainte-Rose","Saint-Michel-sur-Orge"].forEach((i,e)=>Q.register(new te(i,rp,e===0)))});var lI=P(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});nI();aI()});var Sa,Yl,ip=n(()=>{_t();Sa=class extends ce{};t(Sa,"German");Yl=Sa});var WY={};var mI=n(()=>{ip();pr();ur();Object.entries({people:"German",nation:"Germany",colors:["#000","#FC0"]}).forEach(([i,e])=>be.register(new ve(Yl,i,e)))});var HY={};var pI=n(()=>{ip();Ht();Ct();["Berlin","Hamburg","Munich","Cologne","Frankfurt","Stuttgart","D\xFCsseldorf","Dortmund","Essen","Leipzig","Bremen","Dresden","Hanover","Nuremberg","Duisburg","Bochum","Wuppertal","Bielefeld","Bonn","M\xFCnster","Karlsruhe","Mannheim","Augsburg","Wiesbaden","Gelsenkirchen","M\xF6nchengladbach","Braunschweig","Chemnitz","Kiel","Aachen","Halle","Magdeburg","Freiburg","Krefeld","L\xFCbeck","Oberhausen","Erfurt","Mainz","Rostock","Kassel","Hagen","Hamm","Saarbr\xFCcken","M\xFClheim an der Ruhr","Potsdam","Ludwigshafen am Rhein","Oldenburg","Leverkusen","Osnabr\xFCck","Solingen"].forEach((i,e)=>Q.register(new te(i,Yl,e===0)))});var cI=P(uI=>{"use strict";Object.defineProperty(uI,"__esModule",{value:!0});mI();pI()});var ka,op,hu=n(()=>{_t();ka=class extends ce{};t(ka,"Greek");op=ka});var _Y={};var fI=n(()=>{hu();pr();ur();Object.entries({people:"Greek",nation:"Greece",colors:["#2175D8","#FFF"]}).forEach(([i,e])=>be.register(new ve(op,i,e)))});var KY={};var yI=n(()=>{hu();Ht();Ct();["Athens","Thessaloniki","Patras","Piraeus","Larissa","Heraklion","Peristeri","Kallithea","Acharnes","Kalamaria","Nikaia","Glyfada","Volos","Ilio","Ilioupoli","Keratsini","Evosmos","Chalandri","Nea Smyrni","Marousi","Agios Dimitrios","Zografou","Egaleo","Nea Ionia","Ioannina","Palaio Faliro","Korydallos","Trikala","Vyronas","Agia Paraskevi","Galatsi","Agrinio","Chalcis","Petroupoli","Serres","Alexandroupoli","Xanthi","Katerini","Kalamata","Kavala","Chania","Lamia","Komotini","Irakleio","Rhodes","Kifissia","Stavroupoli","Chaidari","Drama","Veria","Alimos","Kozani","Polichni","Karditsa","Sykies","Ampelokipoi","Pylaia","Agioi Anargyroi","Argyroupoli","Ano Liosia","Nea Ionia","Rethymno","Ptolemaida","Tripoli","Cholargos","Vrilissia","Aspropyrgos","Corinth","Gerakas","Metamorfosi","Giannitsa","Voula","Kamatero","Mytilene","Neapoli","Eleftherio-Kordelio","Chios","Agia Varvara","Kaisariani","Nea Filadelfeia","Moschato","Perama","Salamina","Eleusis","Corfu","Pyrgos","Megara","Kilkis","Dafni","Thebes","Melissia","Argos","Arta","Artemida","Livadeia","Pefki","Oraiokastro","Aigio","Kos","Koropi","Preveza","Naousa","Orestiada","Peraia","Edessa","Florina","Panorama","Nea Erythraia1","Elliniko1","Amaliada","Pallini","Sparta","Agios Ioannis Rentis","Thermi","Vari","Nea Makri","Tavros","Alexandreia","Menemeni","Paiania","Kalyvia Thorikou","Nafplio","Drapetsona","Efkarpia","Papagou","Nafpaktos","Kastoria","Grevena","Pefka","Nea Alikarnassos","Missolonghi","Gazi","Ierapetra","Kalymnos","Rafina","Loutraki","Agios Nikolaos","Ermoupoli","Ialysos","Mandra","Tyrnavos","Glyka Nera","Ymittos","Neo Psychiko"].forEach((i,e)=>Q.register(new te(i,op,e===0)))});var gI=P(dI=>{"use strict";Object.defineProperty(dI,"__esModule",{value:!0});fI();yI()});var Ya,np,Ou=n(()=>{_t();Ya=class extends ce{};t(Ya,"Indian");np=Ya});var qY={};var hI=n(()=>{Ou();pr();ur();Object.entries({people:"Indian",nation:"India",colors:["#138808","#FF9933"]}).forEach(([i,e])=>be.register(new ve(np,i,e)))});var VY={};var OI=n(()=>{Ou();Ht();Ct();["Delhi","Mumbai","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivli","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Howrah","Ranchi","Gwalior","Jabalpur","Coimbatore","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Chandigarh","Guwahati","Solapur","Hubli\u2013Dharwad","Tiruchirappalli","Bareilly","Moradabad","Mysore","Tiruppur","Gurgaon","Aligarh","Jalandhar","Bhubaneswar","Salem","Mira-Bhayandar","Warangal","Jalgaon","Guntur","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Akola","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj & Kupwad","Mangalore","Erode","Belgaum","Ambattur","Tirunelveli","Malegaon","Gaya","Thiruvananthapuram","Udaipur","Maheshtala","Davanagere","Kozhikode","Kurnool","Rajpur Sonarpur","Rajahmundry","Bokaro","South Dumdum","Bellary","Patiala","Gopalpur","Agartala","Bhagalpur","Muzaffarnagar","Bhatpara","Panihati","Latur","Dhule","Tirupati","Rohtak","Korba","Bhilwara","Berhampur","Muzaffarpur","Ahmednagar","Mathura","Kollam","Avadi","Kadapa","Kamarhati","Sambalpur","Bilaspur","Shahjahanpur","Satara","Bijapur","Kakinada","Rampur","Shimoga","Chandrapur","Junagadh","Thrissur","Alwar","Bardhaman","Kulti","Nizamabad","Parbhani","Tumkur","Khammam","Ozhukarai","Bihar Sharif","Panipat","Darbhanga","Bally","Aizawl","Dewas","Ichalkaranji","Karnal","Bathinda","Jalna","Eluru","Barasat","Kirari Suleman Nagar","Purnia","Satna","Mau","Sonipat","Farrukhabad","Sagar","Durg","Imphal","Ratlam","Hapur","Arrah","Anantapur","Karimnagar","Etawah","Ambarnath","North Dumdum","Bharatpur","Begusarai","New Delhi","Gandhidham","Baranagar","Tiruvottiyur","Pondicherry","Sikar","Thoothukudi","Rewa","Mirzapur","Raichur","Pali","Ramagundam","Haridwar","Vijayanagaram","Katihar","Nagercoil","Sri Ganganagar","Karawal Nagar","Mango","Thanjavur","Bulandshahr","Uluberia","Katni","Sambhal","Singrauli","Nadiad","Secunderabad","Naihati","Yamunanagar","Bidhannagar","Pallavaram","Bidar","Munger","Panchkula","Burhanpur","Raurkela Industrial Township","Kharagpur","Dindigul","Gandhinagar","Hospet","Nangloi Jat","Malda","Ongole","Deoghar","Chapra","Haldia","Khandwa","Nandyal","Morena","Amroha","Anand","Bhind","Bhalswa Jahangir Pur","Madhyamgram","Bhiwani","Berhampore","Ambala","Morbi","Fatehpur","Raebareli","Mahaboobnagar","Chittoor","Bhusawal","Orai","Bahraich","Vellore","Mehsana","Raiganj","Sirsa","Danapur","Serampore","Sultan Pur Majra","Guna","Jaunpur","Panvel","Shivpuri","Surendranagar Dudhrej","Unnao","Chinsurah","Alappuzha","Kottayam","Machilipatnam","Shimla","Adoni","Udupi","Tenali","Proddatur","Saharsa","Hindupur","Sasaram","Hajipur","Bhimavaram","Kumbakonam","Dehri","Madanapalle","Siwan","Bettiah","Guntakal","Srikakulam","Motihari","Dharmavaram","Gudivada","Phagwara","Narasaraopet","Suryapet","Miryalaguda","Tadipatri","Karaikudi","Kishanganj","Jamalpur","Ballia","Kavali","Tadepalligudem","Amaravati","Buxar","Jehanabad","Aurangabad","Gangtok"].forEach((i,e)=>Q.register(new te(i,np,e===0)))});var xI=P(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});hI();OI()});var La,ap,Ru=n(()=>{_t();La=class extends ce{};t(La,"Mongol");ap=La});var JY={};var vI=n(()=>{Ru();pr();ur();Object.entries({people:"Mongol",nation:"Mongolia",colors:["#DA2032","#0066B3"]}).forEach(([i,e])=>be.register(new ve(ap,i,e)))});var $Y={};var bI=n(()=>{Ru();Ht();Ct();["Ulaanbaatar","Erdenet","Darkhan","Choibalsan","M\xF6r\xF6n","Nalaikh","Bayankhongor","\xD6lgii","Khovd","Arvaikheer","Ulaangom","Baganuur","Sainshand","Tsetserleg","S\xFCkhbaatar","\xD6nd\xF6rkhaan","Dalanzadgad","Z\xFC\xFCnkharaa","Uliastai","Altai","Baruun-Urt","Mandalgovi","Zuunmod","Zamyn-\xDC\xFCd","Bulgan","Kharkhorin","Choir","Bor-\xD6nd\xF6r","Sharyngo"].forEach((i,e)=>Q.register(new te(i,ap,e===0)))});var PI=P(CI=>{"use strict";Object.defineProperty(CI,"__esModule",{value:!0});vI();bI()});var za,sp,xu=n(()=>{_t();za=class extends ce{};t(za,"Roman");sp=za});var ZY={};var TI=n(()=>{xu();pr();ur();Object.entries({people:"Roman",nation:"Rome",colors:["#A20101","#D1B24F"]}).forEach(([i,e])=>be.register(new ve(sp,i,e)))});var QY={};var II=n(()=>{xu();Ht();Ct();["Roma","Ariminum","Belum","Placentia","Tarraco","Italica","Mod","Salernum","Bononia","Forum Livii","Regium Lepidi","Aquileia","Ascrivium","Valentia Edetanorum","Scalabis","Villa Euracini","Palma","Colonia Narbo Martius","Massa","Pistoria","Segovia","Gerunda","Pompaelo","Naissus","Brigantium","Florentia","Vesontio","Lutetia Parisiorum","Atuatuca Tungrorum","Iulia Romula Hispalis","Augusta Raurica","Noviodunum","Lugdunum","Siscia","Marsonia","Augusta Treverorum","Castra Legionis","Augusta Taurinorum","Augusta Praetoria Salassorum","Emerita Augusta","Norba Caesarina","Lucus Augusta","Caesarea","Bracara Augusta","Novaesium","Castra Vetera","Pons Drusi","Ovilava","Iuvavum","Augusta Vindelicorum","Turicum","Asturica Augusta","Borbetomagus","Caesaraugusta","Sirmium","Sorviodurum","Mogontiacum","Argentoratum","Bonna","Noviomagus","Castellum apud Confluentes","Divodurum","Caesaromagus","Ambianum","Faventia Paterna Barcino","Abila","Lousonna","Ulpia Noviomagus Batavorum","Rigomagus","Aquae Mattiacorum","Mursa","Emona","Vindonissa","Aventicum","Praetorium Agrippinae","Lugdunum Batavorum","Aequum","Londinium","Albanianis","Lauri","Durovernum Cantiacorum","Regulbium","Rutupiae","Viminacium","Camulodunum","Traiectum","Matilo","Forum Hadriani","Nigrum Pullum","Lindum Colonia","Ratae Corieltauvorum","Durocobrivis","Colonia Agrippina","Durocornovium","Verulamium","Letocetum","Dubris","Danum","Mediolanum","Isca Dumnoniorum","Blestium","Viroconium Cornoviorum","Aquae Sulis","Durnovaria","Lindinis","Ad Flexum","Clausentum","Venta Belgarum","Calleva Atrebatum","Duroliponte","Concangis","Condate","Corinium Dobunnorum","Eboracum","Luguvalium","Arae Flaviae","Isca Augusta","Lagentium","Lopodunum","Moridunum","Venta Silurum","Deva Victrix","Mamucium","Olicana","Vinovia","Bonames","Coria","Gerulata","Vindobona","Biriciana","Cannstatt Castrum","Colonia Nervia Glevensium","Sumelocenna","Lopodunum","Traiectum ad Nicrem","Castra Batavar","Nida","Lactodurum","Bovium","Burgodunum","Lentia","Aquae Granni","Complutum","Aeminium","Traiectum ad Mosam","Coriovallum","Portus Lemanis","Andautonia","Salona","Cibalae","Aquae Helveticae","Aquincum","Apulum","Pons Aelius","Durovigutum","Aelia Capitolina","Ala","Castra Regina","Theranda","Pomaria","Partiscum","Gesoriacum","Aurelia Aquensis","Urbs Aurelianorum","Venetiae","Ragusium"].forEach((i,e)=>Q.register(new te(i,sp,e===0)))});var AI=P(wI=>{"use strict";Object.defineProperty(wI,"__esModule",{value:!0});TI();II()});var Na,Ll,lp=n(()=>{_t();Na=class extends ce{};t(Na,"Russian");Ll=Na});var XY={};var BI=n(()=>{lp();pr();ur();Object.entries({people:"Russian",nation:"Russia",colors:["#0032A0","#DA291C"]}).forEach(([i,e])=>be.register(new ve(Ll,i,e)))});var eL={};var GI=n(()=>{lp();Ht();Ct();["Moscow","Saint Petersburg","Novosibirsk","Yekaterinburg","Nizhny Novgorod","Kazan","Chelyabinsk","Omsk","Samara","Ufa","Rostov-on-Don","Krasnoyarsk","Voronezh","Perm","Volgograd","Krasnodar","Saratov","Tyumen","Makhachkala","Tolyatti","Barnaul","Ulyanovsk","Izhevsk","Vladivostok","Irkutsk","Khabarovsk","Yaroslavl","Tomsk","Orenburg","Kemerovo","Novokuznetsk","Tula","Ryazan","Kirov","Astrakhan","Naberezhnye Chelny","Sochi","Penza","Lipetsk","Cheboksary","Balashikha","Kaliningrad","Kursk","Stavropol","Ulan-Ude","Bryansk","Tver","Magnitogorsk","Ivanovo","Belgorod","Surgut","Vladimir","Arkhangelsk","Nizhny Tagil","Kaluga","Chita","Saransk","Yakutsk","Smolensk","Podolsk","Volzhsky","Vladikavkaz","Vologda","Cherepovets","Kurgan","Oryol","Grozny","Murmansk","Tambov","Petrozavodsk","Sterlitamak","Kostroma","Nizhnevartovsk","Novorossiysk","Yoshkar-Ola","Taganrog","Komsomolsk-on-Amur","Khimki","Syktyvkar","Nalchik","Nizhnekamsk","Shakhty","Dzerzhinsk","Bratsk","Orsk","Angarsk","Engels","Blagoveshchensk","Stary Oskol","Veliky Novgorod","Korolyov","Pskov","Mytishchi","Biysk","Lyubertsy","Prokopyevsk","Yuzhno-Sakhalinsk","Balakovo","Armavir","Rybinsk","Severodvinsk","Abakan","Petropavlovsk-Kamchatsky","Norilsk","Syzran","Volgodonsk","Ussuriysk","Kamensk-Uralsky","Novocherkassk","Zlatoust","Elektrostal","Almetyevsk","Krasnogorsk","Salavat","Miass","Nakhodka","Kopeysk","Pyatigorsk","Rubtsovsk","Berezniki","Kolomna","Maykop","Odintsovo","Khasavyurt","Kovrov","Kislovodsk","Neftekamsk","Nefteyugansk","Novocheboksarsk","Serpukhov","Shchyolkovo","Novomoskovsk","Bataysk","Pervouralsk","Domodedovo","Derbent","Cherkessk","Orekhovo-Zuyevo","Nevinnomyssk","Dimitrovgrad","Nazran","Kyzyl","Oktyabrsky","Obninsk","Kaspiysk","Novy Urengoy","Ramenskoye","Kamyshin","Murom","Zhukovsky"].forEach((i,e)=>Q.register(new te(i,Ll,e===0)))});var MI=P(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});BI();GI()});var ja,mp,vu=n(()=>{_t();ja=class extends ce{};t(ja,"Zulu");mp=ja});var tL={};var DI=n(()=>{vu();pr();ur();Object.entries({people:"Zulu",nation:"Zulus",colors:["#FFFD1E","#000"]}).forEach(([i,e])=>be.register(new ve(mp,i,e)))});var rL={};var EI=n(()=>{vu();Ht();Ct();["uMgungundlovu","Nobamba","Bulawayo","KwaDukuza","Nongoma","oNdini","Nodwengu","Ndondakusuka","Babanango","Khangela","Kwahlomendlini","Hlobane","eThekwini","Mlambongwenya","Eziqwaqweni","Isiphezi","Masotsheni","Mtunzini","Nyakamubi","Hlatikulu","Mthonjaneni","Empangeni","Pongola","Tungela","Kwamashu","Ingwavuma","Hluhluwe","Mtubatuba","Mhlahlandlela","Mthatha","Maseru","Lobamba","Qunu"].forEach((i,e)=>Q.register(new te(i,mp,e===0)))});var SI=P(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});DI();EI()});var iL={};var kI=n(()=>{U();JO();R.register(CC)});var LI=P(YI=>{"use strict";Object.defineProperty(YI,"__esModule",{value:!0});kI()});var oL={};var zI=n(()=>{U();$O();R.register(PC)});var jI=P(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});zI()});var nL={};var WI=n(()=>{U();ZO();R.register(TC)});var _I=P(HI=>{"use strict";Object.defineProperty(HI,"__esModule",{value:!0});WI()});var aL={};var KI=n(()=>{U();QO();R.register(IC)});var VI=P(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});KI()});var sL={};var JI=n(()=>{U();XO();R.register(wC)});var ZI=P($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});JI()});var lL={};var QI=n(()=>{U();eR();R.register(AC)});var ew=P(XI=>{"use strict";Object.defineProperty(XI,"__esModule",{value:!0});QI()});var mL={};var tw=n(()=>{U();tR();R.register(BC)});var iw=P(rw=>{"use strict";Object.defineProperty(rw,"__esModule",{value:!0});tw()});var pL={};var ow=n(()=>{U();rR();R.register(GC)});var aw=P(nw=>{"use strict";Object.defineProperty(nw,"__esModule",{value:!0});ow()});var uL={};var sw=n(()=>{U();iR();R.register(UC)});var mw=P(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});sw()});var cL={};var pw=n(()=>{U();oR();R.register(MC)});var cw=P(uw=>{"use strict";Object.defineProperty(uw,"__esModule",{value:!0});pw()});var fL={};var fw=n(()=>{U();nR();R.register(DC)});var dw=P(yw=>{"use strict";Object.defineProperty(yw,"__esModule",{value:!0});fw()});var yL={};var gw=n(()=>{U();aR();R.register(EC)});var Ow=P(hw=>{"use strict";Object.defineProperty(hw,"__esModule",{value:!0});gw()});var dL={};var Rw=n(()=>{U();sR();R.register(FC)});var vw=P(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});Rw()});var gL={};var bw=n(()=>{U();lR();R.register(SC)});var Pw=P(Cw=>{"use strict";Object.defineProperty(Cw,"__esModule",{value:!0});bw()});var hL={};var Tw=n(()=>{U();mR();R.register(kC)});var ww=P(Iw=>{"use strict";Object.defineProperty(Iw,"__esModule",{value:!0});Tw()});var OL={};var Aw=n(()=>{U();pR();R.register(YC)});var Gw=P(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Aw()});var RL={};var Uw=n(()=>{U();uR();R.register(LC)});var Dw=P(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Uw()});var xL={};var Ew=n(()=>{U();cR();R.register(zC)});var Sw=P(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Ew()});var vL={};var kw=n(()=>{U();fR();R.register(NC)});var Lw=P(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});kw()});var bL={};var zw=n(()=>{U();yR();R.register(jC)});var jw=P(Nw=>{"use strict";Object.defineProperty(Nw,"__esModule",{value:!0});zw()});var CL={};var Ww=n(()=>{U();dR();R.register(WC)});var _w=P(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});Ww()});var PL={};var Kw=n(()=>{U();gR();R.register(HC)});var Vw=P(qw=>{"use strict";Object.defineProperty(qw,"__esModule",{value:!0});Kw()});var TL={};var Jw=n(()=>{U();hR();R.register(_C)});var Zw=P($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});Jw()});var IL={};var Qw=n(()=>{U();OR();R.register(KC)});var eA=P(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});Qw()});var wL={};var tA=n(()=>{U();RR();R.register(qC)});var iA=P(rA=>{"use strict";Object.defineProperty(rA,"__esModule",{value:!0});tA()});var AL={};var oA=n(()=>{U();xR();R.register(VC)});var aA=P(nA=>{"use strict";Object.defineProperty(nA,"__esModule",{value:!0});oA()});var BL={};var sA=n(()=>{U();vR();R.register(JC)});var mA=P(lA=>{"use strict";Object.defineProperty(lA,"__esModule",{value:!0});sA()});var GL={};var pA=n(()=>{U();bR();R.register($C)});var cA=P(uA=>{"use strict";Object.defineProperty(uA,"__esModule",{value:!0});pA()});var UL={};var fA=n(()=>{U();CR();R.register(ZC)});var dA=P(yA=>{"use strict";Object.defineProperty(yA,"__esModule",{value:!0});fA()});var ML={};var gA=n(()=>{U();PR();R.register(QC)});var OA=P(hA=>{"use strict";Object.defineProperty(hA,"__esModule",{value:!0});gA()});var DL={};var RA=n(()=>{U();TR();R.register(XC)});var vA=P(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});RA()});var EL={};var bA=n(()=>{U();IR();R.register(eP)});var PA=P(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});bA()});var FL={};var TA=n(()=>{U();wR();R.register(tP)});var wA=P(IA=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});TA()});var SL={};var AA=n(()=>{U();AR();R.register(rP)});var GA=P(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});AA()});var kL={};var UA=n(()=>{U();BR();R.register(iP)});var DA=P(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});UA()});var YL={};var EA=n(()=>{U();GR();R.register(oP)});var SA=P(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});EA()});var LL={};var kA=n(()=>{U();UR();R.register(nP)});var LA=P(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});kA()});var zL={};var zA=n(()=>{U();MR();R.register(aP)});var jA=P(NA=>{"use strict";Object.defineProperty(NA,"__esModule",{value:!0});zA()});var NL={};var WA=n(()=>{U();DR();R.register(sP)});var _A=P(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});WA()});var jL={};var KA=n(()=>{U();ER();R.register(lP)});var VA=P(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});KA()});var WL={};var JA=n(()=>{U();FR();R.register(mP)});var ZA=P($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0});JA()});var HL={};var QA=n(()=>{U();SR();R.register(pP)});var eB=P(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});QA()});var _L={};var tB=n(()=>{U();kR();R.register(uP)});var iB=P(rB=>{"use strict";Object.defineProperty(rB,"__esModule",{value:!0});tB()});var KL={};var oB=n(()=>{U();YR();R.register(cP)});var aB=P(nB=>{"use strict";Object.defineProperty(nB,"__esModule",{value:!0});oB()});var qL={};var sB=n(()=>{U();LR();R.register(fP)});var mB=P(lB=>{"use strict";Object.defineProperty(lB,"__esModule",{value:!0});sB()});var VL={};var pB=n(()=>{U();zR();R.register(yP)});var cB=P(uB=>{"use strict";Object.defineProperty(uB,"__esModule",{value:!0});pB()});var JL={};var fB=n(()=>{U();NR();R.register(dP)});var dB=P(yB=>{"use strict";Object.defineProperty(yB,"__esModule",{value:!0});fB()});var $L={};var gB=n(()=>{U();jR();R.register(gP)});var OB=P(hB=>{"use strict";Object.defineProperty(hB,"__esModule",{value:!0});gB()});var ZL={};var RB=n(()=>{U();WR();R.register(hP)});var vB=P(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});RB()});var QL={};var bB=n(()=>{U();id();R.register(uu)});var PB=P(CB=>{"use strict";Object.defineProperty(CB,"__esModule",{value:!0});bB()});var XL={};var TB=n(()=>{U();HR();R.register(OP)});var wB=P(IB=>{"use strict";Object.defineProperty(IB,"__esModule",{value:!0});TB()});var ez={};var AB=n(()=>{U();_R();R.register(RP)});var GB=P(BB=>{"use strict";Object.defineProperty(BB,"__esModule",{value:!0});AB()});var tz={};var UB=n(()=>{U();KR();R.register(xP)});var DB=P(MB=>{"use strict";Object.defineProperty(MB,"__esModule",{value:!0});UB()});var rz={};var EB=n(()=>{U();qR();R.register(vP)});var SB=P(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0});EB()});var iz={};var kB=n(()=>{U();VR();R.register(bP)});var LB=P(YB=>{"use strict";Object.defineProperty(YB,"__esModule",{value:!0});kB()});var oz={};var zB=n(()=>{U();od();R.register(Vm)});var jB=P(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});zB()});var nz={};var WB=n(()=>{U();JR();R.register(CP)});var _B=P(HB=>{"use strict";Object.defineProperty(HB,"__esModule",{value:!0});WB()});var az={};var KB=n(()=>{U();ad();R.register(nd)});var VB=P(qB=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});KB()});var sz={};var JB=n(()=>{U();$R();R.register(PP)});var ZB=P($B=>{"use strict";Object.defineProperty($B,"__esModule",{value:!0});JB()});var lz={};var QB=n(()=>{U();ZR();R.register(TP)});var eG=P(XB=>{"use strict";Object.defineProperty(XB,"__esModule",{value:!0});QB()});var mz={};var tG=n(()=>{U();QR();R.register(IP)});var iG=P(rG=>{"use strict";Object.defineProperty(rG,"__esModule",{value:!0});tG()});var pz={};var oG=n(()=>{U();tx();R.register(BP)});var aG=P(nG=>{"use strict";Object.defineProperty(nG,"__esModule",{value:!0});oG()});var uz={};var sG=n(()=>{U();XR();R.register(wP)});var mG=P(lG=>{"use strict";Object.defineProperty(lG,"__esModule",{value:!0});sG()});var cz={};var pG=n(()=>{U();ex();R.register(AP)});var cG=P(uG=>{"use strict";Object.defineProperty(uG,"__esModule",{value:!0});pG()});var fz={};var fG=n(()=>{U();rx();R.register(GP)});var dG=P(yG=>{"use strict";Object.defineProperty(yG,"__esModule",{value:!0});fG()});var yz={};var gG=n(()=>{U();ix();R.register(UP)});var OG=P(hG=>{"use strict";Object.defineProperty(hG,"__esModule",{value:!0});gG()});var dz={};var RG=n(()=>{U();ox();R.register(MP)});var vG=P(xG=>{"use strict";Object.defineProperty(xG,"__esModule",{value:!0});RG()});var gz,bG,CG=n(()=>{ym();v();q();gz=t((i=b)=>[new Ri(new p((e,r)=>{i.emit("city:building-complete",e,r)}))],"getRules"),bG=gz});var hz,PG,TG=n(()=>{Ze();cr();ga();Je();q();gl();v();hz=t((i=H,e=W,r=he,o=lr,s=b)=>[new Pr(new p(a=>o.getByCity(a).progress().set(0))),new Pr(new p(a=>r.getByCity(a).shrink())),new Pr(new p((a,m,u)=>{s.emit("city:captured",a,m,u)})),new Pr(new p(a=>e.getByCity(a).forEach(m=>m.destroy())))],"getRules"),PG=hz});var sx,ud,ci,ol=n(()=>{Me();sx=t(i=>i instanceof L?-i.value():-i,"negate"),ud=class extends L{add(e,r=""){super.add(sx(e),r)}set(e,r=""){super.set(sx(e),r)}subtract(e,r=""){super.subtract(sx(e),r)}};t(ud,"NegativeYield");ci=t(i=>{["add","set","subtract"].forEach(e=>Object.defineProperty(i.prototype,e,Object.getOwnPropertyDescriptor(ud.prototype,e)||Object.create(null)))},"makeNegative")});var pp,IG,lx=n(()=>{Bl();ol();pp=class extends pn{};t(pp,"PopulationSupportFood");ci(pp);IG=pp});var nl,wG,mx=n(()=>{Bl();ol();nl=class extends pn{#e;constructor(e=0,r=null){super(e,r?r.id():"none"),this.#e=r,this.addKey("unit")}unit(){return this.#e}};t(nl,"UnitSupportFood");ci(nl);wG=nl});var al,px,ux=n(()=>{Um();ol();al=class extends Ra{#e;constructor(e=0,r=null){super(e,r?r.id():"none"),this.#e=r,this.addKey("unit")}unit(){return this.#e}};t(al,"UnitSupportProduction");ci(al);px=al});var Oz,AG,BG=n(()=>{Xn();Mn();cr();vn();Je();am();w();v();lx();Dn();mx();ux();Oz=t((i=he,e=dt,r=W)=>[new ot(new p(o=>new IG(i.getByCity(o).size()*2))),...[[qe,1,Wi,er],[qe,2,At,lt,mt,Rt]].map(([o,s,...a])=>new ot(new l(m=>r.getByCity(m).some(u=>u instanceof o)),new l(m=>e.getByPlayer(m.player()).is(...a)),new p(m=>r.getByCity(m).filter(u=>u instanceof o).map(u=>new wG(s,u))))),new ot(new l(o=>e.getByPlayer(o.player()).is(Wi,er)),new l(o=>{let s=i.getByCity(o);return r.getByCity(o).filter(a=>[kt,j,Ke,Ir].some(m=>a instanceof m)).length>s.size()}),new p(o=>{let s=i.getByCity(o);return r.getByCity(o).filter(a=>[kt,j,Ke,Ir].some(m=>a instanceof m)).slice(s.size()).map(a=>new px(1,a))})),new ot(new l(o=>e.getByPlayer(o.player()).is(At,lt,mt,Rt)),new p(o=>r.getByCity(o).filter(s=>[kt,j,Ke,Ir].some(a=>s instanceof a)).map(s=>new px(1,s))))],"getRules"),AG=Oz});var Rz,GG,UG=n(()=>{Rl();ga();cr();Ze();q();ea();co();I();qr();Dc();nf();uc();v();Mm();w();Rz=t((i=Ee,e=lr,r=he,o=H,s=me,a=d,m=lo,u=b)=>[...[Ge,Ne].map(f=>new an(new l(c=>i.getByTile(c.tile()).every(y=>!(y instanceof f))),new p(c=>i.register(new f(c.tile()))))),new an(new p(f=>e.register(new dm(f,m,a)))),new an(new p(f=>r.register(new Pl(f,a)))),new an(new p(f=>o.register(f))),new an(new p(f=>{u.emit("city:created",f)})),new an(new p(f=>Ss(f,s,r)))],"getRules"),GG=Rz});var xz,MG,DG=n(()=>{Ze();q();qr();Je();hl();v();ea();xz=t((i=Ee,e=H,r=b,o=W)=>[new Kr(new p(s=>i.getByTile(s.tile()).filter(a=>a instanceof Ge).forEach(a=>i.unregister(a)))),new Kr(new p((s,a)=>{r.emit("city:destroyed",s,a)})),new Kr(new p(s=>o.getByCity(s).forEach(a=>a.destroy())))],"getRules"),MG=xz});var cd,fd,cx=n(()=>{A();cd=class extends g{};t(cd,"FoodExhausted");fd=cd});var vz,EG,FG=n(()=>{v();cx();vz=t(()=>[new fd(new p(i=>i.shrink()))],"getRules"),EG=vz});var bz,SG,kG=n(()=>{I();w();v();Zh();cx();bz=t((i=d)=>[new Yp(new l(e=>e.progress().value()>=e.cost().value()),new p(e=>e.grow())),new Yp(new l(e=>e.progress().value()<0),new p(e=>{i.process(fd,e)}))],"getRules"),SG=bz});var Cz,YG,LG=n(()=>{cr();co();w();v();tf();Mm();Cz=t((i=he,e=me)=>[new _n(new p(r=>r.empty())),new _n(new p(r=>r.cost().set((r.size()+1)*10,"city-grow"))),new _n(new l(r=>r.city().tilesWorked().length<r.size()+1),new p(r=>Ss(r.city(),e,i))),new _n(new l(r=>r.city().tilesWorked().length>r.size()+1),new p(r=>r.city().tilesWorked().entries().slice(r.size()+1).forEach(o=>r.city().tilesWorked().unregister(o))))],"getRules"),YG=Cz});var Pz,zG,NG=n(()=>{Jh();v();Pz=t(()=>[new Zc(new p(i=>10*(i.size()+1)))],"getRules"),zG=Pz});var En,yd=n(()=>{va();ol();En=class extends xa{};t(En,"Corruption");ci(En)});var Jo,jG,dd=n(()=>{Me();Jo=class extends L{};t(Jo,"Happiness");jG=Jo});var eo,WG,bu=n(()=>{Me();eo=class extends L{};t(eo,"Luxuries");WG=eo});var rr,gd=n(()=>{Me();rr=class extends L{};t(rr,"Research")});var Fe,sl,zl=n(()=>{Me();Fe=class extends L{};t(Fe,"Unhappiness");sl=Fe});var ll=n(()=>{ba();yd();Qc();gm();dd();bu();lx();gd();va();zl();mx();ux()});var hd,oa,up=n(()=>{A();hd=class extends g{};t(hd,"CivilDisorder");oa=hd});var Od,$o,cp=n(()=>{A();Od=class extends g{};t(Od,"ProcessYield");$o=Od});var Rd,Nl,xd=n(()=>{A();Rd=class extends g{};t(Rd,"Unsupported");Nl=Rd});var Tz,HG,_G=n(()=>{ga();cr();ba();ll();I();Je();up();w();v();cp();xd();Tz=t((i=lr,e=he,r=W,o=d)=>[new $o(new l(s=>s instanceof $),new p((s,a,m)=>{let u=e.getByCity(a),f=new Hn(s);m.forEach(c=>{if(!(c instanceof nl)||f.value()>=0)return;let y=c.unit();y!==null&&(o.process(Nl,a,y,c),f.subtract(c))}),u.add(f),u.check()})),new $o(new l(s=>s instanceof V),new p((s,a,m)=>{let u=i.getByCity(a),f=s.clone();m.filter(y=>y instanceof al).sort((y,h)=>(y.unit()?.tile().distanceFrom(a.tile())??0)-(h.unit()?.tile().distanceFrom(a.tile())??0)).forEach(y=>{if(f.value()>=0)return;let h=y.unit();h!==null&&(o.process(Nl,a,h,y),f.subtract(y))});let c=a.yields();o.get(oa).some(y=>y.validate(a,c))||u.add(f),u.check()}))],"getRules"),HG=Tz});var Iz,KG,qG=n(()=>{cr();co();w();v();Qh();Mm();Iz=t((i=he,e=me)=>[new Cl(new l(r=>r.size()>0),new p(r=>r.cost().set((r.size()+1)*10,"city-shrink"))),new Cl(new l(r=>r.size()>0),new l(r=>r.city().tilesWorked().length>r.size()+1),new p(r=>r.city().tilesWorked().entries().slice(r.size()+1).forEach(o=>r.city().tilesWorked().unregister(o)))),new Cl(new l(r=>r.size()>0),new l(r=>r.city().tilesWorked().length<r.size()+1),new p(r=>Ss(r.city(),e,i))),new Cl(new l(r=>r.size()<=0),new p(r=>r.city().destroy()))],"getRules"),KG=Iz});var vd,Pe,br=n(()=>{De();de();vd=class extends S{constructor(){super(z)}getByCity(e,r=!1){return this.filter(o=>o.city()===e&&!o.destroyed())}};t(vd,"CityImprovementRegistry");Pe=new vd});var wz,VG,JG=n(()=>{Mn();br();ll();vn();v();ya();nx();ds();um();Ti();wz=t((i=Pe,e=dt)=>[new sn(new fa,new p((r,o)=>{let s=e.getByPlayer(r.player()),[a]=i.filter(c=>c instanceof eT&&r.player()===c.city().player()).map(c=>c.city()),m=Le(o,se),u=s.is(At)?10:s.is(lt)?0:a?a.tile().distanceFrom(r.tile()):32,[f]=[[Wi,8],[At,20],[lt,0],[er,12],[mt,16],[Rt,24]].filter(([c])=>s.is(c)).map(([,c])=>c);return new En(f?Math.min(Math.floor(m*u*3/(10*f)),m):0,u.toFixed(2))})),new sn(new _r(0),new p(r=>r.tilesWorked().entries().flatMap(o=>o.yields(r.player()).flatMap(s=>new s.constructor(s.value(),o.id()+": "+s.values().map(([,a])=>a).join("-"))))))],"getRules"),VG=wz});var Az,$G,ZG=n(()=>{_h();ga();Ze();Kn();w();v();Az=t((i=lr,e=H)=>[new at(new l(r=>e.getByPlayer(r).map(o=>i.getByCity(o)).some(o=>!o.building())),new p(r=>e.getByPlayer(r).map(o=>i.getByCity(o)).filter(o=>!o.building()).map(o=>new jn(r,o)))),new at(new l(r=>e.getByPlayer(r).map(o=>i.getByCity(o)).some(o=>!!o.building())),new p(r=>e.getByPlayer(r).map(o=>i.getByCity(o)).filter(o=>!!o.building()).map(o=>new Ps(r,o))))],"getRules"),$G=Az});var Bz,QG,XG=n(()=>{cr();Ze();q();Wm();w();ru();v();Bz=t((i=H,e=he,r=b)=>[new un(new l((o,s,a)=>a instanceof zs&&a.to()===o.tile()&&i.getByTile(a.to())!==null),new p(o=>{let s=i.getByTile(o.tile());e.getByCity(s).shrink()})),new un(new p((o,s,a)=>r.emit("unit:defeated",o,s,a)))],"getRules"),QG=Bz});var Gz,eU,tU=n(()=>{v();xd();Gz=t(()=>[new Nl(new p((i,e)=>e.destroy()))],"getRules"),eU=Gz});var Uz={};var rU=n(()=>{CG();TG();BG();UG();DG();FG();kG();LG();NG();_G();qG();JG();I();ZG();XG();tU();d.register(...bG(),...PG(),...AG(),...GG(),...MG(),...EG(),...SG(),...YG(),...zG(),...HG(),...KG(),...VG(),...$G(),...QG(),...eU())});var oU=P(iU=>{"use strict";Object.defineProperty(iU,"__esModule",{value:!0});rU()});var jl,nU=n(()=>{zl();ol();jl=class extends sl{#e;constructor(e,r){super(e,r.id()),this.#e=r,this.addKey("cityImprovement")}cityImprovement(){return this.#e}};t(jl,"CityImprovementContent");ci(jl)});var fp,aU=n(()=>{dd();fp=class extends jG{};t(fp,"LuxuryHappiness")});var Wl,sU=n(()=>{zl();ol();Wl=class extends sl{#e;constructor(e,r){super(e,r.id()),this.#e=r,this.addKey("unit")}unit(){return this.#e}};t(Wl,"MartialLaw");ci(Wl)});var Wa,lU=n(()=>{zl();Wa=class extends sl{#e;constructor(e,r){super(e,r.id()),this.#e=r,this.addKey("unit")}unit(){return this.#e}};t(Wa,"MilitaryUnhappiness")});var yp,mU=n(()=>{zl();yp=class extends sl{};t(yp,"PopulationUnhappiness")});var bd=n(()=>{gd()});var dp=n(()=>{nU();ll();dd();bu();aU();sU();lU();mU();ba();bd();zl()});var Cd,Pd,fx=n(()=>{A();Cd=class extends g{};t(Cd,"CelebrateLeader");Pd=Cd});var Mz,pU,uU=n(()=>{cr();dp();fx();w();Ti();Mz=t((i=he)=>[new Pd(new l(e=>i.getByCity(e).size()>2),new l((e,r=e.yields())=>{let[o,s]=Ca(r,Jo,Fe);return s===0&&Math.floor(o)>=i.getByCity(e).size()/2}))],"getRules"),pU=Mz});var Dz,cU,fU=n(()=>{Xn();cr();Mn();dp();vn();Je();um();w();v();Dz=t((i=he,e=dt,r=W)=>[new sn(new p(o=>new yp(Math.max(i.getByCity(o).size()-5,0)))),...[[Rt,1],[lt,2]].map(([o,s])=>new sn(new l(a=>{try{return e.getByPlayer(a.player()).is(o)}catch{return!1}}),new l(a=>r.getByCity(a).filter(m=>[kt,j,Ke].some(u=>m instanceof u)&&m.tile()!==a.tile()).length>0),new p(a=>r.getByCity(a).filter(m=>[kt,j,Ke].some(u=>m instanceof u)&&m.tile()!==a.tile()).map(m=>new Wa(s,m)))))],"getRules"),cU=Dz});var Ez,yU,dU=n(()=>{dp();up();w();Ti();Ez=t(()=>[new oa(new l((i,e=i.yields())=>{let[r,o]=Ca(e,Jo,Fe);return o>r}))],"getRules"),yU=Ez});var Td,to,yx=n(()=>{Uh();Td=class extends _u{validate(...e){return!this.criteria().length||this.criteria().some(r=>r.validate(...e))}};t(Td,"Or");to=Td});var Fz,gU,hU=n(()=>{Mn();Hi();cr();dp();br();vn();Ye();I();Je();am();w();v();Xn();em();ya();hr();yx();Ti();Fz=t((i=d,e=he,r=Pe,o=dt,s=N,a=W)=>[new ot(new l(m=>o.getByPlayer(m.player()).is(Wi,At,er,mt)),new p((m,u)=>a.getByTile(m.tile()).filter(f=>f instanceof j).slice(0,Math.min(4,Le(u,Fe))).map(f=>new Wl(1,f)))),...[[Yt,1],[Yt,1,Xt],[mi,3],[Rr,4]].map(([m,u,...f])=>new ot(new it,new l(c=>r.getByCity(c).some(y=>y instanceof m)),new to(new l(c=>f.length===0),new l(c=>f.every(y=>s.getByPlayer(c.player()).completed(y)))),new l((c,y)=>Le(y,Fe)>0),new p((c,y)=>new jl(Math.min(u,Le(y,Fe)),r.getByCity(c).filter(h=>h instanceof m)[0])))),new ot(new gs,new p((m,u)=>new fp(Math.floor(Le(u,eo)/2),eo.name)))],"getRules"),gU=Fz});var Id,Ha,Cu=n(()=>{A();Id=class extends g{};t(Id,"TurnStart");Ha=Id});var Sz,OU,RU=n(()=>{Ze();q();I();fx();up();v();ya();Cu();Sz=t((i=H,e=d,r=b)=>[new Ha(new it,new p(o=>i.getByPlayer(o).forEach(s=>{e.get(oa).some(a=>a.validate(s,s.yields()))&&r.emit("city:civil-disorder",s),e.get(Pd).some(a=>a.validate(s,s.yields()))&&r.emit("city:leader-celebration",s)})))],"getRules"),OU=Sz});var kz={};var xU=n(()=>{I();uU();fU();dU();hU();RU();d.register(...pU(),...cU(),...yU(),...gU(),...OU())});var bU=P(vU=>{"use strict";Object.defineProperty(vU,"__esModule",{value:!0});xU()});var Yz={};var CU=n(()=>{Hi();Rl();lo.register(si,Or,li,Rr,Uo,mi,Dr,tr,pi,Bt,Er,Fr,xr,Mo,Gt,xt,Ut,Do,Eo,Yt,Sr)});var Lz,PU,TU=n(()=>{Hi();hr();cm();br();Ye();w();v();Lz=t((i=Pe,e=N)=>[new ut(new p((r,o)=>new l(()=>!i.getByCity(r).some(s=>s instanceof o)))),...[[si,Xr],[Uo,Zt],[mi,Xr],[Dr,wr],[pi,Bn],[Er,Mr],[xr,Si],[xt,Zt],[Yt,Ei],[Or,Di],[Rr,wt],[tr,It],[Bt,ht],[Mo,Qt],[Fr,ai],[Gt,Po],[Ut,zi],[Do,Gn],[Eo,Bo],[Sr,gr]].map(([r,o])=>new ut(new l((s,a)=>a===r),new p(s=>new l(()=>e.getByPlayer(s.player()).completed(o))))),...[[Or,xr],[Sr,Er],[Bt,tr],[Gt,tr],[Ut,tr],[Fr,Bt,Gt,Ut]].map(([r,...o])=>new ut(new l((s,a)=>a===r),new p(s=>new l(()=>i.getByCity(s).some(a=>o.some(m=>a instanceof m)))))),...[[Dr,xt],[Bt,Gt,Ut],[Gt,Ut,Bt],[Ut,Bt,Gt]].map(([r,...o])=>new ut(new l((s,a)=>a===r),new p(s=>new l(()=>i.getByCity(s).every(a=>!o.some(m=>a instanceof m))))))],"getRules"),PU=Lz});var zz,IU,wU=n(()=>{Hi();fm();zz=t(()=>[...[[si,120],[li,40],[Uo,120],[mi,100],[Dr,80],[pi,60],[Er,80],[xr,80],[xt,200],[Yt,40],[Or,120],[Rr,160],[tr,200],[Bt,240],[Mo,160],[Fr,320],[Gt,160],[Ut,160],[Do,200],[Eo,200],[Sr,160]].flatMap(([i,e])=>vs(i,e))],"getRules"),IU=zz});var Nz,AU,BU=n(()=>{br();gl();v();Hi();Ae();Nz=t((i=Pe,e=()=>Math.random())=>[new Pr(new p(r=>{let o=i.getByCity(r).filter(a=>!(a instanceof Oe)),[s]=o.filter(a=>a instanceof xt);for(s&&(s.destroy(),o.splice(o.indexOf(s),1));o.length>0&&e()>.7;){let a=o[Math.floor(e()*o.length)];if(!a)break;a.destroy(),o.splice(o.indexOf(a),1)}}))],"getRules"),AU=Nz});var ye,dx=n(()=>{gm();ol();ye=class extends zc{#e;constructor(e=0,r=null){super(e,r?r.id():"none"),this.#e=r,this.addKey("cityImprovement")}cityImprovement(){return this.#e}};t(ye,"CityImprovementMaintenanceGold");ci(ye)});var wd=n(()=>{ll();dx();yd();Qc();bu();bd();va()});var jz,GU,UU=n(()=>{Hi();hr();br();Ye();wd();am();w();v();jz=t((i=Pe,e=N)=>[...[[si,ye,2],[Or,ye,3],[Rr,ye,3],[Uo,ye,2],[mi,ye,2],[Dr,ye,1],[tr,ye,4],[pi,ye,1],[Bt,ye,4],[Er,ye,1],[Fr,ye,6],[xr,ye,1],[Mo,ye,4],[Gt,ye,2],[xt,ye,0],[Ut,ye,4],[Do,ye,2],[Eo,ye,4],[Yt,ye,1],[Sr,ye,3]].map(([r,o,s])=>new ot(new l(a=>i.getByCity(a).some(m=>m instanceof r)),new p(a=>{let[m]=i.getByCity(a).filter(u=>u instanceof r);return new o(s,m)}))),...[[li,ye,0,null,Ot],[li,ye,1,Ot,gt],[li,ye,2,gt,null]].map(([r,o,s,a,m])=>new ot(new l(u=>i.getByCity(u).some(f=>f instanceof r)),new l(u=>a===null||e.getByPlayer(u.player()).completed(a)),new l(u=>m===null||!e.getByPlayer(u.player()).completed(m)),new p(u=>{let[f]=i.getByCity(u).filter(c=>c instanceof r);return new o(s,f)})))],"getRules"),GU=jz});var Wz,MU,DU=n(()=>{br();Ze();I();uc();w();v();Hi();Wz=t((i=H,e=Pe,r=d)=>[new an(new l(o=>i.getByPlayer(o.player()).length===0),new p(o=>e.register(new xt(o,r))))],"getRules"),MU=Wz});var Hz,EU,FU=n(()=>{br();w();hl();v();Hz=t((i=Pe)=>[new Kr(new l(e=>i.getByCity(e).length>0),new p(e=>i.getByCity(e).forEach(r=>r.destroy())))],"getRules"),EU=Hz});var _z,SU,kU=n(()=>{Hi();br();w();v();wd();tf();_z=t((i=Pe)=>[new _n(new l(e=>!i.getByCity(e.city()).some(r=>r instanceof si)),new l(e=>e.size()>10),new p(e=>e.shrink())),new _n(new l(e=>i.getByCity(e.city()).some(r=>r instanceof pi)),new p(e=>e.add(new Hn(e.cost().value()/2))))],"getRules"),SU=_z});var Kz,YU,LU=n(()=>{br();q();Xh();v();Kz=t((i=Pe,e=b)=>[new Lp(new p(r=>i.register(r))),new Lp(new p((r,o)=>{e.emit("city-improvement:created",r,o)}))],"getRules"),YU=Kz});var qz,zU,NU=n(()=>{Hi();br();wd();w();v();Dh();bc();Ti();qz=t((i=Pe)=>[...[[xr,mr,.5],[xr,eo,.5],[Or,mr,.5],[Or,eo,.5],[Er,rr,.5],[Sr,rr,.5],[tr,V,.5],[Ut,V,.5],[Bt,V,.5],[Gt,V,.5],[Fr,V,.5],[Dr,En,.5]].map(([e,r,o])=>new Ol(new uv,new l(s=>i.getByCity(s).some(a=>a instanceof e)),new p((s,a)=>new r(Math.floor(Le(a,r)*o),e.name))))],"getRules"),zU=qz});var Vz,jU,WU=n(()=>{br();Ta();Hi();Ff();w();v();pu();Vz=t((i=Pe,e=yr)=>[new ha(new l(r=>r.city()!==null),new l(r=>i.getByCity(r.city()).some(o=>o instanceof li)),new p(r=>e.register(new wa(r))))],"getRules"),jU=Vz});var Jz={};var HU=n(()=>{I();TU();wU();BU();UU();DU();FU();kU();LU();NU();WU();d.register(...PU(),...IU(),...AU(),...GU(),...MU(),...EU(),...SU(),...YU(),...zU(),...jU())});var KU=P(_U=>{"use strict";Object.defineProperty(_U,"__esModule",{value:!0});CU();HU()});var VU={};Su(VU,{default:()=>$z,registerCityNames:()=>qU});var qU,$z,JU=n(()=>{Ht();Ct();qU=t((i=Q)=>{["Bergen","Cannae","Capua","Cordoba","Cremona","Crete","Cunaxa","Damascus","Dublin","Genoa","Ghent","Issus","Lisbon","Mecca","Melbourne","Milan","Naples","Pisa","Prague","Salamis","Salzburg","Seville","Sidon","Sydney","Tarsus","Toronto","Turin","Tyre","Utica","Venice","Verona"].forEach(e=>i.register(new te(e,null)))},"registerCityNames"),$z=qU});var gx=n(()=>{$m();cu();fu();yu();du();tp();gu();ip();hu();Ou();Ru();xu();lp();vu()});var Ad,Bd,hx=n(()=>{ao();_t();Ad=class extends He{constructor(){super(ce)}};t(Ad,"CivilizationRegistry");Bd=new Ad});var ZU={};Su(ZU,{default:()=>Zz,registerCivilizations:()=>$U});var $U,Zz,QU=n(()=>{gx();hx();$U=t((i=Bd)=>{i.register(Ba,Ga,Ua,Ma,Da,Ea,Fa,Sa,ka,Ya,La,za,Na,ja)},"registerCivilizations"),Zz=$U});var _a,XU=n(()=>{ct();$m();_a=class extends ne{static civilization(){return Sl}name(){return"Abraham Lincoln"}};t(_a,"AbrahamLincoln")});var eM=n(()=>{ct();$m()});var tM=n(()=>{XU();eM()});var Ka,rM=n(()=>{ct();cu();Ka=class extends ne{static civilization(){return Zm}name(){return"Moctezuma II"}};t(Ka,"MoctezumaII")});var iM=n(()=>{rM()});var qa,oM=n(()=>{ct();fu();qa=class extends ne{static civilization(){return Qm}name(){return"Hammurabi"}};t(qa,"Hammurabi")});var nM=n(()=>{oM()});var Va,aM=n(()=>{ct();yu();Va=class extends ne{static civilization(){return Xm}name(){return"Mao Zedong"}};t(Va,"MaoZedong")});var sM=n(()=>{aM()});var Ja,lM=n(()=>{ct();du();Ja=class extends ne{static civilization(){return ep}name(){return"Ramesses II"}};t(Ja,"RamessesII")});var mM=n(()=>{lM()});var $a,pM=n(()=>{ct();tp();$a=class extends ne{static civilization(){return kl}name(){return"Elizabeth I"}};t($a,"ElizabethI")});var uM=n(()=>{ct();tp()});var cM=n(()=>{pM();uM()});var Za,fM=n(()=>{ct();gu();Za=class extends ne{static civilization(){return rp}name(){return"Napoleon I"}};t(Za,"NapoleonI")});var yM=n(()=>{fM()});var Qa,dM=n(()=>{ct();ip();Qa=class extends ne{static civilization(){return Yl}name(){return"Frederick the Great"}};t(Qa,"FrederickTheGreat")});var gM=n(()=>{ct();ip()});var hM=n(()=>{dM();gM()});var Xa,OM=n(()=>{ct();hu();Xa=class extends ne{static civilization(){return op}name(){return"Alexander the Great"}};t(Xa,"AlexanderTheGreat")});var RM=n(()=>{OM()});var es,xM=n(()=>{ct();Ou();es=class extends ne{static civilization(){return np}name(){return"Mahatma Gandhi"}};t(es,"MahatmaGandhi")});var vM=n(()=>{xM()});var ts,bM=n(()=>{ct();Ru();ts=class extends ne{static civilization(){return ap}name(){return"Genghis Khan"}};t(ts,"GenghisKhan")});var CM=n(()=>{bM()});var rs,PM=n(()=>{ct();xu();rs=class extends ne{static civilization(){return sp}name(){return"Julius Caesar"}};t(rs,"JuliusCaesar")});var TM=n(()=>{PM()});var IM=n(()=>{ct();lp()});var is,wM=n(()=>{ct();lp();is=class extends ne{static civilization(){return Ll}name(){return"Joseph Stalin"}};t(is,"JosephStalin")});var AM=n(()=>{IM();wM()});var os,BM=n(()=>{ct();vu();os=class extends ne{static civilization(){return mp}name(){return"Shaka"}};t(os,"Shaka")});var GM=n(()=>{BM()});var Ox=n(()=>{tM();iM();nM();sM();mM();cM();yM();hM();RM();vM();CM();TM();AM();GM()});var MM={};Su(MM,{default:()=>Qz,registerLeaders:()=>UM});var UM,Qz,DM=n(()=>{Ox();hm();UM=t((i=Wn)=>{i.register(_a,Ka,qa,Va,Ja,$a,Za,Qa,Xa,es,ts,rs,is,os)},"registerLeaders"),Qz=UM});var Gd,gp,Ud=n(()=>{Sp();Gd=class extends Is{};t(Gd,"Aggression");gp=Gd});var Md,hp,EM=n(()=>{Ud();Md=class extends gp{constructor(e){super(e,1)}};t(Md,"Aggressive");hp=Md});var Dd,Op,Ed=n(()=>{Sp();Dd=class extends Is{};t(Dd,"Militarism");Op=Dd});var Fd,ns,FM=n(()=>{Ed();Fd=class extends Op{constructor(e){super(e,0)}};t(Fd,"Civilized");ns=Fd});var Sd,Rp,kd=n(()=>{Sp();Sd=class extends Is{};t(Sd,"Development");Rp=Sd});var Yd,xp,SM=n(()=>{kd();Yd=class extends Rp{constructor(e){super(e,1)}};t(Yd,"Expansionist");xp=Yd});var Ld,zd,kM=n(()=>{Ud();Ld=class extends gp{constructor(e){super(e,0)}};t(Ld,"Friendly");zd=Ld});var Nd,jd,YM=n(()=>{Ed();Nd=class extends Op{constructor(e){super(e,1)}};t(Nd,"Militaristic");jd=Nd});var Wd,Hl,LM=n(()=>{Ud();Wd=class extends gp{constructor(e){super(e,.5)}};t(Wd,"Normal");Hl=Wd});var Hd,vp,zM=n(()=>{kd();Hd=class extends Rp{constructor(e){super(e,.5)}};t(Hd,"Normal");vp=Hd});var _d,Kd,NM=n(()=>{Ed();_d=class extends Op{constructor(e){super(e,.5)}};t(_d,"Normal");Kd=_d});var qd,Pu,jM=n(()=>{kd();qd=class extends Rp{constructor(e){super(e,0)}};t(qd,"Perfectionist");Pu=qd});var HM={};Su(HM,{default:()=>Xz,registerTraits:()=>WM});var WM,Xz,_M=n(()=>{Ox();Kh();EM();FM();SM();kM();YM();LM();zM();NM();jM();WM=t((i=Kc)=>{[[_a,zd,vp,ns],[Ka,Hl,Pu,ns],[qa,zd,Pu,ns],[Va,Hl,vp,ns],[Ja,Hl,vp,ns],[$a,Hl,xp,Kd],[Za,hp,xp,ns],[Qa,hp,Pu,ns],[Xa,Hl,xp,jd],[es,zd,Pu,Kd],[ts,hp,xp,jd],[rs,Hl,xp,ns],[is,hp,vp,jd],[os,hp,vp,Kd]].forEach(([e,...r])=>r.forEach(o=>i.register(new o(e))))},"registerTraits"),Xz=WM});var qM=P(KM=>{"use strict";Object.defineProperty(KM,"__esModule",{value:!0});var eN=(JU(),O(VU)),tN=(QU(),O(ZU)),rN=(DM(),O(MM)),iN=(_M(),O(HM));(0,eN.default)();(0,tN.default)();(0,rN.default)();(0,iN.default)()});var Vd,Jd,Rx=n(()=>{A();Vd=class extends g{};t(Vd,"Yield");Jd=Vd});var $d,vt,na=n(()=>{I();af();Rx();$d=class extends Uv{#e;#t;constructor(e,r=d){super(),this.#e=e,this.#t=r,this.addKey("city","yields")}static build(e,r=d){return new this(e,r)}city(){return this.#e}yields(){return this.#t.process(Jd,this).flat()}};t($d,"Part");vt=$d});var Lt,as,xx=n(()=>{na();Lt=class extends vt{};t(Lt,"Fuel");as=Lt});var zt,Tu,vx=n(()=>{na();zt=class extends vt{};t(zt,"Habitation");Tu=zt});var Zd,_l,Qd=n(()=>{A();Zd=class extends g{};t(Zd,"ChooseSlot");_l=Zd});var Xd,Kl,bx=n(()=>{A();Xd=class extends g{};t(Xd,"Active");Kl=Xd});var VM,eg,tg,Cx=n(()=>{Z();I();Qd();bx();VM=t((i,e,r)=>e<=i&&i<r,"isBetween"),eg=class extends k{#e=new Map;#t;#r;#i=[];#o;constructor(e,r,o,s=d){super(),this.addKey("activeSlots","height","inactiveSlots","slots","width"),this.#t=e,this.#r=s,this.#o=r,this.#i.push(...o)}activeSlots(){return this.#i.filter(e=>this.#r.process(Kl,e,this).every(r=>r))}get(e,r){if(e<0||e>=this.#o||r<0||r>=this.#t)return null;let o=[e,r].toString();if(!this.#e.has(o)){let[s]=this.#i.filter(a=>VM(e,a.x(),a.x()+a.width())&&VM(r,a.y(),a.y()+a.height()));this.#e.set(o,s??null)}return this.#e.get(o)}getAdjacent(e){let r=new Set;for(let o=e.x(),s=e.x()+e.width()-1;o<=s;o++){let a=this.get(o,e.y()-1),m=this.get(o,e.y()+e.height());a&&r.add(a),m&&r.add(m)}for(let o=e.y(),s=e.y()+e.height()-1;o<=s;o++){let a=this.get(e.x()-1,o),m=this.get(e.x()+e.width(),o);a&&r.add(a),m&&r.add(m)}return[...r.values()].filter(o=>o!==e)}getFreeSlot(e){let[r]=this.#r.process(_l,e,this);return r??null}height(){return this.#t}inactiveSlots(){return this.#i.filter(e=>this.#r.process(Kl,e,this).some(r=>!r))}slots(){return this.#i}width(){return this.#o}};t(eg,"Layout");tg=eg});var ir,Iu,Px=n(()=>{na();ir=class extends vt{};t(ir,"LifeSupport");Iu=ir});var Cr,wu,Tx=n(()=>{na();Cr=class extends vt{};t(Cr,"Power");wu=Cr});var Mt,ss,Ix=n(()=>{na();Mt=class extends vt{};t(Mt,"Propulsion");ss=Mt});var rg,F,JM=n(()=>{Z();rg=class extends k{#e=[];#t;#r=null;#i;#o;#n;constructor(e,r,o,s,a){super(),this.addKey("height","part","width","x","y"),this.#t=o,this.#i=s,this.#o=e,this.#n=r,this.#e.push(...a)}accepts(e){return this.#e.some(r=>e instanceof r)}empty(){return this.#r===null}fill(e){!this.accepts(e)||(this.#r=e)}height(){return this.#t}part(){return this.#r}width(){return this.#i}x(){return this.#o}y(){return this.#n}};t(rg,"Slot");F=rg});var bt,oe,wx=n(()=>{na();bt=class extends vt{};t(bt,"Structural");oe=bt});var ig,$M,ZM=n(()=>{I();xx();vx();Cx();Px();Tx();Ix();JM();wx();ig=class extends tg{constructor(e=d){super(12,12,[new F(9,0,1,1,[as]),new F(10,0,1,2,[ss]),new F(1,1,2,2,[wu]),new F(5,1,2,2,[wu]),new F(8,1,1,1,[oe]),new F(9,1,1,1,[oe]),new F(10,1,1,1,[oe]),new F(8,2,1,1,[oe]),new F(9,2,1,1,[as]),new F(10,2,1,2,[ss]),new F(0,3,1,1,[oe]),new F(1,3,1,1,[oe]),new F(2,3,1,1,[oe]),new F(3,3,1,1,[oe]),new F(4,3,1,1,[oe]),new F(5,3,1,1,[oe]),new F(6,3,1,1,[oe]),new F(7,3,1,1,[oe]),new F(8,3,1,1,[oe]),new F(9,3,1,1,[as]),new F(10,3,1,2,[ss]),new F(0,4,2,2,[Iu]),new F(2,4,2,2,[Tu]),new F(4,4,2,2,[Iu]),new F(6,4,2,2,[Tu]),new F(8,4,1,1,[oe]),new F(9,4,1,1,[oe]),new F(10,4,1,1,[oe]),new F(8,5,1,1,[oe]),new F(9,5,1,1,[as]),new F(10,5,1,2,[ss]),new F(0,6,2,2,[Tu]),new F(2,6,2,2,[Iu]),new F(4,6,2,2,[Tu]),new F(6,6,2,2,[Iu]),new F(8,6,1,1,[oe]),new F(9,6,1,1,[as]),new F(10,6,1,2,[ss]),new F(8,7,1,1,[oe]),new F(9,7,1,1,[oe]),new F(10,7,1,1,[oe]),new F(0,8,1,1,[oe]),new F(1,8,1,1,[oe]),new F(2,8,1,1,[oe]),new F(3,8,1,1,[oe]),new F(4,8,1,1,[oe]),new F(5,8,1,1,[oe]),new F(6,8,1,1,[oe]),new F(7,8,1,1,[oe]),new F(8,8,1,1,[oe]),new F(9,8,1,1,[as]),new F(10,8,1,2,[ss]),new F(1,9,2,2,[wu]),new F(5,9,2,2,[wu]),new F(8,9,1,1,[oe]),new F(9,9,1,1,[as]),new F(10,9,1,2,[ss]),new F(8,10,1,1,[oe]),new F(9,10,1,1,[oe]),new F(10,10,1,1,[oe]),new F(9,11,1,1,[as]),new F(10,11,1,2,[ss])],e)}};t(ig,"Default");$M=ig});var og,bp,ng=n(()=>{ao();Cx();og=class extends pv{constructor(){super(tg)}};t(og,"LayoutRegistry");bp=new og});var oN={};var QM=n(()=>{ZM();ng();bp.register($M)});var eD=P(XM=>{"use strict";Object.defineProperty(XM,"__esModule",{value:!0});QM()});var ag,sg,Ax=n(()=>{ag=class{#e=[];constructor(...e){this.#e.push(...e)}isBetween(...e){return e.every(r=>this.#e.includes(r))&&e.length===this.#e.length}players(){return this.#e}};t(ag,"Interaction");sg=ag});var lg,tD,rD=n(()=>{de();Ax();lg=class extends S{constructor(){super(sg)}getByPlayer(e){return this.entries().filter(r=>r.players().includes(e))}getByPlayers(...e){return this.entries().filter(r=>r.isBetween(...e))}};t(lg,"InteractionRegistry");tD=new lg});var Cp,iD=n(()=>{Ax();Cp=class extends sg{constructor(...e){let r=e.map(o=>o.player());super(...r)}};t(Cp,"Contact")});var oD=n(()=>{iD()});var nN,nD,aD=n(()=>{rD();Je();oD();w();v();Ft();nN=t((i=tD,e=W)=>[new J(new l(r=>r.tile().getNeighbours().some(o=>e.getByTile(o).some(s=>s.player()!==r.player()))),new p(r=>r.tile().getNeighbours().forEach(o=>e.getByTile(o).filter(s=>s.player()!==r.player()).forEach(s=>i.register(new Cp(r,s))))))],"getRules"),nD=nN});var aN={};var sD=n(()=>{I();aD();d.register(...nD())});var mD=P(lD=>{"use strict";Object.defineProperty(lD,"__esModule",{value:!0});sD()});var mg,pg,Bx=n(()=>{mg=class{#e;#t;#r;constructor(e,r,o){this.#e=e,this.#t=r,this.#r=o}civilizationType(){return this.#e}mapGenerator(){return this.#t}startTile(){return this.#r}startTileForMap(e){let{x:r,y:o}=this.#r;return e.get(r,o)}};t(mg,"CivilizationStartTile");pg=mg});var sN,Fn,Gx=n(()=>{sN=t((i,e,r,o)=>{for(;r<0;)r+=e;for(;o<0;)o+=i;return r=r%e,o=o%i,o*e+r},"coordsToIndex"),Fn=sN});var lN,ql,ug=n(()=>{lN=t((i,e,r)=>{let o=i*e;for(;r<0;)r+=o;return r=r%o,[r%e,Math.floor(r/e)]},"indexToCoords"),ql=lN});var mN,pD,uD=n(()=>{ug();mN=t((i,e,r,o)=>{let[s,a]=ql(i,e,r),[m,u]=ql(i,e,o),f=[[-1,1],[-1,0],[-1,-1],[0,1],[0,0],[0,-1],[1,1],[1,0],[1,-1]],[c]=f.map(([y,h])=>[y*e,h*i]).map(([y,h])=>[s-m+y,a-u+h]).map(y=>Math.hypot(...y)).sort((y,h)=>y-h);return c},"distanceFrom"),pD=mN});var pN,Vl,Ux=n(()=>{Gx();ug();pN=t((i,e,r,o=!0)=>{let[s,a]=ql(i,e,r),m=Fn(i,e,s,a-1),u=Fn(i,e,s+1,a-1),f=Fn(i,e,s+1,a),c=Fn(i,e,s+1,a),y=Fn(i,e,s,a+1),h=Fn(i,e,s-1,a+1),G=Fn(i,e,s-1,a),D=Fn(i,e,s-1,a-1);return o?[m,f,y,G]:[m,u,f,c,y,h,G,D]},"getNeighbours"),Vl=pN});var Pp,cg,fg=n(()=>{Gx();uD();Ux();ug();Pp=class{#e;#t;#r;constructor(e,r,o={}){this.#e=e,this.#t=o,this.#r=r}coordsToIndex(e,r){return Fn(this.#e,this.#r,e,r)}distanceFrom(e,r){return pD(this.#e,this.#r,e,r)}generate(){throw new Error(`Generator#generate(): Must be overridden in '${this.constructor.name}'.`)}getNeighbours(e,r=!0){return Vl(this.#e,this.#r,e,r)}height(){return this.#e}indexToCoords(e){return ql(this.#e,this.#r,e)}options(){return this.#t}width(){return this.#r}};t(Pp,"Generator");cg=Pp});var uN,yg,Tp,dg=n(()=>{BO();GO();Py();fg();km();UO();MO();DO();EO();nu();Ay();FO();SO();uN={A:Zb,D:Qb,F:Cy,G:qs,H:Xb,J:eC,M:tC,O:rC,P:Fm,R:wy,S:iC,T:oC},yg=class extends cg{async generate(){return Array.from(`OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOAAAAAAAOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOAAOAOAAAOAAAAAAAAOOOOOOAOOOOOGGOOOOOTAGOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOTTTTAOOOOAAAAAAAAOOOOAAAAAATOOOOOAAOOOOOOOOOOOOOOOAAOOOOOTOOOOOOOOOOOOOOOOOO
OOOTTTTTTTTTAAOAOAAAAAOOOAAAAATOOOOOOOOOOOOOOOAOOOOOFFAAFFFFFOOFFFOOOOFFFOOOOOOO
OTPTGPPPPTTTTTOTAAAOOAOOOAAAATOOOOOOOOOOOOOOOAOOAAOFFGAFFFFFFFAFFFFFFFFFFOTOOOOO
OOOOOPGTPTOOTTAAAAAAAAOOAAGGOOOOOOOOOOGAAOOOOOOGOGFFFGFFFFFFFFAFFAFFFFFGFGGOOOOO
OOOOOGGFGPPTTAAOOOAOTOOOAGOOOOAOOOOOOAFGFPGFOAAFGTGFFFFFFFFFFFFFFFGFFGOGFFOOOOOO
OOOOPMGFPPPPTTOOOATAAOOOOOOOOOOOOOOOGFPGGFOFFFFFFGFFFFFFFFFFFFFFGFFFFGOOFOOOOOOO
OOOOPMGFGPPOTTTAATTTTOOOOOOOOOOHOOOPFGOGGGFFFGFGGGFFFFFFFFFFFFFFFFFFOOOOFGOOOOOO
OOOOPHFFGPGOPPPOPTTTTOOOOOOOOOGROOOOOPOGFGFFGFFFGFGFGGFGGFFFGFFFFFFFGOOOOPOOOOOO
OOOOGGHFGPPPPPPPPPTPPOOOOOOOOOOFOOOFOOOFFFRFFFFRGFPFFPFGPFGFFOFFFFFGPPGOOOOOOOOO
OOOGGGMGGGPPPOPPPPPOPOOOOOOOOOGGOOOGPPFFFGRRFRRRGGFGGGGGPGGFFFFDPPPPPPOOOOOOOOOO
OOOGGFMGRGRPGORRGOPOOOOOOOOOOOOOOGRGGGGFFGFRFRPGPGGGGGPPPPPPPPPPPPPPGPGOOOOOOOOO
OOGGGMMGRGRGGGGOOOOOOOOOOOOOOOOOGGRMMGGGGPGRPRRPPPPPPPPPPPPPPPPPPPPPGPGOPGOOOOOO
OOGGPPHGRRRGGGOOOOOOOOOOOOOOOOOOPGGGGFGRRGPRPDOOPPOPPPDPDDDPPPPPPDPPPGOOGOOOOOOO
OOGFPPFGGRGGGPOOOOOOOOOOOOOOOOPPPPOGHOOGRFOOOHPOGPPDPDPDDPPPPPPDDPPOPGOOMGOOOOOO
OOGPPDDGGRGGOOOOOOOOOOOOOOOOOOPPPOOOGHOOOGPPPPPOPPPPDPPHPDDDDDDPPPGOOOOOOPOOOOOO
OOPOGDDPOOOPOOOOOOOOOOOOOOOOOOOOOOOOOGOOOOOPPPPGPPPPPPHHMHHHHHHHHMHPGOOGOOOOOOOO
OOPOGDDOOOOPOOOOOOOOOOOOOOOOOOGPPDDOOOOOOOOPPRRHPPPDPPHPGHMMMMMHHHPPPGOOOOOOOOOO
OOOOGDGOOOOOOOOOOOOOOOOOOOOOOODPHHPPPGODPOPPPGRRPPPPPHHRDPGMHHMHHPPRRROOOOOOOOOO
OOOOGGPOPOOOGPOOOOOOOOOOOOOOOPPHDDDPPPPDDRGDPPDOPPPPHPRRDGGGHHHHHPGPPPOOOOOOOOOO
OOOOOGGPGOOOOGPOOOOOOOOOOOOOPPDDDDDPDDDDDRDOPDDOOOOHHRRDPGGRGGGHGPGGPOOOOOOOOOOO
OOOOOOOOGGOOOOOOOOOOOOOOOOOOPDDDDDDDDDDDSRSODDDDDDOOOOPPGGGRRPPGFGGGOOOGOOOOOOOO
OOOOOOOOOGOOOOOOOOOOOOOOOOOPDDDDDDPPPDDDDRDOOPDDDDPOOOOGGGGGOOGGGGGOOOOPGOOOOOOO
OOOOOOOOOPPOGPPGOOOOOOOOOOODDDDDDDPDDDDDDRDDOODDDDOOOOOOGGGOOOPPGGOOOOOGGOOOOOOO
OOOOOOOOOOPGFPPPGOOOOOOOOOODDDDDDDDPDPDPPDHHDOOPDOOOOOOOGGOOOOOGGGGOOOOOFGOOOOOO
OOOOOOOOOOOGHGGGGGGOOOOOOOOPPDPPPPDDDPPPPPPMDPOOGOOOOOOOPGOOOOOOOGGOOOOOOGOOOOOO
OOOOOOOOOOOHJJJGGGGROOOOOOOOPPDPPPPPPPPPPPPHMDPOOOOOOOOOOGOOOOOOOOOOOPOOOOOOOOOO
OOOOOOOOOOGHJRRJJRRRGOOOOOOOOPPPGOPPGPGGGGGGMDDPOOOOOOOOOOOOOOOOOOOGPPOOGPOOOOOO
OOOOOOOOOOPGJJRRRRJGFGGOOOOOOOOOOOOGGGGJJJGGODPPOOOOOOOOOOOOOOOGFGOOPGFGGGOGOOOO
OOOOOOOOOOOFGGJJGJJFGGGPOOOOOOOOOOOGGJJRRRGGHPPOOOOOOOOOOOOOOOOOGFOOGOPGOOOPGGOO
OOOOOOOOOOOGHGGGGGGGGGGOOOOOOOOOOOOGGRRRJJHOGGOOOOOOOOOOOOOOOOOOOGOOOOOOOOOOOGGO
OOOOOOOOOOOOGMFGGGGGGPOOOOOOOOOOOOOOGRJJJGHMGOOOOOOOOOOOOOOOOOOOOPPOOOOOGOOOOOOO
OOOOOOOOOOOOGFMGGFGPPPOOOOOOOOOOOOOORRGGGGGMPOOOOOOOOOOOOOOOOOOOOOGOOOOOOOPGOOOO
OOOOOOOOOOOOOOHMGGRPGGOOOOOOOOOOOOOOOGGGGGGHGOOOOOOOOOOOOOOOOOOOOOOOOOOGGPGPGGOO
OOOOOOOOOOOOOOGHGGRGGOOOOOOOOOOOOOOOODPPGGGGGGOOOOOOOOOOOOOOOOOOOOOOOOOGGPPPPGOO
OOOOOOOOOOOOOOGMGPRROOOOOOOOOOOOOOOOPPPPPPPGGGOPOOOOOOOOOOOOOOOOOOOOGGPPPDDDPPPO
OOOOOOOOOOOOOOGMGGGPOOOOOOOOOOOOOOOOHPDDPPGGOOOPOOOOOOOOOOOOOOOOOOOGGGPDDDDDDPFO
OOOOOOOOOOOOOOPMGGGOOOOOOOOOOOOOOOOOOPPDPPGGOOOGOOOOOOOOOOOOOOOOOOOGPDDDDDDDDPPO
OOOOOOOOOOOOOOOMGPOOOOOOOOOOOOOOOOOOOHPPPGGGOOGPOOOOOOOOOOOOOOOOOOOGDDDDDPDDDPGO
OOOOOOOOOOOOOOOGGOOOOOOOOOOOOOOOOOOOOHPPGHGOOOPOOOOOOOOOOOOOOOOOOOODDDDDDDPDDHFO
OOOOOOOOOOOOOOOPGOOOOOOOOOOOOOOOOOOOOODPGHGOOOOOOOOOOOOOOOOOOOOOOOODDDOOGDDDHGOO
OOOOOOOOOOOOOOOOGOOOOOOOOOOOOOOOOOOOOOPGGGOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOGHHHGOOO
OOOOOOOOOOOOOOOOFOOOOOOOOOOOOOOOOOOOOOGOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOPGOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
`.replace(/\n/g,"")).map(e=>new uN[e])}height(){return 50}width(){return 80}};t(yg,"Earth");Tp=yg});var gg,cD,fD=n(()=>{Bx();dg();gg=class extends pg{constructor(e,r){super(e,Tp,r)}};t(gg,"EarthStartTile");cD=gg});var Au,Lwe,yD,dD=n(()=>{Bx();de();Au=class extends Ql{constructor(){super(pg)}getByCivilization(e){let[r]=this.getBy("civilizationType",e);if(!r)throw new TypeError(`${e.name} does not have a registered start tile.`);return r}getStartTileByCivilizationAndWorld(e,r){return this.getByCivilization(e).startTileForMap(r)}};t(Au,"CivilizationStartTileRegistry");Lwe=new Au,yD=Au});var hg,Og,Mx=n(()=>{dD();dg();hg=class extends yD{entries(){return super.entries().filter(e=>e.mapGenerator()===Tp)}};t(hg,"EarthStartTileRegistry");Og=new hg});var cN={};var gD=n(()=>{gx();fD();Mx();Og.register(...[[Ba,{x:12,y:18}],[Ga,{x:5,y:23}],[Ua,{x:45,y:22}],[Ma,{x:66,y:19}],[Da,{x:41,y:24}],[Ea,{x:31,y:14}],[Fa,{x:33,y:16}],[Sa,{x:38,y:15}],[ka,{x:39,y:18}],[Ya,{x:57,y:26}],[La,{x:49,y:19}],[za,{x:36,y:19}],[Na,{x:44,y:12}],[ja,{x:42,y:42}]].map(([i,e])=>new cD(i,e)))});var OD=P(hD=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});gD()});var fN,RD,xD=n(()=>{w();v();dO();fN=t(()=>[new Fs(new l(i=>i<252),new p(i=>i*20-4020)),new Fs(new l(i=>i>251),new l(i=>i<302),new p(i=>(i-151)*10+1e3)),new Fs(new l(i=>i>301),new l(i=>i<352),new p(i=>(i-201)*5+1500)),new Fs(new l(i=>i>351),new l(i=>i<402),new p(i=>(i-251)*2+1750)),new Fs(new l(i=>i>401),new p(i=>i-301+1850))],"getRules"),RD=fN});var yN={};var vD=n(()=>{I();xD();d.register(...RD())});var CD=P(bD=>{"use strict";Object.defineProperty(bD,"__esModule",{value:!0});vD()});var dN,PD,TD=n(()=>{Hh();Ze();ho();Ye();zO();w();v();Bl();Um();va();dN=t((i=N,e=H)=>[new El(new l((r,o)=>i.getByPlayer(o.player()).available().length>0),new p((r,o)=>new Rs(r,o))),new El(new l(r=>[Re,le,ie].some(o=>r.tile().terrain()instanceof o)),new l((r,o)=>r.tile().getSurroundingArea().score(null,[[pn,8],[Ra,3],[xa,1]])>=150),new l(r=>r.tile().getSurroundingArea(4).every(o=>e.getByTile(o)===null)),new p((r,o)=>new xs(r,o))),new El(new p((r,o)=>new bs(r,o))),new El(new p((r,o)=>new Cs(r,o)))],"getRules"),PD=dN});var gN,ID,wD=n(()=>{q();NO();v();gN=t((i=b)=>[new Ly(new p((e,r)=>{i.emit("goody-hut:action-performed",e,r)}))],"getRules"),ID=gN});var hN,AD,BD=n(()=>{q();tl();jO();v();hN=t((i=Vr,e=b,r=()=>Math.random())=>[new Km(new p(o=>i.unregister(o))),new Km(new p((o,s)=>{let a=o.actions(s),m=a[Math.floor(a.length*r())];o.action(m)})),new Km(new p((o,s)=>{e.emit("goody-hut:discovered",o,s)}))],"getRules"),AD=hN});var Rg,Ip,Dx=n(()=>{A();Rg=class extends g{};t(Rg,"Distribution");Ip=Rg});var ON,GD,UD=n(()=>{tl();w();Dx();ON=t((i=Vr,e=()=>Math.random())=>[new Ip(new l(r=>r.isLand())),new Ip(new l(r=>r.getSurroundingArea(3).every(o=>i.getByTile(o)===null))),new Ip(new l(()=>e()<.05))],"getRules"),GD=ON});var RN,MD,DD=n(()=>{tl();Dn();I();v();Wh();RN=t((i=Vr,e=()=>Math.random(),r=d)=>[new jc(new p((o,s)=>{let a=[kr,Yr],m=a[Math.floor(a.length*e())];return new m(null,s.player(),s.tile(),r)}))],"getRules"),MD=RN});var xN,ED,FD=n(()=>{tl();w();v();Ft();xN=t((i=Vr)=>[new J(new l(e=>i.getByTile(e.tile())!==null),new p(e=>{i.getByTile(e.tile()).process(e)}))],"getRules"),ED=xN});var xg,ml,vg=n(()=>{A();xg=class extends g{};t(xg,"Built");ml=xg});var vN,SD,kD=n(()=>{tl();I();vg();v();WO();Dx();vN=t((i=Vr,e=d)=>[new ml(new p(r=>{let o=e.get(Ip);r.forEach(s=>{o.every(a=>a.validate(s))&&i.register(new jy(s))})}))],"getRules"),SD=vN});var bN={};var YD=n(()=>{TD();wD();BD();UD();DD();I();FD();kD();d.register(...PD(),...ID(),...AD(),...GD(),...MD(),...ED(),...SD())});var zD=P(LD=>{"use strict";Object.defineProperty(LD,"__esModule",{value:!0});YD()});var CN={};var ND=n(()=>{Mn();Jy();qm.register(At,lt,er,mt,Rt)});var PN,jD,WD=n(()=>{vn();Mn();w();v();aO();Kn();PN=t((i=dt)=>[new at(new l(e=>!i.getByPlayer(e).is(Wi)),new p(e=>[new Us(e,i.getByPlayer(e))]))],"getRules"),jD=PN});var TN,HD,_D=n(()=>{Jy();vn();I();wl();Mn();v();em();qO();TN=t((i=qm,e=dt,r=d)=>[new vi(new gs,new p(o=>{let s=new Xy(o,i,r);s.set(new er),e.register(s)}))],"getRules"),HD=TN});var IN,KD,qD=n(()=>{hr();Mn();Ye();_O();w();IN=t((i=N)=>[new lu(new l(e=>e===er)),...[[At,Tt],[lt,bo],[mt,ri],[Rt,Ni]].map(([e,r])=>new lu(new l(o=>o===e),new l((o,s)=>i.getByPlayer(s).completed(r))))],"getRules"),KD=IN});var wN,VD,JD=n(()=>{q();co();KO();w();v();wN=t((i=b,e=me)=>[new mu(new p((r,o)=>{i.emit("player:government:changed",r,o)})),new mu(new l(r=>{try{return e.getByPlayer(r),!0}catch(o){if(o instanceof TypeError&&o.message.match(/Wrong number of player worlds exist/))return!1;throw o}}),new p(r=>{e.getByPlayer(r).entries().forEach(s=>s.tile().clearYieldCache(r))}))],"getRules"),VD=wN});var AN={};var $D=n(()=>{I();WD();_D();qD();JD();d.register(...jD(),...HD(),...KD(),...VD())});var QD=P(ZD=>{"use strict";Object.defineProperty(ZD,"__esModule",{value:!0});ND();$D()});var bg,XD,eE=n(()=>{A();bg=class extends g{};t(bg,"TurnEnd");XD=bg});var BN,tE,rE=n(()=>{Bm();q();I();eE();BN=t((i=mn,e=d,r=b)=>[["player:turn-end",o=>{i.unregister(o),e.process(XD,o);let[s]=i.entries();if(!s){r.emit("turn:end");return}r.emit("player:turn-start",s)}]],"getEvents"),tE=BN});var GN,iE,oE=n(()=>{Fl();q();I();Cu();GN=t((i=Vo,e=b,r=d)=>[["player:turn-start",o=>{r.process(Ha,o),i.getByPlayer(o).takeTurn().catch(a=>console.error(a)).finally(()=>{e.emit("player:turn-end",o)})}]],"getEvents"),iE=GN});var UN,nE,aE=n(()=>{Bm();q();Es();UN=t((i=Pi,e=mn,r=b)=>[["turn:start",()=>{e.register(...i.entries());let[o]=e.entries();r.emit("player:turn-start",o)}]],"getEvents"),nE=UN});var MN={};var sE=n(()=>{q();rE();oE();aE();[...tE(),...iE(),...nE()].forEach(([i,e])=>b.on(i,e))});var Cg,aa,Bu=n(()=>{A();Cg=class extends g{};t(Cg,"Defeated");aa=Cg});var DN,lE,mE=n(()=>{Ze();I();gl();w();Bu();v();DN=t((i=H,e=d)=>[new Pr(new l((r,o,s)=>i.getByPlayer(s).filter(a=>a!==r).length===0),new p((r,o,s)=>{e.process(aa,s,o)}))],"getRules"),lE=DN});var EN,pE,uE=n(()=>{Ze();I();w();Bu();hl();v();EN=t((i=H,e=d)=>[new Kr(new l((r,o)=>i.getByPlayer(r.player()).filter(s=>s!==r).length===0),new p((r,o)=>e.process(aa,r.player(),o)))],"getRules"),pE=EN});var Ex,FN,cE,fE=n(()=>{Kn();w();v();df();ds();Ex=new at(new _r(9001),new l(i=>{Ex.disable();let e=i.mandatoryActions();return Ex.enable(),e.length===0}),new p(i=>[new yf(i,null)])),FN=t(()=>[Ex],"getRules"),cE=FN});var SN,yE,dE=n(()=>{q();wl();v();SN=t((i=b)=>[new vi(new p(e=>{i.emit("player:added",e)}))],"getRules"),yE=SN});var kN,gE,hE=n(()=>{Bm();q();Es();w();Bu();v();kN=t((i=mn,e=Pi,r=b)=>[new aa(new l(o=>i.includes(o)),new p(o=>i.unregister(o))),new aa(new l(o=>e.includes(o)),new p(o=>e.unregister(o))),new aa(new p((o,s)=>{r.emit("player:defeated",o,s)}))],"getRules"),gE=kN});var Pg,Tg,Fx=n(()=>{A();Pg=class extends g{};t(Pg,"Spawn");Tg=Pg});var YN,OE,RE=n(()=>{I();v();ax();Fx();YN=t((i=d)=>[new Tg(new p((e,r)=>{new wT(null,e,r,i)}))],"getRules"),OE=YN});var LN,xE,vE=n(()=>{Ze();I();Je();v();Bl();em();cp();Um();va();Cu();Ti();LN=t((i=d,e=H,r=W)=>[new Ha(new gs,new p(o=>{e.getByPlayer(o).forEach(s=>{let a=s.yields();Ca(a,pn,Ra,xa).reduce((m,u,f)=>(m[f].set(u,"Consolidated"),m),[new pn(0,"Consolidated"),new Ra(0,"Consolidated"),new xa(0,"Consolidated")]).forEach(m=>i.process($o,m,s,a))})})),new Ha(new p(o=>r.getByPlayer(o).forEach(s=>{if(s.destroyed())return;s.moves().set(s.movement());let a=s.busy();if(!a){s.setActive(),s.setWaiting(!1);return}!a.validate()||a.process()})))],"getRules"),xE=LN});var zN,bE,CE=n(()=>{q();v();nO();zN=t((i=b)=>[new If(new p((e,r)=>{i.emit("player:visibility-changed",e,r)}))],"getRules"),bE=zN});var NN,PE,TE=n(()=>{Es();co();iy();v();NN=t((i=Pi,e=me)=>[new Pa(new p(r=>{r.clearYieldCache(null),i.forEach(o=>{e.getByPlayer(o).getByTile(r)!==null&&r.clearYieldCache(o)})}))],"getRules"),PE=NN});var jN,IE,wE=n(()=>{Ze();I();w();Bu();_p();v();jN=t((i=H,e=d)=>[new ln(new l((r,o)=>i.getByPlayer(r.player()).length===0),new p((r,o)=>e.process(aa,r.player(),o)))],"getRules"),IE=jN});var WN,AE,BE=n(()=>{co();v();uO();WN=t((i=me)=>[new Yf(new p((e,r)=>{e.clearYieldCache(r);let o=i.getByPlayer(r);o.register(e),o.getByTile(e).update()}))],"getRules"),AE=WN});var Ig,wg,Sx=n(()=>{A();Ig=class extends g{};t(Ig,"PickStartTile");wg=Ig});var HN,GE,UE=n(()=>{hx();Fl();q();Es();co();I();vg();v();Bl();km();Sx();nu();Af();Um();Ay();va();Fx();HN=t((i=Bd,e=Vo,r=b,o=Pi,s=me,a=d,m=()=>Math.random())=>[new ml(new p(u=>o.entries().forEach(f=>s.register(new xm(f,u))))),new ml(new p(u=>{let f=new Map,c=new Map,y=t((B,E=null)=>(f.has(B)||f.set(B,B.score(E,[[pn,8],[Ra,3],[xa,1]])),f.get(B)),"tileScore"),h=t((B,E=null)=>(c.has(B)||c.set(B,B.getSurroundingArea().entries().reduce((Y,pe)=>Y+y(pe,E),0)),c.get(B)),"areaScore");r.emit("world:generate-start-tiles");let G=[],D=u.entries().filter(B=>[qs,Fm,wy].some(E=>B.terrain()instanceof E)).map(B=>({tile:B,score:h(B)})).sort(({score:B},{score:E})=>E-B).map(({tile:B})=>B);r.emit("world:start-tiles",D),e.entries().reduce((B,E)=>B.then(async()=>{let Y=E.player();await E.chooseCivilization(i.entries()),i.unregister(Y.civilization().sourceClass());let[pe]=a.process(wg,u,Y,G);if(!pe)throw new TypeError("Not enough `startingSquare`s.");G.push(pe),a.process(Tg,Y,pe)}),Promise.resolve()).then(()=>r.emit("game:start"))})),new ml(new p(u=>{r.emit("world:built",u)}))],"getRules"),GE=HN});var _N={};var ME=n(()=>{mE();uE();I();fE();dE();hE();RE();vE();CE();TE();wE();BE();UE();d.register(...lE(),...pE(),...cE(),...yE(),...gE(),...OE(),...xE(),...bE(),...PE(),...IE(),...AE(),...GE())});var EE=P(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});sE();ME()});var KN={};var FE=n(()=>{hr();U();R.register(Ui,Oo,Mi,ta,gt,Di,Ro,$r,Ei,bn,xo,wr,Zr,Tt,Fi,Qr,Xr,vo,Si,bo,Ar,ht,Cn,Pn,ra,Co,Aa,Tn,Ot,In,It,Br,ki,wn,Gr,$t,ei,Zt,Qt,Ur,Yi,ti,ri,Xt,dr,ii,Po,oi,Li,An,Bn,ni,Gn,zi,wt,ai,To,Io,wo,Ao,Bo,Ni,Un,Go,ji,gr,Mr)});var SE=n(()=>{Vh()});var qN,kE,YE=n(()=>{Ye();Kn();SE();w();v();qN=t((i=N)=>[new at(new l(e=>i.getByPlayer(e).researching()===null),new l(e=>i.getByPlayer(e).available().length>0),new p(e=>[new bl(e,i.getByPlayer(e))]))],"getRules"),kE=qN});var VN,LE,zE=n(()=>{U();Ye();I();wl();v();ac();VN=t((i=R,e=N,r=d,o=()=>Math.random())=>[new vi(new p(s=>e.register(new im(s,i,r)))),new vi(new p(s=>{let a=e.getByPlayer(s);for(let m=0,u=Math.min(a.available().length,Math.floor(4*o()));m<u;m++){let f=a.available();a.addAdvance(f[Math.floor(o()*f.length)])}}))],"getRules"),LE=VN});var JN,NE,jE=n(()=>{Ye();gl();v();w();JN=t((i=N,e=()=>Math.random())=>[new Pr(new l((r,o,s)=>i.getByPlayer(s).complete().some(a=>!i.getByPlayer(o).completed(a.constructor))),new p((r,o,s)=>{let a=i.getByPlayer(o),m=i.getByPlayer(s).complete().filter(u=>!a.completed(u.constructor));a.addAdvance(m.map(u=>u.constructor)[Math.floor(e()*m.length)])}))],"getRules"),NE=JN});var $N,WE,HE=n(()=>{q();Qu();v();$N=t((i=b)=>[new hs(new p((e,r)=>{i.emit("player:research-complete",e,r)}))],"getRules"),WE=$N});var ZN,_E,KE=n(()=>{Eh();v();ZN=t(()=>[new ec(new p((i,e)=>(e.complete().length+1)*(6+2*0)))],"getRules"),_E=ZN});var QN,qE,VE=n(()=>{up();Ye();I();w();v();cp();bd();QN=t((i=N,e=d)=>[new $o(new l(r=>r instanceof rr),new l((r,o,s)=>!e.get(oa).some(a=>a.validate(o,s))),new p((r,o)=>i.getByPlayer(o.player()).add(r)))],"getRules"),qE=QN});var XN,JE,$E=n(()=>{hr();w();v();Fh();XN=t(()=>[...[[Ui,Co,Ar],[Mi,Ur,Xt],[ta,Go,Li],[gt,Zr,Ao],[Di,Ni,ji],[Ro,Xr,ki],[bn,gr,Yi],[xo,ra,In],[wr,Oo],[Zr,zi,Pn],[Tt,oi,It],[Fi,ht,Ur],[Qr,Pn,Ni],[Xr,Si,Zt],[vo,Di,It],[Si,$r],[bo,oi,Gr],[Ar,ti,$t],[ht,Cn,Ar],[Cn,Xr,Un],[Pn,Ot,bn],[ra,Zt,ri],[Co,Zr,Li],[Aa,Po,Bo],[Tn,vo,Yi],[Ot,Br,ki],[It,ni,Di],[Br,Cn,Gr],[ki,$r],[wn,Qt,Tt],[Gr,wr,Mr],[$t,dr,Li],[ei,Oo],[Qt,vo,gt],[Ur,Oo,Zt],[Yi,oi,ji],[ti,Ot,gr],[ri,wr,Xt],[Xt,Ei],[dr,Mi,ei],[ii,Qt,ta],[Po,ii,ht],[oi,Xt,Gr],[Li,dr,Ur],[An,zi,Io],[ni,Ro,wo],[Gn,bo,Qt],[zi,vo,bn],[wt,oi,Mr],[ai,Fi,An],[To,ht,Ui],[Io,Fi,To],[wo,Br,Li],[Ao,ti,It],[Bo,Qt,An],[Ni,wr,Gr],[Go,Mi,gr],[ji,wr,Si],[gr,oi,Ur],[Mr,Oo]].map(([i,...e])=>new rc(new l(r=>r===i),new p((r,o)=>e.every(s=>o.some(a=>a instanceof s)))))],"getRules"),JE=XN});var ej,ZE,QE=n(()=>{q();v();oc();ej=t((i=b)=>[new rm(new p((e,r)=>{i.emit("player:research",e,r)}))],"getRules"),ZE=ej});var tj={};var XE=n(()=>{YE();zE();jE();HE();KE();I();VE();$E();QE();d.register(...kE(),...LE(),...NE(),...WE(),..._E(),...qE(),...JE(),...ZE())});var t0=P(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});FE();XE()});var ls=n(()=>{xx();vx();Px();Tx();Ix();wx()});var rj={};var r0=n(()=>{ls();Rl();lo.register(Lt,zt,ir,Cr,Mt,bt)});var Ag,Bg,kx=n(()=>{A();Ag=class extends g{};t(Ag,"Built");Bg=Ag});var Gg,Ug,Yx=n(()=>{A();Gg=class extends g{};t(Gg,"ChanceOfSuccess");Ug=Gg});var Mg,Dg,Lx=n(()=>{A();Mg=class extends g{};t(Mg,"FlightTime");Dg=Mg});var Eg,Fg,zx=n(()=>{A();Eg=class extends g{};t(Eg,"Landed");Fg=Eg});var Sg,i0,o0=n(()=>{A();Sg=class extends g{};t(Sg,"Launch");i0=Sg});var kg,Gu,Nx=n(()=>{A();kg=class extends g{};t(kg,"Lost");Gu=kg});var Yg,wp,Lg=n(()=>{Z();I();Kt();kx();Yx();Qd();Lx();zx();o0();Nx();Yg=class extends k{#e=!1;#t;#r;#i;#o;#n=null;#a;constructor(e,r,o=d,s=ae,a=()=>Math.random()){super(),this.#r=e,this.#t=r,this.#o=o,this.#a=s,this.#i=a,this.addKey("activeParts","chanceOfSuccess","flightTime","inactiveParts","launched","layout","player","successful","yields")}activeParts(){return this.#t.activeSlots().filter(e=>!e.empty()).map(e=>e.part())}add(e){let[r]=this.#o.process(_l,e,this.#t);!r||(r.fill(e),this.#o.process(Bg,e,this))}chanceOfSuccess(){return Math.max(...this.#o.process(Ug,this),0)}check(){if(!(this.#n!==null||this.#e===!1||this.#e+this.flightTime()<this.#a.value())){if(this.#n=this.chanceOfSuccess()>this.#i(),this.#n){this.#o.process(Fg,this);return}this.#o.process(Gu,this)}}flightTime(){return Math.min(...this.#o.process(Dg,this),1/0)}inactiveParts(){return this.#t.inactiveSlots().filter(e=>!e.empty()).map(e=>e.part())}launch(){this.#o.process(i0,this),this.#e=this.#a.value()}launched(){return this.#e}layout(){return this.#t}player(){return this.#r}successful(){return this.#n}yields(){return this.activeParts().flatMap(e=>e.yields())}};t(Yg,"Spaceship");wp=Yg});var zg,Zo,Jl=n(()=>{de();Lg();zg=class extends S{constructor(){super(wp)}getActiveByPlayer(e){let[r]=this.getBy("player",e).filter(o=>o.launched()===!1||o.successful()===null);return r||null}};t(zg,"SpaceshipRegistry");Zo=new zg});var Ng,pt,Sn=n(()=>{de();Ae();Ng=class extends S{constructor(){super(Oe)}getByCity(e){return this.getBy("city",e)}getByPlayer(e){return this.filter(r=>r.city().player()===e)}};t(Ng,"WonderRegistry");pt=new Ng});var kn,jg,Wg=n(()=>{Ae();kn=class extends Ce{};t(kn,"ApolloProgram");jg=kn});var ij,n0,a0=n(()=>{cm();ls();Ye();Jl();Sn();Wg();w();v();na();id();od();ad();ij=t((i=pt,e=N,r=Zo)=>[new ut(new l((o,s)=>Object.prototype.isPrototypeOf.call(vt,s)),new p(()=>new l(()=>i.some(o=>o instanceof jg)))),new ut(new l((o,s)=>Object.prototype.isPrototypeOf.call(vt,s)),new p(o=>new l(()=>{let s=r.getActiveByPlayer(o.player());return s===null?!1:s.launched()===!1}))),...[[bt,nd],[Lt,uu],[Mt,uu],[zt,Vm],[ir,Vm],[Cr,Vm]].map(([o,s])=>new ut(new l((a,m)=>m===o),new p(a=>new l(()=>e.getByPlayer(a.player()).completed(s)))))],"getRules"),n0=ij});var oj,s0,l0=n(()=>{fm();ls();oj=t(()=>[...[[Lt,160],[zt,320],[ir,320],[Cr,320],[Mt,160],[bt,80]].flatMap(([i,e])=>vs(i,e))],"getRules"),s0=oj});var nj,m0,p0=n(()=>{Bm();ng();I();Jl();Kt();Wg();ym();w();v();na();Lg();nj=t((i=mn,e=Zo,r=bp,o=d,s=ae,a=()=>Math.random())=>[new Ri(new l((m,u)=>u instanceof jg),new p(()=>{let[m]=r.entries(),u=new m(o);i.entries().forEach(f=>e.register(new wp(f,u,o,s,a)))})),new Ri(new l((m,u)=>u instanceof vt),new l((m,u)=>e.getActiveByPlayer(u.city().player())!==null),new p((m,u)=>{let f=u;e.getActiveByPlayer(f.city().player()).add(f)}))],"getRules"),m0=nj});var aj,u0,c0=n(()=>{w();v();na();Sc();aj=t(()=>[new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(vt,i.building().item())),new l(i=>i.progress().value()===0),new p((i,e)=>(e.add(i.remaining()*8),e))),new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(vt,i.building().item())),new l(i=>i.progress().value()>0),new p((i,e)=>(e.add(i.remaining()*4),e)))],"getRules"),u0=aj});var sj,f0,y0=n(()=>{Jl();Kn();w();v();rO();sj=t((i=Zo)=>[new at(new l(e=>i.getActiveByPlayer(e)!==null),new p(e=>[new Ev(e,i.getActiveByPlayer(e))]))],"getRules"),f0=sj});var jx,lj,d0,g0=n(()=>{ls();bx();w();v();jx=new Kl(new l(i=>i.part()instanceof Mt),new p((i,e)=>{jx.disable();let r=e.activeSlots();return jx.enable(),e.getAdjacent(i).some(o=>o.part()instanceof Lt&&r.includes(o))})),lj=t(()=>[new Kl(new p(i=>i.part()!==null)),new Kl(new l(i=>[Lt,zt,ir,Cr].some(e=>i.part()instanceof e)),new p((i,e)=>e.getAdjacent(i).some(r=>r.part()instanceof bt))),jx],"getRules"),d0=lj});var mj,h0,O0=n(()=>{q();kx();v();mj=t((i=b)=>[new Bg(new p(e=>{i.emit("player:spaceship:part-built",e.city().player())}))],"getRules"),h0=mj});var Yn,R0=n(()=>{Me();Yn=class extends L{};t(Yn,"Energy")});var sa,x0=n(()=>{Me();sa=class extends L{};t(sa,"LifeSupport")});var ro,v0=n(()=>{Me();ro=class extends L{};t(ro,"Mass")});var pl,b0=n(()=>{Me();pl=class extends L{};t(pl,"Population")});var Hg=n(()=>{R0();x0();v0();b0()});var pj,C0,P0=n(()=>{Hg();ls();Yx();v();pj=t(()=>[new Ug(new p(i=>{let[e,r,o,s,a]=i.yields().reduce(([h,G,D,B,E],Y)=>(Y instanceof Yn&&Y.value()>0&&(h+=Y.value()),Y instanceof Yn&&Y.value()<0&&(G+=Math.abs(Y.value())),Y instanceof sa&&Y.value()>0&&(D+=Y.value()),Y instanceof sa&&Y.value()<0&&(B+=Math.abs(Y.value())),Y instanceof pl&&(E+=Y.value()),[h,G,D,B,E]),[0,0,0,0,0]),[m,u]=i.activeParts().reduce(([h,G],D)=>(D instanceof Lt&&h++,D instanceof Mt&&G++,[h,G]),[0,0]);if([e,o,a,m,u].some(h=>h===0))return 0;let f=Math.min(m/u,1),c=Math.min(s/o,1),y=Math.min(r/e,1);return f*c*y}))],"getRules"),C0=pj});var uj,T0,I0=n(()=>{Qd();w();v();ls();uj=t(()=>[new _l(new l(i=>i instanceof bt),new l((i,e)=>e.slots().filter(r=>r.accepts(i)&&r.empty()).length>0),new p((i,e)=>{let r=e.slots().filter(s=>s.accepts(i)&&s.empty()),[o]=r.sort((s,a)=>e.getAdjacent(a).filter(m=>m.part()instanceof bt).length-e.getAdjacent(s).filter(m=>m.part()instanceof bt).length||e.getAdjacent(a).filter(m=>!m.empty()).length-e.getAdjacent(s).filter(m=>!m.empty()).length||Math.abs(s.x()-8)-Math.abs(a.x()-8)||Math.abs(s.y()-6)-Math.abs(a.y()-6));return o})),new _l(new l(i=>!(i instanceof bt)),new l((i,e)=>e.slots().filter(r=>r.accepts(i)&&r.empty()).length>0),new p((i,e)=>{let r=e.slots().filter(s=>s.accepts(i)&&s.empty()),[o]=r.sort((s,a)=>e.getAdjacent(a).filter(m=>!m.empty()).length-e.getAdjacent(s).filter(m=>!m.empty()).length||Math.abs(s.x()-8)-Math.abs(a.x()-8)||Math.abs(s.y()-6)-Math.abs(a.y()-6));return o}))],"getRules"),T0=uj});var cj,w0,A0=n(()=>{Kt();gO();Lx();v();Hg();ls();Ti();cj=t((i=Gm,e=ae)=>[new Dg(new p(r=>{let o=Le(r.yields(),ro),s=r.activeParts().reduce((c,y)=>c+(y instanceof Mt?1:0),0),a=Math.trunc(o/20/(1+s*10)*10)/10,m=i.value(),u=m+a,f=e.value();for(;i.value(f)<u;)f++;return f}))],"getRules"),w0=cj});var fj,B0,G0=n(()=>{q();v();zx();fj=t((i=b)=>[new Fg(new p(e=>{i.emit("player:spaceship:landed",e.player())}))],"getRules"),B0=fj});var yj,U0,M0=n(()=>{q();ng();I();Jl();Kt();v();Nx();Lg();yj=t((i=Zo,e=bp,r=d,o=ae,s=b,a=()=>Math.random())=>[new Gu(new p(m=>{s.emit("player:spaceship:lost",m.player())})),new Gu(new p(m=>{let[u]=e.entries(),f=new u(r);i.register(new wp(m.player(),f,r,o,a))}))],"getRules"),U0=yj});var dj,D0,E0=n(()=>{Hg();ls();w();v();Rx();dj=t(()=>[...[[Lt,ro,400],[zt,Yn,-50],[zt,sa,-100],[zt,ro,1600],[zt,pl,1e4],[ir,Yn,-50],[ir,sa,100],[ir,ro,1600],[Cr,Yn,100],[Cr,ro,400],[Mt,ro,400],[bt,ro,100]].map(([i,e,r])=>new Jd(new l(o=>o instanceof i),new p(o=>new e(r,o.id()))))],"getRules"),D0=dj});var _g,Kg,Wx=n(()=>{A();_g=class extends g{};t(_g,"Start");Kg=_g});var gj,F0,S0=n(()=>{Jl();v();Wx();gj=t((i=Zo)=>[new Kg(new p(()=>{i.entries().forEach(e=>e.check())}))],"getRules"),F0=gj});var hj={};var k0=n(()=>{a0();l0();p0();c0();I();y0();g0();O0();P0();I0();A0();G0();M0();E0();S0();d.register(...n0(),...s0(),...m0(),...u0(),...f0(),...d0(),...h0(),...C0(),...T0(),...w0(),...B0(),...U0(),...D0(),...F0())});var L0=P(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});r0();k0()});var qg,ul,Uu=n(()=>{Me();qg=class extends L{};t(qg,"TradeRate");ul=qg});var ms,z0=n(()=>{bu();Uu();ms=class extends ul{};t(ms,"Luxuries"),ms.tradeYield=WG});var ps,N0=n(()=>{gd();Uu();ps=class extends ul{};t(ps,"Research"),ps.tradeYield=rr});var us,j0=n(()=>{gm();Uu();us=class extends ul{};t(us,"Tax"),us.tradeYield=zc});var Hx=n(()=>{z0();N0();j0()});var Vg,cl,Mu=n(()=>{ao();Uu();Vg=class extends He{constructor(){super(ul)}};t(Vg,"AvailableTradeRateRegistry");cl=new Vg});var Oj={};var W0=n(()=>{Hx();Mu();cl.register(ms,ps,us)});var H0=n(()=>{yd();va()});var Jg,$g,_x=n(()=>{Z();Jg=class extends We{#e=100;#t;#r=[];constructor(e,...r){super(),this.#t=e,this.#r=r,this.addKey("all")}all(){return[...this.#r]}balance(e){if(this.total()===1)return;let r=1-e.value(),o=this.#r.filter(a=>a!==e),s=o.reduce((a,m)=>a+m.value(),0);o.forEach(a=>a.set(a.value()/s*r)),this.total()<1&&o[Math.floor(o.length*Math.random())].add(1-this.total()),this.total()>1&&o[Math.floor(o.length*Math.random())].subtract(1-this.total())}get(e){let[r]=this.#r.filter(o=>o instanceof e);return r}player(){return this.#t}set(e,r){let o=this.get(e);o.set(r),this.balance(o)}setAll(e){if(e.reduce((r,[,o])=>r+o,0)!==1)throw new TypeError("Invalid rates provided, must sum to 1.");e.forEach(([r,o])=>this.get(r).set(o))}total(){return Math.round(this.#r.reduce((e,r)=>e+r.value(),0)*this.#e)/this.#e}};t(Jg,"PlayerTradeRates");$g=Jg});var Zg,fl,Du=n(()=>{de();_x();Zg=class extends S{constructor(){super($g)}getByPlayer(e){let r=this.getBy("player",e);if(r.length!==1)throw new TypeError("Wrong number of PlayerTradeRates for player");return r[0]}};t(Zg,"PlayerTradeRatesRegistry");fl=new Zg});var Rj,_0,K0=n(()=>{Mu();H0();Du();v();um();Ti();Rj=t((i=cl,e=fl)=>[new pm(new p((r,o)=>{let s=e.getByPlayer(r.player()),a=Math.max(0,Le(o,se)),m=a;return i.entries().map(u=>{let f=u.tradeYield,c=Math.min(Math.ceil(a*s.get(u).value()),m);return m-=c,new f(c,u.name)})}))],"getRules"),_0=Rj});var xj,q0,V0=n(()=>{Du();Kn();qh();v();xj=t((i=fl)=>[new at(new p(e=>[new ws(e,i.getByPlayer(e))]))],"getRules"),q0=xj});var vj,J0,$0=n(()=>{Mu();Du();Hx();wl();v();_x();vj=t((i=cl,e=fl)=>[new vi(new p(r=>{let o=[new us(.5),new ps(.5),new ms(0)],s=i.entries(),a=new $g(r,...s.map(m=>{let[u]=o.filter(f=>f instanceof m);return new m(u||0)}));e.register(a)}))],"getRules"),J0=vj});var Qg,bj,Z0,Q0=n(()=>{Mu();Ze();I();v();em();cp();Cu();Ti();Qg=[],bj=t((i=d,e=H,r=cl)=>[new Ha(new gs,new p(o=>{Qg.length===0&&r.entries().forEach(s=>Qg.push(s.tradeYield)),e.getByPlayer(o).forEach(s=>{let a=s.yields();Ca(a,...Qg).reduce((m,u,f)=>(m[f].set(u,"Consolidated"),m),Qg.map(m=>new m)).forEach(m=>i.process($o,m,s,a))})}))],"getRules"),Z0=bj});var Cj={};var X0=n(()=>{I();K0();V0();$0();Q0();d.register(..._0(),...q0(),...J0(),...Z0())});var tF=P(eF=>{"use strict";Object.defineProperty(eF,"__esModule",{value:!0});W0();X0()});var Pj,rF,iF=n(()=>{De();w();v();Sc();Oa();Pj=t(()=>[new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(Be,i.building().item())),new l(i=>i.progress().value()===0),new p((i,e)=>{let r=i.remaining()/10;return e.add(Math.floor((r+4)*10*r)),e})),new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(Be,i.building().item())),new l(i=>i.progress().value()>0),new p((i,e)=>{let r=i.remaining()/10;return e.add(Math.floor(5*r**2+20*r)),e})),new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(z,i.building().item())),new l(i=>i.progress().value()===0),new p((i,e)=>(e.add(i.remaining()*4),e))),new Nn(new l(i=>typeof i.building()<"u"&&Object.isPrototypeOf.call(z,i.building().item())),new l(i=>i.progress().value()>0),new p((i,e)=>(e.add(i.remaining()*2),e)))],"getRules"),rF=Pj});var Tj,oF,nF=n(()=>{Ze();Kn();eO();v();Tj=t((i=H)=>[new at(new p(e=>i.getByPlayer(e).map(r=>new Bs(e,r))))],"getRules"),oF=Tj});var Ij,aF,sF=n(()=>{vl();wl();v();jh();Ij=t((i=xi)=>[new vi(new p(e=>i.register(new Yc(e))))],"getRules"),aF=Ij});var lF=n(()=>{dx();gm()});var Xg,eh,Kx=n(()=>{A();Xg=class extends g{};t(Xg,"Updated");eh=Xg});var wj,mF,pF=n(()=>{lF();br();q();vl();I();Nh();up();w();v();cp();Kx();wj=t((i=xi,e=d,r=Pe,o=b)=>[new $o(new l(s=>s instanceof mr),new p((s,a,m)=>{let u=i.getByPlayer(a.player());m.forEach(f=>{if(f instanceof ye){if(u.value()<f.value()){let c=f.cityImprovement(),y=new Bc(c.constructor,a,e);r.unregister(c),u.add(y.cost().value()),o.emit("city:unsupported-improvement",a,c);return}u.subtract(f.value(),a.name())}})})),new $o(new l(s=>s instanceof mr),new l((s,a,m)=>!e.get(oa).some(u=>u.validate(a,m))),new p((s,a)=>{let m=i.getByPlayer(a.player());m.add(s,a.name()),e.process(eh,m,a)}))],"getRules"),mF=wj});var Aj,uF,cF=n(()=>{q();w();v();Kx();Aj=t((i=b)=>[new eh(new l(e=>e.value()<0),new p((e,r)=>{i.emit("player:treasury-exhausted",e.player(),e,r)}))],"getRules"),uF=Aj});var Bj={};var fF=n(()=>{I();iF();nF();sF();pF();cF();d.register(...rF(),...oF(),...aF(),...mF(),...uF())});var dF=P(yF=>{"use strict";Object.defineProperty(yF,"__esModule",{value:!0});fF()});var Gj={};var gF=n(()=>{Dn();Rl();lo.register(Fo,So,ko,_i,Yo,Lo,Ki,qi,zo,No,vr,Vi,kr,Ji,$i,jo,Zi,Wo,Ho,Qi,qe,Xi,ui,Yr,_o,Ko,Lr,qo)});var th,Ap,qx=n(()=>{A();th=class extends g{};t(th,"Available");Ap=th});var rh,hF,ih,Uj,OF,RF=n(()=>{mO();Xn();Wm();Ct();Ze();ho();ea();sr();I();fn();qr();_m();Kt();Je();Ta();Mh();qx();w();v();yx();Dn();rh=new l((i,e,r=i.tile())=>i instanceof rt),hF=new l((i,e,r=i.tile())=>i instanceof Ke),ih=t((i,e)=>e.getByTile(i)!==null,"tileHasCity"),Uj=t((i=Q,e=H,r=d,o=Ee,s=yr,a=W,m=ft,u=Zn,f=ae)=>[new Pt(Tm,Ci,new to(new ys(rh,new l((c,y,h=c.tile())=>h.isLand()),new l((c,y)=>y.isLand()),new l((c,y)=>a.getByTile(y).every(h=>h.player()===c.player()))),new ys(hF,new to(new l((c,y,h=c.tile())=>h.isWater()),new l((c,y,h=c.tile())=>e.getByTile(h)?.player()===c.player())),new to(new l((c,y)=>y.isWater()),new l((c,y)=>e.getByTile(y)?.player()===c.player()))),new l(c=>c instanceof kt)),new to(new l((c,y)=>!(c instanceof rt)),new l((c,y,h=c.tile())=>!(h.getNeighbours().some(G=>a.getByTile(G).some(D=>D instanceof rt&&D.tile().terrain()instanceof _&&D.player()!==c.player()))&&y.getNeighbours().some(G=>a.getByTile(G).some(D=>D instanceof rt&&D.tile().terrain()instanceof _&&D.player()!==c.player())))),new l((c,y)=>a.getByTile(y).filter(h=>h.player()===c.player()).length>0),new l((c,y)=>{let h=e.getByTile(y);return h===null?!1:h.player()===c.player()})),new l((c,y)=>{let h=e.getByTile(y);return h===null?!0:h.player()===c.player()}),new l((c,y)=>!a.getByTile(y).some(h=>h.player()!==c.player())),new p((c,y,h=c.tile())=>new qt(h,y,c,r))),new Pt(Tm,Ci,new l((c,y)=>a.getByTile(y).some(h=>h.player()!==c.player())),new to(new ys(new l(c=>c instanceof kt),new to(new l((c,y)=>!a.getByTile(y).every(h=>h instanceof kt)),new l((c,y)=>c instanceof vr))),new ys(rh,new to(new l((c,y)=>ih(y,e)),new l((c,y)=>a.getByTile(y).some(h=>h instanceof rt)))),new ys(hF,new to(new l((c,y)=>!(c instanceof ui)),new l((c,y)=>y.isWater())))),new p((c,y,h=c.tile())=>new zs(h,y,c,r,a))),new Pt(Tm,Ci,rh,new l((c,y)=>ih(y,e)),new l((c,y)=>a.getByTile(y).length===0),new l((c,y)=>e.getByTile(y).player()!==c.player()),new p((c,y,h=c.tile())=>{let G=e.getByTile(y);return new Em(h,y,c,G,r)})),new Pt(Ci,qn,new l(c=>c instanceof j),new l((c,y)=>o.getByTile(y).filter(h=>[Ge,Xe,fr,Ne].some(G=>h instanceof G)).length>0),new p((c,y,h=c.tile())=>new Qs(h,y,c,r,o,f))),new Pt(Ci,qn,new l(c=>c instanceof j),new l((c,y,h=c.tile())=>h.isLand()),new p((c,y,h=c.tile())=>new Zs(h,y,c,r,f,s))),new Pt(Ci,qn,new p((c,y,h=c.tile())=>new Ia(h,y,c,r,f))),new Pt(Ci,qn,new p((c,y,h=c.tile())=>new Ym(h,y,c,r))),new Pt(qn,new p((c,y,h=c.tile())=>new yo(h,y,c,r))),new Pt(Ci,qn,new l(c=>c instanceof qe),new l((c,y,h=c.tile())=>h.isLand()),new l((c,y,h=c.tile())=>!ih(h,e)),new p((c,y,h=c.tile())=>new Nm(h,y,c,i,r))),...[[Ge,Ns,new to(new l((c,y,h=c.tile())=>h.terrain()instanceof ie),new l((c,y,h=c.tile())=>h.getAdjacent().some(G=>G.terrain()instanceof ie||G.terrain()instanceof ar||o.getByTile(G).some(D=>D instanceof Ge)&&!ih(G,e))))],[Xe,js],[Ne,Ws],[fr,Hs,new l((c,y)=>o.getByTile(y).some(h=>h instanceof Ne))]].map(([c,y,...h])=>new Pt(new l(G=>G instanceof Ir),Ci,new l((G,D,B=G.tile())=>r.get(Ap).some(E=>E.validate(B,c,G.player()))),qn,...h,new p((G,D,B=G.tile())=>new y(B,D,G,r,f)))),...[[et,Vs],[$e,_s],[le,Xs],[tt,Js]].map(([c,y])=>new Pt(Ci,qn,new l(h=>h instanceof Ir),new l((h,G,D=h.tile())=>D.terrain()instanceof c),new p((h,G,D=h.tile())=>new y(D,G,h,r,m,f)))),new Pt(Tm,Ci,rh,new l((c,y)=>y.terrain()instanceof ar),new l((c,y)=>a.getByTile(y).every(h=>h.player()===c.player())),new l((c,y)=>a.getByTile(y).filter(h=>h instanceof Jt).some(h=>h.hasCapacity()&&h.canStow(c))),new p((c,y,h=c.tile())=>{let[G]=a.getByTile(y).filter(D=>D instanceof Jt).filter(D=>D.hasCapacity()&&D.canStow(c));return new Lm(h,y,c,G,r)})),new Pt(Tm,new l(c=>{try{return u.getByUnit(c),!0}catch{return!1}}),new to(new l((c,y)=>!(c instanceof rt)),new l((c,y)=>y.isLand())),new l((c,y,h=c.tile())=>u.getByUnit(c).transport().tile()===h),new p((c,y,h=c.tile())=>{let G=u.getByUnit(c).transport();return new $s(h,y,c,G,r)})),new Pt(Ci,qn,new l(c=>c instanceof Jt),new l(c=>c.hasCargo()),new l((c,y)=>y.getNeighbours().some(h=>h.isLand())),new p((c,y,h=c.tile())=>new jm(h,y,c,r)))],"getRules"),OF=Uj});var Mj,xF,vF=n(()=>{Ta();pO();w();v();pu();Mj=t((i=yr)=>[new Im(new l(e=>e.moves().value()>0),new p(e=>e.setActive())),new Im(new l(e=>e.busy()!==null),new p(e=>e.setBusy())),...[Ai].map(e=>new Im(new l(r=>i.getByUnit(r).some(o=>o instanceof e)),new p(r=>i.unregister(...i.getByUnit(r).filter(o=>o instanceof e)))))],"getRules"),xF=Mj});var Dj,bF,CF=n(()=>{hr();cm();Dn();Ye();w();v();Xn();Dj=t((i=N)=>[new ut(new l((e,r)=>Object.prototype.isPrototypeOf.call(Ke,r)),new p(e=>new l(()=>e.tile().isCoast()))),...[[Fo,ai],[So,Ao],[ko,Ui],[_i,ti],[Lo,Ui],[Yo,ji],[Ki,Ur],[qi,Un],[zo,Zr],[No,Mr],[vr,Co],[Vi,$t],[kr,In],[Ji,wo],[$i,xo],[jo,wn],[Zi,Ot],[Wo,To],[Ho,Qr],[Qi,dr],[Xi,$r],[ui,Qt],[Yr,ki],[_o,gt],[Ko,It],[Lr,ei]].map(([e,r])=>new ut(new l((o,s)=>s===e),new p(o=>new l(()=>i.getByPlayer(o.player()).completed(r))))),...[[_i,ai],[Ki,ti],[qi,xo],[Vi,It],[kr,Qr],[Ji,Zr],[$i,gt],[Zi,Qr],[Qi,$t],[Xi,Ot],[Yr,Qr],[Lr,dr],[qo,Ot]].map(([e,r])=>new ut(new l((o,s)=>s===e),new p(o=>new l(()=>!i.getByPlayer(o.player()).completed(r)))))],"getRules"),bF=Dj});var Ej,PF,TF=n(()=>{fm();Dn();Ej=t(()=>[...[[Fo,80],[So,160],[ko,120],[_i,40],[Yo,50],[Lo,160],[Ki,40],[qi,40],[zo,80],[No,30],[vr,60],[Vi,40],[kr,20],[Ji,50],[$i,40],[jo,50],[Zi,30],[Wo,160],[Ho,30],[Qi,40],[qe,40],[Xi,20],[ui,50],[Yr,20],[_o,80],[Ko,50],[Lr,40],[qo,10]].flatMap(([i,e])=>vs(i,e))],"getRules"),PF=Ej});var Fj,IF,wF=n(()=>{cr();ym();w();v();Dn();Fj=t((i=he)=>[new Ri(new l((e,r)=>r instanceof qe),new p(e=>i.getByCity(e.city()).shrink()))],"getRules"),IF=Fj});var Sj,AF,BF=n(()=>{q();Je();Ff();v();Sj=t((i=W,e=b)=>[new ha(new p(r=>i.register(r))),new ha(new p(r=>r.applyVisibility())),new ha(new p(r=>r.moves().set(r.movement()))),new ha(new p(r=>{e.emit("unit:created",r)}))],"getRules"),AF=Sj});var kj,GF,UF=n(()=>{Ze();q();I();qr();Je();w();ru();_p();v();kj=t((i=H,e=d,r=Ee,o=W,s=b)=>[new un(new p((a,m)=>{s.emit("unit:defeated",a,m),e.process(ln,a,m.player())})),new un(new l(a=>i.getByTile(a.tile())===null),new l(a=>o.getByTile(a.tile()).filter(m=>m!==a&&m.player()===a.player()).length>0),new p((a,m)=>o.getByTile(a.tile()).forEach(u=>{u!==a&&u.player()===a.player()&&e.process(ln,a,m.player())})))],"getRules"),GF=kj});var Yj,MF,DF=n(()=>{q();Ta();Je();_p();v();Yj=t((i=W,e=yr,r=b)=>[new ln(new p((o,s)=>{r.emit("unit:destroyed",o,s)})),new ln(new p(o=>{o.setActive(!1),o.setDestroyed()})),new ln(new p(o=>e.getByUnit(o).forEach(s=>e.unregister(s))))],"getRules"),MF=Yj});var oh,Bp,Vx=n(()=>{A();oh=class extends g{};t(oh,"LostAtSea");Bp=oh});var Lj,EF,FF=n(()=>{q();v();Vx();Lj=t((i=b)=>[new Bp(new p(e=>{i.emit("unit:lost-at-sea",e)})),new Bp(new p(e=>e.destroy(null)))],"getRules"),EF=Lj});var zj,SF,kF=n(()=>{Wm();q();I();_m();w();v();Vx();Ft();Xn();Dn();Ze();zj=t((i=Zn,e=d,r=()=>Math.random(),o=b,s=H)=>[new J(new p((a,m)=>{o.emit("unit:moved",a,m)})),new J(new p(a=>a.applyVisibility())),new J(new l(a=>a.moves().value()<=.1),new p(a=>a.moves().set(0))),new J(new l(a=>a.moves().value()<.1),new p(a=>a.setActive(!1))),new J(new l(a=>a instanceof Jt),new l((a,m)=>m instanceof qt),new l(a=>a.hasCargo()),new p((a,m)=>a.cargo().forEach(u=>u.action(m.forUnit(u))))),new J(new l((a,m)=>m instanceof $s),new p(a=>{let m=i.getByUnit(a);m.transport().unload(a),i.unregister(m)})),new J(new l(a=>a instanceof Lr),new l(a=>a.moves().value()===0),new l(a=>!a.tile().isCoast()),new l(()=>r()<=.5),new p(a=>{e.process(Bp,a)})),new J(new l(a=>a instanceof vr),new l(a=>a.moves().value()===0),new l(a=>s.getByTile(a.tile())!==null),new p(a=>{e.process(Bp,a)}))],"getRules"),SF=zj});var YF,Nj,LF,zF=n(()=>{ho();Xn();Wm();ea();qr();_m();w();v();Ii();YF=[[St,2],[Ie,1],[$e,2],[Re,1],[Ue,2],[et,2],[je,3],[st,1],[le,1],[ie,1],[tt,2],[yt,1]],Nj=t((i=Ee,e=Zn)=>[...YF.map(([r,o])=>new Te(new l((s,a)=>a instanceof qt),new l(s=>s instanceof rt),new l((s,a)=>a.to().terrain()instanceof r),new p(()=>o))),new Te(new l((r,o)=>o instanceof qt),new l(r=>r instanceof kt||r instanceof Ke),new p(()=>1)),new Te(new l((r,o)=>o instanceof qt),new l(r=>r instanceof rt),new l((r,o)=>i.getByTile(o.from()).some(s=>s instanceof Ne)),new l((r,o)=>i.getByTile(o.to()).some(s=>s instanceof Ne)),new p(()=>1/3)),new Te(new l((r,o)=>o instanceof qt),new l(r=>r instanceof rt),new l((r,o)=>i.getByTile(o.from()).some(s=>s instanceof fr)),new l((r,o)=>i.getByTile(o.to()).some(s=>s instanceof fr)),new p(()=>0)),new Te(new l((r,o)=>o instanceof qt),new l(r=>r instanceof rt),new l(r=>{try{return e.getByUnit(r),!0}catch{return!1}}),new l(r=>e.getByUnit(r).transport()instanceof Jt),new p(()=>0)),...[[Ns,2],[js,3],[Ws,1],[Hs,2],[_s,2],[Vs,3],[Js,3],[Zs,1],[Qs,1],[Xs,3],[Ia,0]].flatMap(([r,o])=>YF.map(([s,a])=>new Te(new l((m,u)=>u instanceof r),new l(m=>m.tile().terrain()instanceof s),new p(()=>o*a))))],"getRules"),LF=Nj});var jj,NF,jF=n(()=>{Gh();Je();Kn();w();v();jj=t((i=W)=>[new at(new l(e=>i.getByPlayer(e).some(r=>r.active()&&r.moves().value())),new p(e=>i.getByPlayer(e).filter(r=>r.active()&&r.moves().value()>0).sort((r,o)=>(r.waiting()?1:0)-(o.waiting()?1:0)).map(r=>new cs(e,r)))),new at(new l(e=>i.getByPlayer(e).some(r=>!r.active()||!r.moves().value())),new p(e=>i.getByPlayer(e).filter(r=>!r.active()||r.moves().value()===0).sort((r,o)=>(r.waiting()?1:0)-(o.waiting()?1:0)).map(r=>new fs(e,r))))],"getRules"),NF=jj});var Wj,WF,HF=n(()=>{v();AO();YO();Wj=t(()=>[new Fy(new p(i=>i.action(new Jb(i.tile(),i.tile(),i))))],"getRules"),WF=Wj});var Hj,_F,KF=n(()=>{Pm();Dn();pu();I();Ta();wm();wm();w();v();Hj=t((i=yr,e=d)=>[...[[Fo,12,2,2],[So,18,12,4,2],[ko,12,1,8,2],[_i,8],[Yo,0],[Lo,1,12,5,2],[Ki,6],[qi,4,1,2],[zo,6,6,6,2],[No,0,0,2],[vr,4,2,10,2],[Vi,2,2,3],[kr,2,1,2],[Ji,4,4,4],[$i,4,2,2],[jo,6,6,3],[Zi,3,2],[Wo,99,0,16],[Ho,3,5],[Qi,1,1,3],[qe,0],[Xi,1,2],[ui,8,2,3,2],[Yr,3],[_o,10,5,3],[Ko,0,3,4],[Lr,1,0,3],[qo]].flatMap(([r,o=1,s=1,a=1,m=1])=>Vv(r,o,s,a,m)),...[[Ai,1,bi],[wa,.5,po,bi]].flatMap(([r,o,...s])=>s.map(a=>new Al(new l((m,u)=>u instanceof a),new l(m=>i.getByUnit(m).some(u=>u instanceof r)),new p((m,u)=>{let f=new a;e.process(Ds,m.constructor,f),u.add(f.value()*o,r.name)}))))],"getRules"),_F=Hj});var _j,qF,VF=n(()=>{q();v();xd();_j=t((i=b)=>[new Nl(new p((e,r)=>{i.emit("unit:unsupported",e,r)}))],"getRules"),qF=_j});var Kj,JF,$F=n(()=>{w();v();PO();Kj=t((i=()=>Math.random())=>[new iu(new l((e,r)=>e.moves().value()>=r),new p((e,r)=>(e.moves().subtract(r),!0))),new iu(new l((e,r)=>e.moves().value()<r),new p((e,r)=>{let o=e.moves().value();return e.moves().set(0),o>=r*.5*i()}))],"getRules"),JF=Kj});var qj={};var ZF=n(()=>{RF();vF();CF();TF();wF();BF();UF();DF();I();FF();kF();zF();jF();HF();KF();VF();$F();d.register(...OF(),...xF(),...bF(),...PF(),...IF(),...AF(),...GF(),...MF(),...EF(),...SF(),...LF(),...NF(),...WF(),..._F(),...qF(),...JF())});var XF=P(QF=>{"use strict";Object.defineProperty(QF,"__esModule",{value:!0});gF();ZF()});var zr,eS=n(()=>{Ae();zr=class extends Oe{};t(zr,"Colossus")});var fi,tS=n(()=>{Ae();fi=class extends Oe{};t(fi,"CopernicusObservatory")});var Qo,rS=n(()=>{Ae();Qo=class extends Ce{};t(Qo,"CureForCancer")});var Xo,iS=n(()=>{Ae();Xo=class extends Ce{};t(Xo,"DarwinsVoyage")});var Nr,oS=n(()=>{Ae();Nr=class extends Oe{};t(Nr,"GreatLibrary")});var en,nS=n(()=>{Ae();en=class extends Oe{};t(en,"GreatWall")});var yi,aS=n(()=>{Ae();yi=class extends Oe{};t(yi,"HangingGardens")});var la,sS=n(()=>{Ae();la=class extends Ce{};t(la,"HooverDam")});var tn,lS=n(()=>{Ae();tn=class extends Ce{};t(tn,"IsaacNewtonsCollege")});var io,mS=n(()=>{Ae();io=class extends Ce{};t(io,"JsBachsCathedral")});var di,pS=n(()=>{Ae();di=class extends Ce{};t(di,"Lighthouse")});var rn,uS=n(()=>{Ae();rn=class extends Oe{};t(rn,"MagellansExpedition")});var ma,cS=n(()=>{Ae();ma=class extends Ce{};t(ma,"ManhattanProject")});var jr,fS=n(()=>{Ae();jr=class extends Ce{};t(jr,"MichelangelosChapel")});var or,yS=n(()=>{Ae();or=class extends Oe{};t(or,"Oracle")});var on,dS=n(()=>{Ae();on=class extends Oe{};t(on,"Pyramids")});var nn,gS=n(()=>{Ae();nn=class extends Ce{};t(nn,"SetiProgram")});var Wr,hS=n(()=>{Ae();Wr=class extends Ce{};t(Wr,"ShakespearesTheatre")});var pa,OS=n(()=>{Ae();pa=class extends Ce{};t(pa,"UnitedNations")});var oo,RS=n(()=>{Ae();oo=class extends Ce{};t(oo,"WomensSuffrage")});var ua=n(()=>{Wg();eS();tS();rS();iS();oS();nS();aS();sS();lS();mS();pS();uS();cS();fS();yS();dS();gS();hS();OS();RS()});var Vj={};var xS=n(()=>{ua();Rl();lo.register(kn,zr,fi,Qo,Xo,Nr,en,yi,la,tn,io,di,rn,ma,jr,or,on,nn,Wr,pa,oo)});var Jj,vS,bS=n(()=>{ua();hr();cm();Ye();Sn();w();v();Ae();Jj=t((i=N,e=pt)=>[new ut(new l((r,o)=>Object.isPrototypeOf.call(Oe,o)),new p((r,o)=>new l(()=>e.filter(s=>s instanceof o).length===0))),...[[zr,$r],[fi,Mi],[Nr,Gr],[en,Zt],[yi,Bn],[di,ei],[rn,dr],[or,Ei],[on,Zt],[kn,Io],[Qo,Tn],[Xo,ni],[la,ht],[tn,Go],[io,wt],[ma,ii],[jr,wt],[nn,Fi],[Wr,Yi],[pa,Tt],[oo,It]].map(([r,o])=>new ut(new l((s,a)=>a===r),new p(s=>new l(()=>i.getByPlayer(s.player()).completed(o)))))],"getRules"),vS=Jj});var $j,CS,PS=n(()=>{ua();fm();$j=t(()=>[...[[kn,600],[zr,200],[fi,300],[Qo,600],[Xo,300],[Nr,300],[en,300],[yi,300],[la,600],[tn,400],[io,400],[di,200],[rn,400],[ma,600],[jr,300],[or,300],[on,300],[nn,600],[Wr,400],[pa,600],[oo,600]].flatMap(([i,e])=>vs(i,e))],"getRules"),CS=$j});var Zj,TS,IS=n(()=>{ga();q();Ye();I();Sn();ym();w();ua();v();oc();Ae();Zj=t((i=lr,e=N,r=d,o=pt,s=b)=>[new Ri(new l((a,m)=>m instanceof Oe),new p((a,m)=>{let u=m.constructor;o.register(m),i.filter(f=>f.building()?.item()===u).forEach(f=>f.revalidate())})),new Ri(new l((a,m)=>m instanceof Oe),new p((a,m)=>{s.emit("wonder:built",m,a.city())})),new Ri(new l((a,m)=>m instanceof Xo),new p(a=>{let m=e.getByPlayer(a.city().player()),u=t(c=>{let y=new rm(new l(h=>h===m),new p(()=>{r.unregister(y),c()}));r.register(y)},"createOnStarted"),f=t(()=>{m.add(m.cost()),u(()=>m.add(m.cost()))},"completeResearch");if(m.researching()===null){u(()=>f());return}f()}))],"getRules"),TS=Zj});var Gp,no,Eu=n(()=>{Sn();w();Gp=t((i,e=pt)=>new l(r=>e.getByCity(r).some(o=>o instanceof i)),"cityHasWonder"),no=t((i,e=pt)=>new l(r=>e.getByPlayer(r.player()).some(o=>o instanceof i)),"playerHasWonder")});var wS,Ln,nh,Fu=n(()=>{Ye();w();wS=t((i,e=N)=>new l(r=>e.getByPlayer(r.player()).completed(i)),"discoveredByPlayer"),Ln=t((i,e=N)=>new l(()=>i===null||!e.some(r=>r.completed(i))),"notDiscoveredByAnyPlayer"),nh=t((i,e=N)=>new l(r=>i===null||!e.getByPlayer(r.player()).completed(i)),"notDiscoveredByPlayer")});var ah,AS=n(()=>{br();w();ah=t((i,e=Pe)=>new l(r=>e.getByCity(r).some(o=>o instanceof i)),"hasCityImprovement")});var Qj,BS,GS=n(()=>{Hi();br();hr();ua();vn();Ye();Je();Sn();Eu();Fu();am();w();v();ya();dp();ds();ll();AS();Ti();Qj=t((i=Pe,e=dt,r=N,o=W,s=pt)=>[new ot(new it,no(or,s),ah(Yt,i),nh(Xt,r),Ln(wt,r),new p((a,m)=>new Fe(-Math.min(1,Le(m,Fe)),or.name))),new ot(new it,no(or,s),ah(Yt,i),wS(Xt,r),Ln(wt,r),new p((a,m)=>new Fe(-Math.min(2,Le(m,Fe)),or.name))),new ot(new _r(4e3),Gp(Wr,s),Ln(ht,r),new p((a,m)=>new Fe(-Le(m,Fe),Wr.name))),new ot(new it,no(io,s),new p((a,m)=>new Fe(-Math.min(2,Le(m,Fe)),io.name))),new ot(new it,no(jr,s),ah(Rr,i),Ln(Tt,r),new p((a,m)=>new Fe(-Math.min(4,Le(m,Fe)),jr.name))),new ot(new it,no(oo,s),new l((a,m)=>m.some(u=>u instanceof Wa)),new p((a,m)=>m.flatMap(u=>u instanceof Wa?new Fe(-1,oo.name):[])))],"getRules"),BS=Qj});var Xj,US,MS=n(()=>{Sn();hl();w();v();Xj=t((i=pt)=>[new Kr(new l(e=>i.getByCity(e).length>0),new p(e=>i.getByCity(e).forEach(r=>i.unregister(r))))],"getRules"),US=Xj});var eW,DS,ES=n(()=>{ua();hr();ll();Ye();Sn();Eu();um();v();ds();Fu();eW=t((i=N,e=pt)=>[new sn(new _r(500),Gp(zr,e),Ln(Ar,i),new p(r=>new se(r.tilesWorked().filter(o=>o.yields().some(s=>s instanceof se)).length,zr.name))),...[[yi,1,Br],[Qo,1,null]].map(([r,o,s])=>new sn(no(r,e),Ln(s,i),new p(()=>new Jo(o,r.name))))],"getRules"),DS=eW});var tW,FS,SS=n(()=>{ua();Ye();Sn();Eu();hr();v();ya();ll();bc();Fu();Ti();tW=t((i=N,e=pt)=>[...[[fi,rr,1,gt]].map(([r,o,s,a])=>new Ol(new it,Gp(r,e),Ln(a,i),new p((m,u)=>new o(Le(u,o)*s,r.name)))),...[[nn,rr,.5,null]].map(([r,o,s,a])=>new Ol(new it,no(r,e),Ln(a,i),new p((m,u)=>new o(Le(u,o)*s,r.name))))],"getRules"),FS=tW});var sh,lh,Jx=n(()=>{A();sh=class extends g{};t(sh,"Obsolete");lh=sh});var rW,kS,YS=n(()=>{hr();ua();Ye();I();Sn();Qu();w();v();Jx();rW=t((i=N,e=d,r=pt)=>[new hs(new l(()=>r.some(o=>o instanceof Nr)),new l((o,s)=>{let[a]=r.filter(u=>u instanceof Nr).map(u=>u.city().player());return!i.getByPlayer(a).completed(s.sourceClass())}),new l((o,s)=>i.filter(a=>a.completed(s.sourceClass())).length>=3),new p((o,s)=>{let[a]=r.filter(u=>u instanceof Nr).map(u=>u.city().player());return i.getByPlayer(a).addAdvance(s.sourceClass())})),...[[zr,Ar],[fi,gt],[Nr,gr],[en,Ot],[yi,Br],[tn,ii],[di,$t],[jr,Tt],[or,wt],[on,Tt],[Wr,ht]].map(([o,s])=>new hs(new l(()=>r.entries().some(a=>a instanceof o)),new l((a,m)=>m instanceof s),new p(()=>{let[a]=r.filter(m=>m instanceof o);e.process(lh,a,a.city())})))],"getRules"),kS=rW});var iW,LS,zS=n(()=>{ua();Ye();Sn();w();v();ya();hr();Pm();Xn();wm();Fu();Eu();iW=t((i=pt,e=N)=>[new Kp(new it,new l((r,o)=>o instanceof uo),new l(r=>r instanceof Ke),no(di,i),nh($t,e),new p((r,o)=>o.add(1))),new Kp(new it,new l((r,o)=>o instanceof uo),new l(r=>r instanceof Ke),no(rn,i),new p((r,o)=>o.add(1)))],"getRules"),LS=iW});var oW,NS,jS=n(()=>{q();v();Jx();oW=t((i=b)=>[new lh(new p((e,r)=>{i.emit("wonder:obsolete",e,r)}))],"getRules"),NS=oW});var nW={};var WS=n(()=>{bS();PS();IS();GS();MS();ES();SS();I();YS();zS();jS();d.register(...vS(),...CS(),...TS(),...BS(),...US(),...DS(),...FS(),...kS(),...LS(),...NS())});var _S=P(HS=>{"use strict";Object.defineProperty(HS,"__esModule",{value:!0});xS();WS()});var aW,KS,qS=n(()=>{ho();ea();Ye();hr();qr();qx();w();aW=t((i=N,e=Ee)=>[...[[Ge,Ie,Re,Ue,le,ie],[Xe,Ie,Ue,je],[Ne,St,Ie,$e,Re,Ue,et,je,le,tt,yt]].map(([r,...o])=>new Ap(new l((s,a)=>a===r),new l(s=>o.some(a=>s.terrain()instanceof a)),new l((s,a)=>!e.getByTile(s).some(m=>m instanceof a)))),...[[Ne,Ro,ie]].map(([r,o,...s])=>new Ap(new l((a,m)=>m===r),new l(a=>s.some(m=>a.terrain()instanceof m)),new l((a,m)=>!e.getByTile(a).some(u=>u instanceof m)),new l((a,m,u)=>i.getByPlayer(u).completed(o)))),...[[fr,ni,Ne,St,Ie,$e,Re,Ue,et,je,le,ie,tt,yt]].map(([r,o,s,...a])=>new Ap(new l((m,u)=>u===r),new l(m=>a.some(u=>m.terrain()instanceof u)),new l((m,u)=>!e.getByTile(m).some(f=>f instanceof u)),new l(m=>e.getByTile(m).some(u=>u instanceof s)),new l((m,u,f)=>i.getByPlayer(f).completed(o))))],"getRules"),KS=aW});var sW,VS,JS=n(()=>{q();ea();qr();iy();w();v();sW=t((i=Ee,e=b)=>[new Pa(new l((r,o)=>i.getByTile(r).every(s=>o.constructor!==s.constructor)),new p((r,o)=>i.register(o))),new Pa(new p(r=>r.clearYieldCache(null))),new Pa(new p((r,o)=>{e.emit("tile-improvement:built",r,o)})),...[[Xe,Ge],[Ge,Xe]].map(([r,o])=>new Pa(new l((s,a)=>a instanceof r),new l(s=>i.getByTile(s).some(a=>a instanceof o)),new p(s=>i.unregister(...i.getByTile(s).filter(a=>a instanceof o)))))],"getRules"),VS=sW});var mh,ph,$x=n(()=>{ao();wi();mh=class extends He{constructor(){super(_e)}};t(mh,"AvailableTerrainFeatureRegistry");ph=new mh});var lW,$S,ZS=n(()=>{$x();I();Sh();v();Sm();lW=t((i=d,e=ph)=>[new yc(new p(r=>{let o=i.get(Ks);e.entries().forEach(s=>o.filter(a=>a.validate(s,r)).forEach(a=>a.process(s,r)))}))],"getRules"),$S=lW});var Nt,Zx=n(()=>{A();Nt=class extends g{};t(Nt,"Distribution")});var mW,QS,XS=n(()=>{ho();Zx();sr();w();v();mW=t(()=>[new Nt(new l(i=>i===St),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:0,to:.01,fill:!0},{from:.01,to:.02},{from:.98,to:.99},{from:.99,to:1,fill:!0}])),new Nt(new l(i=>i===Ie),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.4,to:.45},{from:.45,to:.55,coverage:.025,cluster:!0,clusterChance:.1},{from:.55,to:.6}])),new Nt(new l(i=>i===$e),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.05,to:.2},{from:.2,to:.4,cluster:!0,clusterChance:.1,coverage:.1},{from:.4,to:.6},{from:.6,to:.8,cluster:!0,clusterChance:.1,coverage:.1},{from:.8,to:.95}])),new Nt(new l(i=>i===Re),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{fill:!0}])),new Nt(new l(i=>i===Ue),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.1,to:.9,path:!0,pathChance:.1,coverage:.06}])),new Nt(new l(i=>i===et),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.3,to:.45,cluster:!0,clusterChance:.2,coverage:.08},{from:.55,to:.7,cluster:!0,clusterChance:.2,coverage:.08}])),new Nt(new l(i=>i===je),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.01,to:.1,coverage:.3,path:!0},{from:.1,to:.9,path:!0},{from:.9,to:.99,coverage:.3,path:!0}])),new Nt(new l(i=>i===st),new l((i,e)=>e.some(r=>r.constructor===ar)),new p(()=>[{fill:!0}])),new Nt(new l(i=>i===le),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.01,to:.2,coverage:.3},{from:.2,to:.4},{from:.1,to:.4,cluster:!0},{from:.4,to:.6},{from:.6,to:.8},{from:.6,to:.9,cluster:!0},{from:.8,to:.99,coverage:.3}])),new Nt(new l(i=>i===ie),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.1,to:.9,coverage:.1,path:!0,pathChance:.5}])),new Nt(new l(i=>i===tt),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.2,to:.4,cluster:!0},{from:.6,to:.8,cluster:!0}])),new Nt(new l(i=>i===yt),new l((i,e)=>e.some(r=>r instanceof _)),new p(()=>[{from:.01,to:.15,cluster:!0,coverage:.15},{from:.85,to:.99,cluster:!0,coverage:.15}]))],"getRules"),QS=mW});var uh,ch,Qx=n(()=>{A();uh=class extends g{};t(uh,"DistributionGroups");ch=uh});var pW,ek,tk=n(()=>{ho();v();Qx();pW=t(()=>[new ch(new p(()=>[st,Re,tt,je,et,Ue,$e,Ie,le,yt,St,ie]))],"getRules"),ek=pW});var uW,rk,ik=n(()=>{ho();su();fn();Sm();uW=t((i=ft)=>[...[[dn,.2,Ue],[gn,.2,st],[Bi,.2,$e,yt],[hn,.2,et],[On,.2,je],[go,.2,le],[Gi,.2,Ie],[Rn,.2,tt],[xn,.2,St],[yn,.5,Re,ie]].flatMap(([r,o,...s])=>s.flatMap(a=>Ib(a,r,o,i)))],"getRules"),rk=uW});var fh,yh,ok=n(()=>{A();fh=class extends g{};t(fh,"Pillaged");yh=fh});var cW,nk,ak=n(()=>{q();qr();ok();w();v();cW=t((i=Ee,e=b)=>[new yh(new l((r,o)=>i.getByTile(r).includes(o)),new p((r,o)=>i.unregister(o))),new yh(new p(r=>r.clearYieldCache(null))),new yh(new p((r,o)=>{e.emit("tile-improvement:pillaged",r,o)}))],"getRules"),nk=cW});var Xx,ev,tv,fW,yW,dW,gW,sk,lk=n(()=>{Mx();q();ba();ho();v();Sx();Xx=new Map,ev=new Map,tv=new Map,fW=t((i,e=null)=>(ev.has(i)||ev.set(i,i.score(e,[[$,8],[V,3],[se,1]])),ev.get(i)),"tileScore"),yW=t((i,e=null)=>(tv.has(i)||tv.set(i,i.getSurroundingArea().entries().reduce((r,o)=>r+fW(o,e),0)),tv.get(i)),"areaScore"),dW=t((i,e=b)=>{if(!Xx.has(i)){e.emit("world:generate-start-tiles");let r=i.entries().filter(o=>[Re,le,ie].some(s=>o.terrain()instanceof s)).map(o=>({tile:o,score:yW(o)})).sort(({score:o},{score:s})=>s-o).map(({tile:o})=>o);Xx.set(i,r),e.emit("world:start-tiles",r)}return Xx.get(i)},"pickStartTiles"),gW=t((i=Og,e=b,r=()=>Math.random())=>[new wg(new p((o,s,a)=>{if(e.option("earth",!1))try{return i.getStartTileByCivilizationAndWorld(s.civilization().sourceClass(),o)}catch{a.push(...i.entries().map(f=>f.startTileForMap(o)))}let m=dW(o,e);return m.forEach(u=>{a.some(f=>f.distanceFrom(u)<=4)&&m.splice(m.indexOf(u),1)}),m[Math.floor(m.length*r())]}))],"getRules"),sk=gW});var dh,Up,gh=n(()=>{fg();ao();dh=class extends He{constructor(){super(cg)}};t(dh,"GeneratorRegistry");Up=new dh});var hh,Oh,rv=n(()=>{A();hh=class extends g{};t(hh,"PickGenerator");Oh=hh});var Rh,xh,iv=n(()=>{A();Rh=class extends g{};t(Rh,"Start");xh=Rh});var vh,mk,pk=n(()=>{Z();I();vg();de();so();vh=class extends k{#e;#t;#r;#i=new Ql(ge);#o;constructor(e,r=d){super(),this.#e=e,this.#t=e.height(),this.#o=e.width(),this.#r=r,this.addKey("height","tiles","width")}build(){return new Promise(e=>{this.#e.generate().then(r=>{r.forEach((o,s)=>{let a=new ge(s%this.#o,Math.floor(s/this.#o),o,this,this.#r);this.#i.register(a)}),this.#r.process(ml,this),e(this)})})}entries(){return this.#i.entries()}filter(e){return this.entries().filter(e)}forEach(e){return this.#i.forEach(e)}get(e,r){return this.entries()[this.#e.coordsToIndex(e,r)]}height(){return this.#t}includes(e){return this.#i.includes(e)}map(e){return this.#i.map(e)}register(...e){this.#i.register(...e)}tiles(){return this.entries()}width(){return this.#o}};t(vh,"World");mk=vh});var hW,uk,ck=n(()=>{gh();I();q();v();rv();iv();pk();hW=t((i=d,e=Up,r=b)=>[new xh(new p(()=>{let[o]=i.process(Oh),s=new o(parseInt(r.option("height",100),10),parseInt(r.option("width",160),10),{landCoverage:parseFloat(r.option("landCoverage",.4)),landSize:parseFloat(r.option("landSize",.2)),maxIterations:parseInt(r.option("maxIterations",20),10)});new mk(s,i).build()}))],"getRules"),uk=hW});var OW,fk,yk=n(()=>{su();ho();ba();ea();Mn();vn();fn();qr();w();v();Lh();OW=t((i=Ee,e=ft,r=dt)=>[...[[$,$e,1],[$,Re,2],[$,Ue,1],[$,et,1],[$,st,1],[$,le,1],[$,ie,2],[$,tt,1],[$,yt,1],[V,Ie,1],[V,$e,2],[V,je,1],[V,le,1]].map(([o,s,a])=>new Oi(new l(m=>m.terrain()instanceof s),new p(()=>new o(a,s.name)))),...[[V,dn,2],[$,gn,1],[$,Bi,1],[se,hn,2],[se,On,3],[V,go,1],[$,Gi,2],[V,Rn,3],[$,xn,2],[V,yn,1]].map(([o,s,a])=>new Oi(new l(m=>e.getByTerrain(m.terrain()).some(u=>u instanceof s)),new p(()=>new o(a,s.name)))),...[[V,dn,1],[$,gn,1],[$,Bi,1],[se,hn,2],[se,On,2],[V,go,1],[$,Gi,1],[V,Rn,1],[$,xn,1]].map(([o,s,a])=>new Oi(new l((m,u)=>{if(!u)return!1;try{return r.getByPlayer(u).is(At,lt,mt,Rt)}catch{return!1}}),new l(m=>e.getByTerrain(m.terrain()).some(u=>u instanceof s)),new p(()=>new o(a,s.name)))),new Oi(new l(o=>o.terrain()instanceof st),new p(()=>new se(2,st.name))),new Oi(new l(o=>o.terrain()instanceof ie),new p(()=>new se(1))),new Oi(new l((o,s)=>{if(!s)return!1;try{return r.getByPlayer(s).is(lt,Rt)}catch{return!1}}),new l(o=>o.terrain()instanceof ie||o.terrain()instanceof st),new p(()=>new se(1,st.name))),...[[Ie,$,Ge,1],[Ie,V,Xe,1],[Ue,$,Ge,1],[Ue,V,Xe,2],[je,V,Xe,1],[le,$,Ge,1]].map(([o,s,a,m])=>new Oi(new l(u=>u.terrain()instanceof o),new l(u=>i.getByTile(u).some(f=>f instanceof a)),new p(()=>new s(m,a.name)))),...[[Ie,V,Xe,1],[Re,$,Ge,1],[Ue,V,Xe,1],[je,V,Xe,1],[ie,$,Ge,1]].map(([o,s,a,m])=>new Oi(new l((u,f)=>{if(!f)return!1;try{return r.getByPlayer(f).is(At,lt,mt,Rt)}catch{return!1}}),new l(u=>u.terrain()instanceof o),new l(u=>i.getByTile(u).some(f=>f instanceof a)),new p(()=>new s(m,a.name)))),...[Ie,Re,le].map(o=>new Oi(new l(s=>s.terrain()instanceof o),new l(s=>i.getByTile(s).some(a=>a instanceof Ne)),new p(()=>new se(1,Ne.name)))),...[Ie,Re,le].map(o=>new Oi(new l((s,a)=>{if(!a)return!1;try{return r.getByPlayer(a).is(lt,Rt)}catch{return!1}}),new l(s=>s.terrain()instanceof o),new l(s=>i.getByTile(s).some(a=>a instanceof Ne)),new p(()=>new se(1,Ne.name))))],"getRules"),fk=OW});var RW,dk,gk=n(()=>{ba();qr();w();v();ya();ea();Yh();RW=t((i=Ee)=>[...[[$,.5],[V,.5],[se,.5]].map(([e,r])=>new hc(new fa,new l((o,s,a)=>a.some(m=>m instanceof e)),new l(o=>i.getByTile(o).some(s=>s instanceof fr)),new p((o,s,a)=>{let m=a.filter(u=>u instanceof e).reduce((u,f)=>u+f.value(),0);a.push(new e(Math.floor(m*r),fr.name))})))],"getRules"),dk=RW});var xW,hk,Ok=n(()=>{q();gh();dg();v();rv();xW=t((i=Up,e=b,r=()=>Math.random())=>[new Oh(new p(()=>{if(e.option("earth",!1))return Tp;let o=i.entries();if(o.length===0)throw new TypeError("No available `World` generators.");return o[Math.floor(o.length*r())]}))],"getRules"),hk=xW});var vW={};var Rk=n(()=>{qS();JS();ZS();XS();tk();ik();I();ak();lk();ck();yk();gk();Ok();d.register(...KS(),...VS(),...$S(),...QS(),...ek(),...rk(),...nk(),...sk(),...uk(),...fk(),...dk(),...hk())});var bh,Ch,ov=n(()=>{ao();sm();bh=class extends He{constructor(){super(zn)}};t(bh,"TerrainRegistry");Ch=new bh});var bW={};var xk=n(()=>{ho();ov();Ch.register(St,Ie,$e,Re,Ue,et,je,st,le,ie,tt,yt)});var CW={};var vk=n(()=>{su();$x();ph.register(dn,gn,Bi,hn,On,go,Gi,Rn,xn,yn)});var Ck=P(bk=>{"use strict";Object.defineProperty(bk,"__esModule",{value:!0});Rk();xk();vk()});var PW,Pk,Tk=n(()=>{Ze();Wt();mo();so();PW=t((i=H)=>[new X(K,"cities",e=>i.getByPlayer(e)),new X(ge,"city",e=>i.getByTile(e))],"getAdditionalData"),Pk=PW});var TW={};var Ik=n(()=>{Et();Tk();ee.register(...Pk())});var Ak=P(wk=>{"use strict";Object.defineProperty(wk,"__esModule",{value:!0});Ik()});var IW,Bk,Gk=n(()=>{ga();Wt();da();IW=t((i=lr)=>[new X(nt,"build",e=>i.getByCity(e))],"getAdditionalData"),Bk=IW});var wW={};var Uk=n(()=>{Gk();Et();ee.register(...Bk())});var Dk=P(Mk=>{"use strict";Object.defineProperty(Mk,"__esModule",{value:!0});Uk()});var AW,Ek,Fk=n(()=>{cr();Wt();da();AW=t((i=he)=>[new X(nt,"growth",e=>i.getByCity(e))],"getAdditionalData"),Ek=AW});var BW={};var Sk=n(()=>{Et();Fk();ee.register(...Ek())});var Yk=P(kk=>{"use strict";Object.defineProperty(kk,"__esModule",{value:!0});Sk()});var GW,Lk,zk=n(()=>{br();Wt();da();GW=t((i=Pe)=>[new X(nt,"improvements",e=>i.getByCity(e))],"getAdditionalData"),Lk=GW});var UW={};var Nk=n(()=>{Et();zk();ee.register(...Lk())});var Wk=P(jk=>{"use strict";Object.defineProperty(jk,"__esModule",{value:!0});Nk()});var MW,Hk,_k=n(()=>{tl();Wt();so();MW=t((i=Vr)=>[new X(ge,"goodyHut",e=>i.getByTile(e))],"getAdditionalData"),Hk=MW});var DW={};var Kk=n(()=>{Et();_k();ee.register(...Hk())});var Vk=P(qk=>{"use strict";Object.defineProperty(qk,"__esModule",{value:!0});Kk()});var EW,Jk,$k=n(()=>{vn();Wt();mo();EW=t((i=dt)=>[new X(K,"government",e=>i.getByPlayer(e))],"getAdditionalData"),Jk=EW});var FW={};var Zk=n(()=>{$k();Et();ee.register(...Jk())});var Xk=P(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});Zk()});var SW,e1,t1=n(()=>{co();Wt();mo();SW=t((i=me)=>[new X(K,"world",e=>i.getByPlayer(e))],"getAdditionalData"),e1=SW});var kW={};var r1=n(()=>{Et();t1();ee.register(...e1())});var o1=P(i1=>{"use strict";Object.defineProperty(i1,"__esModule",{value:!0});r1()});var YW,n1,a1=n(()=>{Ye();Wt();mo();YW=t((i=N)=>[new X(K,"research",e=>i.getByPlayer(e))],"getAdditionalData"),n1=YW});var LW={};var s1=n(()=>{Et();a1();ee.register(...n1())});var m1=P(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});s1()});var zW,p1,u1=n(()=>{Jl();Wt();mo();zW=t((i=Zo)=>[new X(K,"spaceship",e=>i.getActiveByPlayer(e))],"getAdditionalData"),p1=zW});var NW={};var c1=n(()=>{Et();u1();ee.register(...p1())});var y1=P(f1=>{"use strict";Object.defineProperty(f1,"__esModule",{value:!0});c1()});var jW,d1,g1=n(()=>{fn();Wt();sm();jW=t((i=ft)=>[new X(zn,"features",e=>i.getByTerrain(e))],"getAdditionalData"),d1=jW});var WW={};var h1=n(()=>{Et();g1();ee.register(...d1())});var R1=P(O1=>{"use strict";Object.defineProperty(O1,"__esModule",{value:!0});h1()});var HW,x1,v1=n(()=>{qr();Wt();so();HW=t((i=Ee)=>[new X(ge,"improvements",e=>i.getByTile(e))],"getAdditionalData"),x1=HW});var _W={};var b1=n(()=>{Et();v1();ee.register(...x1())});var P1=P(C1=>{"use strict";Object.defineProperty(C1,"__esModule",{value:!0});b1()});var KW,T1,I1=n(()=>{Du();Wt();mo();KW=t((i=fl)=>[new X(K,"rates",e=>i.getByPlayer(e))],"getAdditionalData"),T1=KW});var qW={};var w1=n(()=>{Et();I1();ee.register(...T1())});var B1=P(A1=>{"use strict";Object.defineProperty(A1,"__esModule",{value:!0});w1()});var VW,G1,U1=n(()=>{vl();Wt();mo();VW=t((i=xi)=>[new X(K,"treasury",e=>i.getByPlayer(e))],"getAdditionalData"),G1=VW});var JW={};var M1=n(()=>{Et();U1();ee.register(...G1())});var E1=P(D1=>{"use strict";Object.defineProperty(D1,"__esModule",{value:!0});M1()});var Ph,F1,S1=n(()=>{A();Ph=class extends g{};t(Ph,"End");F1=Ph});var $W,k1,Y1=n(()=>{q();I();Kt();S1();iv();Wx();$W=t((i=d,e=b,r=ae)=>[["engine:start",()=>{i.process(xh)}],...["game:start","turn:end"].map(o=>[o,()=>{e.emit("turn:start",r.increment())}]),["turn:end",()=>{i.process(F1,r)}],["turn:start",()=>{i.process(Kg,r)}]],"getEvents"),k1=$W});var ZW={};var L1=n(()=>{q();Y1();[...k1()].forEach(([i,e])=>{b.on(i,e)})});var N1=P(z1=>{"use strict";Object.defineProperty(z1,"__esModule",{value:!0});L1()});var QW,j1,W1=n(()=>{Je();Wt();da();mo();so();QW=t((i=W)=>[new X(nt,"units",e=>i.getByCity(e)),new X(K,"units",e=>i.getByPlayer(e,!0)),new X(ge,"units",e=>i.getByTile(e))],"getAdditionalData"),j1=QW});var XW={};var H1=n(()=>{Et();W1();ee.register(...j1())});var K1=P(_1=>{"use strict";Object.defineProperty(_1,"__esModule",{value:!0});H1()});var eH,q1,V1=n(()=>{Ta();Wt();Oa();eH=t((i=yr)=>[new X(Be,"improvements",e=>i.getByUnit(e))],"getAdditionalData"),q1=eH});var tH={};var J1=n(()=>{Et();V1();ee.register(...q1())});var Z1=P($1=>{"use strict";Object.defineProperty($1,"__esModule",{value:!0});J1()});var Th,Q1,X1=n(()=>{ao();VO();Th=class extends He{constructor(){super(rd)}};t(Th,"AIClientRegistry");Q1=new Th});var rH={};var eY=n(()=>{X1();Jm();Q1.register(ia)});var iH,tY,rY=n(()=>{Fl();Je();gl();w();v();Jm();iH=t((i=W,e=Vo)=>[new Pr(new l((r,o)=>e.getByPlayer(o)instanceof ia),new p((r,o,s)=>e.getByPlayer(o).cityLost(r,s,!1)))],"getRules"),tY=iH});var oH,iY,oY=n(()=>{Fl();Je();w();hl();v();Jm();oH=t((i=W,e=Vo)=>[new Kr(new l(r=>e.getByPlayer(r.player())instanceof ia),new p((r,o)=>e.getByPlayer(r.player()).cityLost(r,o,!0)))],"getRules"),iY=oH});var nH,nY,aY=n(()=>{Fl();Je();w();ru();v();Jm();nH=t((i=W,e=Vo)=>[new un(new l(r=>e.getByPlayer(r.player())instanceof ia),new p((r,o)=>e.getByPlayer(r.player()).unitDestroyed(r,o&&o.player())))],"getRules"),nY=nH});var aH={};var sY=n(()=>{I();rY();oY();aY();d.register(...tY(),...nY(),...iY())});var mY=P(lY=>{"use strict";Object.defineProperty(lY,"__esModule",{value:!0});eY();sY()});var Ih,pY,uY=n(()=>{Zx();fg();sr();I();ov();Qx();Ux();Ih=class extends Pp{#e;#t;#r;#i;#o;#n;#a;#s;#l;#m;constructor(e=100,r=160,o={},s=d,a=Ch,m=()=>Math.random()){super(e,r);let{landCoverage:u=.4,landSize:f=.2,maxIterations:c=10,clusterChance:y=.05,coverage:h=.25,pathChance:G=.05}=o;this.#e=u,this.#t=f,this.#r=c,this.#i=y,this.#o=h,this.#n=G,this.#l=s,this.#m=a,this.#s=m,this.#a=new Array(this.height()*this.width()).fill(0).map(()=>new ar)}async generateIslands(){let e=this.height(),r=this.width(),o=this.#t+this.#s()*.2,s=this.#e,a=this.#r,m=Math.ceil(e*r/100*o),u=new Array(e*r).fill(0);for(;u.length===0||u.filter(f=>f===1).length/u.length<s;){let f={},c=[],y=[],h=Math.floor(e*r*Math.random()),G=t(D=>{D in f||(f[D]=0),f[D]++},"flagAsSeen");for(u[h]=1,c.push(h),G(h),y.push(...Vl(e,r,h));y.length;){let D=y.shift();if((f[D]||0)<=a&&(Math.random()>.3?(u[D]=1,c.push(D),Vl(e,r,D).filter(B=>y.indexOf(B)===-1).forEach(B=>y.push(B))):Vl(e,r,D).forEach(B=>{let E=y.indexOf(B);E>-1&&y.splice(E,1)}),G(D)),c.length>m||u.filter(B=>B===1).length/u.length>=s)break}if(u.filter(D=>D===1).length/u.length>=s)break}this.#a=u.map(f=>f===1?new _:new ar)}generate(){return this.generateIslands().then(()=>this.populateTerrain().then(()=>this.#a))}getNeighbours(e,r=!0){return Vl(this.height(),this.width(),e,r)}populateTerrain(){return new Promise(e=>{let r=this.#l.get(Nt);this.#l.get(ch).filter(o=>o.validate()).map(o=>{let s=o.process();if(!s)throw new TypeError("Unexpected data from DistributionGroups.");return s}).forEach(o=>o.forEach(s=>r.filter(a=>a.validate(s,this.#a)).map(a=>{let m=a.process(s,this.#a);if(!m)throw new TypeError("Unexpected data from Distribution.");return m}).forEach(a=>a.forEach(({cluster:m=!1,clusterChance:u=this.#i,coverage:f=this.#o,fill:c=!1,from:y=0,path:h=!1,pathChance:G=this.#n,to:D=1})=>{let B=Object.keys(this.#a).map(Y=>parseInt(Y,10)).filter(Y=>this.#a[Y]instanceof s.__proto__).filter(Y=>Y>=y*this.height()*this.width()&&Y<=D*this.height()*this.width());if(c){B.forEach(Y=>{this.#a[Y]=new s});return}let E=B.length*f;for(;E>0;){let Y=B[Math.floor(this.#s()*B.length)];if(this.#a[Y]=new s,E--,m){let pe=this.getNeighbours(Y).filter(Dt=>!(this.#a[Dt]instanceof s));for(;pe.length&&E>0;){let Dt=pe.shift();u>=this.#s()/this.distanceFrom(Y,Dt)&&(this.#a[Dt]=new s,E--,pe.push(...this.getNeighbours(Dt).filter(Hr=>!(this.#a[Hr]instanceof s)).filter(Hr=>this.#a[Hr]instanceof s.__proto__).filter(Hr=>!pe.includes(Hr))))}}if(h){let pe=Y;for(;G>=this.#s();){let Dt=this.getNeighbours(pe).filter(Hr=>this.#a[Hr]instanceof s.__proto__&&!(this.#a[Hr]instanceof s));pe=Dt[Math.floor(this.#s()*Dt.length)],this.#a[pe]=new s,E--}}}})))),e()})}};t(Ih,"BaseGenerator");pY=Ih});var sH={};var cY=n(()=>{uY();gh();Up.register(pY)});var yY=P(fY=>{"use strict";Object.defineProperty(fY,"__esModule",{value:!0});cY()});var lH={};var D5e,E5e,F5e,S5e,k5e,Y5e,L5e,z5e,N5e,j5e,W5e,H5e,_5e,K5e,q5e,V5e,J5e,$5e,Z5e,Q5e,X5e,e4e,t4e,r4e,i4e,o4e,n4e,a4e,s4e,l4e,m4e,p4e,u4e,c4e,f4e,y4e,d4e,g4e,h4e,O4e,R4e,x4e,v4e,b4e,C4e,P4e,T4e,I4e,w4e,A4e,B4e,G4e,U4e,M4e,D4e,E4e,F4e,S4e,k4e,Y4e,L4e,z4e,N4e,j4e,W4e,H4e,_4e,K4e,q4e,V4e,J4e,$4e,Z4e,Q4e,X4e,eJe,tJe,rJe,iJe,oJe,nJe,aJe,sJe,lJe,mJe,pJe,uJe,cJe,fJe,yJe,dJe,gJe,hJe,OJe,RJe,xJe,vJe,bJe,CJe,PJe,TJe,IJe,wJe,AJe,BJe,GJe,UJe,MJe,DJe,EJe,FJe,SJe,kJe,YJe,LJe,zJe,NJe,dY=n(()=>{"use strict";D5e=T(YT()),E5e=T(jT()),F5e=T(KT()),S5e=T($T()),k5e=T(eI()),Y5e=T(oI()),L5e=T(lI()),z5e=T(cI()),N5e=T(gI()),j5e=T(xI()),W5e=T(PI()),H5e=T(AI()),_5e=T(MI()),K5e=T(SI()),q5e=T(LI()),V5e=T(jI()),J5e=T(_I()),$5e=T(VI()),Z5e=T(ZI()),Q5e=T(ew()),X5e=T(iw()),e4e=T(aw()),t4e=T(mw()),r4e=T(cw()),i4e=T(dw()),o4e=T(Ow()),n4e=T(vw()),a4e=T(Pw()),s4e=T(ww()),l4e=T(Gw()),m4e=T(Dw()),p4e=T(Sw()),u4e=T(Lw()),c4e=T(jw()),f4e=T(_w()),y4e=T(Vw()),d4e=T(Zw()),g4e=T(eA()),h4e=T(iA()),O4e=T(aA()),R4e=T(mA()),x4e=T(cA()),v4e=T(dA()),b4e=T(OA()),C4e=T(vA()),P4e=T(PA()),T4e=T(wA()),I4e=T(GA()),w4e=T(DA()),A4e=T(SA()),B4e=T(LA()),G4e=T(jA()),U4e=T(_A()),M4e=T(VA()),D4e=T(ZA()),E4e=T(eB()),F4e=T(iB()),S4e=T(aB()),k4e=T(mB()),Y4e=T(cB()),L4e=T(dB()),z4e=T(OB()),N4e=T(vB()),j4e=T(PB()),W4e=T(wB()),H4e=T(GB()),_4e=T(DB()),K4e=T(SB()),q4e=T(LB()),V4e=T(jB()),J4e=T(_B()),$4e=T(VB()),Z4e=T(ZB()),Q4e=T(eG()),X4e=T(iG()),eJe=T(aG()),tJe=T(mG()),rJe=T(cG()),iJe=T(dG()),oJe=T(OG()),nJe=T(vG()),aJe=T(oU()),sJe=T(bU()),lJe=T(KU()),mJe=T(qM()),pJe=T(eD()),uJe=T(mD()),cJe=T(OD()),fJe=T(CD()),yJe=T(zD()),dJe=T(QD()),gJe=T(EE()),hJe=T(t0()),OJe=T(L0()),RJe=T(tF()),xJe=T(dF()),vJe=T(XF()),bJe=T(_S()),CJe=T(Ck()),PJe=T(Ak()),TJe=T(Dk()),IJe=T(Yk()),wJe=T(Wk()),AJe=T(Vk()),BJe=T(Xk()),GJe=T(o1()),UJe=T(m1()),MJe=T(y1()),DJe=T(R1()),EJe=T(P1()),FJe=T(B1()),SJe=T(E1()),kJe=T(N1()),YJe=T(K1()),LJe=T(Z1()),zJe=T(mY()),NJe=T(yY())});Gh();Hh();_h();Wc();hm();var kp=class extends Ts{#e;#t;constructor(e,r=Wn,o=()=>Math.random()){super(e),this.#e=r,this.#t=o}chooseCivilization(e){let r=e[Math.floor(e.length*this.#t())],o=this.player(),s=new r;o.setCivilization(s),this.chooseLeader(s)}chooseLeader(e){let r=this.#e.getByCivilization(e.constructor),o=r[Math.floor(r.length*this.#t())];e.setLeader(new o)}};t(kp,"Client");qh();Tr();Vh();da();nf();De();_t();eO();Z();var Gs,ff=class{constructor(){xe(this,Gs,[])}add(e,r,o=null){C(this,Gs).push({[e]:{type:"add",index:o,value:r}})}clear(){C(this,Gs).splice(0)}remove(e,r=null){C(this,Gs).push({[e]:{type:"remove",index:r}})}transferData(){return C(this,Gs).slice(0).map(e=>{let r={};return Object.entries(e).forEach(([o,{type:s,index:a,value:m}])=>{r[o]={type:s,index:a,value:typeof m=="function"?m():m}}),r})}update(e,r,o=null){C(this,Gs).push({[e]:{type:"update",index:o,value:r}})}};t(ff,"DataQueue"),Gs=new WeakMap;var Dv=ff;df();tO();rO();yl();mo();oO();Af();var Bf=class extends Error{constructor(e,r,o){super(e)}};t(Bf,"RetryFailed");var zv=Bf;var zp,Np,vm,jp,bm,Wp,Hp,Gf=class{constructor(e,r=5,o=100){xe(this,zp,0);xe(this,Np,void 0);xe(this,vm,void 0);xe(this,jp,void 0);xe(this,bm,void 0);xe(this,Wp,void 0);xe(this,Hp,void 0);ke(this,vm,e),ke(this,jp,r),ke(this,bm,setInterval(()=>this.run(),o)),ke(this,Np,new Promise((s,a)=>{ke(this,Hp,s),ke(this,Wp,a)}))}run(){if(++sv(this,zp)._>C(this,jp)){clearInterval(C(this,bm)),C(this,Wp).call(this,new zv("Retry failed.",C(this,vm),C(this,zp)));return}C(this,vm).call(this)&&(clearInterval(C(this,bm)),C(this,Hp).call(this))}then(){return C(this,Np)}};t(Gf,"Retryable"),zp=new WeakMap,Np=new WeakMap,vm=new WeakMap,jp=new WeakMap,bm=new WeakMap,Wp=new WeakMap,Hp=new WeakMap;var Nv=Gf;aO();Z();var Uf=class extends We{constructor(e){super(),Object.assign(this,e),this.addKey(...Object.keys(e))}};t(Uf,"TransferObject");var Mf=Uf;so();Oa();Z();cr();var qp,Vp,Jp,$p,cO=class extends We{constructor(r,o,s,a){super();xe(this,qp,void 0);xe(this,Vp,void 0);xe(this,Jp,{size:0});xe(this,$p,void 0);ke(this,qp,r),ke(this,Vp,s),C(this,Jp).size=a,ke(this,$p,o),this.addKey("_","growth","name","player","tile")}static fromCity(r){let o=he.getByCity(r);return new cO(r.name(),r.tile(),r.player(),o.size())}_(){return"City"}name(){return C(this,qp)}player(){return C(this,Vp)}growth(){return C(this,Jp)}tile(){return C(this,$p)}},Nf=cO;t(Nf,"City"),qp=new WeakMap,Vp=new WeakMap,Jp=new WeakMap,$p=new WeakMap;var Jv=Nf;Z();var Zp,fO=class extends We{constructor(r){super();xe(this,Zp,void 0);ke(this,Zp,r),this.addKey("_","civilization")}static fromPlayer(r){return new fO(r.civilization())}_(){return"Player"}civilization(){return C(this,Zp)}},jf=fO;t(jf,"Player"),Zp=new WeakMap;var $v=jf;Z();var Qp,Xp,eu,yO=class extends We{constructor(r,o,s){super();xe(this,Qp,void 0);xe(this,Xp,void 0);xe(this,eu,void 0);ke(this,Qp,r),ke(this,Xp,o),ke(this,eu,s),this.addKey("_","tile","player")}static fromUnit(r){return new yO(r.constructor.name,r.tile(),r.player())}_(){return C(this,Qp)}player(){return C(this,eu)}tile(){return C(this,Xp)}},Wf=yO;t(Wf,"Unit"),Qp=new WeakMap,Xp=new WeakMap,eu=new WeakMap;var Zv=Wf;Ae();U();Ze();Bm();q();hm();Es();Ye();vl();co();Kt();Je();gO();Mm();var tb=t(i=>i instanceof We?{"#ref":i.id()}:i,"referenceObject"),ze=t((...i)=>e=>i.some(r=>e instanceof r)?tb(e):e,"filterToReference"),eb=t((...i)=>e=>i.some(r=>e instanceof r)?e:tb(e),"filterToReferenceAllExcept"),hO=new Map,OO=new Map,RO=new Map,fe,re,Gl,ks,Vn,tu,Zf=class extends kp{constructor(r,o,s){super(r);xe(this,fe,t((r=o=>o)=>o=>o instanceof K&&o!==this.player()?(hO.has(o)||hO.set(o,$v.fromPlayer(o)),hO.get(o)):o instanceof Be&&o.player()!==this.player()?(OO.has(o)||OO.set(o,Zv.fromUnit(o)),OO.get(o)):o instanceof nt&&o.player()!==this.player()?(RO.has(o)||RO.set(o,Jv.fromCity(o)),RO.get(o)):o instanceof ge?me.getByPlayer(this.player()).get(o.x(),o.y()):o instanceof we?{_:o.constructor.name}:r(o),"#dataFilter"));xe(this,re,new Dv);xe(this,Gl,void 0);xe(this,ks,void 0);xe(this,Vn,void 0);xe(this,tu,!1);ke(this,Gl,new hf),ke(this,Vn,o),ke(this,ks,s),C(this,ks).call(this,"action",(...a)=>{C(this,Gl).emit("action",...a)}),C(this,ks).call(this,"cheat",({name:a,value:m})=>{if(a==="RevealMap"){let u=me.getByPlayer(this.player()),[f]=u.entries();f.tile().map().entries().forEach(c=>{if(u.includes(c))return;u.register(c);let y=u.getByTile(c);C(this,re).add(u.id(),()=>c.toPlainObject(C(this,fe).call(this)),`entries[${u.entries().indexOf(y)}]`)})}if(a==="GrantAdvance"){let[u]=R.filter(c=>c.name===m),f=N.getByPlayer(this.player());if(!u||f.completed(u))return;f.addAdvance(u),C(this,re).add(f.id(),f.toPlainObject(C(this,fe).call(this,ze(K))))}if(a==="GrantGold"){let u=xi.getByPlayer(this.player());u.add(m),C(this,re).add(u.id(),u.toPlainObject(C(this,fe).call(this,ze(K))))}if(a==="ModifyUnit"){let{unitId:u,properties:f}=m,[c]=W.getBy("id",u);if(!c)return;["attack","defence","moves","movement","visibility"].forEach(y=>{y in f&&c[y]().set(f[y])}),C(this,re).add(c.id(),c.toPlainObject(C(this,fe).call(this,ze(K))))}this.sendPatchData()}),b.on("engine:plugins:load:failed",(a,m)=>{console.log(a+" failed to load"),console.error(m)}),b.on("player:visibility-changed",(a,m)=>{if(m!==this.player())return;let u=me.getByPlayer(this.player()),f=u.getByTile(a);if(f===null){new Nv(()=>{let c=u.getByTile(a);return c===null?!1:(C(this,re).add(u.id(),()=>a.toPlainObject(C(this,fe).call(this,ze(K))),`tiles[${u.entries().indexOf(c)}]`),!0)},2,20);return}C(this,re).add(u.id(),()=>f.toPlainObject(C(this,fe).call(this,ze(K))),`tiles[${u.entries().indexOf(f)}]`)}),["unit:created","unit:defeated"].forEach(a=>{b.on(a,m=>{let u=me.getByPlayer(this.player()),f=u.getByTile(m.tile());if(!!f&&(C(this,re).update(f.id(),()=>f.toPlainObject(C(this,fe).call(this,ze(K)))),m.player()===this.player())){if(a==="unit:created"){let c=W.getByPlayer(this.player()),y=c.indexOf(m),h=W.getByCity(m.city()),G=h.indexOf(m),D=W.getByTile(m.tile()),B=D.indexOf(m);C(this,re).add(r.id(),()=>m.toPlainObject(C(this,fe).call(this,ze(ge,K,Rm,nt))),`units[${y}]`),C(this,re).add(f.id(),()=>m.toPlainObject(C(this,fe).call(this,ze(Be))),`units[${B}]`),m.city()!==null&&C(this,re).add(m.city().id(),()=>m.toPlainObject(C(this,fe).call(this,ze(Be))),`units[${G}]`);return}C(this,re).update(this.player().id(),()=>this.player().toPlainObject(C(this,fe).call(this,eb(K,Be))))}})}),["unit:destroyed"].forEach(a=>{b.on(a,(m,u)=>{m.player()===this.player()&&m.city()!==null&&C(this,re).update(m.city().id(),()=>m.city().toPlainObject(C(this,fe).call(this,ze(jn,Pl,z,K,Rm,ge,Be))))})}),["unit:moved"].forEach(a=>{b.on(a,(m,u)=>{let f=me.getByPlayer(this.player()),c=f.getByTile(u.from()),y=f.getByTile(u.to());!c&&!y||(c&&C(this,re).update(c.id(),()=>c.toPlainObject(C(this,fe).call(this,ze(K,nt)))),y&&C(this,re).update(y.id(),()=>y.toPlainObject(C(this,fe).call(this,ze(K,nt)))),m.player()===this.player()&&m.city()!==null&&C(this,re).update(m.city().id(),()=>m.city().toPlainObject(C(this,fe).call(this,ze(jn,Pl,z,K,Rm,ge,Be)))))})}),["tile-improvement:built","tile-improvement:pillaged"].forEach(a=>{b.on(a,m=>{let u=me.getByPlayer(this.player()),f=u.getByTile(m);f&&C(this,re).update(f.id(),()=>f.toPlainObject(C(this,fe).call(this,ze(K,nt))))})}),b.on("city:captured",(a,m,u)=>{if(u===this.player()){H.getByPlayer(this.player()).indexOf(a)!==-1&&C(this,re).update(this.player().id(),()=>this.player().toPlainObject(C(this,fe).call(this,eb(K)))),this.sendNotification(`${m.civilization().name()} have captured our city ${a.name()}!`);return}if(m===this.player()){this.sendNotification(`We have captured ${a.name()} from ${u.civilization().name()}!`);return}}),["city:created","city:captured","city:destroyed","city:grow","city:shrink"].forEach(a=>{b.on(a,m=>{let u=me.getByPlayer(this.player()),f=u.getByTile(m.tile());!f||C(this,re).update(f.id(),()=>f.toPlainObject(C(this,fe).call(this,ze(K))))})}),b.on("city:shrink",a=>{a.player()===this.player()&&this.sendNotification(`Population decrease in ${a.name()}.`)}),b.on("city:unit-unsupported",(a,m)=>{a.player()===this.player()&&this.sendNotification(`${a.name()} cannot support ${m.constructor.name}.`)}),b.on("city:unsupported-improvement",(a,m)=>{a.player()===this.player()&&this.sendNotification(`${a.name()} cannot support ${m.constructor.name}.`)}),b.on("city:food-storage-exhausted",a=>{a.player()===this.player()&&this.sendNotification(`Food storage exhausted in ${a.name()}!`)}),b.on("city:building-complete",(a,m)=>{let u=me.getByPlayer(this.player());if(a.city().player()!==this.player()&&m instanceof Oe){this.sendNotification(`${u.getByTile(a.city().tile())?a.city().name():"A faraway city"} has completed work on ${m.constructor.name}!`);return}a.city().player()!==this.player()&&!(m instanceof Oe)||(C(this,re).update(a.id(),()=>a.toPlainObject(C(this,fe).call(this,ze(ge,Be,K)))),this.sendNotification(`${a.city().name()} has completed work on ${m.constructor.name}!`))}),b.on("player:research-complete",(a,m)=>{a.player()===this.player()&&(C(this,re).update(a.id(),()=>a.toPlainObject(C(this,fe).call(this,ze(K)))),this.sendNotification(`You have discovered the secrets of ${m.constructor.name}!`))}),b.on("goody-hut:action-performed",(a,m)=>{let u=a.tile();if(!!W.getByTile(u).some(c=>c.player()===this.player())){if(m instanceof Rs){this.sendNotification("You have discovered scrolls of ancient wisdom...");return}if(m instanceof xs){this.sendNotification("You have discovered an advanced tribe...");return}if(m instanceof bs){this.sendNotification("You have discovered valuable treasure...");return}if(m instanceof Cs){this.sendNotification("You have discovered a friendly tribe of skilled mercenaries...");return}}}),b.on("player:defeated",(a,m)=>{a===this.player()&&(this.sendNotification("You have been defeated!"),Pi.unregister(...Pi.entries()),mn.unregister(...mn.entries()),C(this,Vn).call(this,"restart",null)),this.sendNotification(`${a.civilization().name()} defeated${m?` by ${m.civilization().name()}`:""}.`)}),b.on("city:civil-disorder",a=>{a.player()===this.player()&&this.sendNotification(`Civil disorder in ${a.name()}!`)}),b.on("player:spaceship:part-built",a=>{this.player()!==a&&this.sendNotification(`Component added to ${a.civilization().name()} spaceship.`)}),b.on("player:spaceship:lost",a=>{this.player()===a&&this.sendNotification("Our spaceship was lost in space.")}),b.on("player:spaceship:landed",a=>{this.player()===a&&this.sendNotification("Our spaceship has landed on Alpha Centauri!")})}chooseCivilization(r){let o=t(s=>(this.player().setCivilization(new s),this.chooseLeader(this.player().civilization())),"makeChoice");return new Promise((s,a)=>{if(r.length===1){let[m]=r;o(m).then(()=>s());return}C(this,Vn).call(this,"chooseCivilization",new Mf({choices:r}).toPlainObject()),C(this,ks).call(this,"chooseCivilization",m=>{let[u]=r.filter(f=>f.name===m);if(!u){a(`Invalid civilization ${m} (options: ${r.map(f=>f.name).join(", ")})`);return}o(u).then(()=>s())})})}chooseLeader(r){return new Promise((o,s)=>{let a=Wn.getByCivilization(r.constructor);if(a.length===1){let[m]=a;r.setLeader(new m),o();return}C(this,Vn).call(this,"chooseLeader",new Mf({choices:a}).toPlainObject()),C(this,ks).call(this,"chooseLeader",m=>{let[u]=a.filter(f=>f.name===m);if(!u){s(`Invalid civilization ${m} (options: ${a.map(f=>f.name).join(", ")})`);return}r.setLeader(new u),o()})})}handleAction(...r){let[o]=r,s=this.player(),a=s.actions(),m=a.filter(y=>y instanceof hi),{name:u,id:f}=o;if(u==="ReassignWorkers"){let[y]=H.getBy("id",o.city);return y&&(Qv(y),C(this,re).update(y.id(),y.toPlainObject(C(this,fe).call(this,ze(K,ge))))),!1}if(u==="EndTurn")return m.length===1&&m.every(y=>y instanceof Tl);if(!u)return console.log("action not specified"),!1;let[c]=a.filter(y=>y.constructor.name===u&&f===(y.value()?y.value().id():void 0));if(!c)return console.log("action not specified"),!1;if(c instanceof cs){let{unitAction:y,target:h}=o,G=c.value(),B=[...G.actions(),...Object.values(G.actionsForNeighbours())].flat().filter(Y=>Y.constructor.name===y);for(;B.length!==1;){if(B.length===0)return console.log(`action not found: ${y}`),!1;let[Y]=me.getByPlayer(this.player()).filter(pe=>pe.id()===h);if(!Y)return console.log(`tile not found: ${h}`),!1;if(B=B.filter(pe=>pe.to()===Y.tile()),B.length>1&&!h)return console.log(`too many actions found: ${y} (${B.length})`),!1}let[E]=B;return E.perform(),!1}if(c instanceof fs){let y=c.value();return y.moves().value()>0&&C(this,re).update(y.id(),y.toPlainObject(C(this,fe).call(this,ze(K,ge)))),y.activate(),!1}if(c instanceof jn||c instanceof Ps){let y=c.value(),{chosen:h}=o;if(!h)return console.log("no build item specified"),!1;let[G]=y.available().filter(D=>D.item().name===h);return G?(y.build(G.item()),!1):(console.log(`build item not available: ${h}`),!1)}if(c instanceof Gv){let y=c.value(),{chosen:h}=o;if(!h)return this.sendNotification("no build item specified"),!1;let[G]=y.available().filter(D=>D.name===h);return G?(y.research(G),!1):(console.log(`build item not available: ${h}`),!1)}if(c instanceof Bs){let y=c.value(),h=xi.getByPlayer(this.player());return h.buy(y),C(this,re).update(h.id(),h.toPlainObject(C(this,fe).call(this,ze(K)))),!1}if(c instanceof Us){let y=c.value(),{chosen:h}=o,[G]=y.available().filter(B=>B.name===h);if(!G)return console.error(`Government type: '${h}' not found.`),!1;y.set(new G);let D=me.getByPlayer(this.player());return C(this,re).update(D.id(),D.toPlainObject(C(this,fe).call(this,ze(K)))),H.getByPlayer(this.player()).forEach(B=>C(this,re).update(B.id(),B.toPlainObject(C(this,fe).call(this,ze(K,ge,Be))))),!1}if(c instanceof ws){let y=c.value(),{value:h}=o;return y.setAll(h.map(([G,D])=>{let[B]=y.all().filter(E=>E.constructor.name===G);return[B.constructor,D]})),H.getByPlayer(this.player()).forEach(G=>C(this,re).update(G.id(),G.toPlainObject(C(this,fe).call(this,ze(K,ge,Be))))),!1}return c instanceof Il?(c.value().launch(),!1):(console.log(`unhandled action: ${JSON.stringify(o)}`),!1)}sendInitialData(){let r={player:this.player(),turn:ae,year:Gm},o=new Mf(r);C(this,Vn).call(this,"gameData",o.toPlainObject(C(this,fe).call(this))),ke(this,tu,!0)}sendPatchData(){C(this,Vn).call(this,"gameDataPatch",C(this,re).transferData()),C(this,re).clear()}sendNotification(r){C(this,Vn).call(this,"gameNotification",{message:r})}takeTurn(){return new Promise((r,o)=>{C(this,tu)||this.sendInitialData(),setTimeout(()=>{C(this,re).update(ae.id(),()=>ae.toPlainObject()),C(this,re).update(Gm.id(),()=>Gm.toPlainObject()),C(this,re).add(this.player().id(),()=>this.player().toPlainObject(C(this,fe).call(this,ze(ge,ce)))),this.sendPatchData()},1);let s=t((...a)=>{try{if(this.handleAction(...a)){C(this,Gl).off("action",s),this.sendPatchData(),setTimeout(()=>r(),100);return}C(this,re).update(this.player().id(),()=>this.player().toPlainObject(C(this,fe).call(this,ze(xm,ge,nt)))),this.sendPatchData()}catch(m){o(m)}},"listener");C(this,Gl).on("action",s)})}};t(Zf,"DataTransferClient"),fe=new WeakMap,re=new WeakMap,Gl=new WeakMap,ks=new WeakMap,Vn=new WeakMap,tu=new WeakMap;var rb=Zf;mo();Jm();Fl();q();Es();var jt,wh=class{constructor(e){xe(this,jt,void 0);ke(this,jt,e),e.receive("start",()=>{this.bindEvents(),this.start()}),e.receive("setOption",({name:r,value:o})=>{C(this,jt).send("notification",`setting ${r} to ${o}`),b.setOption(r,o)}),e.receive("getOptions",r=>e.send("getOptions",r.reduce((o,s)=>(o[s]=b.option(s),o),{}))),e.receive("setOptions",r=>{Object.entries(r).forEach(([o,s])=>b.setOption(o,s)),e.send("setOptions")})}bindEvents(){C(this,jt).send("notification","binding events"),b.on("engine:initialise",()=>C(this,jt).send("notification","initialising...")),b.on("engine:plugins:load:success",e=>C(this,jt).send("notification",`loaded plugin: ${e}`)),b.on("engine:plugins-loaded",()=>C(this,jt).send("notification","plugins loaded")),b.on("engine:start",()=>C(this,jt).send("notification","starting...")),b.on("world:generate-start-tiles",()=>C(this,jt).send("notification","generating start tiles...")),b.on("world:built",()=>C(this,jt).send("notification","world built")),b.on("game:start",()=>C(this,jt).send("notification","game start")),b.on("turn:start",e=>C(this,jt).send("notification",`turn start ${e}`)),b.on("player:turn-start",e=>C(this,jt).send("notification",`player turn-start: ${e.civilization().constructor.name}`))}start(){b.on("engine:start",()=>{new Array(parseInt(b.option("players"),10)).fill(0).forEach((e,r)=>{let o=new K,s=r===0?new rb(o,(a,m)=>C(this,jt).send(a,m),(a,m)=>C(this,jt).receive(a,m)):new ia(o);Pi.register(o),Vo.register(s),C(this,jt).send("notification","generating world...")})}),b.start(),Promise.resolve().then(()=>(dY(),lH)).then(()=>b.emit("plugins:load:end"))}};t(wh,"Game"),jt=new WeakMap;var gY=wh;var Ah=class{async request(e){return new Promise(r=>{this.send(e.channel(),...e.args()),this.receiveOnce(e.channel(),o=>r(o))})}};t(Ah,"AbstractTransport");var hY=Ah;var Bh=class extends hY{receive(e,r){addEventListener("message",({data:{channel:o,data:s}})=>{o===e&&r(s)})}receiveOnce(e,r){addEventListener("message",({data:{channel:o,data:s}})=>{o===e&&r(s)},{once:!0})}send(e,r){postMessage({channel:e,data:r})}};t(Bh,"ParentTransport");var OY=Bh;var e6e=new gY(new OY);})();
//# sourceMappingURL=backend.js.map
