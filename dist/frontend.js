"use strict";(()=>{var Qd=Object.create;var si=Object.defineProperty;var eu=Object.getOwnPropertyDescriptor;var tu=Object.getOwnPropertyNames;var au=Object.getPrototypeOf,nu=Object.prototype.hasOwnProperty;var iu=(i,t,e)=>t in i?si(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t)=>si(i,"name",{value:t,configurable:!0});var z=(i,t)=>()=>(i&&(t=i(i=0)),t);var yo=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var ru=(i,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of tu(t))!nu.call(i,n)&&n!==e&&si(i,n,{get:()=>t[n],enumerable:!(a=eu(t,n))||a.enumerable});return i};var _=(i,t,e)=>(e=i!=null?Qd(au(i)):{},ru(t||!i||!i.__esModule?si(e,"default",{value:i,enumerable:!0}):e,i));var vo=(i,t,e)=>(iu(i,typeof t!="symbol"?t+"":t,e),e),bo=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var u=(i,t,e)=>(bo(i,t,"read from private field"),e?e.call(i):t.get(i)),y=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},v=(i,t,e,a)=>(bo(i,t,"write to private field"),a?a.call(i,e):t.set(i,e),e);var D=yo(M=>{"use strict";var oi,su=M&&M.__classPrivateFieldSet||function(i,t,e,a,n){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!n:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?n.call(i,e):n?n.value=e:t.set(i,e),e},ou=M&&M.__classPrivateFieldGet||function(i,t,e,a){if(e==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!a:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?a:e==="a"?a.call(i):a?a.value:t.get(i)};Object.defineProperty(M,"__esModule",{value:!0}),M.Element=M.toggleClass=M.t=M.s=M.removeClass=M.once=M.onEach=M.on=M.off=M.hasClass=M.empty=M.emitCustom=M.emit=M.addClass=void 0;M.addClass=(i,...t)=>i.classList.add(...t);M.emit=(i,t)=>i.dispatchEvent(t);M.emitCustom=(i,t,...e)=>(0,M.emit)(i,new CustomEvent(t,{detail:e}));M.empty=i=>{for(var t;i.hasChildNodes();)(t=i.firstChild)===null||t===void 0||t.remove()};M.hasClass=(i,t)=>i.classList.contains(t);M.off=(i,t,e,a={})=>i.removeEventListener(t,e,a);M.on=(i,t,e,a={})=>i.addEventListener(t,e,a);M.onEach=(i,t,e,a={})=>t.forEach(n=>(0,M.on)(i,n,e,a));M.once=(i,t,e,a={})=>(0,M.on)(i,t,e,Object.assign(Object.assign({},typeof a=="boolean"?{capture:a}:a),{once:!0}));M.removeClass=(i,...t)=>i.classList.remove(...t);M.s=(i,...t)=>{let e=document.createElement("div");e.innerHTML=i;let a=e.firstElementChild;return t.forEach(n=>{n instanceof Qe?a.append(n.element()):n instanceof Node?a.append(n):a.append((0,M.t)(n))}),a};M.t=i=>document.createTextNode(i);M.toggleClass=(i,...t)=>t.forEach(e=>i.classList.toggle(e));var Qe=class{constructor(t){oi.set(this,void 0),su(this,oi,t,"f")}static fromString(t){return new Qe((0,M.s)(t))}addClass(...t){(0,M.addClass)(this.element(),...t)}append(...t){t.forEach(e=>{e instanceof Qe&&(e=e.element()),this.element().append(e)})}element(){return ou(this,oi,"f")}emit(t){return(0,M.emit)(this.element(),t)}emitCustom(t,...e){return(0,M.emitCustom)(this.element(),t,...e)}empty(){(0,M.empty)(this.element())}hasClass(t){return(0,M.hasClass)(this.element(),t)}off(t,e,a={}){(0,M.off)(this.element(),t,e,a)}on(t,e,a={}){(0,M.on)(this.element(),t,e,a)}onEach(t,e,a={}){(0,M.onEach)(this.element(),t,e,a)}once(t,e,a={}){(0,M.once)(this.element(),t,e,a)}query(t){return this.element().querySelector(t)}queryAll(t){return this.element().querySelectorAll(t)}remove(){this.element().remove()}removeClass(...t){(0,M.removeClass)(this.element(),...t)}toggleClass(...t){(0,M.toggleClass)(this.element(),...t)}};o(Qe,"o");M.Element=Qe,oi=new WeakMap,M.default=Qe});function se(i){return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(i)}var Ja=z(()=>{o(se,"_typeof")});function me(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Ss=z(()=>{o(me,"_classCallCheck")});function Ps(i,t){if(se(i)!=="object"||i===null)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var a=e.call(i,t||"default");if(se(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}var wo=z(()=>{Ja();o(Ps,"_toPrimitive")});function Xa(i){var t=Ps(i,"string");return se(t)==="symbol"?t:String(t)}var Ts=z(()=>{Ja();wo();o(Xa,"_toPropertyKey")});function xo(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,Xa(a.key),a)}}function pe(i,t,e){return t&&xo(i.prototype,t),e&&xo(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var Ms=z(()=>{Ts();o(xo,"_defineProperties");o(pe,"_createClass")});function Ie(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var Es=z(()=>{o(Ie,"_assertThisInitialized")});function Qa(i,t){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(a,n){return a.__proto__=n,a},"_setPrototypeOf"),Qa(i,t)}var Ao=z(()=>{o(Qa,"_setPrototypeOf")});function ta(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&Qa(i,t)}var Co=z(()=>{Ao();o(ta,"_inherits")});function Et(i,t){if(t&&(se(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(i)}var ko=z(()=>{Ja();Es();o(Et,"_possibleConstructorReturn")});function xe(i){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():o(function(e){return e.__proto__||Object.getPrototypeOf(e)},"_getPrototypeOf"),xe(i)}var Ro=z(()=>{o(xe,"_getPrototypeOf")});function Le(i,t,e){return t=Xa(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var Io=z(()=>{Ts();o(Le,"_defineProperty")});function Fs(i){if(Array.isArray(i))return i}var So=z(()=>{o(Fs,"_arrayWithHoles")});function _s(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}var Po=z(()=>{o(_s,"_iterableToArray")});function li(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=i[e];return a}var To=z(()=>{o(li,"_arrayLikeToArray")});function Ds(i,t){if(!!i){if(typeof i=="string")return li(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return li(i,t)}}var Mo=z(()=>{To();o(Ds,"_unsupportedIterableToArray")});function Ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Eo=z(()=>{o(Ls,"_nonIterableRest")});function Us(i){return Fs(i)||_s(i)||Ds(i)||Ls()}var Fo=z(()=>{So();Po();Mo();Eo();o(Us,"_toArray")});function _o(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function Do(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?_o(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):_o(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function en(){var i,t,e=new Promise(function(a,n){i=a,t=n});return e.resolve=i,e.reject=t,e}function Lo(i){return i==null?"":""+i}function uu(i,t,e){i.forEach(function(a){t[a]&&(e[a]=t[a])})}function Os(i,t,e){function a(l){return l&&l.indexOf("###")>-1?l.replace(/###/g,"."):l}o(a,"cleanKey");function n(){return!i||typeof i=="string"}o(n,"canNotTraverseDeeper");for(var r=typeof t!="string"?[].concat(t):t.split(".");r.length>1;){if(n())return{};var s=a(r.shift());!i[s]&&e&&(i[s]=new e),Object.prototype.hasOwnProperty.call(i,s)?i=i[s]:i={}}return n()?{}:{obj:i,k:a(r.shift())}}function Uo(i,t,e){var a=Os(i,t,Object),n=a.obj,r=a.k;n[r]=e}function cu(i,t,e,a){var n=Os(i,t,Object),r=n.obj,s=n.k;r[s]=r[s]||[],a&&(r[s]=r[s].concat(e)),a||r[s].push(e)}function ci(i,t){var e=Os(i,t),a=e.obj,n=e.k;if(!!a)return a[n]}function mu(i,t,e){var a=ci(i,e);return a!==void 0?a:ci(t,e)}function Jo(i,t,e){for(var a in t)a!=="__proto__"&&a!=="constructor"&&(a in i?typeof i[a]=="string"||i[a]instanceof String||typeof t[a]=="string"||t[a]instanceof String?e&&(i[a]=t[a]):Jo(i[a],t[a],e):i[a]=t[a]);return i}function aa(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function hu(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,function(t){return pu[t]}):i}function fu(i,t,e){t=t||"",e=e||"";var a=gu.filter(function(l){return t.indexOf(l)<0&&e.indexOf(l)<0});if(a.length===0)return!0;var n=new RegExp("(".concat(a.map(function(l){return l==="?"?"\\?":l}).join("|"),")")),r=!n.test(i);if(!r){var s=i.indexOf(e);s>0&&!n.test(i.substring(0,s))&&(r=!0)}return r}function mi(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!i){if(i[t])return i[t];for(var a=t.split(e),n=i,r=0;r<a.length;++r){if(!n||typeof n[a[r]]=="string"&&r+1<a.length)return;if(n[a[r]]===void 0){for(var s=2,l=a.slice(r,r+s).join(e),d=n[l];d===void 0&&a.length>r+s;)s++,l=a.slice(r,r+s).join(e),d=n[l];if(d===void 0)return;if(d===null)return null;if(t.endsWith(l)){if(typeof d=="string")return d;if(l&&typeof d[l]=="string")return d[l]}var m=a.slice(r+s).join(e);return m?mi(d,m,e):void 0}n=n[a[r]]}return n}}function Bo(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function di(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Bo(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Bo(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function yu(i){var t=vu();return o(function(){var a=xe(i),n;if(t){var r=xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)},"_createSuperInternal")}function vu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oo(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function ue(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Oo(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Oo(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function wu(i){var t=xu();return o(function(){var a=xe(i),n;if(t){var r=xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)},"_createSuperInternal")}function xu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bs(i){return i.charAt(0).toUpperCase()+i.slice(1)}function Ru(){var i={};return Au.forEach(function(t){t.lngs.forEach(function(e){i[e]={numbers:t.nr,plurals:Cu[t.fc]}})}),i}function $o(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function Se(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$o(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):$o(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function Wo(i,t,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=mu(i,t,e);return!r&&n&&typeof e=="string"&&(r=mi(i,e,a),r===void 0&&(r=mi(t,e,a))),r}function Ho(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function et(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ho(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Ho(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function Pu(i){var t=i.toLowerCase().trim(),e={};if(i.indexOf("(")>-1){var a=i.split("(");t=a[0].toLowerCase().trim();var n=a[1].substring(0,a[1].length-1);if(t==="currency"&&n.indexOf(":")<0)e.currency||(e.currency=n.trim());else if(t==="relativetime"&&n.indexOf(":")<0)e.range||(e.range=n.trim());else{var r=n.split(";");r.forEach(function(s){if(!!s){var l=s.split(":"),d=Us(l),m=d[0],p=d.slice(1),c=p.join(":").trim().replace(/^'+|'+$/g,"");e[m.trim()]||(e[m.trim()]=c),c==="false"&&(e[m.trim()]=!1),c==="true"&&(e[m.trim()]=!0),isNaN(c)||(e[m.trim()]=parseInt(c,10))}})}}return{formatName:t,formatOptions:e}}function na(i){var t={};return o(function(a,n,r){var s=n+JSON.stringify(r),l=t[s];return l||(l=i(n,r),t[s]=l),l(a)},"invokeFormatter")}function Vo(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function Ko(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Vo(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Vo(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function Mu(i){var t=Eu();return o(function(){var a=xe(i),n;if(t){var r=xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)},"_createSuperInternal")}function Eu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fu(i,t){i.pending[t]!==void 0&&(delete i.pending[t],i.pendingCount--)}function Yo(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:o(function(t){var e={};if(se(t[1])==="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),se(t[2])==="object"||se(t[3])==="object"){var a=t[3]||t[2];Object.keys(a).forEach(function(n){e[n]=a[n]})}return e},"handle"),interpolation:{escapeValue:!0,format:o(function(t,e,a,n){return t},"format"),prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function qo(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function Zo(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,a)}return e}function Ue(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Zo(Object(e),!0).forEach(function(a){Le(i,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Zo(Object(e)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(e,a))})}return i}function Du(i){var t=Lu();return o(function(){var a=xe(i),n;if(t){var r=xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)},"_createSuperInternal")}function Lu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ui(){}function Uu(i){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(i));t.forEach(function(e){typeof i[e]=="function"&&(i[e]=i[e].bind(i))})}var lu,du,Be,ot,pu,hi,gu,bu,Xo,zo,Go,No,Au,Cu,ku,jo,Iu,Su,Tu,_u,pi,S,Nm,jm,$m,Wm,Hm,Vm,Km,Ym,g,qm,Zm,Jm,Xm,Qm,I=z(()=>{Ja();Ss();Ms();Es();Co();ko();Ro();Io();Fo();o(_o,"ownKeys$6");o(Do,"_objectSpread$6");lu={type:"logger",log:o(function(t){this.output("log",t)},"log"),warn:o(function(t){this.output("warn",t)},"warn"),error:o(function(t){this.output("error",t)},"error"),output:o(function(t,e){console&&console[t]&&console[t].apply(console,e)},"output")},du=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};me(this,i),this.init(t,e)}return o(i,"Logger"),pe(i,[{key:"init",value:o(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=e||lu,this.options=a,this.debug=a.debug},"init")},{key:"setDebug",value:o(function(e){this.debug=e},"setDebug")},{key:"log",value:o(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return this.forward(a,"log","",!0)},"log")},{key:"warn",value:o(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return this.forward(a,"warn","",!0)},"warn")},{key:"error",value:o(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return this.forward(a,"error","")},"error")},{key:"deprecate",value:o(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)},"deprecate")},{key:"forward",value:o(function(e,a,n,r){return r&&!this.debug?null:(typeof e[0]=="string"&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[a](e))},"forward")},{key:"create",value:o(function(e){return new i(this.logger,Do(Do({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))},"create")},{key:"clone",value:o(function(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new i(this.logger,e)},"clone")}]),i}(),Be=new du,ot=function(){function i(){me(this,i),this.observers={}}return o(i,"EventEmitter"),pe(i,[{key:"on",value:o(function(e,a){var n=this;return e.split(" ").forEach(function(r){n.observers[r]=n.observers[r]||[],n.observers[r].push(a)}),this},"on")},{key:"off",value:o(function(e,a){if(!!this.observers[e]){if(!a){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(function(n){return n!==a})}},"off")},{key:"emit",value:o(function(e){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];if(this.observers[e]){var s=[].concat(this.observers[e]);s.forEach(function(d){d.apply(void 0,n)})}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach(function(d){d.apply(d,[e].concat(n))})}},"emit")}]),i}();o(en,"defer");o(Lo,"makeString");o(uu,"copy");o(Os,"getLastOfPath");o(Uo,"setPath");o(cu,"pushPath");o(ci,"getPath");o(mu,"getPathWithDefaults");o(Jo,"deepExtend");o(aa,"regexEscape");pu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o(hu,"escape");hi=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,gu=[" ",",","?","!",";"];o(fu,"looksLikeObjectPath");o(mi,"deepFind");o(Bo,"ownKeys$5");o(di,"_objectSpread$5");o(yu,"_createSuper$3");o(vu,"_isNativeReflectConstruct$3");bu=function(i){ta(e,i);var t=yu(e);function e(a){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return me(this,e),n=t.call(this),hi&&ot.call(Ie(n)),n.data=a||{},n.options=r,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.options.ignoreJSONStructure===void 0&&(n.options.ignoreJSONStructure=!0),n}return o(e,"ResourceStore"),pe(e,[{key:"addNamespaces",value:o(function(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)},"addNamespaces")},{key:"removeNamespaces",value:o(function(n){var r=this.options.ns.indexOf(n);r>-1&&this.options.ns.splice(r,1)},"removeNamespaces")},{key:"getResource",value:o(function(n,r,s){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,m=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure,p=[n,r];s&&typeof s!="string"&&(p=p.concat(s)),s&&typeof s=="string"&&(p=p.concat(d?s.split(d):s)),n.indexOf(".")>-1&&(p=n.split("."));var c=ci(this.data,p);return c||!m||typeof s!="string"?c:mi(this.data&&this.data[n]&&this.data[n][r],s,d)},"getResource")},{key:"addResource",value:o(function(n,r,s,l){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},m=this.options.keySeparator;m===void 0&&(m=".");var p=[n,r];s&&(p=p.concat(m?s.split(m):s)),n.indexOf(".")>-1&&(p=n.split("."),l=r,r=p[1]),this.addNamespaces(r),Uo(this.data,p,l),d.silent||this.emit("added",n,r,s,l)},"addResource")},{key:"addResources",value:o(function(n,r,s){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var d in s)(typeof s[d]=="string"||Object.prototype.toString.apply(s[d])==="[object Array]")&&this.addResource(n,r,d,s[d],{silent:!0});l.silent||this.emit("added",n,r,s)},"addResources")},{key:"addResourceBundle",value:o(function(n,r,s,l,d){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},p=[n,r];n.indexOf(".")>-1&&(p=n.split("."),l=s,s=r,r=p[1]),this.addNamespaces(r);var c=ci(this.data,p)||{};l?Jo(c,s,d):c=di(di({},c),s),Uo(this.data,p,c),m.silent||this.emit("added",n,r,s)},"addResourceBundle")},{key:"removeResourceBundle",value:o(function(n,r){this.hasResourceBundle(n,r)&&delete this.data[n][r],this.removeNamespaces(r),this.emit("removed",n,r)},"removeResourceBundle")},{key:"hasResourceBundle",value:o(function(n,r){return this.getResource(n,r)!==void 0},"hasResourceBundle")},{key:"getResourceBundle",value:o(function(n,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?di(di({},{}),this.getResource(n,r)):this.getResource(n,r)},"getResourceBundle")},{key:"getDataByLanguage",value:o(function(n){return this.data[n]},"getDataByLanguage")},{key:"hasLanguageSomeTranslations",value:o(function(n){var r=this.getDataByLanguage(n),s=r&&Object.keys(r)||[];return!!s.find(function(l){return r[l]&&Object.keys(r[l]).length>0})},"hasLanguageSomeTranslations")},{key:"toJSON",value:o(function(){return this.data},"toJSON")}]),e}(ot),Xo={processors:{},addPostProcessor:o(function(t){this.processors[t.name]=t},"addPostProcessor"),handle:o(function(t,e,a,n,r){var s=this;return t.forEach(function(l){s.processors[l]&&(e=s.processors[l].process(e,a,n,r))}),e},"handle")};o(Oo,"ownKeys$4");o(ue,"_objectSpread$4");o(wu,"_createSuper$2");o(xu,"_isNativeReflectConstruct$2");zo={},Go=function(i){ta(e,i);var t=wu(e);function e(a){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return me(this,e),n=t.call(this),hi&&ot.call(Ie(n)),uu(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,Ie(n)),n.options=r,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.logger=Be.create("translator"),n}return o(e,"Translator"),pe(e,[{key:"changeLanguage",value:o(function(n){n&&(this.language=n)},"changeLanguage")},{key:"exists",value:o(function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;var s=this.resolve(n,r);return s&&s.res!==void 0},"exists")},{key:"extractFromKey",value:o(function(n,r){var s=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");var l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,d=r.ns||this.options.defaultNS||[],m=s&&n.indexOf(s)>-1,p=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!fu(n,s,l);if(m&&!p){var c=n.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:n,namespaces:d};var h=n.split(s);(s!==l||s===l&&this.options.ns.indexOf(h[0])>-1)&&(d=h.shift()),n=h.join(l)}return typeof d=="string"&&(d=[d]),{key:n,namespaces:d}},"extractFromKey")},{key:"translate",value:o(function(n,r,s){var l=this;if(se(r)!=="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),r||(r={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);var d=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,m=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,p=this.extractFromKey(n[n.length-1],r),c=p.key,h=p.namespaces,f=h[h.length-1],w=r.lng||this.language,C=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(w&&w.toLowerCase()==="cimode"){if(C){var A=r.nsSeparator||this.options.nsSeparator;return d?{res:"".concat(f).concat(A).concat(c),usedKey:c,exactUsedKey:c,usedLng:w,usedNS:f}:"".concat(f).concat(A).concat(c)}return d?{res:c,usedKey:c,exactUsedKey:c,usedLng:w,usedNS:f}:c}var b=this.resolve(n,r),x=b&&b.res,U=b&&b.usedKey||c,F=b&&b.exactUsedKey||c,B=Object.prototype.toString.apply(x),j=["[object Number]","[object Function]","[object RegExp]"],Q=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,Re=!this.i18nFormat||this.i18nFormat.handleAsObject,k=typeof x!="string"&&typeof x!="boolean"&&typeof x!="number";if(Re&&x&&k&&j.indexOf(B)<0&&!(typeof Q=="string"&&B==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,x,ue(ue({},r),{},{ns:h})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return d?(b.res=O,b):O}if(m){var J=B==="[object Array]",ve=J?[]:{},qe=J?F:U;for(var re in x)if(Object.prototype.hasOwnProperty.call(x,re)){var L="".concat(qe).concat(m).concat(re);ve[re]=this.translate(L,ue(ue({},r),{joinArrays:!1,ns:h})),ve[re]===L&&(ve[re]=x[re])}x=ve}}else if(Re&&typeof Q=="string"&&B==="[object Array]")x=x.join(Q),x&&(x=this.extendTranslation(x,n,r,s));else{var Pt=!1,Ze=!1,st=r.count!==void 0&&typeof r.count!="string",Tt=e.hasDefaultValue(r),ni=st?this.pluralResolver.getSuffix(w,r.count,r):"",we=r["defaultValue".concat(ni)]||r.defaultValue;!this.isValidLookup(x)&&Tt&&(Pt=!0,x=we),this.isValidLookup(x)||(Ze=!0,x=c);var Va=r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,ii=Va&&Ze?void 0:x,Mt=Tt&&we!==x&&this.options.updateMissing;if(Ze||Pt||Mt){if(this.logger.log(Mt?"updateKey":"missingKey",w,f,c,Mt?we:x),m){var Is=this.resolve(c,ue(ue({},r),{},{keySeparator:!1}));Is&&Is.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Je=[],Xt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Xt&&Xt[0])for(var Qt=0;Qt<Xt.length;Qt++)Je.push(Xt[Qt]);else this.options.saveMissingTo==="all"?Je=this.languageUtils.toResolveHierarchy(r.lng||this.language):Je.push(r.lng||this.language);var ri=o(function(Xe,ea,Ya){var qa=Tt&&Ya!==x?Ya:ii;l.options.missingKeyHandler?l.options.missingKeyHandler(Xe,f,ea,qa,Mt,r):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(Xe,f,ea,qa,Mt,r),l.emit("missingKey",Xe,f,ea,x)},"send");this.options.saveMissing&&(this.options.saveMissingPlurals&&st?Je.forEach(function(Ka){l.pluralResolver.getSuffixes(Ka,r).forEach(function(Xe){ri([Ka],c+Xe,r["defaultValue".concat(Xe)]||we)})}):ri(Je,c,we))}x=this.extendTranslation(x,n,r,b,s),Ze&&x===c&&this.options.appendNamespaceToMissingKey&&(x="".concat(f,":").concat(c)),(Ze||Pt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(c):c,Pt?x:void 0):x=this.options.parseMissingKeyHandler(x))}return d?(b.res=x,b):x},"translate")},{key:"extendTranslation",value:o(function(n,r,s,l,d){var m=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,ue(ue({},this.options.interpolation.defaultVariables),s),l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init(ue(ue({},s),{interpolation:ue(ue({},this.options.interpolation),s.interpolation)}));var p=typeof n=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(p){var h=n.match(this.interpolator.nestingRegexp);c=h&&h.length}var f=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(f=ue(ue({},this.options.interpolation.defaultVariables),f)),n=this.interpolator.interpolate(n,f,s.lng||this.language,s),p){var w=n.match(this.interpolator.nestingRegexp),C=w&&w.length;c<C&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&l&&l.res&&(s.lng=l.usedLng),s.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var x=arguments.length,U=new Array(x),F=0;F<x;F++)U[F]=arguments[F];return d&&d[0]===U[0]&&!s.context?(m.logger.warn("It seems you are nesting recursively key: ".concat(U[0]," in key: ").concat(r[0])),null):m.translate.apply(m,U.concat([r]))},s)),s.interpolation&&this.interpolator.reset()}var A=s.postProcess||this.options.postProcess,b=typeof A=="string"?[A]:A;return n!=null&&b&&b.length&&s.applyPostProcessor!==!1&&(n=Xo.handle(b,n,r,this.options&&this.options.postProcessPassResolved?ue({i18nResolved:l},s):s,this)),n},"extendTranslation")},{key:"resolve",value:o(function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,d,m,p,c;return typeof n=="string"&&(n=[n]),n.forEach(function(h){if(!r.isValidLookup(l)){var f=r.extractFromKey(h,s),w=f.key;d=w;var C=f.namespaces;r.options.fallbackNS&&(C=C.concat(r.options.fallbackNS));var A=s.count!==void 0&&typeof s.count!="string",b=A&&!s.ordinal&&s.count===0&&r.pluralResolver.shouldUseIntlApi(),x=s.context!==void 0&&(typeof s.context=="string"||typeof s.context=="number")&&s.context!=="",U=s.lngs?s.lngs:r.languageUtils.toResolveHierarchy(s.lng||r.language,s.fallbackLng);C.forEach(function(F){r.isValidLookup(l)||(c=F,!zo["".concat(U[0],"-").concat(F)]&&r.utils&&r.utils.hasLoadedNamespace&&!r.utils.hasLoadedNamespace(c)&&(zo["".concat(U[0],"-").concat(F)]=!0,r.logger.warn('key "'.concat(d,'" for languages "').concat(U.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(function(B){if(!r.isValidLookup(l)){p=B;var j=[w];if(r.i18nFormat&&r.i18nFormat.addLookupKeys)r.i18nFormat.addLookupKeys(j,w,B,F,s);else{var Q;A&&(Q=r.pluralResolver.getSuffix(B,s.count,s));var Re="".concat(r.options.pluralSeparator,"zero");if(A&&(j.push(w+Q),b&&j.push(w+Re)),x){var k="".concat(w).concat(r.options.contextSeparator).concat(s.context);j.push(k),A&&(j.push(k+Q),b&&j.push(k+Re))}}for(var O;O=j.pop();)r.isValidLookup(l)||(m=O,l=r.getResource(B,F,O,s))}}))})}}),{res:l,usedKey:d,exactUsedKey:m,usedLng:p,usedNS:c}},"resolve")},{key:"isValidLookup",value:o(function(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")},"isValidLookup")},{key:"getResource",value:o(function(n,r,s){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,r,s,l):this.resourceStore.getResource(n,r,s,l)},"getResource")}],[{key:"hasDefaultValue",value:o(function(n){var r="defaultValue";for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&r===s.substring(0,r.length)&&n[s]!==void 0)return!0;return!1},"hasDefaultValue")}]),e}(ot);o(Bs,"capitalize");No=function(){function i(t){me(this,i),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Be.create("languageUtils")}return o(i,"LanguageUtil"),pe(i,[{key:"getScriptPartFromCode",value:o(function(e){if(!e||e.indexOf("-")<0)return null;var a=e.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))},"getScriptPartFromCode")},{key:"getLanguagePartFromCode",value:o(function(e){if(!e||e.indexOf("-")<0)return e;var a=e.split("-");return this.formatLanguageCode(a[0])},"getLanguagePartFromCode")},{key:"formatLanguageCode",value:o(function(e){if(typeof e=="string"&&e.indexOf("-")>-1){var a=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(r){return r.toLowerCase()}):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),a.indexOf(n[1].toLowerCase())>-1&&(n[1]=Bs(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),a.indexOf(n[1].toLowerCase())>-1&&(n[1]=Bs(n[1].toLowerCase())),a.indexOf(n[2].toLowerCase())>-1&&(n[2]=Bs(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},"formatLanguageCode")},{key:"isSupportedCode",value:o(function(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1},"isSupportedCode")},{key:"getBestMatchFromCodes",value:o(function(e){var a=this;if(!e)return null;var n;return e.forEach(function(r){if(!n){var s=a.formatLanguageCode(r);(!a.options.supportedLngs||a.isSupportedCode(s))&&(n=s)}}),!n&&this.options.supportedLngs&&e.forEach(function(r){if(!n){var s=a.getLanguagePartFromCode(r);if(a.isSupportedCode(s))return n=s;n=a.options.supportedLngs.find(function(l){if(l===s)return l;if(!(l.indexOf("-")<0&&s.indexOf("-")<0)&&l.indexOf(s)===0)return l})}}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n},"getBestMatchFromCodes")},{key:"getFallbackCodes",value:o(function(e,a){if(!e)return[];if(typeof e=="function"&&(e=e(a)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!a)return e.default||[];var n=e[a];return n||(n=e[this.getScriptPartFromCode(a)]),n||(n=e[this.formatLanguageCode(a)]),n||(n=e[this.getLanguagePartFromCode(a)]),n||(n=e.default),n||[]},"getFallbackCodes")},{key:"toResolveHierarchy",value:o(function(e,a){var n=this,r=this.getFallbackCodes(a||this.options.fallbackLng||[],e),s=[],l=o(function(m){!m||(n.isSupportedCode(m)?s.push(m):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(m)))},"addCode");return typeof e=="string"&&e.indexOf("-")>-1?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(e))):typeof e=="string"&&l(this.formatLanguageCode(e)),r.forEach(function(d){s.indexOf(d)<0&&l(n.formatLanguageCode(d))}),s},"toResolveHierarchy")}]),i}(),Au=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Cu={1:o(function(t){return Number(t>1)},"_"),2:o(function(t){return Number(t!=1)},"_"),3:o(function(t){return 0},"_"),4:o(function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},"_"),5:o(function(t){return Number(t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},"_"),6:o(function(t){return Number(t==1?0:t>=2&&t<=4?1:2)},"_"),7:o(function(t){return Number(t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},"_"),8:o(function(t){return Number(t==1?0:t==2?1:t!=8&&t!=11?2:3)},"_"),9:o(function(t){return Number(t>=2)},"_"),10:o(function(t){return Number(t==1?0:t==2?1:t<7?2:t<11?3:4)},"_"),11:o(function(t){return Number(t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3)},"_"),12:o(function(t){return Number(t%10!=1||t%100==11)},"_"),13:o(function(t){return Number(t!==0)},"_"),14:o(function(t){return Number(t==1?0:t==2?1:t==3?2:3)},"_"),15:o(function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},"_"),16:o(function(t){return Number(t%10==1&&t%100!=11?0:t!==0?1:2)},"_"),17:o(function(t){return Number(t==1||t%10==1&&t%100!=11?0:1)},"_"),18:o(function(t){return Number(t==0?0:t==1?1:2)},"_"),19:o(function(t){return Number(t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},"_"),20:o(function(t){return Number(t==1?0:t==0||t%100>0&&t%100<20?1:2)},"_"),21:o(function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},"_"),22:o(function(t){return Number(t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3)},"_")},ku=["v1","v2","v3"],jo={zero:0,one:1,two:2,few:3,many:4,other:5};o(Ru,"createRules");Iu=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};me(this,i),this.languageUtils=t,this.options=e,this.logger=Be.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Ru()}return o(i,"PluralResolver"),pe(i,[{key:"addRule",value:o(function(e,a){this.rules[e]=a},"addRule")},{key:"getRule",value:o(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:a.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]},"getRule")},{key:"needsPlural",value:o(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,a);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1},"needsPlural")},{key:"getPluralFormsOfKey",value:o(function(e,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(function(r){return"".concat(a).concat(r)})},"getPluralFormsOfKey")},{key:"getSuffixes",value:o(function(e){var a=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort(function(s,l){return jo[s]-jo[l]}).map(function(s){return"".concat(a.options.prepend).concat(s)}):r.numbers.map(function(s){return a.getSuffix(e,s,n)}):[]},"getSuffixes")},{key:"getSuffix",value:o(function(e,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(a)):this.getSuffixRetroCompatible(r,a):(this.logger.warn("no plural rule found for: ".concat(e)),"")},"getSuffix")},{key:"getSuffixRetroCompatible",value:o(function(e,a){var n=this,r=e.noAbs?e.plurals(a):e.plurals(Math.abs(a)),s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));var l=o(function(){return n.options.prepend&&s.toString()?n.options.prepend+s.toString():s.toString()},"returnSuffix");return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?"_plural_".concat(s.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?l():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()},"getSuffixRetroCompatible")},{key:"shouldUseIntlApi",value:o(function(){return!ku.includes(this.options.compatibilityJSON)},"shouldUseIntlApi")}]),i}();o($o,"ownKeys$3");o(Se,"_objectSpread$3");o(Wo,"deepFindWithDefaults");Su=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};me(this,i),this.logger=Be.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return o(i,"Interpolator"),pe(i,[{key:"init",value:o(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var a=e.interpolation;this.escape=a.escape!==void 0?a.escape:hu,this.escapeValue=a.escapeValue!==void 0?a.escapeValue:!0,this.useRawValueToEscape=a.useRawValueToEscape!==void 0?a.useRawValueToEscape:!1,this.prefix=a.prefix?aa(a.prefix):a.prefixEscaped||"{{",this.suffix=a.suffix?aa(a.suffix):a.suffixEscaped||"}}",this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||",",this.unescapePrefix=a.unescapeSuffix?"":a.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":a.unescapeSuffix||"",this.nestingPrefix=a.nestingPrefix?aa(a.nestingPrefix):a.nestingPrefixEscaped||aa("$t("),this.nestingSuffix=a.nestingSuffix?aa(a.nestingSuffix):a.nestingSuffixEscaped||aa(")"),this.nestingOptionsSeparator=a.nestingOptionsSeparator?a.nestingOptionsSeparator:a.nestingOptionsSeparator||",",this.maxReplaces=a.maxReplaces?a.maxReplaces:1e3,this.alwaysFormat=a.alwaysFormat!==void 0?a.alwaysFormat:!1,this.resetRegExp()},"init")},{key:"reset",value:o(function(){this.options&&this.init(this.options)},"reset")},{key:"resetRegExp",value:o(function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var a="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(a,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")},"resetRegExp")},{key:"interpolate",value:o(function(e,a,n,r){var s=this,l,d,m,p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(A){return A.replace(/\$/g,"$$$$")}o(c,"regexSafe");var h=o(function(b){if(b.indexOf(s.formatSeparator)<0){var x=Wo(a,p,b,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(x,void 0,n,Se(Se(Se({},r),a),{},{interpolationkey:b})):x}var U=b.split(s.formatSeparator),F=U.shift().trim(),B=U.join(s.formatSeparator).trim();return s.format(Wo(a,p,F,s.options.keySeparator,s.options.ignoreJSONStructure),B,n,Se(Se(Se({},r),a),{},{interpolationkey:F}))},"handleFormat");this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,w=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,C=[{regex:this.regexpUnescape,safeValue:o(function(b){return c(b)},"safeValue")},{regex:this.regexp,safeValue:o(function(b){return s.escapeValue?c(s.escape(b)):c(b)},"safeValue")}];return C.forEach(function(A){for(m=0;l=A.regex.exec(e);){var b=l[1].trim();if(d=h(b),d===void 0)if(typeof f=="function"){var x=f(e,l,r);d=typeof x=="string"?x:""}else if(r&&Object.prototype.hasOwnProperty.call(r,b))d="";else if(w){d=l[0];continue}else s.logger.warn("missed to pass in variable ".concat(b," for interpolating ").concat(e)),d="";else typeof d!="string"&&!s.useRawValueToEscape&&(d=Lo(d));var U=A.safeValue(d);if(e=e.replace(l[0],U),w?(A.regex.lastIndex+=d.length,A.regex.lastIndex-=l[0].length):A.regex.lastIndex=0,m++,m>=s.maxReplaces)break}}),e},"interpolate")},{key:"nest",value:o(function(e,a){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,l,d;function m(f,w){var C=this.nestingOptionsSeparator;if(f.indexOf(C)<0)return f;var A=f.split(new RegExp("".concat(C,"[ ]*{"))),b="{".concat(A[1]);f=A[0],b=this.interpolate(b,d);var x=b.match(/'/g),U=b.match(/"/g);(x&&x.length%2===0&&!U||U.length%2!==0)&&(b=b.replace(/'/g,'"'));try{d=JSON.parse(b),w&&(d=Se(Se({},w),d))}catch(F){return this.logger.warn("failed parsing options string in nesting for key ".concat(f),F),"".concat(f).concat(C).concat(b)}return delete d.defaultValue,f}for(o(m,"handleHasOptions");s=this.nestingRegexp.exec(e);){var p=[];d=Se({},r),d=d.replace&&typeof d.replace!="string"?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;var c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){var h=s[1].split(this.formatSeparator).map(function(f){return f.trim()});s[1]=h.shift(),p=h,c=!0}if(l=a(m.call(this,s[1].trim(),d),d),l&&s[0]===e&&typeof l!="string")return l;typeof l!="string"&&(l=Lo(l)),l||(this.logger.warn("missed to resolve ".concat(s[1]," for nesting ").concat(e)),l=""),c&&(l=p.reduce(function(f,w){return n.format(f,w,r.lng,Se(Se({},r),{},{interpolationkey:s[1].trim()}))},l.trim())),e=e.replace(s[0],l),this.regexp.lastIndex=0}return e},"nest")}]),i}();o(Ho,"ownKeys$2");o(et,"_objectSpread$2");o(Pu,"parseFormatStr");o(na,"createCachedFormatter");Tu=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};me(this,i),this.logger=Be.create("formatter"),this.options=t,this.formats={number:na(function(e,a){var n=new Intl.NumberFormat(e,et({},a));return function(r){return n.format(r)}}),currency:na(function(e,a){var n=new Intl.NumberFormat(e,et(et({},a),{},{style:"currency"}));return function(r){return n.format(r)}}),datetime:na(function(e,a){var n=new Intl.DateTimeFormat(e,et({},a));return function(r){return n.format(r)}}),relativetime:na(function(e,a){var n=new Intl.RelativeTimeFormat(e,et({},a));return function(r){return n.format(r,a.range||"day")}}),list:na(function(e,a){var n=new Intl.ListFormat(e,et({},a));return function(r){return n.format(r)}})},this.init(t)}return o(i,"Formatter"),pe(i,[{key:"init",value:o(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},n=a.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","},"init")},{key:"add",value:o(function(e,a){this.formats[e.toLowerCase().trim()]=a},"add")},{key:"addCached",value:o(function(e,a){this.formats[e.toLowerCase().trim()]=na(a)},"addCached")},{key:"format",value:o(function(e,a,n){var r=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=a.split(this.formatSeparator),d=l.reduce(function(m,p){var c=Pu(p),h=c.formatName,f=c.formatOptions;if(r.formats[h]){var w=m;try{var C=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},A=C.locale||C.lng||s.locale||s.lng||n;w=r.formats[h](m,A,et(et(et({},f),s),C))}catch(b){r.logger.warn(b)}return w}else r.logger.warn("there was no format function for ".concat(h));return m},e);return d},"format")}]),i}();o(Vo,"ownKeys$1");o(Ko,"_objectSpread$1");o(Mu,"_createSuper$1");o(Eu,"_isNativeReflectConstruct$1");o(Fu,"removePending");_u=function(i){ta(e,i);var t=Mu(e);function e(a,n,r){var s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return me(this,e),s=t.call(this),hi&&ot.call(Ie(s)),s.backend=a,s.store=n,s.services=r,s.languageUtils=r.languageUtils,s.options=l,s.logger=Be.create("backendConnector"),s.waitingReads=[],s.maxParallelReads=l.maxParallelReads||10,s.readingCalls=0,s.maxRetries=l.maxRetries>=0?l.maxRetries:5,s.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(r,l.backend,l),s}return o(e,"Connector"),pe(e,[{key:"queueLoad",value:o(function(n,r,s,l){var d=this,m={},p={},c={},h={};return n.forEach(function(f){var w=!0;r.forEach(function(C){var A="".concat(f,"|").concat(C);!s.reload&&d.store.hasResourceBundle(f,C)?d.state[A]=2:d.state[A]<0||(d.state[A]===1?p[A]===void 0&&(p[A]=!0):(d.state[A]=1,w=!1,p[A]===void 0&&(p[A]=!0),m[A]===void 0&&(m[A]=!0),h[C]===void 0&&(h[C]=!0)))}),w||(c[f]=!0)}),(Object.keys(m).length||Object.keys(p).length)&&this.queue.push({pending:p,pendingCount:Object.keys(p).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(m),pending:Object.keys(p),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(h)}},"queueLoad")},{key:"loaded",value:o(function(n,r,s){var l=n.split("|"),d=l[0],m=l[1];r&&this.emit("failedLoading",d,m,r),s&&this.store.addResourceBundle(d,m,s),this.state[n]=r?-1:2;var p={};this.queue.forEach(function(c){cu(c.loaded,[d],m),Fu(c,n),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(h){p[h]||(p[h]={});var f=c.loaded[h];f.length&&f.forEach(function(w){p[h][w]===void 0&&(p[h][w]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(function(c){return!c.done})},"loaded")},{key:"read",value:o(function(n,r,s){var l=this,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,p=arguments.length>5?arguments[5]:void 0;if(!n.length)return p(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:r,fcName:s,tried:d,wait:m,callback:p});return}this.readingCalls++;var c=o(function(C,A){if(l.readingCalls--,l.waitingReads.length>0){var b=l.waitingReads.shift();l.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(C&&A&&d<l.maxRetries){setTimeout(function(){l.read.call(l,n,r,s,d+1,m*2,p)},m);return}p(C,A)},"resolver"),h=this.backend[s].bind(this.backend);if(h.length===2){try{var f=h(n,r);f&&typeof f.then=="function"?f.then(function(w){return c(null,w)}).catch(c):c(null,f)}catch(w){c(w)}return}return h(n,r,c)},"read")},{key:"prepareLoading",value:o(function(n,r){var s=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),d&&d();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof r=="string"&&(r=[r]);var m=this.queueLoad(n,r,l,d);if(!m.toLoad.length)return m.pending.length||d(),null;m.toLoad.forEach(function(p){s.loadOne(p)})},"prepareLoading")},{key:"load",value:o(function(n,r,s){this.prepareLoading(n,r,{},s)},"load")},{key:"reload",value:o(function(n,r,s){this.prepareLoading(n,r,{reload:!0},s)},"reload")},{key:"loadOne",value:o(function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=n.split("|"),d=l[0],m=l[1];this.read(d,m,"read",void 0,void 0,function(p,c){p&&r.logger.warn("".concat(s,"loading namespace ").concat(m," for language ").concat(d," failed"),p),!p&&c&&r.logger.log("".concat(s,"loaded namespace ").concat(m," for language ").concat(d),c),r.loaded(n,p,c)})},"loadOne")},{key:"saveMissing",value:o(function(n,r,s,l,d){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn('did not save key "'.concat(s,'" as the namespace "').concat(r,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){var c=Ko(Ko({},m),{},{isUpdate:d}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var f;h.length===5?f=h(n,r,s,l,c):f=h(n,r,s,l),f&&typeof f.then=="function"?f.then(function(w){return p(null,w)}).catch(p):p(null,f)}catch(w){p(w)}else h(n,r,s,l,p,c)}!n||!n[0]||this.store.addResource(n[0],r,s,l)}},"saveMissing")}]),e}(ot);o(Yo,"get");o(qo,"transformOptions");o(Zo,"ownKeys");o(Ue,"_objectSpread");o(Du,"_createSuper");o(Lu,"_isNativeReflectConstruct");o(ui,"noop");o(Uu,"bindMemberFunctions");pi=function(i){ta(e,i);var t=Du(e);function e(){var a,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(me(this,e),a=t.call(this),hi&&ot.call(Ie(a)),a.options=qo(n),a.services={},a.logger=Be,a.modules={external:[]},Uu(Ie(a)),r&&!a.isInitialized&&!n.isClone){if(!a.options.initImmediate)return a.init(n,r),Et(a,Ie(a));setTimeout(function(){a.init(n,r)},0)}return a}return o(e,"I18n"),pe(e,[{key:"init",value:o(function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;typeof r=="function"&&(s=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));var l=Yo();this.options=Ue(Ue(Ue({},l),this.options),qo(r)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ue(Ue({},l.interpolation),this.options.interpolation)),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function d(b){return b?typeof b=="function"?new b:b:null}if(o(d,"createClassOnDemand"),!this.options.isClone){this.modules.logger?Be.init(d(this.modules.logger),this.options):Be.init(null,this.options);var m;this.modules.formatter?m=this.modules.formatter:typeof Intl<"u"&&(m=Tu);var p=new No(this.options);this.store=new bu(this.options.resources,this.options);var c=this.services;c.logger=Be,c.resourceStore=this.store,c.languageUtils=p,c.pluralResolver=new Iu(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),m&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(c.formatter=d(m),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Su(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new _u(d(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(b){for(var x=arguments.length,U=new Array(x>1?x-1:0),F=1;F<x;F++)U[F-1]=arguments[F];n.emit.apply(n,[b].concat(U))}),this.modules.languageDetector&&(c.languageDetector=d(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=d(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Go(this.services,this.options),this.translator.on("*",function(b){for(var x=arguments.length,U=new Array(x>1?x-1:0),F=1;F<x;F++)U[F-1]=arguments[F];n.emit.apply(n,[b].concat(U))}),this.modules.external.forEach(function(b){b.init&&b.init(n)})}if(this.format=this.options.interpolation.format,s||(s=ui),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var f=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];f.forEach(function(b){n[b]=function(){var x;return(x=n.store)[b].apply(x,arguments)}});var w=["addResource","addResources","addResourceBundle","removeResourceBundle"];w.forEach(function(b){n[b]=function(){var x;return(x=n.store)[b].apply(x,arguments),n}});var C=en(),A=o(function(){var x=o(function(F,B){n.isInitialized&&!n.initializedStoreOnce&&n.logger.warn("init: i18next is already initialized. You should call init just once!"),n.isInitialized=!0,n.options.isClone||n.logger.log("initialized",n.options),n.emit("initialized",n.options),C.resolve(B),s(F,B)},"finish");if(n.languages&&n.options.compatibilityAPI!=="v1"&&!n.isInitialized)return x(null,n.t.bind(n));n.changeLanguage(n.options.lng,x)},"load");return this.options.resources||!this.options.initImmediate?A():setTimeout(A,0),C},"init")},{key:"loadResources",value:o(function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ui,l=s,d=typeof n=="string"?n:this.language;if(typeof n=="function"&&(l=n),!this.options.resources||this.options.partialBundledLanguages){if(d&&d.toLowerCase()==="cimode")return l();var m=[],p=o(function(f){if(!!f){var w=r.services.languageUtils.toResolveHierarchy(f);w.forEach(function(C){m.indexOf(C)<0&&m.push(C)})}},"append");if(d)p(d);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(h){return p(h)})}this.options.preload&&this.options.preload.forEach(function(h){return p(h)}),this.services.backendConnector.load(m,this.options.ns,function(h){!h&&!r.resolvedLanguage&&r.language&&r.setResolvedLanguage(r.language),l(h)})}else l(null)},"loadResources")},{key:"reloadResources",value:o(function(n,r,s){var l=en();return n||(n=this.languages),r||(r=this.options.ns),s||(s=ui),this.services.backendConnector.reload(n,r,function(d){l.resolve(),s(d)}),l},"reloadResources")},{key:"use",value:o(function(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&Xo.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this},"use")},{key:"setResolvedLanguage",value:o(function(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(var r=0;r<this.languages.length;r++){var s=this.languages[r];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}},"setResolvedLanguage")},{key:"changeLanguage",value:o(function(n,r){var s=this;this.isLanguageChangingTo=n;var l=en();this.emit("languageChanging",n);var d=o(function(h){s.language=h,s.languages=s.services.languageUtils.toResolveHierarchy(h),s.resolvedLanguage=void 0,s.setResolvedLanguage(h)},"setLngProps"),m=o(function(h,f){f?(d(f),s.translator.changeLanguage(f),s.isLanguageChangingTo=void 0,s.emit("languageChanged",f),s.logger.log("languageChanged",f)):s.isLanguageChangingTo=void 0,l.resolve(function(){return s.t.apply(s,arguments)}),r&&r(h,function(){return s.t.apply(s,arguments)})},"done"),p=o(function(h){!n&&!h&&s.services.languageDetector&&(h=[]);var f=typeof h=="string"?h:s.services.languageUtils.getBestMatchFromCodes(h);f&&(s.language||d(f),s.translator.language||s.translator.changeLanguage(f),s.services.languageDetector&&s.services.languageDetector.cacheUserLanguage&&s.services.languageDetector.cacheUserLanguage(f)),s.loadResources(f,function(w){m(w,f)})},"setLng");return!n&&this.services.languageDetector&&!this.services.languageDetector.async?p(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(p):this.services.languageDetector.detect(p):p(n),l},"changeLanguage")},{key:"getFixedT",value:o(function(n,r,s){var l=this,d=o(function m(p,c){var h;if(se(c)!=="object"){for(var f=arguments.length,w=new Array(f>2?f-2:0),C=2;C<f;C++)w[C-2]=arguments[C];h=l.options.overloadTranslationOptionHandler([p,c].concat(w))}else h=Ue({},c);h.lng=h.lng||m.lng,h.lngs=h.lngs||m.lngs,h.ns=h.ns||m.ns,h.keyPrefix=h.keyPrefix||s||m.keyPrefix;var A=l.options.keySeparator||".",b;return h.keyPrefix&&Array.isArray(p)?b=p.map(function(x){return"".concat(h.keyPrefix).concat(A).concat(x)}):b=h.keyPrefix?"".concat(h.keyPrefix).concat(A).concat(p):p,l.t(b,h)},"fixedT");return typeof n=="string"?d.lng=n:d.lngs=n,d.ns=r,d.keyPrefix=s,d},"getFixedT")},{key:"t",value:o(function(){var n;return this.translator&&(n=this.translator).translate.apply(n,arguments)},"t")},{key:"exists",value:o(function(){var n;return this.translator&&(n=this.translator).exists.apply(n,arguments)},"exists")},{key:"setDefaultNamespace",value:o(function(n){this.options.defaultNS=n},"setDefaultNamespace")},{key:"hasLoadedNamespace",value:o(function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.resolvedLanguage||this.languages[0],d=this.options?this.options.fallbackLng:!1,m=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var p=o(function(f,w){var C=r.services.backendConnector.state["".concat(f,"|").concat(w)];return C===-1||C===2},"loadNotPending");if(s.precheck){var c=s.precheck(this,p);if(c!==void 0)return c}return!!(this.hasResourceBundle(l,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||p(l,n)&&(!d||p(m,n)))},"hasLoadedNamespace")},{key:"loadNamespaces",value:o(function(n,r){var s=this,l=en();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(function(d){s.options.ns.indexOf(d)<0&&s.options.ns.push(d)}),this.loadResources(function(d){l.resolve(),r&&r(d)}),l):(r&&r(),Promise.resolve())},"loadNamespaces")},{key:"loadLanguages",value:o(function(n,r){var s=en();typeof n=="string"&&(n=[n]);var l=this.options.preload||[],d=n.filter(function(m){return l.indexOf(m)<0});return d.length?(this.options.preload=l.concat(d),this.loadResources(function(m){s.resolve(),r&&r(m)}),s):(r&&r(),Promise.resolve())},"loadLanguages")},{key:"dir",value:o(function(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";var r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new No(Yo());return r.indexOf(s.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"},"dir")},{key:"cloneInstance",value:o(function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ui,l=Ue(Ue(Ue({},this.options),r),{isClone:!0}),d=new e(l);(r.debug!==void 0||r.prefix!==void 0)&&(d.logger=d.logger.clone(r));var m=["store","services","language"];return m.forEach(function(p){d[p]=n[p]}),d.services=Ue({},this.services),d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d.translator=new Go(d.services,d.options),d.translator.on("*",function(p){for(var c=arguments.length,h=new Array(c>1?c-1:0),f=1;f<c;f++)h[f-1]=arguments[f];d.emit.apply(d,[p].concat(h))}),d.init(l,s),d.translator.options=d.options,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d},"cloneInstance")},{key:"toJSON",value:o(function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}},"toJSON")}]),e}(ot);Le(pi,"createInstance",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new pi(i,t)});S=pi.createInstance();S.createInstance=pi.createInstance;Nm=S.createInstance,jm=S.dir,$m=S.init,Wm=S.loadResources,Hm=S.reloadResources,Vm=S.use,Km=S.changeLanguage,Ym=S.getFixedT,g=S.t,qm=S.exists,Zm=S.setDefaultNamespace,Jm=S.hasLoadedNamespace,Xm=S.loadNamespaces,Qm=S.loadLanguages});var wl=yo(Lt=>{"use strict";var $e,yt=Lt&&Lt.__classPrivateFieldGet||function(i,t,e,a){if(e==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!a:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?a:e==="a"?a.call(i):a?a.value:t.get(i)};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.EventEmitter=void 0;var Rn=class{constructor(){$e.set(this,{})}on(t,e){t in yt(this,$e,"f")||(yt(this,$e,"f")[t]=[]),yt(this,$e,"f")[t].push(e)}once(t,e){let a=o((...n)=>{e(...n),this.off(t,a)},"i");this.on(t,a)}off(t,e){if(!(t in yt(this,$e,"f")))return;let a=yt(this,$e,"f")[t].indexOf(e);a!==-1&&yt(this,$e,"f")[t].splice(a,1)}emit(t,...e){t in yt(this,$e,"f")&&yt(this,$e,"f")[t].forEach(a=>a(...e))}};o(Rn,"i");Lt.EventEmitter=Rn,$e=new WeakMap,Lt.default=Rn});var Ed=z(()=>{"use strict";I();S.addResources("en-GB","city",{"Improvement.RecyclingCenter.name":"Recycling Centre"})});var Fd=z(()=>{"use strict";I();S.addResources("en","city",{"Improvement.Aqueduct.name":"Aqueduct","Improvement.Bank.name":"Bank","Improvement.Barracks.name":"Barracks","Improvement.Cathedral.name":"Cathedral","Improvement.CityWalls.name":"City Walls","Improvement.Colosseum.name":"Colosseum","Improvement.Courthouse.name":"Courthouse","Improvement.Factory.name":"Factory","Improvement.Granary.name":"Granary","Improvement.HydroPlant.name":"Hydro Plant","Improvement.Library.name":"Library","Improvement.ManufacturingPlant.name":"Manufacturing Plant","Improvement.Marketplace.name":"Marketplace","Improvement.MassTransit.name":"Mass Transit","Improvement.NuclearPlant.name":"Nuclear Plant","Improvement.Palace.name":"Palace","Improvement.PowerPlant.name":"Power Plant","Improvement.RecyclingCenter.name":"Recycling Center","Improvement.SdiDefence.name":"SDI Defence","Improvement.Temple.name":"Temple","Improvement.University.name":"University"})});var _d=z(()=>{"use strict";I();S.addResources("en","city",{None:"None","American.Washington.name":"Washington","American.New York.name":"New York","American.Los Angeles.name":"Los Angeles","American.Chicago.name":"Chicago","American.Houston.name":"Houston","American.Phoenix.name":"Phoenix","American.Philadelphia.name":"Philadelphia","American.San Antonio.name":"San Antonio","American.San Diego.name":"San Diego","American.Dallas.name":"Dallas","American.San Jose.name":"San Jose","American.Austin.name":"Austin","American.Jacksonville.name":"Jacksonville","American.Fort Worth.name":"Fort Worth","American.Columbus.name":"Columbus","American.San Francisco.name":"San Francisco","American.Charlotte.name":"Charlotte","American.Indianapolis.name":"Indianapolis","American.Seattle.name":"Seattle","American.Denver.name":"Denver","American.Boston.name":"Boston","American.El Paso.name":"El Paso","American.Detroit.name":"Detroit","American.Nashville.name":"Nashville","American.Portland.name":"Portland","American.Memphis.name":"Memphis","American.Oklahoma City.name":"Oklahoma City","American.Las Vegas.name":"Las Vegas","American.Louisville.name":"Louisville","American.Baltimore.name":"Baltimore","American.Milwaukee.name":"Milwaukee","American.Albuquerque.name":"Albuquerque","American.Tucson.name":"Tucson","American.Fresno.name":"Fresno","American.Mesa.name":"Mesa","American.Sacramento.name":"Sacramento","American.Atlanta.name":"Atlanta","American.Kansas City.name":"Kansas City","American.Colorado Springs.name":"Colorado Springs","American.Miami.name":"Miami","American.Raleigh.name":"Raleigh","American.Omaha.name":"Omaha","American.Long Beach.name":"Long Beach","American.Virginia Beach.name":"Virginia Beach","American.Oakland.name":"Oakland","American.Minneapolis.name":"Minneapolis","American.Tulsa.name":"Tulsa","American.Arlington.name":"Arlington","American.Tampa.name":"Tampa","American.New Orleans.name":"New Orleans","American.Wichita.name":"Wichita","American.Cleveland.name":"Cleveland","American.Bakersfield.name":"Bakersfield","American.Aurora.name":"Aurora","American.Anaheim.name":"Anaheim","American.Honolulu.name":"Honolulu","American.Santa Ana.name":"Santa Ana","American.Riverside.name":"Riverside","American.Corpus Christi.name":"Corpus Christi","American.Lexington.name":"Lexington","American.Stockton.name":"Stockton","American.Henderson.name":"Henderson","American.Saint Paul.name":"Saint Paul","American.St. Louis.name":"St. Louis","American.Cincinnati.name":"Cincinnati","American.Pittsburgh.name":"Pittsburgh","American.Greensboro.name":"Greensboro","American.Anchorage.name":"Anchorage","American.Plano.name":"Plano","American.Lincoln.name":"Lincoln","American.Orlando.name":"Orlando","American.Irvine.name":"Irvine","American.Newark.name":"Newark","American.Toledo.name":"Toledo","American.Durham.name":"Durham","American.Chula Vista.name":"Chula Vista","American.Fort Wayne.name":"Fort Wayne","American.Jersey City.name":"Jersey City","American.St. Petersburg.name":"St. Petersburg","American.Laredo.name":"Laredo","American.Madison.name":"Madison","American.Chandler.name":"Chandler","American.Buffalo.name":"Buffalo","American.Lubbock.name":"Lubbock","American.Scottsdale.name":"Scottsdale","American.Reno.name":"Reno","American.Glendale.name":"Glendale","American.Gilbert.name":"Gilbert","American.Winston-Salem.name":"Winston-Salem","American.North Las Vegas.name":"North Las Vegas","American.Norfolk.name":"Norfolk","American.Chesapeake.name":"Chesapeake","American.Garland.name":"Garland","American.Irving.name":"Irving","American.Hialeah.name":"Hialeah","American.Fremont.name":"Fremont","American.Boise.name":"Boise","American.Richmond.name":"Richmond","American.Baton Rouge.name":"Baton Rouge","American.Spokane.name":"Spokane","American.Des Moines.name":"Des Moines","American.Tacoma.name":"Tacoma","American.San Bernardino.name":"San Bernardino","American.Modesto.name":"Modesto","American.Fontana.name":"Fontana","American.Santa Clarita.name":"Santa Clarita","American.Birmingham.name":"Birmingham","American.Oxnard.name":"Oxnard","American.Fayetteville.name":"Fayetteville","American.Moreno Valley.name":"Moreno Valley","American.Rochester.name":"Rochester","American.Huntington Beach.name":"Huntington Beach","American.Salt Lake City.name":"Salt Lake City","American.Grand Rapids.name":"Grand Rapids","American.Amarillo.name":"Amarillo","American.Yonkers.name":"Yonkers","American.Montgomery.name":"Montgomery","American.Akron.name":"Akron","American.Little Rock.name":"Little Rock","American.Huntsville.name":"Huntsville","American.Augusta.name":"Augusta","American.Port St. Lucie.name":"Port St. Lucie","American.Grand Prairie.name":"Grand Prairie","American.Tallahassee.name":"Tallahassee","American.Overland Park.name":"Overland Park","American.Tempe.name":"Tempe","American.McKinney.name":"McKinney","American.Mobile.name":"Mobile","American.Cape Coral.name":"Cape Coral","American.Shreveport.name":"Shreveport","American.Frisco.name":"Frisco","American.Knoxville.name":"Knoxville","American.Worcester.name":"Worcester","American.Brownsville.name":"Brownsville","American.Vancouver.name":"Vancouver","American.Fort Lauderdale.name":"Fort Lauderdale","American.Sioux Falls.name":"Sioux Falls","American.Ontario.name":"Ontario","American.Chattanooga.name":"Chattanooga","American.Providence.name":"Providence","American.Newport News.name":"Newport News","American.Rancho Cucamonga.name":"Rancho Cucamonga","American.Santa Rosa.name":"Santa Rosa","American.Oceanside.name":"Oceanside","American.Salem.name":"Salem","American.Elk Grove.name":"Elk Grove","American.Garden Grove.name":"Garden Grove","American.Pembroke Pines.name":"Pembroke Pines","American.Peoria.name":"Peoria","American.Eugene.name":"Eugene","American.Corona.name":"Corona","American.Cary.name":"Cary","American.Springfield.name":"Springfield","American.Fort Collins.name":"Fort Collins","American.Jackson.name":"Jackson","American.Alexandria.name":"Alexandria","American.Hayward.name":"Hayward","American.Lancaster.name":"Lancaster","American.Lakewood.name":"Lakewood","American.Clarksville.name":"Clarksville","American.Palmdale.name":"Palmdale","American.Salinas.name":"Salinas","American.Hollywood.name":"Hollywood","American.Pasadena.name":"Pasadena","American.Sunnyvale.name":"Sunnyvale","American.Macon.name":"Macon","American.Pomona.name":"Pomona","American.Escondido.name":"Escondido","American.Killeen.name":"Killeen","American.Naperville.name":"Naperville","American.Joliet.name":"Joliet","American.Bellevue.name":"Bellevue","American.Rockford.name":"Rockford","American.Savannah.name":"Savannah","American.Paterson.name":"Paterson","American.Torrance.name":"Torrance","American.Bridgeport.name":"Bridgeport","American.McAllen.name":"McAllen","American.Mesquite.name":"Mesquite","American.Syracuse.name":"Syracuse","American.Midland.name":"Midland","American.Murfreesboro.name":"Murfreesboro","American.Miramar.name":"Miramar","American.Dayton.name":"Dayton","American.Fullerton.name":"Fullerton","American.Olathe.name":"Olathe","American.Orange.name":"Orange","American.Thornton.name":"Thornton","American.Roseville.name":"Roseville","American.Denton.name":"Denton","American.Waco.name":"Waco","American.Surprise.name":"Surprise","American.Carrollton.name":"Carrollton","American.West Valley City.name":"West Valley City","American.Charleston.name":"Charleston","American.Warren.name":"Warren","American.Hampton.name":"Hampton","American.Gainesville.name":"Gainesville","American.Visalia.name":"Visalia","American.Coral Springs.name":"Coral Springs","American.Columbia.name":"Columbia","American.Cedar Rapids.name":"Cedar Rapids","American.Sterling Heights.name":"Sterling Heights","American.New Haven.name":"New Haven","American.Stamford.name":"Stamford","American.Concord.name":"Concord","American.Kent.name":"Kent","American.Santa Clara.name":"Santa Clara","American.Elizabeth.name":"Elizabeth","American.Round Rock.name":"Round Rock","American.Thousand Oaks.name":"Thousand Oaks","American.Lafayette.name":"Lafayette","American.Athens.name":"Athens","American.Topeka.name":"Topeka","American.Simi Valley.name":"Simi Valley","American.Fargo.name":"Fargo","American.Norman.name":"Norman","American.Abilene.name":"Abilene","American.Wilmington.name":"Wilmington","American.Hartford.name":"Hartford","American.Victorville.name":"Victorville","American.Pearland.name":"Pearland","American.Vallejo.name":"Vallejo","American.Ann Arbor.name":"Ann Arbor","American.Berkeley.name":"Berkeley","American.Allentown.name":"Allentown","American.Richardson.name":"Richardson","American.Odessa.name":"Odessa","American.Arvada.name":"Arvada","American.Cambridge.name":"Cambridge","American.Sugar Land.name":"Sugar Land","American.Beaumont.name":"Beaumont","American.Lansing.name":"Lansing","American.Evansville.name":"Evansville","American.Independence.name":"Independence","American.Fairfield.name":"Fairfield","American.Provo.name":"Provo","American.Clearwater.name":"Clearwater","American.College Station.name":"College Station","American.West Jordan.name":"West Jordan","American.Carlsbad.name":"Carlsbad","American.El Monte.name":"El Monte","American.Murrieta.name":"Murrieta","American.Temecula.name":"Temecula","American.Palm Bay.name":"Palm Bay","American.Costa Mesa.name":"Costa Mesa","American.Westminster.name":"Westminster","American.North Charleston.name":"North Charleston","American.Miami Gardens.name":"Miami Gardens","American.Manchester.name":"Manchester","American.High Point.name":"High Point","American.Downey.name":"Downey","American.Clovis.name":"Clovis","American.Pompano Beach.name":"Pompano Beach","American.Pueblo.name":"Pueblo","American.Elgin.name":"Elgin","American.Lowell.name":"Lowell","American.Antioch.name":"Antioch","American.West Palm Beach.name":"West Palm Beach","American.Everett.name":"Everett","American.Ventura.name":"Ventura","American.Centennial.name":"Centennial","American.Lakeland.name":"Lakeland","American.Gresham.name":"Gresham","American.Billings.name":"Billings","American.Inglewood.name":"Inglewood","American.Broken Arrow.name":"Broken Arrow","American.Sandy Springs.name":"Sandy Springs","American.Jurupa Valley.name":"Jurupa Valley","American.Hillsboro.name":"Hillsboro","American.Waterbury.name":"Waterbury","American.Santa Maria.name":"Santa Maria","American.Boulder.name":"Boulder","American.Greeley.name":"Greeley","American.Daly City.name":"Daly City","American.Meridian.name":"Meridian","American.Lewisville.name":"Lewisville","American.Davie.name":"Davie","American.West Covina.name":"West Covina","American.League City.name":"League City","American.Tyler.name":"Tyler","American.Norwalk.name":"Norwalk","American.San Mateo.name":"San Mateo","American.Green Bay.name":"Green Bay","American.Wichita Falls.name":"Wichita Falls","American.Sparks.name":"Sparks","American.Burbank.name":"Burbank","American.Rialto.name":"Rialto","American.Allen.name":"Allen","American.El Cajon.name":"El Cajon","American.Las Cruces.name":"Las Cruces","American.Renton.name":"Renton","American.Davenport.name":"Davenport","American.South Bend.name":"South Bend","American.Vista.name":"Vista","American.Tuscaloosa.name":"Tuscaloosa","American.Clinton.name":"Clinton","American.Edison.name":"Edison","American.Woodbridge.name":"Woodbridge","American.San Angelo.name":"San Angelo","American.Kenosha.name":"Kenosha","American.Vacaville.name":"Vacaville","Aztec.Tenochtitlan.name":"Tenochtitlan","Aztec.Teotihuacan.name":"Teotihuacan","Aztec.Tlatelolco.name":"Tlatelolco","Aztec.Texcoco.name":"Texcoco","Aztec.Tlaxcala.name":"Tlaxcala","Aztec.Calixtlahuaca.name":"Calixtlahuaca","Aztec.Xochicalco.name":"Xochicalco","Aztec.Tlacopan.name":"Tlacopan","Aztec.Atzcapotzalco.name":"Atzcapotzalco","Aztec.Tzintzuntzan.name":"Tzintzuntzan","Aztec.Malinalco.name":"Malinalco","Aztec.Tula.name":"Tula","Aztec.Tamuin.name":"Tamuin","Aztec.Teayo.name":"Teayo","Aztec.Cempoala.name":"Cempoala","Aztec.Chalco.name":"Chalco","Aztec.Tlalmanalco.name":"Tlalmanalco","Aztec.Ixtapaluca.name":"Ixtapaluca","Aztec.Huexotla.name":"Huexotla","Aztec.Tepexpan.name":"Tepexpan","Aztec.Tepetlaoxtoc.name":"Tepetlaoxtoc","Aztec.Chiconautla.name":"Chiconautla","Aztec.Zitlaltepec.name":"Zitlaltepec","Aztec.Coyotepec.name":"Coyotepec","Aztec.Tequixquiac.name":"Tequixquiac","Aztec.Jilotzingo.name":"Jilotzingo","Aztec.Tlapanaloya.name":"Tlapanaloya","Aztec.Tultitan.name":"Tultitan","Aztec.Ecatepec.name":"Ecatepec","Aztec.Coatepec.name":"Coatepec","Aztec.Chalchiuites.name":"Chalchiuites","Aztec.Chiauhita.name":"Chiauhita","Aztec.Chapultepec.name":"Chapultepec","Aztec.Itzapalapa.name":"Itzapalapa","Aztec.Ayotzinco.name":"Ayotzinco","Aztec.Iztapam.name":"Iztapam","Babylonian.Babilim.name":"Babilim","Babylonian.Eshnunna.name":"Eshnunna","Babylonian.Diniktum.name":"Diniktum","Babylonian.Tutub.name":"Tutub","Babylonian.Der.name":"Der","Babylonian.Sippar.name":"Sippar","Babylonian.Kutha.name":"Kutha","Babylonian.Jemdet Nasr.name":"Jemdet Nasr","Babylonian.Kish.name":"Kish","Babylonian.Borsippa.name":"Borsippa","Babylonian.Mashkan-shapir.name":"Mashkan-shapir","Babylonian.Dilbat.name":"Dilbat","Babylonian.Nippur.name":"Nippur","Babylonian.Marad.name":"Marad","Babylonian.Adab.name":"Adab","Babylonian.Isin.name":"Isin","Babylonian.Kisurra.name":"Kisurra","Babylonian.Shuruppak.name":"Shuruppak","Babylonian.Bad-tibira.name":"Bad-tibira","Babylonian.Zabalam.name":"Zabalam","Babylonian.Umma.name":"Umma","Babylonian.Girsu.name":"Girsu","Babylonian.Lagash.name":"Lagash","Babylonian.Urum.name":"Urum","Babylonian.Uruk.name":"Uruk","Babylonian.Larsa.name":"Larsa","Babylonian.Ur.name":"Ur","Babylonian.Kuara.name":"Kuara","Babylonian.Eridu.name":"Eridu","Babylonian.Akshak.name":"Akshak","Babylonian.Akkad.name":"Akkad","Chinese.Beijing.name":"Beijing","Chinese.Shanghai.name":"Shanghai","Chinese.Chongqing.name":"Chongqing","Chinese.Tianjin.name":"Tianjin","Chinese.Guangzhou.name":"Guangzhou","Chinese.Shenzhen.name":"Shenzhen","Chinese.Chengdu.name":"Chengdu","Chinese.Nanjing.name":"Nanjing","Chinese.Wuhan.name":"Wuhan","Chinese.Xi'an.name":"Xi'an","Chinese.Hangzhou.name":"Hangzhou","Chinese.Dongguan.name":"Dongguan","Chinese.Foshan.name":"Foshan","Chinese.Shenyang.name":"Shenyang","Chinese.Harbin.name":"Harbin","Chinese.Qingdao.name":"Qingdao","Chinese.Dalian.name":"Dalian","Chinese.Jinan.name":"Jinan","Chinese.Zhengzhou.name":"Zhengzhou","Chinese.Changsha.name":"Changsha","Chinese.Kunming.name":"Kunming","Chinese.Changchun.name":"Changchun","Chinese.\xDCr\xFCmqi.name":"\xDCr\xFCmqi","Chinese.Shantou.name":"Shantou","Chinese.Hefei.name":"Hefei","Chinese.Shijiazhuang.name":"Shijiazhuang","Chinese.Ningbo.name":"Ningbo","Chinese.Taiyuan.name":"Taiyuan","Chinese.Nanning.name":"Nanning","Chinese.Xiamen.name":"Xiamen","Chinese.Fuzhou.name":"Fuzhou","Chinese.Changzhou.name":"Changzhou","Chinese.Wenzhou.name":"Wenzhou","Chinese.Nanchang.name":"Nanchang","Chinese.Tangshan.name":"Tangshan","Chinese.Guiyang.name":"Guiyang","Chinese.Wuxi.name":"Wuxi","Chinese.Lanzhou.name":"Lanzhou","Chinese.Zhongshan.name":"Zhongshan","Chinese.Handan.name":"Handan","Chinese.Huai'an.name":"Huai'an","Chinese.Weifang.name":"Weifang","Chinese.Zibo.name":"Zibo","Chinese.Shaoxing.name":"Shaoxing","Chinese.Yantai.name":"Yantai","Chinese.Huizhou.name":"Huizhou","Chinese.Luoyang.name":"Luoyang","Chinese.Nantong.name":"Nantong","Chinese.Baotou.name":"Baotou","Chinese.Liuzhou.name":"Liuzhou","Egyptian.Cairo.name":"Cairo","Egyptian.Alexandria.name":"Alexandria","Egyptian.Gizeh.name":"Gizeh","Egyptian.Shubra El-Kheima.name":"Shubra El-Kheima","Egyptian.Port Said.name":"Port Said","Egyptian.Suez.name":"Suez","Egyptian.Luxor.name":"Luxor","Egyptian.al-Mansura.name":"al-Mansura","Egyptian.El-Mahalla El-Kubra.name":"El-Mahalla El-Kubra","Egyptian.Tanta.name":"Tanta","Egyptian.Asyut.name":"Asyut","Egyptian.Ismailia.name":"Ismailia","Egyptian.Fayyum.name":"Fayyum","Egyptian.Zagazig.name":"Zagazig","Egyptian.Aswan.name":"Aswan","Egyptian.Damietta.name":"Damietta","Egyptian.Damanhur.name":"Damanhur","Egyptian.al-Minya.name":"al-Minya","Egyptian.Beni Suef.name":"Beni Suef","Egyptian.Qena.name":"Qena","Egyptian.Sohag.name":"Sohag","Egyptian.Hurghada.name":"Hurghada","Egyptian.6th of October City.name":"6th of October City","Egyptian.Shibin El Kom.name":"Shibin El Kom","Egyptian.Banha.name":"Banha","Egyptian.Kafr el-Sheikh.name":"Kafr el-Sheikh","Egyptian.Arish.name":"Arish","Egyptian.Mallawi.name":"Mallawi","Egyptian.10th of Ramadan City.name":"10th of Ramadan City","Egyptian.Bilbais.name":"Bilbais","Egyptian.Marsa Matruh.name":"Marsa Matruh","Egyptian.Idfu.name":"Idfu","Egyptian.Mit Ghamr.name":"Mit Ghamr","Egyptian.Al-Hamidiyya.name":"Al-Hamidiyya","Egyptian.Desouk.name":"Desouk","Egyptian.Qalyub.name":"Qalyub","Egyptian.Abu Kabir.name":"Abu Kabir","Egyptian.Kafr el-Dawwar.name":"Kafr el-Dawwar","Egyptian.Girga.name":"Girga","Egyptian.Akhmim.name":"Akhmim","Egyptian.Matarey.name":"Matarey","English.London.name":"London","English.Birmingham.name":"Birmingham","English.Liverpool.name":"Liverpool","English.Leeds.name":"Leeds","English.Sheffield.name":"Sheffield","English.Bristol.name":"Bristol","English.Manchester.name":"Manchester","English.Leicester.name":"Leicester","English.Coventry.name":"Coventry","English.Kingston upon Hull.name":"Kingston upon Hull","English.Stoke-on-Trent.name":"Stoke-on-Trent","English.Wolverhampton.name":"Wolverhampton","English.Nottingham.name":"Nottingham","English.Plymouth.name":"Plymouth","English.Southampton.name":"Southampton","English.Reading.name":"Reading","English.Derby.name":"Derby","English.Dudley.name":"Dudley","English.Newcastle upon Tyne.name":"Newcastle upon Tyne","English.Northampton.name":"Northampton","English.Portsmouth.name":"Portsmouth","English.Luton.name":"Luton","English.Preston.name":"Preston","English.Sunderland.name":"Sunderland","English.Norwich.name":"Norwich","English.Walsall.name":"Walsall","English.Bournemouth.name":"Bournemouth","English.Southend-on-Sea.name":"Southend-on-Sea","English.Swindon.name":"Swindon","English.Huddersfield.name":"Huddersfield","English.Poole.name":"Poole","English.Oxford.name":"Oxford","English.Middlesbrough.name":"Middlesbrough","English.Blackpool.name":"Blackpool","English.Oldbury.name":"Oldbury","English.Boldon.name":"Boldon","English.Ipswich.name":"Ipswich","English.York.name":"York","English.West Bromwich.name":"West Bromwich","English.Peterborough.name":"Peterborough","English.Stockport.name":"Stockport","English.Brighton.name":"Brighton","English.Slough.name":"Slough","English.Gloucester.name":"Gloucester","English.Rotherham.name":"Rotherham","English.Cambridge.name":"Cambridge","English.Exeter.name":"Exeter","English.Eastbourne.name":"Eastbourne","English.Sutton Coldfield.name":"Sutton Coldfield","English.Blackburn.name":"Blackburn","English.Colchester.name":"Colchester","English.Oldham.name":"Oldham","English.St Helens.name":"St Helens","English.Woking.name":"Woking","English.Chesterfield.name":"Chesterfield","English.Crawley.name":"Crawley","French.Paris.name":"Paris","French.Marseille.name":"Marseille","French.Lyon.name":"Lyon","French.Toulouse.name":"Toulouse","French.Nice.name":"Nice","French.Nantes.name":"Nantes","French.Strasbourg.name":"Strasbourg","French.Montpellier.name":"Montpellier","French.Bordeaux.name":"Bordeaux","French.Lille.name":"Lille","French.Rennes.name":"Rennes","French.Reims.name":"Reims","French.Le Havre.name":"Le Havre","French.Saint-\xC9tienne.name":"Saint-\xC9tienne","French.Toulon.name":"Toulon","French.Grenoble.name":"Grenoble","French.Dijon.name":"Dijon","French.N\xEEmes.name":"N\xEEmes","French.Angers.name":"Angers","French.Villeurbanne.name":"Villeurbanne","French.Le Mans.name":"Le Mans","French.Saint-Denis.name":"Saint-Denis","French.Aix-en-Provence.name":"Aix-en-Provence","French.Clermont-Ferrand.name":"Clermont-Ferrand","French.Brest.name":"Brest","French.Limoges.name":"Limoges","French.Tours.name":"Tours","French.Amiens.name":"Amiens","French.Perpignan.name":"Perpignan","French.Metz.name":"Metz","French.Besan\xE7on.name":"Besan\xE7on","French.Boulogne-Billancourt.name":"Boulogne-Billancourt","French.Orl\xE9ans.name":"Orl\xE9ans","French.Mulhouse.name":"Mulhouse","French.Rouen.name":"Rouen","French.Caen.name":"Caen","French.Argenteuil.name":"Argenteuil","French.Saint-Paul.name":"Saint-Paul","French.Montreuil.name":"Montreuil","French.Nancy.name":"Nancy","French.Roubaix.name":"Roubaix","French.Tourcoing.name":"Tourcoing","French.Nanterre.name":"Nanterre","French.Avignon.name":"Avignon","French.Vitry-sur-Seine.name":"Vitry-sur-Seine","French.Cr\xE9teil.name":"Cr\xE9teil","French.Dunkirk.name":"Dunkirk","French.Poitiers.name":"Poitiers","French.Asni\xE8res-sur-Seine.name":"Asni\xE8res-sur-Seine","French.Courbevoie.name":"Courbevoie","French.Versailles.name":"Versailles","French.Colombes.name":"Colombes","French.Fort-de-France.name":"Fort-de-France","French.Aulnay-sous-Bois.name":"Aulnay-sous-Bois","French.Saint-Pierre.name":"Saint-Pierre","French.Rueil-Malmaison.name":"Rueil-Malmaison","French.Pau.name":"Pau","French.Aubervilliers.name":"Aubervilliers","French.Le Tampon.name":"Le Tampon","French.Champigny-sur-Marne.name":"Champigny-sur-Marne","French.Antibes.name":"Antibes","French.B\xE9ziers.name":"B\xE9ziers","French.La Rochelle.name":"La Rochelle","French.Saint-Maur-des-Foss\xE9s.name":"Saint-Maur-des-Foss\xE9s","French.Cannes.name":"Cannes","French.Calais.name":"Calais","French.Saint-Nazaire.name":"Saint-Nazaire","French.M\xE9rignac.name":"M\xE9rignac","French.Drancy.name":"Drancy","French.Colmar.name":"Colmar","French.Ajaccio.name":"Ajaccio","French.Bourges.name":"Bourges","French.Issy-les-Moulineaux.name":"Issy-les-Moulineaux","French.Levallois-Perret.name":"Levallois-Perret","French.La Seyne-sur-Mer.name":"La Seyne-sur-Mer","French.Quimper.name":"Quimper","French.Noisy-le-Grand.name":"Noisy-le-Grand","French.Villeneuve-d'Ascq.name":"Villeneuve-d'Ascq","French.Neuilly-sur-Seine.name":"Neuilly-sur-Seine","French.Valence.name":"Valence","French.Antony.name":"Antony","French.Cergy.name":"Cergy","French.V\xE9nissieux.name":"V\xE9nissieux","French.Pessac.name":"Pessac","French.Troyes.name":"Troyes","French.Clichy.name":"Clichy","French.Ivry-sur-Seine.name":"Ivry-sur-Seine","French.Chamb\xE9ry.name":"Chamb\xE9ry","French.Lorient.name":"Lorient","French.Les Abymes.name":"Les Abymes","French.Montauban.name":"Montauban","French.Sarcelles.name":"Sarcelles","French.Niort.name":"Niort","French.Villejuif.name":"Villejuif","French.Saint-Andr\xE9.name":"Saint-Andr\xE9","French.Hy\xE8res.name":"Hy\xE8res","French.Saint-Quentin.name":"Saint-Quentin","French.Beauvais.name":"Beauvais","French.\xC9pinay-sur-Seine.name":"\xC9pinay-sur-Seine","French.Cayenne.name":"Cayenne","French.Maisons-Alfort.name":"Maisons-Alfort","French.Cholet.name":"Cholet","French.Meaux.name":"Meaux","French.Chelles.name":"Chelles","French.Pantin.name":"Pantin","French.\xC9vry.name":"\xC9vry","French.Fontenay-sous-Bois.name":"Fontenay-sous-Bois","French.Fr\xE9jus.name":"Fr\xE9jus","French.Vannes.name":"Vannes","French.Bondy.name":"Bondy","French.Le Blanc-Mesnil.name":"Le Blanc-Mesnil","French.La Roche-sur-Yon.name":"La Roche-sur-Yon","French.Saint-Louis.name":"Saint-Louis","French.Arles.name":"Arles","French.Clamart.name":"Clamart","French.Narbonne.name":"Narbonne","French.Annecy.name":"Annecy","French.Sartrouville.name":"Sartrouville","French.Grasse.name":"Grasse","French.Laval.name":"Laval","French.Belfort.name":"Belfort","French.Bobigny.name":"Bobigny","French.\xC9vreux.name":"\xC9vreux","French.Vincennes.name":"Vincennes","French.Montrouge.name":"Montrouge","French.Sevran.name":"Sevran","French.Albi.name":"Albi","French.Charleville-M\xE9zi\xE8res.name":"Charleville-M\xE9zi\xE8res","French.Suresnes.name":"Suresnes","French.Martigues.name":"Martigues","French.Corbeil-Essonnes.name":"Corbeil-Essonnes","French.Saint-Ouen.name":"Saint-Ouen","French.Bayonne.name":"Bayonne","French.Cagnes-sur-Mer.name":"Cagnes-sur-Mer","French.Brive-la-Gaillarde.name":"Brive-la-Gaillarde","French.Carcassonne.name":"Carcassonne","French.Massy.name":"Massy","French.Blois.name":"Blois","French.Aubagne.name":"Aubagne","French.Saint-Brieuc.name":"Saint-Brieuc","French.Ch\xE2teauroux.name":"Ch\xE2teauroux","French.Chalon-sur-Sa\xF4ne.name":"Chalon-sur-Sa\xF4ne","French.Mantes-la-Jolie.name":"Mantes-la-Jolie","French.Meudon.name":"Meudon","French.Saint-Malo.name":"Saint-Malo","French.Ch\xE2lons-en-Champagne.name":"Ch\xE2lons-en-Champagne","French.Alfortville.name":"Alfortville","French.S\xE8te.name":"S\xE8te","French.Salon-de-Provence.name":"Salon-de-Provence","French.Vaulx-en-Velin.name":"Vaulx-en-Velin","French.Puteaux.name":"Puteaux","French.Rosny-sous-Bois.name":"Rosny-sous-Bois","French.Saint-Herblain.name":"Saint-Herblain","French.Gennevilliers.name":"Gennevilliers","French.Le Cannet.name":"Le Cannet","French.Livry-Gargan.name":"Livry-Gargan","French.Saint-Priest.name":"Saint-Priest","French.Istres.name":"Istres","French.Valenciennes.name":"Valenciennes","French.Choisy-le-Roi.name":"Choisy-le-Roi","French.Caluire-et-Cuire.name":"Caluire-et-Cuire","French.Boulogne-sur-Mer.name":"Boulogne-sur-Mer","French.Bastia.name":"Bastia","French.Angoul\xEAme.name":"Angoul\xEAme","French.Garges-l\xE8s-Gonesse.name":"Garges-l\xE8s-Gonesse","French.Castres.name":"Castres","French.Thionville.name":"Thionville","French.Wattrelos.name":"Wattrelos","French.Talence.name":"Talence","French.Saint-Laurent-du-Maroni.name":"Saint-Laurent-du-Maroni","French.Douai.name":"Douai","French.Noisy-le-Sec.name":"Noisy-le-Sec","French.Tarbes.name":"Tarbes","French.Arras.name":"Arras","French.Al\xE8s.name":"Al\xE8s","French.La Courneuve.name":"La Courneuve","French.Bourg-en-Bresse.name":"Bourg-en-Bresse","French.Compi\xE8gne.name":"Compi\xE8gne","French.Gap.name":"Gap","French.Melun.name":"Melun","French.Le Lamentin.name":"Le Lamentin","French.Rez\xE9.name":"Rez\xE9","French.Saint-Germain-en-Laye.name":"Saint-Germain-en-Laye","French.Marcq-en-Bar\u0153ul.name":"Marcq-en-Bar\u0153ul","French.Gagny.name":"Gagny","French.Anglet.name":"Anglet","French.Draguignan.name":"Draguignan","French.Chartres.name":"Chartres","French.Bron.name":"Bron","French.Bagneux.name":"Bagneux","French.Colomiers.name":"Colomiers","French.Saint-Martin-d'H\xE8res.name":"Saint-Martin-d'H\xE8res","French.Pontault-Combault.name":"Pontault-Combault","French.Montlu\xE7on.name":"Montlu\xE7on","French.Jou\xE9-l\xE8s-Tours.name":"Jou\xE9-l\xE8s-Tours","French.Saint-Joseph.name":"Saint-Joseph","French.Poissy.name":"Poissy","French.Savigny-sur-Orge.name":"Savigny-sur-Orge","French.Cherbourg-Octeville.name":"Cherbourg-Octeville","French.Mont\xE9limar.name":"Mont\xE9limar","French.Villefranche-sur-Sa\xF4ne.name":"Villefranche-sur-Sa\xF4ne","French.Stains.name":"Stains","French.Saint-Beno\xEEt.name":"Saint-Beno\xEEt","French.Bagnolet.name":"Bagnolet","French.Ch\xE2tillon.name":"Ch\xE2tillon","French.Le Port.name":"Le Port","French.Sainte-Genevi\xE8ve-des-Bois.name":"Sainte-Genevi\xE8ve-des-Bois","French.\xC9chirolles.name":"\xC9chirolles","French.Roanne.name":"Roanne","French.Villepinte.name":"Villepinte","French.Saint-Chamond.name":"Saint-Chamond","French.Conflans-Sainte-Honorine.name":"Conflans-Sainte-Honorine","French.Auxerre.name":"Auxerre","French.Nevers.name":"Nevers","French.Neuilly-sur-Marne.name":"Neuilly-sur-Marne","French.La Ciotat.name":"La Ciotat","French.Tremblay-en-France.name":"Tremblay-en-France","French.Thonon-les-Bains.name":"Thonon-les-Bains","French.Vitrolles.name":"Vitrolles","French.Haguenau.name":"Haguenau","French.Six-Fours-les-Plages.name":"Six-Fours-les-Plages","French.Agen.name":"Agen","French.Creil.name":"Creil","French.Annemasse.name":"Annemasse","French.Saint-Rapha\xEBl.name":"Saint-Rapha\xEBl","French.Marignane.name":"Marignane","French.Romans-sur-Is\xE8re.name":"Romans-sur-Is\xE8re","French.Montigny-le-Bretonneux.name":"Montigny-le-Bretonneux","French.Le Perreux-sur-Marne.name":"Le Perreux-sur-Marne","French.Franconville.name":"Franconville","French.M\xE2con.name":"M\xE2con","French.Saint-Leu.name":"Saint-Leu","French.Cambrai.name":"Cambrai","French.Ch\xE2tenay-Malabry.name":"Ch\xE2tenay-Malabry","French.Sainte-Marie.name":"Sainte-Marie","French.Villeneuve-Saint-Georges.name":"Villeneuve-Saint-Georges","French.Houilles.name":"Houilles","French.\xC9pinal.name":"\xC9pinal","French.Lens.name":"Lens","French.Li\xE9vin.name":"Li\xE9vin","French.Les Mureaux.name":"Les Mureaux","French.Schiltigheim.name":"Schiltigheim","French.La Possession.name":"La Possession","French.Meyzieu.name":"Meyzieu","French.Dreux.name":"Dreux","French.Nogent-sur-Marne.name":"Nogent-sur-Marne","French.Plaisir.name":"Plaisir","French.Mont-de-Marsan.name":"Mont-de-Marsan","French.Palaiseau.name":"Palaiseau","French.Ch\xE2tellerault.name":"Ch\xE2tellerault","French.Goussainville.name":"Goussainville","French.L'Ha\xFF-les-Roses.name":"L'Ha\xFF-les-Roses","French.Viry-Ch\xE2tillon.name":"Viry-Ch\xE2tillon","French.Vigneux-sur-Seine.name":"Vigneux-sur-Seine","French.Chatou.name":"Chatou","French.Trappes.name":"Trappes","French.Clichy-sous-Bois.name":"Clichy-sous-Bois","French.Rillieux-la-Pape.name":"Rillieux-la-Pape","French.Villenave-'Ornon.name":"Villenave-'Ornon","French.Maubeuge.name":"Maubeuge","French.Charenton-le-Pont.name":"Charenton-le-Pont","French.Malakoff.name":"Malakoff","French.Matoury.name":"Matoury","French.Dieppe.name":"Dieppe","French.Athis-Mons.name":"Athis-Mons","French.Savigny-le-Temple.name":"Savigny-le-Temple","French.P\xE9rigueux.name":"P\xE9rigueux","French.Baie-Mahault.name":"Baie-Mahault","French.Vandoeuvre-l\xE8s-Nancy.name":"Vandoeuvre-l\xE8s-Nancy","French.Pontoise.name":"Pontoise","French.Aix-les-Bains.name":"Aix-les-Bains","French.Cachan.name":"Cachan","French.Vienne.name":"Vienne","French.Thiais.name":"Thiais","French.Orange.name":"Orange","French.Saint-M\xE9dard-en-Jalles.name":"Saint-M\xE9dard-en-Jalles","French.Villemomble.name":"Villemomble","French.Saint-Cloud.name":"Saint-Cloud","French.Saint-Laurent-du-Var.name":"Saint-Laurent-du-Var","French.Yerres.name":"Yerres","French.Saint-\xC9tienne-du-Rouvray.name":"Saint-\xC9tienne-du-Rouvray","French.Sotteville-l\xE8s-Rouen.name":"Sotteville-l\xE8s-Rouen","French.Draveil.name":"Draveil","French.Le Chesnay.name":"Le Chesnay","French.Bois-Colombes.name":"Bois-Colombes","French.Le Plessis-Robinson.name":"Le Plessis-Robinson","French.La Garenne-Colombes.name":"La Garenne-Colombes","French.Lambersart.name":"Lambersart","French.Soissons.name":"Soissons","French.Pierrefitte-sur-Seine.name":"Pierrefitte-sur-Seine","French.Carpentras.name":"Carpentras","French.Villiers-sur-Marne.name":"Villiers-sur-Marne","French.Vanves.name":"Vanves","French.Menton.name":"Menton","French.Bergerac.name":"Bergerac","French.Ermont.name":"Ermont","French.Bezons.name":"Bezons","French.Grigny.name":"Grigny","French.Guyancourt.name":"Guyancourt","French.Saumur.name":"Saumur","French.Herblay.name":"Herblay","French.Ris-Orangis.name":"Ris-Orangis","French.Villiers-le-Bel.name":"Villiers-le-Bel","French.Bourgoin-Jallieu.name":"Bourgoin-Jallieu","French.Vierzon.name":"Vierzon","French.Le Gosier.name":"Le Gosier","French.D\xE9cines-Charpieu.name":"D\xE9cines-Charpieu","French.H\xE9nin-Beaumont.name":"H\xE9nin-Beaumont","French.Fresnes.name":"Fresnes","French.Aurillac.name":"Aurillac","French.Sannois.name":"Sannois","French.Vallauris.name":"Vallauris","French.Illkirch-Graffenstaden.name":"Illkirch-Graffenstaden","French.Alen\xE7on.name":"Alen\xE7on","French.\xC9lancourt.name":"\xC9lancourt","French.Tournefeuille.name":"Tournefeuille","French.B\xE8gles.name":"B\xE8gles","French.Gonesse.name":"Gonesse","French.Oullins.name":"Oullins","French.Brunoy.name":"Brunoy","French.Taverny.name":"Taverny","French.Armenti\xE8res.name":"Armenti\xE8res","French.Montfermeil.name":"Montfermeil","French.Rambouillet.name":"Rambouillet","French.Villeparisis.name":"Villeparisis","French.Le Kremlin-Bic\xEAtre.name":"Le Kremlin-Bic\xEAtre","French.Sucy-en-Brie.name":"Sucy-en-Brie","French.Kourou.name":"Kourou","French.Montb\xE9liard.name":"Montb\xE9liard","French.Romainville.name":"Romainville","French.Cavaillon.name":"Cavaillon","French.Saint-Dizier.name":"Saint-Dizier","French.Br\xE9tigny-sur-Orge.name":"Br\xE9tigny-sur-Orge","French.Saint-S\xE9bastien-sur-Loire.name":"Saint-S\xE9bastien-sur-Loire","French.Saintes.name":"Saintes","French.La Teste-de-Buch.name":"La Teste-de-Buch","French.Villeneuve-la-Garenne.name":"Villeneuve-la-Garenne","French.B\xE9thune.name":"B\xE9thune","French.Bussy-Saint-Georges.name":"Bussy-Saint-Georges","French.Vichy.name":"Vichy","French.La Garde.name":"La Garde","French.Agde.name":"Agde","French.Laon.name":"Laon","French.Sens.name":"Sens","French.Lunel.name":"Lunel","French.Miramas.name":"Miramas","French.Biarritz.name":"Biarritz","French.Le Grand-Quevilly.name":"Le Grand-Quevilly","French.Orvault.name":"Orvault","French.Les Ulis.name":"Les Ulis","French.Champs-sur-Marne.name":"Champs-sur-Marne","French.Rochefort.name":"Rochefort","French.Muret.name":"Muret","French.Sainte-Anne.name":"Sainte-Anne","French.Eaubonne.name":"Eaubonne","French.\xC9tampes.name":"\xC9tampes","French.Gradignan.name":"Gradignan","French.Vernon.name":"Vernon","French.Petit-Bourg.name":"Petit-Bourg","French.Libourne.name":"Libourne","French.Abbeville.name":"Abbeville","French.Rodez.name":"Rodez","French.Saint-Ouen-l'Aum\xF4ne.name":"Saint-Ouen-l'Aum\xF4ne","French.Torcy.name":"Torcy","French.Maisons-Laffitte.name":"Maisons-Laffitte","French.Montgeron.name":"Montgeron","French.Villeneuve-sur-Lot.name":"Villeneuve-sur-Lot","French.Cormeilles-en-Parisis.name":"Cormeilles-en-Parisis","French.\xC9pernay.name":"\xC9pernay","French.S\xE8vres.name":"S\xE8vres","French.Dole.name":"Dole","French.Le Robert.name":"Le Robert","French.Le Bouscat.name":"Le Bouscat","French.Blagnac.name":"Blagnac","French.Frontignan.name":"Frontignan","French.Cenon.name":"Cenon","French.Mandelieu-la-Napoule.name":"Mandelieu-la-Napoule","French.Vertou.name":"Vertou","French.Les Lilas.name":"Les Lilas","French.Bruay-la-Buissi\xE8re.name":"Bruay-la-Buissi\xE8re","French.Les Pavillons-sous-Bois.name":"Les Pavillons-sous-Bois","French.Chaumont.name":"Chaumont","French.Roissy-en-Brie.name":"Roissy-en-Brie","French.Le Moule.name":"Le Moule","French.Le Petit-Quevilly.name":"Le Petit-Quevilly","French.Manosque.name":"Manosque","French.Saint-Mand\xE9.name":"Saint-Mand\xE9","French.Fontenay-aux-Roses.name":"Fontenay-aux-Roses","French.Orly.name":"Orly","French.Le Creusot.name":"Le Creusot","French.Oyonnax.name":"Oyonnax","French.La Madeleine.name":"La Madeleine","French.Sainte-Suzanne.name":"Sainte-Suzanne","French.Millau.name":"Millau","French.Combs-la-Ville.name":"Combs-la-Ville","French.Fontaine.name":"Fontaine","French.Deuil-la-Barre.name":"Deuil-la-Barre","French.Coudekerque-Branche.name":"Coudekerque-Branche","French.Auch.name":"Auch","French.Lanester.name":"Lanester","French.Beaune.name":"Beaune","French.Montigny-l\xE8s-Metz.name":"Montigny-l\xE8s-Metz","French.Hazebrouck.name":"Hazebrouck","French.Longjumeau.name":"Longjumeau","French.Sainte-Foy-l\xE8s-Lyon.name":"Sainte-Foy-l\xE8s-Lyon","French.Forbach.name":"Forbach","French.Sarreguemines.name":"Sarreguemines","French.Mons-en-Bar\u0153ul.name":"Mons-en-Bar\u0153ul","French.La Valette-du-Var.name":"La Valette-du-Var","French.H\xE9rouville-Saint-Clair.name":"H\xE9rouville-Saint-Clair","French.Morsang-sur-Orge.name":"Morsang-sur-Orge","French.Grande-Synthe.name":"Grande-Synthe","French.La Celle-Saint-Cloud.name":"La Celle-Saint-Cloud","French.Lisieux.name":"Lisieux","French.Croix.name":"Croix","French.Dammarie-les-Lys.name":"Dammarie-les-Lys","French.V\xE9lizy-Villacoublay.name":"V\xE9lizy-Villacoublay","French.Wasquehal.name":"Wasquehal","French.Saint-Gratien.name":"Saint-Gratien","French.Halluin.name":"Halluin","French.Neuilly-Plaisance.name":"Neuilly-Plaisance","French.Montmorency.name":"Montmorency","French.Dax.name":"Dax","French.Lagny-sur-Marne.name":"Lagny-sur-Marne","French.Le M\xE9e-sur-Seine.name":"Le M\xE9e-sur-Seine","French.Saint-Genis-Laval.name":"Saint-Genis-Laval","French.Fleury-les-Aubrais.name":"Fleury-les-Aubrais","French.Loos.name":"Loos","French.Gif-sur-Yvette.name":"Gif-sur-Yvette","French.Denain.name":"Denain","French.Saint-Di\xE9-des-Vosges.name":"Saint-Di\xE9-des-Vosges","French.Sainte-Rose.name":"Sainte-Rose","French.Saint-Michel-sur-Orge.name":"Saint-Michel-sur-Orge","German.Berlin.name":"Berlin","German.Hamburg.name":"Hamburg","German.Munich.name":"Munich","German.Cologne.name":"Cologne","German.Frankfurt.name":"Frankfurt","German.Stuttgart.name":"Stuttgart","German.D\xFCsseldorf.name":"D\xFCsseldorf","German.Dortmund.name":"Dortmund","German.Essen.name":"Essen","German.Leipzig.name":"Leipzig","German.Bremen.name":"Bremen","German.Dresden.name":"Dresden","German.Hanover.name":"Hanover","German.Nuremberg.name":"Nuremberg","German.Duisburg.name":"Duisburg","German.Bochum.name":"Bochum","German.Wuppertal.name":"Wuppertal","German.Bielefeld.name":"Bielefeld","German.Bonn.name":"Bonn","German.M\xFCnster.name":"M\xFCnster","German.Karlsruhe.name":"Karlsruhe","German.Mannheim.name":"Mannheim","German.Augsburg.name":"Augsburg","German.Wiesbaden.name":"Wiesbaden","German.Gelsenkirchen.name":"Gelsenkirchen","German.M\xF6nchengladbach.name":"M\xF6nchengladbach","German.Braunschweig.name":"Braunschweig","German.Chemnitz.name":"Chemnitz","German.Kiel.name":"Kiel","German.Aachen.name":"Aachen","German.Halle.name":"Halle","German.Magdeburg.name":"Magdeburg","German.Freiburg.name":"Freiburg","German.Krefeld.name":"Krefeld","German.L\xFCbeck.name":"L\xFCbeck","German.Oberhausen.name":"Oberhausen","German.Erfurt.name":"Erfurt","German.Mainz.name":"Mainz","German.Rostock.name":"Rostock","German.Kassel.name":"Kassel","German.Hagen.name":"Hagen","German.Hamm.name":"Hamm","German.Saarbr\xFCcken.name":"Saarbr\xFCcken","German.M\xFClheim an der Ruhr.name":"M\xFClheim an der Ruhr","German.Potsdam.name":"Potsdam","German.Ludwigshafen am Rhein.name":"Ludwigshafen am Rhein","German.Oldenburg.name":"Oldenburg","German.Leverkusen.name":"Leverkusen","German.Osnabr\xFCck.name":"Osnabr\xFCck","German.Solingen.name":"Solingen","Greek.Athens.name":"Athens","Greek.Thessaloniki.name":"Thessaloniki","Greek.Patras.name":"Patras","Greek.Piraeus.name":"Piraeus","Greek.Larissa.name":"Larissa","Greek.Heraklion.name":"Heraklion","Greek.Peristeri.name":"Peristeri","Greek.Kallithea.name":"Kallithea","Greek.Acharnes.name":"Acharnes","Greek.Kalamaria.name":"Kalamaria","Greek.Nikaia.name":"Nikaia","Greek.Glyfada.name":"Glyfada","Greek.Volos.name":"Volos","Greek.Ilio.name":"Ilio","Greek.Ilioupoli.name":"Ilioupoli","Greek.Keratsini.name":"Keratsini","Greek.Evosmos.name":"Evosmos","Greek.Chalandri.name":"Chalandri","Greek.Nea Smyrni.name":"Nea Smyrni","Greek.Marousi.name":"Marousi","Greek.Agios Dimitrios.name":"Agios Dimitrios","Greek.Zografou.name":"Zografou","Greek.Egaleo.name":"Egaleo","Greek.Nea Ionia.name":"Nea Ionia","Greek.Ioannina.name":"Ioannina","Greek.Palaio Faliro.name":"Palaio Faliro","Greek.Korydallos.name":"Korydallos","Greek.Trikala.name":"Trikala","Greek.Vyronas.name":"Vyronas","Greek.Agia Paraskevi.name":"Agia Paraskevi","Greek.Galatsi.name":"Galatsi","Greek.Agrinio.name":"Agrinio","Greek.Chalcis.name":"Chalcis","Greek.Petroupoli.name":"Petroupoli","Greek.Serres.name":"Serres","Greek.Alexandroupoli.name":"Alexandroupoli","Greek.Xanthi.name":"Xanthi","Greek.Katerini.name":"Katerini","Greek.Kalamata.name":"Kalamata","Greek.Kavala.name":"Kavala","Greek.Chania.name":"Chania","Greek.Lamia.name":"Lamia","Greek.Komotini.name":"Komotini","Greek.Irakleio.name":"Irakleio","Greek.Rhodes.name":"Rhodes","Greek.Kifissia.name":"Kifissia","Greek.Stavroupoli.name":"Stavroupoli","Greek.Chaidari.name":"Chaidari","Greek.Drama.name":"Drama","Greek.Veria.name":"Veria","Greek.Alimos.name":"Alimos","Greek.Kozani.name":"Kozani","Greek.Polichni.name":"Polichni","Greek.Karditsa.name":"Karditsa","Greek.Sykies.name":"Sykies","Greek.Ampelokipoi.name":"Ampelokipoi","Greek.Pylaia.name":"Pylaia","Greek.Agioi Anargyroi.name":"Agioi Anargyroi","Greek.Argyroupoli.name":"Argyroupoli","Greek.Ano Liosia.name":"Ano Liosia","Greek.Rethymno.name":"Rethymno","Greek.Ptolemaida.name":"Ptolemaida","Greek.Tripoli.name":"Tripoli","Greek.Cholargos.name":"Cholargos","Greek.Vrilissia.name":"Vrilissia","Greek.Aspropyrgos.name":"Aspropyrgos","Greek.Corinth.name":"Corinth","Greek.Gerakas.name":"Gerakas","Greek.Metamorfosi.name":"Metamorfosi","Greek.Giannitsa.name":"Giannitsa","Greek.Voula.name":"Voula","Greek.Kamatero.name":"Kamatero","Greek.Mytilene.name":"Mytilene","Greek.Neapoli.name":"Neapoli","Greek.Eleftherio-Kordelio.name":"Eleftherio-Kordelio","Greek.Chios.name":"Chios","Greek.Agia Varvara.name":"Agia Varvara","Greek.Kaisariani.name":"Kaisariani","Greek.Nea Filadelfeia.name":"Nea Filadelfeia","Greek.Moschato.name":"Moschato","Greek.Perama.name":"Perama","Greek.Salamina.name":"Salamina","Greek.Eleusis.name":"Eleusis","Greek.Corfu.name":"Corfu","Greek.Pyrgos.name":"Pyrgos","Greek.Megara.name":"Megara","Greek.Kilkis.name":"Kilkis","Greek.Dafni.name":"Dafni","Greek.Thebes.name":"Thebes","Greek.Melissia.name":"Melissia","Greek.Argos.name":"Argos","Greek.Arta.name":"Arta","Greek.Artemida.name":"Artemida","Greek.Livadeia.name":"Livadeia","Greek.Pefki.name":"Pefki","Greek.Oraiokastro.name":"Oraiokastro","Greek.Aigio.name":"Aigio","Greek.Kos.name":"Kos","Greek.Koropi.name":"Koropi","Greek.Preveza.name":"Preveza","Greek.Naousa.name":"Naousa","Greek.Orestiada.name":"Orestiada","Greek.Peraia.name":"Peraia","Greek.Edessa.name":"Edessa","Greek.Florina.name":"Florina","Greek.Panorama.name":"Panorama","Greek.Nea Erythraia1.name":"Nea Erythraia1","Greek.Elliniko1.name":"Elliniko1","Greek.Amaliada.name":"Amaliada","Greek.Pallini.name":"Pallini","Greek.Sparta.name":"Sparta","Greek.Agios Ioannis Rentis.name":"Agios Ioannis Rentis","Greek.Thermi.name":"Thermi","Greek.Vari.name":"Vari","Greek.Nea Makri.name":"Nea Makri","Greek.Tavros.name":"Tavros","Greek.Alexandreia.name":"Alexandreia","Greek.Menemeni.name":"Menemeni","Greek.Paiania.name":"Paiania","Greek.Kalyvia Thorikou.name":"Kalyvia Thorikou","Greek.Nafplio.name":"Nafplio","Greek.Drapetsona.name":"Drapetsona","Greek.Efkarpia.name":"Efkarpia","Greek.Papagou.name":"Papagou","Greek.Nafpaktos.name":"Nafpaktos","Greek.Kastoria.name":"Kastoria","Greek.Grevena.name":"Grevena","Greek.Pefka.name":"Pefka","Greek.Nea Alikarnassos.name":"Nea Alikarnassos","Greek.Missolonghi.name":"Missolonghi","Greek.Gazi.name":"Gazi","Greek.Ierapetra.name":"Ierapetra","Greek.Kalymnos.name":"Kalymnos","Greek.Rafina.name":"Rafina","Greek.Loutraki.name":"Loutraki","Greek.Agios Nikolaos.name":"Agios Nikolaos","Greek.Ermoupoli.name":"Ermoupoli","Greek.Ialysos.name":"Ialysos","Greek.Mandra.name":"Mandra","Greek.Tyrnavos.name":"Tyrnavos","Greek.Glyka Nera.name":"Glyka Nera","Greek.Ymittos.name":"Ymittos","Greek.Neo Psychiko.name":"Neo Psychiko","Indian.Delhi.name":"Delhi","Indian.Mumbai.name":"Mumbai","Indian.Bangalore.name":"Bangalore","Indian.Hyderabad.name":"Hyderabad","Indian.Ahmedabad.name":"Ahmedabad","Indian.Chennai.name":"Chennai","Indian.Kolkata.name":"Kolkata","Indian.Surat.name":"Surat","Indian.Pune.name":"Pune","Indian.Jaipur.name":"Jaipur","Indian.Lucknow.name":"Lucknow","Indian.Kanpur.name":"Kanpur","Indian.Nagpur.name":"Nagpur","Indian.Indore.name":"Indore","Indian.Thane.name":"Thane","Indian.Bhopal.name":"Bhopal","Indian.Visakhapatnam.name":"Visakhapatnam","Indian.Pimpri-Chinchwad.name":"Pimpri-Chinchwad","Indian.Patna.name":"Patna","Indian.Vadodara.name":"Vadodara","Indian.Ghaziabad.name":"Ghaziabad","Indian.Ludhiana.name":"Ludhiana","Indian.Agra.name":"Agra","Indian.Nashik.name":"Nashik","Indian.Faridabad.name":"Faridabad","Indian.Meerut.name":"Meerut","Indian.Rajkot.name":"Rajkot","Indian.Kalyan-Dombivli.name":"Kalyan-Dombivli","Indian.Vasai-Virar.name":"Vasai-Virar","Indian.Varanasi.name":"Varanasi","Indian.Srinagar.name":"Srinagar","Indian.Aurangabad.name":"Aurangabad","Indian.Dhanbad.name":"Dhanbad","Indian.Amritsar.name":"Amritsar","Indian.Navi Mumbai.name":"Navi Mumbai","Indian.Allahabad.name":"Allahabad","Indian.Howrah.name":"Howrah","Indian.Ranchi.name":"Ranchi","Indian.Gwalior.name":"Gwalior","Indian.Jabalpur.name":"Jabalpur","Indian.Coimbatore.name":"Coimbatore","Indian.Vijayawada.name":"Vijayawada","Indian.Jodhpur.name":"Jodhpur","Indian.Madurai.name":"Madurai","Indian.Raipur.name":"Raipur","Indian.Kota.name":"Kota","Indian.Chandigarh.name":"Chandigarh","Indian.Guwahati.name":"Guwahati","Indian.Solapur.name":"Solapur","Indian.Hubli\u2013Dharwad.name":"Hubli\u2013Dharwad","Indian.Tiruchirappalli.name":"Tiruchirappalli","Indian.Bareilly.name":"Bareilly","Indian.Moradabad.name":"Moradabad","Indian.Mysore.name":"Mysore","Indian.Tiruppur.name":"Tiruppur","Indian.Gurgaon.name":"Gurgaon","Indian.Aligarh.name":"Aligarh","Indian.Jalandhar.name":"Jalandhar","Indian.Bhubaneswar.name":"Bhubaneswar","Indian.Salem.name":"Salem","Indian.Mira-Bhayandar.name":"Mira-Bhayandar","Indian.Warangal.name":"Warangal","Indian.Jalgaon.name":"Jalgaon","Indian.Guntur.name":"Guntur","Indian.Bhiwandi.name":"Bhiwandi","Indian.Saharanpur.name":"Saharanpur","Indian.Gorakhpur.name":"Gorakhpur","Indian.Bikaner.name":"Bikaner","Indian.Amravati.name":"Amravati","Indian.Noida.name":"Noida","Indian.Jamshedpur.name":"Jamshedpur","Indian.Bhilai.name":"Bhilai","Indian.Cuttack.name":"Cuttack","Indian.Firozabad.name":"Firozabad","Indian.Kochi.name":"Kochi","Indian.Nellore.name":"Nellore","Indian.Bhavnagar.name":"Bhavnagar","Indian.Dehradun.name":"Dehradun","Indian.Durgapur.name":"Durgapur","Indian.Asansol.name":"Asansol","Indian.Rourkela.name":"Rourkela","Indian.Nanded.name":"Nanded","Indian.Kolhapur.name":"Kolhapur","Indian.Ajmer.name":"Ajmer","Indian.Akola.name":"Akola","Indian.Gulbarga.name":"Gulbarga","Indian.Jamnagar.name":"Jamnagar","Indian.Ujjain.name":"Ujjain","Indian.Loni.name":"Loni","Indian.Siliguri.name":"Siliguri","Indian.Jhansi.name":"Jhansi","Indian.Ulhasnagar.name":"Ulhasnagar","Indian.Jammu.name":"Jammu","Indian.Sangli-Miraj & Kupwad.name":"Sangli-Miraj & Kupwad","Indian.Mangalore.name":"Mangalore","Indian.Erode.name":"Erode","Indian.Belgaum.name":"Belgaum","Indian.Ambattur.name":"Ambattur","Indian.Tirunelveli.name":"Tirunelveli","Indian.Malegaon.name":"Malegaon","Indian.Gaya.name":"Gaya","Indian.Thiruvananthapuram.name":"Thiruvananthapuram","Indian.Udaipur.name":"Udaipur","Indian.Maheshtala.name":"Maheshtala","Indian.Davanagere.name":"Davanagere","Indian.Kozhikode.name":"Kozhikode","Indian.Kurnool.name":"Kurnool","Indian.Rajpur Sonarpur.name":"Rajpur Sonarpur","Indian.Rajahmundry.name":"Rajahmundry","Indian.Bokaro.name":"Bokaro","Indian.South Dumdum.name":"South Dumdum","Indian.Bellary.name":"Bellary","Indian.Patiala.name":"Patiala","Indian.Gopalpur.name":"Gopalpur","Indian.Agartala.name":"Agartala","Indian.Bhagalpur.name":"Bhagalpur","Indian.Muzaffarnagar.name":"Muzaffarnagar","Indian.Bhatpara.name":"Bhatpara","Indian.Panihati.name":"Panihati","Indian.Latur.name":"Latur","Indian.Dhule.name":"Dhule","Indian.Tirupati.name":"Tirupati","Indian.Rohtak.name":"Rohtak","Indian.Korba.name":"Korba","Indian.Bhilwara.name":"Bhilwara","Indian.Berhampur.name":"Berhampur","Indian.Muzaffarpur.name":"Muzaffarpur","Indian.Ahmednagar.name":"Ahmednagar","Indian.Mathura.name":"Mathura","Indian.Kollam.name":"Kollam","Indian.Avadi.name":"Avadi","Indian.Kadapa.name":"Kadapa","Indian.Kamarhati.name":"Kamarhati","Indian.Sambalpur.name":"Sambalpur","Indian.Bilaspur.name":"Bilaspur","Indian.Shahjahanpur.name":"Shahjahanpur","Indian.Satara.name":"Satara","Indian.Bijapur.name":"Bijapur","Indian.Kakinada.name":"Kakinada","Indian.Rampur.name":"Rampur","Indian.Shimoga.name":"Shimoga","Indian.Chandrapur.name":"Chandrapur","Indian.Junagadh.name":"Junagadh","Indian.Thrissur.name":"Thrissur","Indian.Alwar.name":"Alwar","Indian.Bardhaman.name":"Bardhaman","Indian.Kulti.name":"Kulti","Indian.Nizamabad.name":"Nizamabad","Indian.Parbhani.name":"Parbhani","Indian.Tumkur.name":"Tumkur","Indian.Khammam.name":"Khammam","Indian.Ozhukarai.name":"Ozhukarai","Indian.Bihar Sharif.name":"Bihar Sharif","Indian.Panipat.name":"Panipat","Indian.Darbhanga.name":"Darbhanga","Indian.Bally.name":"Bally","Indian.Aizawl.name":"Aizawl","Indian.Dewas.name":"Dewas","Indian.Ichalkaranji.name":"Ichalkaranji","Indian.Karnal.name":"Karnal","Indian.Bathinda.name":"Bathinda","Indian.Jalna.name":"Jalna","Indian.Eluru.name":"Eluru","Indian.Barasat.name":"Barasat","Indian.Kirari Suleman Nagar.name":"Kirari Suleman Nagar","Indian.Purnia.name":"Purnia","Indian.Satna.name":"Satna","Indian.Mau.name":"Mau","Indian.Sonipat.name":"Sonipat","Indian.Farrukhabad.name":"Farrukhabad","Indian.Sagar.name":"Sagar","Indian.Durg.name":"Durg","Indian.Imphal.name":"Imphal","Indian.Ratlam.name":"Ratlam","Indian.Hapur.name":"Hapur","Indian.Arrah.name":"Arrah","Indian.Anantapur.name":"Anantapur","Indian.Karimnagar.name":"Karimnagar","Indian.Etawah.name":"Etawah","Indian.Ambarnath.name":"Ambarnath","Indian.North Dumdum.name":"North Dumdum","Indian.Bharatpur.name":"Bharatpur","Indian.Begusarai.name":"Begusarai","Indian.New Delhi.name":"New Delhi","Indian.Gandhidham.name":"Gandhidham","Indian.Baranagar.name":"Baranagar","Indian.Tiruvottiyur.name":"Tiruvottiyur","Indian.Pondicherry.name":"Pondicherry","Indian.Sikar.name":"Sikar","Indian.Thoothukudi.name":"Thoothukudi","Indian.Rewa.name":"Rewa","Indian.Mirzapur.name":"Mirzapur","Indian.Raichur.name":"Raichur","Indian.Pali.name":"Pali","Indian.Ramagundam.name":"Ramagundam","Indian.Haridwar.name":"Haridwar","Indian.Vijayanagaram.name":"Vijayanagaram","Indian.Katihar.name":"Katihar","Indian.Nagercoil.name":"Nagercoil","Indian.Sri Ganganagar.name":"Sri Ganganagar","Indian.Karawal Nagar.name":"Karawal Nagar","Indian.Mango.name":"Mango","Indian.Thanjavur.name":"Thanjavur","Indian.Bulandshahr.name":"Bulandshahr","Indian.Uluberia.name":"Uluberia","Indian.Katni.name":"Katni","Indian.Sambhal.name":"Sambhal","Indian.Singrauli.name":"Singrauli","Indian.Nadiad.name":"Nadiad","Indian.Secunderabad.name":"Secunderabad","Indian.Naihati.name":"Naihati","Indian.Yamunanagar.name":"Yamunanagar","Indian.Bidhannagar.name":"Bidhannagar","Indian.Pallavaram.name":"Pallavaram","Indian.Bidar.name":"Bidar","Indian.Munger.name":"Munger","Indian.Panchkula.name":"Panchkula","Indian.Burhanpur.name":"Burhanpur","Indian.Raurkela Industrial Township.name":"Raurkela Industrial Township","Indian.Kharagpur.name":"Kharagpur","Indian.Dindigul.name":"Dindigul","Indian.Gandhinagar.name":"Gandhinagar","Indian.Hospet.name":"Hospet","Indian.Nangloi Jat.name":"Nangloi Jat","Indian.Malda.name":"Malda","Indian.Ongole.name":"Ongole","Indian.Deoghar.name":"Deoghar","Indian.Chapra.name":"Chapra","Indian.Haldia.name":"Haldia","Indian.Khandwa.name":"Khandwa","Indian.Nandyal.name":"Nandyal","Indian.Morena.name":"Morena","Indian.Amroha.name":"Amroha","Indian.Anand.name":"Anand","Indian.Bhind.name":"Bhind","Indian.Bhalswa Jahangir Pur.name":"Bhalswa Jahangir Pur","Indian.Madhyamgram.name":"Madhyamgram","Indian.Bhiwani.name":"Bhiwani","Indian.Berhampore.name":"Berhampore","Indian.Ambala.name":"Ambala","Indian.Morbi.name":"Morbi","Indian.Fatehpur.name":"Fatehpur","Indian.Raebareli.name":"Raebareli","Indian.Mahaboobnagar.name":"Mahaboobnagar","Indian.Chittoor.name":"Chittoor","Indian.Bhusawal.name":"Bhusawal","Indian.Orai.name":"Orai","Indian.Bahraich.name":"Bahraich","Indian.Vellore.name":"Vellore","Indian.Mehsana.name":"Mehsana","Indian.Raiganj.name":"Raiganj","Indian.Sirsa.name":"Sirsa","Indian.Danapur.name":"Danapur","Indian.Serampore.name":"Serampore","Indian.Sultan Pur Majra.name":"Sultan Pur Majra","Indian.Guna.name":"Guna","Indian.Jaunpur.name":"Jaunpur","Indian.Panvel.name":"Panvel","Indian.Shivpuri.name":"Shivpuri","Indian.Surendranagar Dudhrej.name":"Surendranagar Dudhrej","Indian.Unnao.name":"Unnao","Indian.Chinsurah.name":"Chinsurah","Indian.Alappuzha.name":"Alappuzha","Indian.Kottayam.name":"Kottayam","Indian.Machilipatnam.name":"Machilipatnam","Indian.Shimla.name":"Shimla","Indian.Adoni.name":"Adoni","Indian.Udupi.name":"Udupi","Indian.Tenali.name":"Tenali","Indian.Proddatur.name":"Proddatur","Indian.Saharsa.name":"Saharsa","Indian.Hindupur.name":"Hindupur","Indian.Sasaram.name":"Sasaram","Indian.Hajipur.name":"Hajipur","Indian.Bhimavaram.name":"Bhimavaram","Indian.Kumbakonam.name":"Kumbakonam","Indian.Dehri.name":"Dehri","Indian.Madanapalle.name":"Madanapalle","Indian.Siwan.name":"Siwan","Indian.Bettiah.name":"Bettiah","Indian.Guntakal.name":"Guntakal","Indian.Srikakulam.name":"Srikakulam","Indian.Motihari.name":"Motihari","Indian.Dharmavaram.name":"Dharmavaram","Indian.Gudivada.name":"Gudivada","Indian.Phagwara.name":"Phagwara","Indian.Narasaraopet.name":"Narasaraopet","Indian.Suryapet.name":"Suryapet","Indian.Miryalaguda.name":"Miryalaguda","Indian.Tadipatri.name":"Tadipatri","Indian.Karaikudi.name":"Karaikudi","Indian.Kishanganj.name":"Kishanganj","Indian.Jamalpur.name":"Jamalpur","Indian.Ballia.name":"Ballia","Indian.Kavali.name":"Kavali","Indian.Tadepalligudem.name":"Tadepalligudem","Indian.Amaravati.name":"Amaravati","Indian.Buxar.name":"Buxar","Indian.Jehanabad.name":"Jehanabad","Indian.Gangtok.name":"Gangtok","Mongol.Ulaanbaatar.name":"Ulaanbaatar","Mongol.Erdenet.name":"Erdenet","Mongol.Darkhan.name":"Darkhan","Mongol.Choibalsan.name":"Choibalsan","Mongol.M\xF6r\xF6n.name":"M\xF6r\xF6n","Mongol.Nalaikh.name":"Nalaikh","Mongol.Bayankhongor.name":"Bayankhongor","Mongol.\xD6lgii.name":"\xD6lgii","Mongol.Khovd.name":"Khovd","Mongol.Arvaikheer.name":"Arvaikheer","Mongol.Ulaangom.name":"Ulaangom","Mongol.Baganuur.name":"Baganuur","Mongol.Sainshand.name":"Sainshand","Mongol.Tsetserleg.name":"Tsetserleg","Mongol.S\xFCkhbaatar.name":"S\xFCkhbaatar","Mongol.\xD6nd\xF6rkhaan.name":"\xD6nd\xF6rkhaan","Mongol.Dalanzadgad.name":"Dalanzadgad","Mongol.Z\xFC\xFCnkharaa.name":"Z\xFC\xFCnkharaa","Mongol.Uliastai.name":"Uliastai","Mongol.Altai.name":"Altai","Mongol.Baruun-Urt.name":"Baruun-Urt","Mongol.Mandalgovi.name":"Mandalgovi","Mongol.Zuunmod.name":"Zuunmod","Mongol.Zamyn-\xDC\xFCd.name":"Zamyn-\xDC\xFCd","Mongol.Bulgan.name":"Bulgan","Mongol.Kharkhorin.name":"Kharkhorin","Mongol.Choir.name":"Choir","Mongol.Bor-\xD6nd\xF6r.name":"Bor-\xD6nd\xF6r","Mongol.Sharyngo.name":"Sharyngo","Roman.Roma.name":"Roma","Roman.Ariminum.name":"Ariminum","Roman.Belum.name":"Belum","Roman.Placentia.name":"Placentia","Roman.Tarraco.name":"Tarraco","Roman.Italica.name":"Italica","Roman.Mod.name":"Mod","Roman.Salernum.name":"Salernum","Roman.Bononia.name":"Bononia","Roman.Forum Livii.name":"Forum Livii","Roman.Regium Lepidi.name":"Regium Lepidi","Roman.Aquileia.name":"Aquileia","Roman.Ascrivium.name":"Ascrivium","Roman.Valentia Edetanorum.name":"Valentia Edetanorum","Roman.Scalabis.name":"Scalabis","Roman.Villa Euracini.name":"Villa Euracini","Roman.Palma.name":"Palma","Roman.Colonia Narbo Martius.name":"Colonia Narbo Martius","Roman.Massa.name":"Massa","Roman.Pistoria.name":"Pistoria","Roman.Segovia.name":"Segovia","Roman.Gerunda.name":"Gerunda","Roman.Pompaelo.name":"Pompaelo","Roman.Naissus.name":"Naissus","Roman.Brigantium.name":"Brigantium","Roman.Florentia.name":"Florentia","Roman.Vesontio.name":"Vesontio","Roman.Lutetia Parisiorum.name":"Lutetia Parisiorum","Roman.Atuatuca Tungrorum.name":"Atuatuca Tungrorum","Roman.Iulia Romula Hispalis.name":"Iulia Romula Hispalis","Roman.Augusta Raurica.name":"Augusta Raurica","Roman.Noviodunum.name":"Noviodunum","Roman.Lugdunum.name":"Lugdunum","Roman.Siscia.name":"Siscia","Roman.Marsonia.name":"Marsonia","Roman.Augusta Treverorum.name":"Augusta Treverorum","Roman.Castra Legionis.name":"Castra Legionis","Roman.Augusta Taurinorum.name":"Augusta Taurinorum","Roman.Augusta Praetoria Salassorum.name":"Augusta Praetoria Salassorum","Roman.Emerita Augusta.name":"Emerita Augusta","Roman.Norba Caesarina.name":"Norba Caesarina","Roman.Lucus Augusta.name":"Lucus Augusta","Roman.Caesarea.name":"Caesarea","Roman.Bracara Augusta.name":"Bracara Augusta","Roman.Novaesium.name":"Novaesium","Roman.Castra Vetera.name":"Castra Vetera","Roman.Pons Drusi.name":"Pons Drusi","Roman.Ovilava.name":"Ovilava","Roman.Iuvavum.name":"Iuvavum","Roman.Augusta Vindelicorum.name":"Augusta Vindelicorum","Roman.Turicum.name":"Turicum","Roman.Asturica Augusta.name":"Asturica Augusta","Roman.Borbetomagus.name":"Borbetomagus","Roman.Caesaraugusta.name":"Caesaraugusta","Roman.Sirmium.name":"Sirmium","Roman.Sorviodurum.name":"Sorviodurum","Roman.Mogontiacum.name":"Mogontiacum","Roman.Argentoratum.name":"Argentoratum","Roman.Bonna.name":"Bonna","Roman.Noviomagus.name":"Noviomagus","Roman.Castellum apud Confluentes.name":"Castellum apud Confluentes","Roman.Divodurum.name":"Divodurum","Roman.Caesaromagus.name":"Caesaromagus","Roman.Ambianum.name":"Ambianum","Roman.Faventia Paterna Barcino.name":"Faventia Paterna Barcino","Roman.Abila.name":"Abila","Roman.Lousonna.name":"Lousonna","Roman.Ulpia Noviomagus Batavorum.name":"Ulpia Noviomagus Batavorum","Roman.Rigomagus.name":"Rigomagus","Roman.Aquae Mattiacorum.name":"Aquae Mattiacorum","Roman.Mursa.name":"Mursa","Roman.Emona.name":"Emona","Roman.Vindonissa.name":"Vindonissa","Roman.Aventicum.name":"Aventicum","Roman.Praetorium Agrippinae.name":"Praetorium Agrippinae","Roman.Lugdunum Batavorum.name":"Lugdunum Batavorum","Roman.Aequum.name":"Aequum","Roman.Londinium.name":"Londinium","Roman.Albanianis.name":"Albanianis","Roman.Lauri.name":"Lauri","Roman.Durovernum Cantiacorum.name":"Durovernum Cantiacorum","Roman.Regulbium.name":"Regulbium","Roman.Rutupiae.name":"Rutupiae","Roman.Viminacium.name":"Viminacium","Roman.Camulodunum.name":"Camulodunum","Roman.Traiectum.name":"Traiectum","Roman.Matilo.name":"Matilo","Roman.Forum Hadriani.name":"Forum Hadriani","Roman.Nigrum Pullum.name":"Nigrum Pullum","Roman.Lindum Colonia.name":"Lindum Colonia","Roman.Ratae Corieltauvorum.name":"Ratae Corieltauvorum","Roman.Durocobrivis.name":"Durocobrivis","Roman.Colonia Agrippina.name":"Colonia Agrippina","Roman.Durocornovium.name":"Durocornovium","Roman.Verulamium.name":"Verulamium","Roman.Letocetum.name":"Letocetum","Roman.Dubris.name":"Dubris","Roman.Danum.name":"Danum","Roman.Mediolanum.name":"Mediolanum","Roman.Isca Dumnoniorum.name":"Isca Dumnoniorum","Roman.Blestium.name":"Blestium","Roman.Viroconium Cornoviorum.name":"Viroconium Cornoviorum","Roman.Aquae Sulis.name":"Aquae Sulis","Roman.Durnovaria.name":"Durnovaria","Roman.Lindinis.name":"Lindinis","Roman.Ad Flexum.name":"Ad Flexum","Roman.Clausentum.name":"Clausentum","Roman.Venta Belgarum.name":"Venta Belgarum","Roman.Calleva Atrebatum.name":"Calleva Atrebatum","Roman.Duroliponte.name":"Duroliponte","Roman.Concangis.name":"Concangis","Roman.Condate.name":"Condate","Roman.Corinium Dobunnorum.name":"Corinium Dobunnorum","Roman.Eboracum.name":"Eboracum","Roman.Luguvalium.name":"Luguvalium","Roman.Arae Flaviae.name":"Arae Flaviae","Roman.Isca Augusta.name":"Isca Augusta","Roman.Lagentium.name":"Lagentium","Roman.Lopodunum.name":"Lopodunum","Roman.Moridunum.name":"Moridunum","Roman.Venta Silurum.name":"Venta Silurum","Roman.Deva Victrix.name":"Deva Victrix","Roman.Mamucium.name":"Mamucium","Roman.Olicana.name":"Olicana","Roman.Vinovia.name":"Vinovia","Roman.Bonames.name":"Bonames","Roman.Coria.name":"Coria","Roman.Gerulata.name":"Gerulata","Roman.Vindobona.name":"Vindobona","Roman.Biriciana.name":"Biriciana","Roman.Cannstatt Castrum.name":"Cannstatt Castrum","Roman.Colonia Nervia Glevensium.name":"Colonia Nervia Glevensium","Roman.Sumelocenna.name":"Sumelocenna","Roman.Traiectum ad Nicrem.name":"Traiectum ad Nicrem","Roman.Castra Batavar.name":"Castra Batavar","Roman.Nida.name":"Nida","Roman.Lactodurum.name":"Lactodurum","Roman.Bovium.name":"Bovium","Roman.Burgodunum.name":"Burgodunum","Roman.Lentia.name":"Lentia","Roman.Aquae Granni.name":"Aquae Granni","Roman.Complutum.name":"Complutum","Roman.Aeminium.name":"Aeminium","Roman.Traiectum ad Mosam.name":"Traiectum ad Mosam","Roman.Coriovallum.name":"Coriovallum","Roman.Portus Lemanis.name":"Portus Lemanis","Roman.Andautonia.name":"Andautonia","Roman.Salona.name":"Salona","Roman.Cibalae.name":"Cibalae","Roman.Aquae Helveticae.name":"Aquae Helveticae","Roman.Aquincum.name":"Aquincum","Roman.Apulum.name":"Apulum","Roman.Pons Aelius.name":"Pons Aelius","Roman.Durovigutum.name":"Durovigutum","Roman.Aelia Capitolina.name":"Aelia Capitolina","Roman.Ala.name":"Ala","Roman.Castra Regina.name":"Castra Regina","Roman.Theranda.name":"Theranda","Roman.Pomaria.name":"Pomaria","Roman.Partiscum.name":"Partiscum","Roman.Gesoriacum.name":"Gesoriacum","Roman.Aurelia Aquensis.name":"Aurelia Aquensis","Roman.Urbs Aurelianorum.name":"Urbs Aurelianorum","Roman.Venetiae.name":"Venetiae","Roman.Ragusium.name":"Ragusium","Russian.Moscow.name":"Moscow","Russian.Saint Petersburg.name":"Saint Petersburg","Russian.Novosibirsk.name":"Novosibirsk","Russian.Yekaterinburg.name":"Yekaterinburg","Russian.Nizhny Novgorod.name":"Nizhny Novgorod","Russian.Kazan.name":"Kazan","Russian.Chelyabinsk.name":"Chelyabinsk","Russian.Omsk.name":"Omsk","Russian.Samara.name":"Samara","Russian.Ufa.name":"Ufa","Russian.Rostov-on-Don.name":"Rostov-on-Don","Russian.Krasnoyarsk.name":"Krasnoyarsk","Russian.Voronezh.name":"Voronezh","Russian.Perm.name":"Perm","Russian.Volgograd.name":"Volgograd","Russian.Krasnodar.name":"Krasnodar","Russian.Saratov.name":"Saratov","Russian.Tyumen.name":"Tyumen","Russian.Makhachkala.name":"Makhachkala","Russian.Tolyatti.name":"Tolyatti","Russian.Barnaul.name":"Barnaul","Russian.Ulyanovsk.name":"Ulyanovsk","Russian.Izhevsk.name":"Izhevsk","Russian.Vladivostok.name":"Vladivostok","Russian.Irkutsk.name":"Irkutsk","Russian.Khabarovsk.name":"Khabarovsk","Russian.Yaroslavl.name":"Yaroslavl","Russian.Tomsk.name":"Tomsk","Russian.Orenburg.name":"Orenburg","Russian.Kemerovo.name":"Kemerovo","Russian.Novokuznetsk.name":"Novokuznetsk","Russian.Tula.name":"Tula","Russian.Ryazan.name":"Ryazan","Russian.Kirov.name":"Kirov","Russian.Astrakhan.name":"Astrakhan","Russian.Naberezhnye Chelny.name":"Naberezhnye Chelny","Russian.Sochi.name":"Sochi","Russian.Penza.name":"Penza","Russian.Lipetsk.name":"Lipetsk","Russian.Cheboksary.name":"Cheboksary","Russian.Balashikha.name":"Balashikha","Russian.Kaliningrad.name":"Kaliningrad","Russian.Kursk.name":"Kursk","Russian.Stavropol.name":"Stavropol","Russian.Ulan-Ude.name":"Ulan-Ude","Russian.Bryansk.name":"Bryansk","Russian.Tver.name":"Tver","Russian.Magnitogorsk.name":"Magnitogorsk","Russian.Ivanovo.name":"Ivanovo","Russian.Belgorod.name":"Belgorod","Russian.Surgut.name":"Surgut","Russian.Vladimir.name":"Vladimir","Russian.Arkhangelsk.name":"Arkhangelsk","Russian.Nizhny Tagil.name":"Nizhny Tagil","Russian.Kaluga.name":"Kaluga","Russian.Chita.name":"Chita","Russian.Saransk.name":"Saransk","Russian.Yakutsk.name":"Yakutsk","Russian.Smolensk.name":"Smolensk","Russian.Podolsk.name":"Podolsk","Russian.Volzhsky.name":"Volzhsky","Russian.Vladikavkaz.name":"Vladikavkaz","Russian.Vologda.name":"Vologda","Russian.Cherepovets.name":"Cherepovets","Russian.Kurgan.name":"Kurgan","Russian.Oryol.name":"Oryol","Russian.Grozny.name":"Grozny","Russian.Murmansk.name":"Murmansk","Russian.Tambov.name":"Tambov","Russian.Petrozavodsk.name":"Petrozavodsk","Russian.Sterlitamak.name":"Sterlitamak","Russian.Kostroma.name":"Kostroma","Russian.Nizhnevartovsk.name":"Nizhnevartovsk","Russian.Novorossiysk.name":"Novorossiysk","Russian.Yoshkar-Ola.name":"Yoshkar-Ola","Russian.Taganrog.name":"Taganrog","Russian.Komsomolsk-on-Amur.name":"Komsomolsk-on-Amur","Russian.Khimki.name":"Khimki","Russian.Syktyvkar.name":"Syktyvkar","Russian.Nalchik.name":"Nalchik","Russian.Nizhnekamsk.name":"Nizhnekamsk","Russian.Shakhty.name":"Shakhty","Russian.Dzerzhinsk.name":"Dzerzhinsk","Russian.Bratsk.name":"Bratsk","Russian.Orsk.name":"Orsk","Russian.Angarsk.name":"Angarsk","Russian.Engels.name":"Engels","Russian.Blagoveshchensk.name":"Blagoveshchensk","Russian.Stary Oskol.name":"Stary Oskol","Russian.Veliky Novgorod.name":"Veliky Novgorod","Russian.Korolyov.name":"Korolyov","Russian.Pskov.name":"Pskov","Russian.Mytishchi.name":"Mytishchi","Russian.Biysk.name":"Biysk","Russian.Lyubertsy.name":"Lyubertsy","Russian.Prokopyevsk.name":"Prokopyevsk","Russian.Yuzhno-Sakhalinsk.name":"Yuzhno-Sakhalinsk","Russian.Balakovo.name":"Balakovo","Russian.Armavir.name":"Armavir","Russian.Rybinsk.name":"Rybinsk","Russian.Severodvinsk.name":"Severodvinsk","Russian.Abakan.name":"Abakan","Russian.Petropavlovsk-Kamchatsky.name":"Petropavlovsk-Kamchatsky","Russian.Norilsk.name":"Norilsk","Russian.Syzran.name":"Syzran","Russian.Volgodonsk.name":"Volgodonsk","Russian.Ussuriysk.name":"Ussuriysk","Russian.Kamensk-Uralsky.name":"Kamensk-Uralsky","Russian.Novocherkassk.name":"Novocherkassk","Russian.Zlatoust.name":"Zlatoust","Russian.Elektrostal.name":"Elektrostal","Russian.Almetyevsk.name":"Almetyevsk","Russian.Krasnogorsk.name":"Krasnogorsk","Russian.Salavat.name":"Salavat","Russian.Miass.name":"Miass","Russian.Nakhodka.name":"Nakhodka","Russian.Kopeysk.name":"Kopeysk","Russian.Pyatigorsk.name":"Pyatigorsk","Russian.Rubtsovsk.name":"Rubtsovsk","Russian.Berezniki.name":"Berezniki","Russian.Kolomna.name":"Kolomna","Russian.Maykop.name":"Maykop","Russian.Odintsovo.name":"Odintsovo","Russian.Khasavyurt.name":"Khasavyurt","Russian.Kovrov.name":"Kovrov","Russian.Kislovodsk.name":"Kislovodsk","Russian.Neftekamsk.name":"Neftekamsk","Russian.Nefteyugansk.name":"Nefteyugansk","Russian.Novocheboksarsk.name":"Novocheboksarsk","Russian.Serpukhov.name":"Serpukhov","Russian.Shchyolkovo.name":"Shchyolkovo","Russian.Novomoskovsk.name":"Novomoskovsk","Russian.Bataysk.name":"Bataysk","Russian.Pervouralsk.name":"Pervouralsk","Russian.Domodedovo.name":"Domodedovo","Russian.Derbent.name":"Derbent","Russian.Cherkessk.name":"Cherkessk","Russian.Orekhovo-Zuyevo.name":"Orekhovo-Zuyevo","Russian.Nevinnomyssk.name":"Nevinnomyssk","Russian.Dimitrovgrad.name":"Dimitrovgrad","Russian.Nazran.name":"Nazran","Russian.Kyzyl.name":"Kyzyl","Russian.Oktyabrsky.name":"Oktyabrsky","Russian.Obninsk.name":"Obninsk","Russian.Kaspiysk.name":"Kaspiysk","Russian.Novy Urengoy.name":"Novy Urengoy","Russian.Ramenskoye.name":"Ramenskoye","Russian.Kamyshin.name":"Kamyshin","Russian.Murom.name":"Murom","Russian.Zhukovsky.name":"Zhukovsky","Zulu.uMgungundlovu.name":"uMgungundlovu","Zulu.Nobamba.name":"Nobamba","Zulu.Bulawayo.name":"Bulawayo","Zulu.KwaDukuza.name":"KwaDukuza","Zulu.Nongoma.name":"Nongoma","Zulu.oNdini.name":"oNdini","Zulu.Nodwengu.name":"Nodwengu","Zulu.Ndondakusuka.name":"Ndondakusuka","Zulu.Babanango.name":"Babanango","Zulu.Khangela.name":"Khangela","Zulu.Kwahlomendlini.name":"Kwahlomendlini","Zulu.Hlobane.name":"Hlobane","Zulu.eThekwini.name":"eThekwini","Zulu.Mlambongwenya.name":"Mlambongwenya","Zulu.Eziqwaqweni.name":"Eziqwaqweni","Zulu.Isiphezi.name":"Isiphezi","Zulu.Masotsheni.name":"Masotsheni","Zulu.Mtunzini.name":"Mtunzini","Zulu.Nyakamubi.name":"Nyakamubi","Zulu.Hlatikulu.name":"Hlatikulu","Zulu.Mthonjaneni.name":"Mthonjaneni","Zulu.Empangeni.name":"Empangeni","Zulu.Pongola.name":"Pongola","Zulu.Tungela.name":"Tungela","Zulu.Kwamashu.name":"Kwamashu","Zulu.Ingwavuma.name":"Ingwavuma","Zulu.Hluhluwe.name":"Hluhluwe","Zulu.Mtubatuba.name":"Mtubatuba","Zulu.Mhlahlandlela.name":"Mhlahlandlela","Zulu.Mthatha.name":"Mthatha","Zulu.Maseru.name":"Maseru","Zulu.Lobamba.name":"Lobamba","Zulu.Qunu.name":"Qunu"});S.addResources("en","yield",{"Gold.name":"Gold","Luxuries.name":"Luxuries","Research.name":"Research"})});var Dd=z(()=>{"use strict";I();S.addResources("en","civilization",{"American.name":"American","American.nation":"America","American.plural":"Americans","Aztec.name":"Aztec","Aztec.nation":"the Aztec Empire","Aztec.plural":"Aztecs","Babylonian.name":"Babylonian","Babylonian.nation":"Babylon","Babylonian.plural":"Babylonians","Chinese.name":"Chinese","Chinese.nation":"China","Chinese.plural":"Chinese","Egyptian.name":"Egyptian","Egyptian.nation":"Egypt","Egyptian.plural":"Egyptians","English.name":"English","English.nation":"England","English.plural":"English","French.name":"French","French.nation":"France","French.plural":"French","German.name":"German","German.nation":"Germany","German.plural":"Germans","Greek.name":"Greek","Greek.nation":"Greece","Greek.plural":"Greeks","Indian.name":"Indian","Indian.nation":"India","Indian.plural":"Indians","Mongol.name":"Mongol","Mongol.nation":"Mongolia","Mongol.plural":"Mongols","Roman.name":"Roman","Roman.nation":"Rome","Roman.plural":"Romans","Russian.name":"Russian","Russian.nation":"Russia","Russian.plural":"Russians","Zulu.name":"Zulu","Zulu.nation":"Zululand","Zulu.plural":"Zulus","Leader.AbrahamLincoln.name":"Abraham Lincoln","Leader.MoctezumaII.name":"Moctezuma II","Leader.Hammurabi.name":"Hammurabi","Leader.MaoZedong.name":"Mao Zedong","Leader.RamessesII.name":"Ramesses II","Leader.ElizabethI.name":"Elizabeth I","Leader.NapoleonI.name":"Napoleon I","Leader.FrederickTheGreat.name":"Frederick the Great","Leader.AlexanderTheGreat.name":"Alexander the Great","Leader.MahatmaGandhi.name":"Mahatma Gandhi","Leader.GenghisKhan.name":"Genghis Khan","Leader.JuliusCaesar.name":"Julius Caesar","Leader.JosephStalin.name":"Joseph Stalin","Leader.Shaka.name":"Shaka"})});var Ld=z(()=>{"use strict";I();S.addResources("en-GB","diplomacy",{"Dialogue.accept-peace.neutral":'We affirm this treaty of eternal friendship and goodwill between the people of the $t({{interaction.by.civilization._}}.name, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }) and $t({{interaction.for.0.civilization._}}.name, { "defaultValue": "{{interaction.for.0.civilization._}}", "ns": "civilization" }) civilisations.',"Dialogue.decline-peace.neutral":"Very well, we will mobilise our armies for WAR! You will pay for your foolish pride!",ExchangeKnowledge:'We notice that your primitive civilisation has not even discovered $t({{interaction.advances.0._}}.name, { "defaultValue": "{{interaction.advances.0._}}", "ns": "science" }). Do you care to exchange knowledge with us?'})});var Ud=z(()=>{"use strict";I();S.addResources("en","diplomacy",{"Action.Terminate":"Good bye!","Dialogue.accept-peace.neutral":'We affirm this treaty of eternal friendship and goodwill between the people of the $t({{interaction.by.civilization._}}.name, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }) and $t({{interaction.for.0.civilization._}}.name, { "defaultValue": "{{interaction.for.0.civilization._}}", "ns": "civilization" }) civilizations.',"Dialogue.decline-demand.neutral":"In spite of your disrespectful attitude, we will spare you from the wrath of our mighty armies.","Dialogue.decline-peace.neutral":"Very well, we will mobilize our armies for WAR! You will pay for your foolish pride!","Dialogue.handover":"You respond...","Dialogue.welcome.no-peace":'Greetings from $t(Leader.{{interaction.by.civilization.leader._}}.name, { "defaultValue": "{{interaction.by.civilization.leader._}}", "ns": "civilization" }), leader of the powerful $t({{interaction.by.civilization._}}.nation, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }).',"Dialogue.welcome.peace":'Greetings from $t(Leader.{{interaction.by.civilization.leader._}}.name, { "defaultValue": "{{interaction.by.civilization.leader._}}", "ns": "civilization" }), leader of the powerful $t({{interaction.by.civilization._}}.nation, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }). We always enjoy spending time with our good friends $t({{interaction.for.0.civilization._}}.nation, { "defaultValue": "{{interaction.for.0.civilization._}}", "ns": "civilization" }).',"Dialogue.welcome-peace":'We welcome peace with the $t({{interaction.for.0.civilization._}}.plural, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }).',DemandTribute:"We demand tribute for our patience.",ExchangeKnowledge:'We notice that your primitive civilization has not even discovered $t({{interaction.advances.0._}}.name, { "defaultValue": "{{interaction.advances.0._}}", "ns": "science" }). Do you care to exchange knowledge with us?',Initiate:'An emissary from $t({{interaction.by.civilization._}}.nation, { "defaultValue": "{{interaction.by.civilization._}}", "ns": "civilization" }) wishes to speak with you. Will you receive them?',OfferPeace:"You may be worthy to make peace with us. We have prepared a treaty for your signature.","Resolution.Initiate.Accept":"Yes","Resolution.Initiate.Decline":"No","Resolution.OfferPeace.Accept":"Accept","Resolution.OfferPeace.Decline":"Reject","Resolution.ExchangeKnowledge.Accept":"OK, let's exchange knowledge.","Resolution.ExchangeKnowledge.Decline":'No, we do not need $t({{interaction.proposal.advances.0._}}.name, { "defaultValue": "{{interaction.proposal.advances.0._}}", "ns": "science" }).',"Resolution.Dialogue.Acknowledge":"OK","Resolution.DemandTribute.Accept":'We present you with a gift of {{interaction.proposal.tribute.value, number}} $t({{interaction.proposal.tribute._}}.name, { "defaultValue": "{{interaction.proposal.tribute._}}", "ns": "yield" }) in tribute to your peaceful nature.',"Resolution.DemandTribute.Decline":"We ignore your feeble threats."})});var Bd=z(()=>{"use strict";I();S.addResources("en","government",{"Anarchy.name":"Anarchy","Communism.name":"Communism","Democracy.name":"Democracy","Despotism.name":"Despotism","Monarchy.name":"Monarchy","Republic.name":"Republic"})});var Od=z(()=>{"use strict";I();S.addResources("en-GB","science",{"Industrialization.name":"Industrialisation","LaborUnion.name":"Labour Union"})});var zd=z(()=>{"use strict";I();S.addResources("en","science",{"AdvancedFlight.name":"Advanced Flight","Alphabet.name":"Alphabet","Astronomy.name":"Astronomy","AtomicTheory.name":"Atomic Theory","Automobile.name":"Automobile","Banking.name":"Banking","BridgeBuilding.name":"Bridge Building","BronzeWorking.name":"Bronze Working","CeremonialBurial.name":"Ceremonial Burial","Chemistry.name":"Chemistry","Chivalry.name":"Chivalry","CodeOfLaws.name":"Code of Laws","Combustion.name":"Combustion","Communism.name":"Communism","Computers.name":"Computers","Conscription.name":"Conscription","Construction.name":"Construction","Corporation.name":"Corporation","Currency.name":"Currency","Democracy.name":"Democracy","Electricity.name":"Electricity","Electronics.name":"Electronics","Engineering.name":"Engineering","Explosives.name":"Explosives","Feudalism.name":"Feudalism","Flight.name":"Flight","FusionPower.name":"Fusion Power","GeneticEngineering.name":"Genetic Engineering","Gunpowder.name":"Gunpowder","HorsebackRiding.name":"Horseback Riding","Industrialization.name":"Industrialization","Invention.name":"Invention","IronWorking.name":"Iron Working","LaborUnion.name":"Labor Union","Literacy.name":"Literacy","Magnetism.name":"Magnetism","MapMaking.name":"Map Making","Masonry.name":"Masonry","MassProduction.name":"Mass Production","Mathematics.name":"Mathematics","Medicine.name":"Medicine","Metallurgy.name":"Metallurgy","Monarchy.name":"Monarchy","Mysticism.name":"Mysticism","Navigation.name":"Navigation","NuclearFission.name":"Nuclear Fission","NuclearPower.name":"Nuclear Power","Philosophy.name":"Philosophy","Physics.name":"Physics","Plastics.name":"Plastics","Pottery.name":"Pottery","Railroad.name":"Railroad","Recycling.name":"Recycling","Refining.name":"Refining","Religion.name":"Religion","Robotics.name":"Robotics","Rocketry.name":"Rocketry","SpaceFlight.name":"Space Flight","SteamEngine.name":"Steam Engine","Steel.name":"Steel","Superconductor.name":"Superconductor","TheRepublic.name":"The Republic","TheWheel.name":"The Wheel","TheoryOfGravity.name":"Theory of Gravity","Trade.name":"Trade","University.name":"University","Writing.name":"Writing"})});var Gd=z(()=>{"use strict";I();S.addResources("en","spaceship",{"Fuel.name":"Fuel","Habitation.name":"Habitation","LifeSupport.name":"LifeSupport","Power.name":"Power","Propulsion.name":"Propulsion","Structural.name":"Structural"})});var Nd=z(()=>{"use strict";I();S.addResources("en","trade",{"Luxuries.name":"Luxuries","Research.name":"Research","Tax.name":"Tax"})});var jd=z(()=>{"use strict";I();S.addResources("en-GB","unit",{"MechanizedInfantry.name":"Mechanised Infantry"})});var $d=z(()=>{"use strict";I();S.addResources("en","unit",{"Artillery.name":"Artillery","Battleship.name":"Battleship","Bomber.name":"Bomber","Cannon.name":"Cannon","Caravan.name":"Caravan","Carrier.name":"Carrier","Catapult.name":"Catapult","Chariot.name":"Chariot","Cruiser.name":"Cruiser","Diplomat.name":"Diplomat","Fighter.name":"Fighter","Frigate.name":"Frigate","Horseman.name":"Horseman","Ironclad.name":"Ironclad","Knight.name":"Knight","MechanizedInfantry.name":"Mechanized Infantry","Musketman.name":"Musketman","Nuclear.name":"Nuclear","Rifleman.name":"Rifleman","Sail.name":"Sail","Settlers.name":"Settlers","Spearman.name":"Spearman","Submarine.name":"Submarine","Swordman.name":"Swordman","Tank.name":"Tank","Transport.name":"Transport","Trireme.name":"Trireme","Warrior.name":"Warrior","Improvement.Fortified.name":"Fortified","Improvement.Veteran.name":"Veteran","Yield.Attack.name":"Attack","Yield.Defence.name":"Defence","Yield.Movement.name":"Movement","Yield.Moves.name":"Moves","Yield.Visibility.name":"Visibility","Action.Attack.name":"Attack","Action.BuildIrrigation.name":"Build irrigation","Action.BuildMine.name":"Build mine","Action.BuildRailroad.name":"Build railroad","Action.BuildRoad.name":"Build road","Action.CaptureCity.name":"Capture city","Action.ClearForest.name":"Clear forest","Action.ClearJungle.name":"Clear jungle","Action.ClearSwamp.name":"Clear swamp","Action.Disband.name":"Disband","Action.Disembark.name":"Disembark","Action.Embark.name":"Embark","Action.Fortify.name":"Fortify","Action.FoundCity.name":"Found a new city","Action.Move.name":"Move","Action.NoOrders.name":"No orders","Action.Pillage.name":"Pillage","Action.PlantForest.name":"Plant forest","Action.Sleep.name":"Sleep","Action.SneakAttack.name":"Sneak attack","Action.SneakCaptureCity.name":"Sneak attack","Action.Unload.name":"Unload","Busy.BuildingIrrigation.name":"Building irrigation","Busy.BuildingMine.name":"Building mine","Busy.BuildingRoad.name":"Building road","Busy.BuildingRailroad.name":"Building railroad","Busy.ClearingForest.name":"Clearing forest","Busy.ClearingJungle.name":"Clearing jungle","Busy.ClearingSwamp.name":"Clearing swamp","Busy.Fortifying.name":"Fortifying","Busy.Sleeping.name":"Sleeping","Busy.PlantingForest.name":"Planting forest","Busy.BuildingIrrigation.icon":"I","Busy.BuildingMine.icon":"M","Busy.BuildingRoad.icon":"R","Busy.BuildingRailroad.icon":"RR","Busy.ClearingForest.icon":"CF","Busy.ClearingJungle.icon":"CJ","Busy.ClearingSwamp.icon":"CS","Busy.Fortifying.icon":"F","Busy.Sleeping.icon":"S","Busy.PlantingForest.icon":"PF"})});var Wd=z(()=>{"use strict";I();S.addResources("en","wonder",{"ApolloProgram.name":"Apollo Program","Colossus.name":"Colossus","CopernicusObservatory.name":"Copernicus Observatory","CureForCancer.name":"Cure for Cancer","DarwinsVoyage.name":"Darwin's Voyage","GreatLibrary.name":"Great Library","GreatWall.name":"Great Wall","HangingGardens.name":"Hanging Gardens","HooverDam.name":"Hoover Dam","IsaacNewtonsCollege.name":"Isaac Newton's College","JsBachsCathedral.name":"J. S. Bach's Cathedral","Lighthouse.name":"Lighthouse","MagellansExpedition.name":"Magellan's Expedition","ManhattanProject.name":"Manhattan Project","MichelangelosChapel.name":"Michelangelo's Chapel","Oracle.name":"Oracle","Pyramids.name":"Pyramids","SetiProgram.name":"SETI Program","ShakespearesTheatre.name":"Shakespeare's Theatre","UnitedNations.name":"United Nations","WomensSuffrage.name":"Women's Suffrage"})});var Hd=z(()=>{"use strict";I();S.addResources("en","world",{"Arctic.name":"Arctic","Desert.name":"Desert","Forest.name":"Forest","Grassland.name":"Grassland","Hills.name":"Hills","Jungle.name":"Jungle","Mountains.name":"Mountains","Ocean.name":"Ocean","Plains.name":"Plains","River.name":"River","Swamp.name":"Swamp","Tundra.name":"Tundra","Feature.Coal.name":"Coal","Feature.Fish.name":"Fish","Feature.Game.name":"Game","Feature.Gems.name":"Gems","Feature.Gold.name":"Gold","Feature.Horse.name":"Horse","Feature.Oasis.name":"Oasis","Feature.Oil.name":"Oil","Feature.Seal.name":"Seal","Feature.Shield.name":"Shield","Improvement.Irrigation.name":"Irrigation","Improvement.Mine.name":"Mine","Improvement.Pollution.name":"Pollution","Improvement.Road.name":"Road","Improvement.Railroad.name":"Railroad"});S.addResources("en","yield",{"Food.name":"Food","Production.name":"Production","Trade.name":"Trade"})});var Vd=z(()=>{"use strict";I();S.addResources("en-GB","default",{"ChooseFromList.choose-civilization.title":"Choose your civilisation","CustomizeWorld.title":"Customise world","NewGameWindow.civilizations_one":"1 civilisation","NewGameWindow.civilizations_other":"{{count}} civilisations","Window.maximize":"Maximise","Window.minimize":"Minimise"})});var Kd=z(()=>{"use strict";I();S.addResources("en","default",{"Actions.AdjustTradeRates.title":"Adjust trade rates","Actions.ChooseResearch.body":"Which advance would you like to research next?","Actions.ChooseResearch.title":"Choose research","Actions.CityBuildSelectionWindow.title":"What would you like to build in {{cityName}}?","Actions.CivilDisorder.body":"Civil disorder in {{cityName}}, mayor flees in panic!","Actions.CivilDisorder.title":"Civil disorder in {{cityName}}!","Actions.EndTurn.title":"End turn","Actions.Revolution.body":"Which government would you like to convert to?","Actions.Revolution.title":"Choose government","Actions.ShowCity.label":'$t(Generic.view-city, { "city": "{{cityName}}" })',"Actions.ShowOnMap.label":"Show on map","Actions.Spaceship.chance-of-success":"Chance of success","Actions.Spaceship.energy":"Energy","Actions.Spaceship.flight-time":"Flight time","Actions.Spaceship.has-launched":"Launched?","Actions.Spaceship.inactive-part":"({{inactiveParts}} inactive)","Actions.Spaceship.launch":"Launch","Actions.Spaceship.launched":"Launched","Actions.Spaceship.life-support":"Life Support","Actions.Spaceship.mass":"Mass","Actions.Spaceship.population":"Population","Actions.Spaceship.spaceship-name":"{{nation}} spaceship","Actions.Spaceship.title":"View spaceship","Buildable.label-empty":"Nothing","ChooseFromList.choose-civilization.body":"","ChooseFromList.choose-civilization.choice":'$t({{value._}}.name, { "defaultValue": "{{value._}}", "ns": "civilization" })',"ChooseFromList.choose-civilization.title":"Choose your civilization","ChooseFromList.choose-leader.body":"","ChooseFromList.choose-leader.choice":'$t(Leader.{{value._}}.name, { "defaultValue": "{{value._}}", "ns": "civilization" })',"ChooseFromList.choose-leader.title":"Choose your leader","ChooseFromList.default.body":"Please choose from the following options:","ChooseFromList.default.title":"Choose an option","ChooseFromList.diplomacy.exchange-knowledge.body":'Please choose from the advances that $t({{data.proposal.by.civilization._}}.nation, { "defaultValue": "{{data.proposal.by.civilization._}}", "ns": "civilization" }) have discovered:',"ChooseFromList.diplomacy.exchange-knowledge.choice":'$t({{value._}}.name, { "defaultValue": "{{value._}}", "ns": "science" })',"ChooseFromList.diplomacy.exchange-knowledge.title":"Exchanging Knowledge","ChooseFromList.negotiation.next-step.title":'Negotiation between $t({{data.players.0.civilization._}}.nation, { "defaultValue": "{{data.players.0.civilization._}}", "ns": "civilization" }) and $t({{data.players.1.civilization._}}.nation, { "defaultValue": "{{data.players.1.civilization._}}", "ns": "civilization" })',"City.Build.build-item":'{{item}} (Cost: {{cost}} / $t(Progress.turns, {"count": {{turns}} }))',"City.Build.buy":"Buy","City.Build.buy-with":"Buy","City.Build.change":"Change","City.Build.choose":"Choose","City.Build.nothing":"Nothing","City.Build.title":"{{item}}","City.CompleteProduction.body":'Do you want to rush building of {{item}} for {{spendCost.value, number}} $t({{spendCost.resource._}}.name, { "defaultValue": "{{spendCost.resource._}}", "ns": "yield" })? You currently have {{treasury.value, number}} $t({{treasury.yield._}}.name, { "defaultValue": "{{treasury.yield._}}", "ns": "yield" }) available.',"City.GarrisonedUnits.title":"Garrisoned units","City.Growth.size":"Size {{size, number}}","City.Growth.title":"Growth","City.size":"{{size, number}}","City.SupportedUnits.title":"Supported units","CityStatus.build_empty":'$t(CityStatus.totals, { "free": {{free}}, "total": {{total}}, "context": "{{totals_context}}" }) $t(Buildable.label-empty)',"CityStatus.build_nonempty":'$t(CityStatus.totals, { "free": {{free}}, "total": {{total}}, "context": "{{totals_context}}" }) {{buildable}} ($t(Progress.turns, { "count": {{turns}} }))',"CityStatus.growth":'$t(CityStatus.totals, { "free": {{free}}, "total": {{total}}, "context": "{{totals_context}}" }) ($t(Progress.turns, {"count": {{turns}} }))',"CityStatus.title":"City details","CityStatus.totals_equal":"{{free, number}}","CityStatus.totals_unequal":"{{free, number}} [{{total, number}}]","ConfirmationWindow.Generic.title":"Are you sure?","CustomizeWorld.build":"Build","CustomizeWorld.height":"$t(Generic.height)","CustomizeWorld.land-coverage":"Land coverage","CustomizeWorld.land-size":"Land size","CustomizeWorld.max-coverage":"Max coverage","CustomizeWorld.players":"Players","CustomizeWorld.title":"Customize world","CustomizeWorld.width":"$t(Generic.width)","GameDetails.turn":"{{turn, number}}","GameDetails.year_bce":"{{year, number(useGrouping: false)}} BCE","GameDetails.year_ce":"{{year, number(useGrouping: false)}} CE","GameMenu.city-status":"City Status","GameMenu.happiness-report":"Happiness Report","GameMenu.options":"Options","GameMenu.science-report":"Science Report","GameMenu.trade-report":"Trade Report","GameOptions.auto-end-turn":"Auto End of Turn?","HappinessReport.breakdown":"Breakdown","HappinessReport.view-city":'$t(Generic.view-city, { "city": "{{cityName}}" })',"ImportAssetsWindow.brave":`<p>It looks like you're using Brave and due to the use of <code>HTMLCanvasElement</code>'s <code>getImageData</code> and <code>toDataURL</code> functions, please put Shields down while importing, and playing, otherwise any colour-replaced icons won't look correct. <strong>Remember to put them back up after!</strong></p><p><a href="https://brave.com/privacy-updates/4-fingerprinting-defenses-2.0/#2-fingerprinting-protections-20-farbling-for-great-good" target="_blank">Read more about "farbling".</a></p>`,"ImportAssetsWindow.done":"Done! Please reload the page to utilise the fresh assets.","ImportAssetsWindow.instructions":"Upload {{files, list}} from the original Civilization files to extract assets (these will be stored locally). This process can take at least a few minutes.","ImportAssetsWindow.missing-files":"Please provide all files to generate assets: {{files, list}}.","ImportAssetsWindow.missing-data":"Not all expected data was written. Might need to try again... Missing: {{files, list}}.","ImportAssetsWindow.progress-building":"Building image assets...","ImportAssetsWindow.progress-writing":"Writing to database...","ImportAssetsWindow.title":"Import assets","LockedSlider.lock":"Lock","MainMenu.customize-world":"$t(CustomizeWorld.title)","MainMenu.earth":"Earth","MainMenu.import-assets":"$t(ImportAssetsWindow.title)","MainMenu.new-game":"Start a New Game","MainMenu.quit":"Quit","MainMenu.version":"version: {{version}}","MandatorySelection.default-body":"$t(SelectionWindow.default-body)","NewGameWindow.number-of-players":"How many players?","NewGameWindow.civilizations_one":"1 civilization","NewGameWindow.civilizations_other":"{{count}} civilizations","Notification.title":"Notification","PlayerDetails.header":"{{leader}} of the {{nation}}","PlayerDetails.Researching.body_notresearching":'Nothing ($t(Progress.per-turn, { "count": {{perTurn}} }))',"PlayerDetails.Researching.body_researching":'{{researching}} $t(Progress.data, { "progress": {{progress}}, "total": {{cost}} }) ($t(Progress.per-turn, { "count": {{perTurn}} }) - $t(Progress.turns, { "count": {{turns}} }))',"PlayerDetails.Researching.title":"Researching","PlayerDetails.Treasury.body":'{{value}} ($t(Progress.per-turn, { "count": {{perTurn}} }))',"PlayerDetails.Treasury.title":"Treasury","Progress.body":'Progress $t(Progress.data, { "progress": {{progress}}, "total": {{total}} }) ($t(Progress.turns, {"count": {{turns}} }))',"Progress.data":"{{progress, number}} / {{total, number}}","Progress.per-turn":"{{count, number}} / turn","Progress.turns_one":"{{count, number}} turn","Progress.turns_other":"{{count, number}} turns","Progress.turns_zero":"Never","ScienceReport.progress_notresearching":"","ScienceReport.progress_researching":'$t(Progress.body, { "progress": {{progress}}, "total": {{total}}, "turns": {{turns }} })',"ScienceReport.researching_notresearching":"Researching nothing","ScienceReport.researching_researching":"Researching {{researching}}","ScienceReport.title":"Player research","SelectionWindow.default-body":"Please choose one of the following:","SneakAttack.title":"Sneak attack?","SneakAttack.body":"Are you sure you want to attack {{nation}}? (This will terminate your current peace treaty)","TradeReport.title":"Trade report","TradeReport.ImprovementList.cost":"{{- icon}} {{total, number}}","TradeReport.ImprovementList.item":"{{count, number}} &times; {{name}}","TradeReport.ImprovementList.income-title":"Total income","TradeReport.ImprovementList.income-value":'{{- icon}} $t(Progress.per-turn, { "count": {{count}} })',"TradeReport.ImprovementList.cost-title":"Total cost","TradeReport.ImprovementList.cost-value":'{{- icon}} $t(Progress.per-turn, { "count": {{count}} })',"TradeReport.ImprovementList.surplus-title":"Total surplus","TradeReport.ImprovementList.surplus-value":'{{- icon}} $t(Progress.per-turn, { "count": {{count}} })',"UnitDetails.header":'{{unitName}} ($t(Generic.coordinates, { "x": {{x}}, "y": {{y}} }))',"UnitDetails.improvements":"{{improvements, list}}","UnitDetails.moves":"{{remaining, number(minimumFractionDigits: 0; maximumFractionDigits: 2)}} / {{total, number}} moves","UnitDetails.stats":"A: {{attack, number}} / D: {{defence, number}} / V: {{visibility, number}}","UnitDetails.terrain":"{{terrain}} {{features, list}} {{improvements, list}}","UnitSelectionWindow.status_busy":"{{unit}} [{{city}}] ({{busy}})","UnitSelectionWindow.status_notbusy":"{{unit}} [{{city}}]","UnitSelectionWindow.title":"Activate unit","Welcome.you-have-risen":"{{leader}}, you have risen to become leader of the {{nation}}.","Welcome.your-people-have-knowledge-of":"Your people have knowledge of {{advances, list}}.","Window.maximize":"Maximize","Window.minimize":"Minimize","Window.close":"$t(Generic.close)","Generic.cancel":"Cancel","Generic.close":"Close","Generic.coordinates":"{{x, number}}, {{y, number}}","Generic.height":"Height","Generic.no":"No","Generic.ok":"OK","Generic.view-city":"View {{city}}","Generic.width":"Width","Generic.yes":"Yes"});S.addResources("en","notification",{Title:'$t(Notification.title, { "ns": "default" })',"City.building-complete.unit.body":'$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { "defaultValue": "{{cityBuild.city.name}}", "ns": "city" }) has completed work on $t({{build._}}.name, { "defaultValue": "{{build._}}", "ns": "unit" })!',"City.building-complete.unit.title":"Building complete!","City.building-complete.city-improvement.body":'$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { "defaultValue": "{{cityBuild.city.name}}", "ns": "city" }) has completed work on $t(Improvement.{{build._}}.name, { "defaultValue": "{{build._}}", "ns": "city" })!',"City.building-complete.city-improvement.title":"Building complete!","City.building-complete.wonder.body":'$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { "defaultValue": "{{cityBuild.city.name}}", "ns": "city" }) has completed work on $t({{build._}}.name, { "defaultValue": "{{build._}}", "ns": "wonder" })!',"City.building-complete.wonder.title":"Building complete!","City.building-complete.spaceship-part.body":'$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { "defaultValue": "{{cityBuild.city.name}}", "ns": "city" }) has completed work on $t({{build._}}.name, { "defaultValue": "{{build._}}", "ns": "spaceship" })!',"City.building-complete.spaceship-part.title":"Building complete!","City.building-complete.other.body":'$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { "defaultValue": "{{cityBuild.city.name}}", "ns": "city" }) has completed work on its build project!',"City.building-complete.other.title":"Building complete!","City.captured-by-us.body":'We have captured $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }) from $t({{originalPlayer.civilization._}}.nation, { "defaultValue": "{{originalPlayer.civilization._}}", "ns": "civilization" })',"City.captured-by-us.title":"City captured!","City.captured-from-us.body":'$t({{capturingPlayer.civilization._}}.nation, { "defaultValue": "{{capturingPlayer.civilization._}}", "ns": "civilization" }) have captured our city $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" })!',"City.captured-from-us.title":"City captured!","City.civil-disorder.body":'Civil disorder in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }). Mayor flees in panic!',"City.civil-disorder.title":"Civil disorder","City.leader-celebration.body":'Leader celebration in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" })!',"City.leader-celebration.title":"Leader celebration","City.leader-celebration-ended.body":'Leader celebration cancelled in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" })!',"City.leader-celebration-ended.title":"Leader celebration","City.order-restored.body":'Order restored in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }).',"City.order-restored.title":"Order restored!","City.shrink.body":'Population decrease in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }).',"City.shrink.title":"Population decrease!","City.unit-unsupported.body":'$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }) cannot support $t({{unit._}}.name, { "defaultValue": "{{unit._}}", "ns": "unit" }).',"City.unit-unsupported.title":"Unit not supported!","City.improvement-unsupported.body":'$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }) cannot support $t(Improvement.{{cityImprovement._}}.name, { "defaultValue": "{{cityImprovement._}}", "ns": "city" }).',"City.improvement-unsupported.title":"Improvement not supported!","City.food-storage-exhausted.body":'Food storage exhausted in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }).',"City.food-storage-exhausted.title":"Food storage exhausted!","GoodyHut.action-performed.Advance.body":"You have discovered scrolls of ancient wisdom...","GoodyHut.action-performed.Advance.title":"Exploration","GoodyHut.action-performed.City.body":"You have discovered an advanced tribe...","GoodyHut.action-performed.City.title":"Exploration","GoodyHut.action-performed.Gold.body":"You have discovered valuable treasure worth 50 Gold.","GoodyHut.action-performed.Gold.title":"Exploration","GoodyHut.action-performed.Unit.body":"You have discovered a friendly tribe of skilled mercenaries...","GoodyHut.action-performed.Unit.title":"Exploration","Player.defeated.by.body":'$t({{player.civilization._}}.nation, { "defaultValue": "{{player.civilization._}}", "ns": "civilization" }) has defeated $t({{defeatedPlayer.civilization._}}.nation, { "defaultValue": "{{defeatedPlayer.civilization._}}", "ns": "civilization" })!',"Player.defeated.by.title":"Defeated!","Player.defeated.local.body":'You have been defeated by $t({{player.civilization._}}.nation, { "defaultValue": "{{player.civilization._}}", "ns": "civilization" })!',"Player.defeated.local.title":"Defeated!","Player.defeated.unknown.body":'$t({{defeatedPlayer.civilization._}}.nation, { "defaultValue": "{{defeatedPlayer.civilization._}}", "ns": "civilization" }) defeated!',"Player.defeated.unknown.title":"Defeated!","Player.research-complete.body":'You have discovered the secrets of $t({{advance._}}.name, { "defaultValue": "{{advance._}}", "ns": "science" })!',"Player.research-complete.title":"Advance discovered!","Player.spaceship-landed.body":"Our spaceship has landed on Alpha Centauri!","Player.spaceship-landed.title":"Spaceship landed","Player.spaceship-lost.body":"Our spaceship was lost in space.","Player.spaceship-lost.title":"Spaceship lost","Spaceship.part-built.body":'Component added to $t({{player.civilization._}}.name, { "defaultValue": "{{player.civilization._}}", "ns": "civilization" }) spaceship.',"Spaceship.part-built.title":"Spaceship built","Wonder.building-complete.other-player.known.body":'$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { "defaultValue": "{{city.name}}", "ns": "city" }) has completed work on $t({{build._}}.name, { "defaultValue": "{{build._}}", "ns": "wonder" })!',"Wonder.building-complete.other-player.known.title":"Wonder completed","Wonder.building-complete.other-player.unknown.body":'A far away city has completed work on $t({{build._}}.name, { "defaultValue": "{{build._}}", "ns": "wonder" })!',"Wonder.building-complete.other-player.unknown.title":"Wonder completed"})});var Zc={};var Yd=z(()=>{"use strict";Ed();Fd();_d();Dd();Ld();Ud();Bd();Od();zd();Gd();Nd();jd();$d();Wd();Hd();Vd();Kd()});var rt=_(D());I();var zs=o(({hierarchy:i,objects:t},e=null)=>{let a=new Map;e&&Object.keys(t).forEach(r=>e.push(r));let n=o(r=>{if(a.has(r))return a.get(r);if(Array.isArray(r)){let s=[];return a.set(r,s),r.forEach(l=>s.push(n(l))),s}if(r&&r["#ref"]){if(e&&e.splice(e.indexOf(r["#ref"]),1),!(r["#ref"]in t))throw new TypeError(`missing ${r["#ref"]}`);let s=n(t[r["#ref"]]);return a.set(r,s),s}if(r instanceof Object){let s={};return a.set(r,s),Object.entries(r).forEach(([l,d])=>{s[l]=n(d)}),s}return r},"getReferences");return n(i)},"reconstituteData"),Gs=zs;var Rr=_(D());var fi=_(D());var tn,an,gi=class extends fi.Element{constructor(e,a){super((0,fi.s)('<div class="action"></div>'));y(this,tn,void 0);y(this,an,void 0);v(this,tn,e),v(this,an,a),this.on("keydown",n=>{n.key!=="Escape"&&n.stopPropagation()}),this.build()}activate(){}build(){}complete(){this.emit(new CustomEvent("actioned",{bubbles:!0,detail:this}))}transport(){return u(this,an)}value(){return u(this,tn).value}};o(gi,"Action"),tn=new WeakMap,an=new WeakMap;var he=gi;var vi=_(D());I();var Bu=o((i,t)=>(0,vi.s)(`<fieldset><legend>${i}</legend><input type="range" max="100" min="0" step="1" value="${t}"><input type="number"><label><input type="checkbox">${g("LockedSlider.lock")}</label></fieldset>`),"template"),nn,rn,Ae,Oe,ia,sn,yi=class extends vi.Element{constructor(e,a,n){super(Bu(n,a));y(this,nn,void 0);y(this,rn,void 0);y(this,Ae,void 0);y(this,Oe,void 0);y(this,ia,void 0);y(this,sn,[]);v(this,nn,e),v(this,rn,n),v(this,Ae,this.element().querySelector('input[type="range"]')),v(this,Oe,this.element().querySelector('input[type="number"]')),v(this,ia,this.element().querySelector('input[type="checkbox"]')),this.build()}build(){this.set(u(this,Ae).value),u(this,Ae).addEventListener("input",()=>this.set(u(this,Ae).value)),u(this,Oe).addEventListener("input",()=>this.set(u(this,Oe).value)),u(this,ia).addEventListener("input",()=>this.lock()),this.lock()}key(){return u(this,nn)}label(){return u(this,rn)}lock(){if(this.isLocked()){u(this,Ae).setAttribute("disabled",""),u(this,Oe).setAttribute("disabled","");return}u(this,Ae).removeAttribute("disabled"),u(this,Oe).removeAttribute("disabled")}onInput(e){u(this,sn).push(e)}isLocked(){return u(this,ia).checked}set(e){e=Math.max(parseInt(e,10),0).toString(),u(this,Ae).value!==e&&(u(this,Ae).value=e),u(this,Oe).value!==e&&(u(this,Oe).value=e),u(this,sn).forEach(a=>a())}value(){return parseInt(u(this,Ae).value,10)}};o(yi,"LockedSlider"),nn=new WeakMap,rn=new WeakMap,Ae=new WeakMap,Oe=new WeakMap,ia=new WeakMap,sn=new WeakMap;var Qo=yi;var lt,bi=class{constructor(...t){y(this,lt,void 0);v(this,lt,t),u(this,lt).forEach(e=>e.onInput(()=>{if(this.total()===100)return;let a=u(this,lt).filter(r=>r!==e),n=a.filter(r=>!r.isLocked());if(this.total()!==100&&n.length===0){e.set((100-this.total(a)).toString());return}if(this.total()>100){let r=this.total()-100,s=Math.ceil(r/n.length);n.forEach(l=>{l.set((l.value()-Math.min(s,r)).toString()),r-=s}),this.total()>100&&e.set((100-this.total(a)).toString())}if(this.total()<100){let r=100-this.total(),s=Math.ceil(r/n.length);n.forEach(l=>{l.set((l.value()+Math.min(s,r)).toString()),r-=s}),this.total()<100&&e.set((100-this.total(a)).toString())}}))}sliders(){return u(this,lt)}total(t=u(this,lt)){return t.reduce((e,a)=>e+a.value(),0)}};o(bi,"LockedSliderGroup"),lt=new WeakMap;var el=bi;var wi=_(D());var ra,on=class extends wi.Element{constructor(e,a=(0,wi.s)("<div></div>")){super(a);y(this,ra,void 0);this.on("keydown",n=>{n.stopPropagation()}),this.element().setAttribute("tabindex","0"),v(this,ra,e)}build(){}display(){this.build(),u(this,ra).append(this.element())}parent(){return u(this,ra)}};o(on,"TransientElement"),ra=new WeakMap;var be=_(D());var E=o((i,t)=>(Object.entries(t).forEach(([e,a])=>i.addEventListener(e,a)),i),"h");I();var tl={autoDisplay:!0,autofocus:!0,canClose:!0,canMaximise:!1,canResize:!1,classes:"",modal:!1,parent:document.body,position:"auto",size:"auto"},Ft,ln,sa=class extends on{constructor(e,a,n={}){var r;super((r=n.parent)!=null?r:tl.parent,(0,be.s)(`<dialog class="window"${n.autofocus?" autofocus":""}></dialog>`));y(this,Ft,void 0);y(this,ln,void 0);if(this.on("cancel",s=>s.preventDefault()),this.options={...tl,...n},v(this,Ft,a),v(this,ln,e),this.options.modal&&this.addClass("modal"),this.options.size==="auto"&&this.addClass("size-auto"),this.options.size==="maximised"&&this.addClass("maximised"),this.options.size!=="auto"&&["height","width"].forEach(s=>{let l=this.options.size[s];if(typeof l=="number"){this.element().style[s]=l+"px";return}this.element().style[s]=l}),this.options.position==="auto"&&this.addClass("position-auto"),this.options.position!=="auto"&&[["x","left"],["y","top"]].forEach(([s,l])=>{this.element().style[l]=Math.min(0,Math.max(document.body.clientHeight-20,this.options.position[s]))+"px"}),this.options.classes&&this.addClass(...Array.isArray(this.options.classes)?this.options.classes:[this.options.classes]),this.options.autoDisplay){this.display();return}this.build()}build(){this.empty();let e=[[this.options.canMaximise,E((0,be.s)(`<button class="maximise" aria-label="${g("Window.maximize")}">${g("Window.maximize")}</button>`),{click:()=>this.maximise()})],[this.options.canClose,E((0,be.s)(`<button class="close" aria-label="${g("Window.close")}">${g("Window.close")}</button>`),{click:()=>this.close()})]].filter(([n])=>n).map(([,n])=>n),a=!1;this.append(E((0,be.s)(`<header><h3>${u(this,ln)}</h3></header>`,...e),{dblclick:()=>this.maximise(),mousedown:n=>{if(n.target.matches("button, button img"))return;a=!0;let r=o(s=>{!a||this.move({x:s.movementX,y:s.movementY})},"moveHandler");(0,be.on)(document,"mousemove",r),(0,be.on)(document,"mouseup",()=>{(0,be.off)(document,"mousemove",r),a=!1},{once:!0})}}),(0,be.s)('<div class="body"></div>',u(this,Ft)instanceof Node?u(this,Ft):(0,be.s)(`<p>${u(this,Ft)}</p>`)))}bindClose(){this.on("keydown",e=>{e.key==="Escape"&&this.options.canClose&&this.close(),e.stopPropagation()})}close(){this.element().close(),this.remove(),this.emit(new CustomEvent("close"));let e=document.querySelectorAll("dialog.window");!e.length||e[e.length-1].focus()}display(e=this.options.autofocus){super.display(),this.bindClose(),this.options.modal?this.element().showModal():this.element().show(),e&&this.element().focus()}maximise(){!this.options.canMaximise||(this.element().classList.toggle("maximised"),this.emit(new CustomEvent("resize",{bubbles:!1})))}move({x:e,y:a}){if(this.hasClass("position-auto")){e+=this.element().offsetLeft,a+=this.element().offsetTop,this.removeClass("position-auto"),this.element().style.setProperty("top",a+"px"),this.element().style.setProperty("left",e+"px");return}let n=getComputedStyle(this.element()),r=parseInt(n.getPropertyValue("top"),10),s=parseInt(n.getPropertyValue("left"),10);this.element().style.setProperty("top",r+a+"px"),this.element().style.setProperty("left",s+e+"px")}update(e){this.element().lastElementChild.remove(),this.append(e instanceof Node?e:(0,be.s)(`<p>${e}</p>`))}};o(sa,"Window"),Ft=new WeakMap,ln=new WeakMap;var Y=sa;var Ou=o((i,t)=>t.some(e=>i instanceof e),"instanceOfAny"),al,nl;function zu(){return al||(al=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}o(zu,"getIdbProxyableTypes");function Gu(){return nl||(nl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}o(Gu,"getCursorAdvanceMethods");var il=new WeakMap,js=new WeakMap,rl=new WeakMap,Ns=new WeakMap,Ws=new WeakMap;function Nu(i){let t=new Promise((e,a)=>{let n=o(()=>{i.removeEventListener("success",r),i.removeEventListener("error",s)},"unlisten"),r=o(()=>{e(ze(i.result)),n()},"success"),s=o(()=>{a(i.error),n()},"error");i.addEventListener("success",r),i.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&il.set(e,i)}).catch(()=>{}),Ws.set(t,i),t}o(Nu,"promisifyRequest");function ju(i){if(js.has(i))return;let t=new Promise((e,a)=>{let n=o(()=>{i.removeEventListener("complete",r),i.removeEventListener("error",s),i.removeEventListener("abort",s)},"unlisten"),r=o(()=>{e(),n()},"complete"),s=o(()=>{a(i.error||new DOMException("AbortError","AbortError")),n()},"error");i.addEventListener("complete",r),i.addEventListener("error",s),i.addEventListener("abort",s)});js.set(i,t)}o(ju,"cacheDonePromiseForTransaction");var $s={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return js.get(i);if(t==="objectStoreNames")return i.objectStoreNames||rl.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ze(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function sl(i){$s=i($s)}o(sl,"replaceTraps");function $u(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let a=i.call(xi(this),t,...e);return rl.set(a,t.sort?t.sort():[t]),ze(a)}:Gu().includes(i)?function(...t){return i.apply(xi(this),t),ze(il.get(this))}:function(...t){return ze(i.apply(xi(this),t))}}o($u,"wrapFunction");function Wu(i){return typeof i=="function"?$u(i):(i instanceof IDBTransaction&&ju(i),Ou(i,zu())?new Proxy(i,$s):i)}o(Wu,"transformCachableValue");function ze(i){if(i instanceof IDBRequest)return Nu(i);if(Ns.has(i))return Ns.get(i);let t=Wu(i);return t!==i&&(Ns.set(i,t),Ws.set(t,i)),t}o(ze,"wrap");var xi=o(i=>Ws.get(i),"unwrap");function ll(i,t,{blocked:e,upgrade:a,blocking:n,terminated:r}={}){let s=indexedDB.open(i,t),l=ze(s);return a&&s.addEventListener("upgradeneeded",d=>{a(ze(s.result),d.oldVersion,d.newVersion,ze(s.transaction),d)}),e&&s.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),l.then(d=>{r&&d.addEventListener("close",()=>r()),n&&d.addEventListener("versionchange",m=>n(m.oldVersion,m.newVersion,m))}).catch(()=>{}),l}o(ll,"openDB");var Hu=["get","getKey","getAll","getAllKeys","count"],Vu=["put","add","delete","clear"],Hs=new Map;function ol(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Hs.get(t))return Hs.get(t);let e=t.replace(/FromIndex$/,""),a=t!==e,n=Vu.includes(e);if(!(e in(a?IDBIndex:IDBObjectStore).prototype)||!(n||Hu.includes(e)))return;let r=o(async function(s,...l){let d=this.transaction(s,n?"readwrite":"readonly"),m=d.store;return a&&(m=m.index(l.shift())),(await Promise.all([m[e](...l),n&&d.done]))[0]},"method");return Hs.set(t,r),r}o(ol,"getMethod");sl(i=>({...i,get:(t,e,a)=>ol(t,e)||i.get(t,e,a),has:(t,e)=>!!ol(t,e)||i.has(t,e)}));var tt,Ge,dn=class{constructor(t,e,a){y(this,tt,void 0);y(this,Ge,void 0);v(this,Ge,e),v(this,tt,ll(t,1,{upgrade:n=>n.createObjectStore(u(this,Ge),a)}))}async get(t){return(await u(this,tt)).get(u(this,Ge),t)}async getAll(t,e){return(await u(this,tt)).getAll(u(this,Ge),t,e)}async set(t,e){return(await u(this,tt)).put(u(this,Ge),t,e)}async clear(){return(await u(this,tt)).clear(u(this,Ge))}async keys(){return(await u(this,tt)).getAllKeys(u(this,Ge))}};o(dn,"Store"),tt=new WeakMap,Ge=new WeakMap;var Ku=o((i,t,e)=>{let a=document.createElement("canvas"),n=a.getContext("2d");return a.width=i.width*t,a.height=i.height*t,e!=null&&e.smoothing||(n.imageSmoothingEnabled=!1),n.drawImage(i,0,0,a.width,a.height),a},"scaleImage"),dl=Ku;var oa,la,da,Ci,Ai=class extends dn{constructor(){super("civ-clone-assets","assets",{keyPath:"name"});y(this,oa,new Map);y(this,la,new Map);y(this,da,new Map);y(this,Ci,["./assets/city/bulb.png","./assets/city/food.png","./assets/city/gold.png","./assets/city/luxury.png","./assets/city/people_content_f.png","./assets/city/people_content_m.png","./assets/city/people_happy_f.png","./assets/city/people_happy_m.png","./assets/city/people_luxury.png","./assets/city/people_science.png","./assets/city/people_tax.png","./assets/city/people_unhappy_f.png","./assets/city/people_unhappy_m.png","./assets/city/pollution.png","./assets/city/sad.png","./assets/city/production.png","./assets/city/trade.png","./assets/cursor/go.png","./assets/cursor/torch.png","./assets/general/texture_1.png","./assets/general/texture_2.png","./assets/improvements/irrigation.png","./assets/improvements/mine.png","./assets/improvements/pollution.png","./assets/improvements/railroad_e.png","./assets/improvements/railroad_se.png","./assets/improvements/railroad_n.png","./assets/improvements/railroad_ne.png","./assets/improvements/railroad_nw.png","./assets/improvements/railroad_s.png","./assets/improvements/railroad_sw.png","./assets/improvements/railroad_w.png","./assets/improvements/road_e.png","./assets/improvements/road_n.png","./assets/improvements/road_ne.png","./assets/improvements/road_nw.png","./assets/improvements/road_s.png","./assets/improvements/road_se.png","./assets/improvements/road_sw.png","./assets/improvements/road_w.png","./assets/map/city.png","./assets/map/fog_e.png","./assets/map/fog_n.png","./assets/map/fog_s.png","./assets/map/fog_w.png","./assets/map/fort.png","./assets/map/fortify.png","./assets/map/hut.png","./assets/status/pollution_0.png","./assets/status/pollution_25.png","./assets/status/pollution_50.png","./assets/status/pollution_75.png","./assets/status/science_0.png","./assets/status/science_25.png","./assets/status/science_50.png","./assets/status/science_75.png","./assets/terrain/arctic.png","./assets/terrain/arctic_e.png","./assets/terrain/arctic_es.png","./assets/terrain/arctic_esw.png","./assets/terrain/arctic_ew.png","./assets/terrain/arctic_n.png","./assets/terrain/arctic_ne.png","./assets/terrain/arctic_nes.png","./assets/terrain/arctic_nesw.png","./assets/terrain/arctic_new.png","./assets/terrain/arctic_ns.png","./assets/terrain/arctic_nsw.png","./assets/terrain/arctic_nw.png","./assets/terrain/arctic_s.png","./assets/terrain/arctic_sw.png","./assets/terrain/arctic_w.png","./assets/terrain/coal.png","./assets/terrain/coast_sprite.png","./assets/terrain/desert.png","./assets/terrain/desert_e.png","./assets/terrain/desert_es.png","./assets/terrain/desert_esw.png","./assets/terrain/desert_ew.png","./assets/terrain/desert_n.png","./assets/terrain/desert_ne.png","./assets/terrain/desert_nes.png","./assets/terrain/desert_nesw.png","./assets/terrain/desert_new.png","./assets/terrain/desert_ns.png","./assets/terrain/desert_nsw.png","./assets/terrain/desert_nw.png","./assets/terrain/desert_s.png","./assets/terrain/desert_sw.png","./assets/terrain/desert_w.png","./assets/terrain/doe.png","./assets/terrain/fish.png","./assets/terrain/forest.png","./assets/terrain/forest_e.png","./assets/terrain/forest_es.png","./assets/terrain/forest_esw.png","./assets/terrain/forest_ew.png","./assets/terrain/forest_n.png","./assets/terrain/forest_ne.png","./assets/terrain/forest_nes.png","./assets/terrain/forest_nesw.png","./assets/terrain/forest_new.png","./assets/terrain/forest_ns.png","./assets/terrain/forest_nsw.png","./assets/terrain/forest_nw.png","./assets/terrain/forest_s.png","./assets/terrain/forest_sw.png","./assets/terrain/forest_w.png","./assets/terrain/gems.png","./assets/terrain/gold.png","./assets/terrain/grassland.png","./assets/terrain/grassland_e.png","./assets/terrain/grassland_es.png","./assets/terrain/grassland_esw.png","./assets/terrain/grassland_ew.png","./assets/terrain/grassland_n.png","./assets/terrain/grassland_ne.png","./assets/terrain/grassland_nes.png","./assets/terrain/grassland_nesw.png","./assets/terrain/grassland_new.png","./assets/terrain/grassland_ns.png","./assets/terrain/grassland_nsw.png","./assets/terrain/grassland_nw.png","./assets/terrain/grassland_s.png","./assets/terrain/grassland_sw.png","./assets/terrain/grassland_w.png","./assets/terrain/hills.png","./assets/terrain/hills_e.png","./assets/terrain/hills_es.png","./assets/terrain/hills_esw.png","./assets/terrain/hills_ew.png","./assets/terrain/hills_n.png","./assets/terrain/hills_ne.png","./assets/terrain/hills_nes.png","./assets/terrain/hills_nesw.png","./assets/terrain/hills_new.png","./assets/terrain/hills_ns.png","./assets/terrain/hills_nsw.png","./assets/terrain/hills_nw.png","./assets/terrain/hills_s.png","./assets/terrain/hills_sw.png","./assets/terrain/hills_w.png","./assets/terrain/horse.png","./assets/terrain/jungle.png","./assets/terrain/jungle_e.png","./assets/terrain/jungle_es.png","./assets/terrain/jungle_esw.png","./assets/terrain/jungle_ew.png","./assets/terrain/jungle_n.png","./assets/terrain/jungle_ne.png","./assets/terrain/jungle_nes.png","./assets/terrain/jungle_nesw.png","./assets/terrain/jungle_new.png","./assets/terrain/jungle_ns.png","./assets/terrain/jungle_nsw.png","./assets/terrain/jungle_nw.png","./assets/terrain/jungle_s.png","./assets/terrain/jungle_sw.png","./assets/terrain/jungle_w.png","./assets/terrain/land.png","./assets/terrain/mountains.png","./assets/terrain/mountains_e.png","./assets/terrain/mountains_es.png","./assets/terrain/mountains_esw.png","./assets/terrain/mountains_ew.png","./assets/terrain/mountains_n.png","./assets/terrain/mountains_ne.png","./assets/terrain/mountains_nes.png","./assets/terrain/mountains_nesw.png","./assets/terrain/mountains_new.png","./assets/terrain/mountains_ns.png","./assets/terrain/mountains_nsw.png","./assets/terrain/mountains_nw.png","./assets/terrain/mountains_s.png","./assets/terrain/mountains_sw.png","./assets/terrain/mountains_w.png","./assets/terrain/oasis.png","./assets/terrain/ocean.png","./assets/terrain/oil.png","./assets/terrain/plains.png","./assets/terrain/plains_e.png","./assets/terrain/plains_es.png","./assets/terrain/plains_esw.png","./assets/terrain/plains_ew.png","./assets/terrain/plains_n.png","./assets/terrain/plains_ne.png","./assets/terrain/plains_nes.png","./assets/terrain/plains_nesw.png","./assets/terrain/plains_new.png","./assets/terrain/plains_ns.png","./assets/terrain/plains_nsw.png","./assets/terrain/plains_nw.png","./assets/terrain/plains_s.png","./assets/terrain/plains_sw.png","./assets/terrain/plains_w.png","./assets/terrain/river_e.png","./assets/terrain/river_es.png","./assets/terrain/river_esw.png","./assets/terrain/river_ew.png","./assets/terrain/river_mouth_e.png","./assets/terrain/river_mouth_n.png","./assets/terrain/river_mouth_s.png","./assets/terrain/river_mouth_w.png","./assets/terrain/river.png","./assets/terrain/river_n.png","./assets/terrain/river_ne.png","./assets/terrain/river_nes.png","./assets/terrain/river_nesw.png","./assets/terrain/river_new.png","./assets/terrain/river_ns.png","./assets/terrain/river_nsw.png","./assets/terrain/river_nw.png","./assets/terrain/river_s.png","./assets/terrain/river_sw.png","./assets/terrain/river_w.png","./assets/terrain/seal.png","./assets/terrain/shield.png","./assets/terrain/game.png","./assets/terrain/swamp.png","./assets/terrain/swamp_e.png","./assets/terrain/swamp_es.png","./assets/terrain/swamp_esw.png","./assets/terrain/swamp_ew.png","./assets/terrain/swamp_n.png","./assets/terrain/swamp_ne.png","./assets/terrain/swamp_nes.png","./assets/terrain/swamp_nesw.png","./assets/terrain/swamp_new.png","./assets/terrain/swamp_ns.png","./assets/terrain/swamp_nsw.png","./assets/terrain/swamp_nw.png","./assets/terrain/swamp_s.png","./assets/terrain/swamp_sw.png","./assets/terrain/swamp_w.png","./assets/terrain/tundra.png","./assets/terrain/tundra_e.png","./assets/terrain/tundra_es.png","./assets/terrain/tundra_esw.png","./assets/terrain/tundra_ew.png","./assets/terrain/tundra_n.png","./assets/terrain/tundra_ne.png","./assets/terrain/tundra_nes.png","./assets/terrain/tundra_nesw.png","./assets/terrain/tundra_new.png","./assets/terrain/tundra_ns.png","./assets/terrain/tundra_nsw.png","./assets/terrain/tundra_nw.png","./assets/terrain/tundra_s.png","./assets/terrain/tundra_sw.png","./assets/terrain/tundra_w.png","./assets/units/tank.png","./assets/units/artillery.png","./assets/units/battleship.png","./assets/units/bomber.png","./assets/units/cannon.png","./assets/units/caravan.png","./assets/units/carrier.png","./assets/units/catapult.png","./assets/units/horseman.png","./assets/units/chariot.png","./assets/units/combat_1.png","./assets/units/combat_2.png","./assets/units/combat_3.png","./assets/units/combat_4.png","./assets/units/combat_5.png","./assets/units/combat_6.png","./assets/units/combat_7.png","./assets/units/combat_8.png","./assets/units/cruiser.png","./assets/units/diplomat.png","./assets/units/fighter.png","./assets/units/frigate.png","./assets/units/ironclad.png","./assets/units/knight.png","./assets/units/swordman.png","./assets/units/mechanizedinfantry.png","./assets/units/warrior.png","./assets/units/musketman.png","./assets/units/nuclear.png","./assets/units/spearman.png","./assets/units/rifleman.png","./assets/units/sail.png","./assets/units/settlers.png","./assets/units/submarine.png","./assets/units/transport.png","./assets/units/trireme.png"])}async get(e){return u(this,oa).has(e)||u(this,oa).set(e,await super.get(e)),u(this,oa).get(e)}async getImage(e){if(!u(this,la).has(e)){let a=await this.get(e),n=document.createElement("img");n.src=a.uri,u(this,la).set(e,n)}return u(this,la).get(e)}async getScaled(e,a){return u(this,da).has(e)||u(this,da).set(e,dl(await this.getImage(e),a)),u(this,da).get(e)}async hasAllAssets(){return(await this.missingAssets()).length===0}async missingAssets(){let e=await this.keys();return u(this,Ci).filter(a=>!e.includes(a))}};o(Ai,"AssetStore"),oa=new WeakMap,la=new WeakMap,da=new WeakMap,Ci=new WeakMap;var $=new Ai;var Vs=_(D());I();var un,ki=class extends he{constructor(){super(...arguments);y(this,un,void 0)}activate(){let e=[];new Y(g("Actions.AdjustTradeRates.title"),(0,Vs.s)("<div></div>",...this.value().all.map(n=>{let r=new Qo(n._,n.value,g(`${n._}.name`,{defaultValue:n._,ns:"trade"}));return e.push(r),r}))).on("close",()=>{let n=u(this,un).sliders().map(r=>[r.key(),r.value()]);this.transport().send("action",{name:"AdjustTradeRates",id:this.value().id,value:n})}),v(this,un,new el(...e))}build(){$.get("./assets/city/trade.png").then(e=>this.append((0,Vs.s)(`<button class="adjustTradeRates small" title="${g("Actions.AdjustTradeRates.title")}"><img src="${e.uri}"></button>`)))}value(){return super.value()}};o(ki,"AdjustTradeRates"),un=new WeakMap;var ul=ki;var Ks=[],cl=o(()=>!!document.querySelector("div.notificationWindow"),"hasOpenWindow"),cn,dt=class extends sa{constructor(e,a,n={}){let r={autofocus:!0,canClose:!0,canMaximise:!1,classes:"notificationWindow",queue:!0,...n};super(e,a,r);y(this,cn,{});v(this,cn,r)}bindClose(){this.on("keydown",e=>{["Enter","Escape"].includes(e.key)&&u(this,cn).canClose&&(this.close(),e.stopPropagation())})}close(){if(super.close(),Ks.length&&cl()){let[e,a,n]=Ks.shift();e.display(a),n()}}display(e=!0){return new Promise(a=>{if(cl()){Ks.push([this,e,a]);return}if(super.display(),!e){a();return}this.element().focus(),a()})}};o(dt,"NotificationWindow"),cn=new WeakMap;var Ri=dt;var mn=_(D());var ua=class extends dt{constructor(t,e,a={}){var n,r;a={classes:"actionWindow",...a,actions:{primary:{label:"OK",action:s=>s.close(),...(r=(n=a.actions)==null?void 0:n.primary)!=null?r:{}},...a.actions}},super(t,(0,mn.s)("<div></div>",...e instanceof Node?[e]:e===null?[]:[(0,mn.s)(`<p>${e}</p>`)],(0,mn.s)("<footer></footer>",...Object.entries(a.actions).map(([,{label:s,action:l}])=>E((0,mn.s)(`<button>${s}</button>`),{click:()=>l(this),keydown:d=>{d.key==="Enter"&&l(this)}})))),a)}};o(ua,"ActionWindow");var Ii=ua;var ct=_(D());var ml={0:"Insert",1:"End",2:"ArrowDown",3:"PageDown",4:"ArrowLeft",6:"ArrowRight",7:"Home",8:"ArrowUp",9:"PageUp",".":"Delete"},ut=o((i,t=!0)=>t&&i.location===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD&&i.key in ml?ml[i.key]:i.key,"mappedKeyFromEvent");I();var pn,hn,ca=class extends ua{constructor(e,a,n,r=g("SelectionWindow.default-body"),s={}){var m,p;s={autoFocus:!0,displayAll:!1,...s,actions:{primary:{label:g("Generic.ok"),action:()=>l(this.selectionList().value),...(p=(m=s.actions)==null?void 0:m.primary)!=null?p:{}},...s.actions}};let l=o(c=>{this.emit(new CustomEvent("selection",{detail:c})),this.close(),n(c)},"chooseHandler"),d=E((0,ct.s)(`<select>${a.map(c=>`<option value="${c.value}">${g(c.label||c.value)}</option>`).join("")}</select>`),{keydown:c=>{let h=ut(c);if(h==="Enter"&&(l(d.value),c.preventDefault()),["ArrowDown","ArrowUp","End","Home","PageDown","PageUp"].includes(h)&&!["ArrowDown","ArrowUp","End","Home","PageDown","PageUp"].includes(c.key)){let f=d.selectedIndex,w=["Home","PageUp"].includes(h)?0:["End","PageDown"].includes(h)?d.length-1:f+(h==="ArrowUp"?-1:1);w>-1&&w<d.length&&(d.selectedIndex=w),c.preventDefault()}},dblclick:()=>l(d.value)});s.displayAll&&a.length>1&&d.setAttribute("size",a.length.toString()),s.autoFocus&&a.length>1&&d.setAttribute("autofocus",""),s.autoFocus&&a.length===1&&d.setAttribute("autofocus","");super(e,(0,ct.s)("<div></div>",...r instanceof Node?[r]:r===null?[]:[(0,ct.s)(`<p>${r}</p>`)],d),s);y(this,pn,o(()=>this.resize(),"#resizeHandler"));y(this,hn,void 0);this.addClass("selectionWindow"),v(this,hn,d),this.resize(),(0,ct.on)(window,"resize",u(this,pn)),this.on("focus",()=>this.selectionList().focus())}close(){(0,ct.off)(window,"resize",u(this,pn)),super.close()}display(){return super.display().then(()=>{let e=this.query("select");e&&e.hasAttribute("autofocus")&&e.focus()})}resize(){var e,a,n,r,s;try{this.selectionList().style.maxHeight="none",this.selectionList().style.maxHeight=`calc(${this.element().offsetHeight-this.element().firstElementChild.offsetHeight-((a=(e=this.selectionList().previousElementSibling)==null?void 0:e.offsetHeight)!=null?a:0)-((s=(r=(n=this.selectionList().parentElement)==null?void 0:n.nextElementSibling)==null?void 0:r.offsetHeight)!=null?s:0)}px - 2.1em)`}catch(l){console.warn(l)}}selectionList(){return u(this,hn)}};o(ca,"SelectionWindow"),pn=new WeakMap,hn=new WeakMap;var mt=ca;var pl=_(D());I();var Si=class extends he{activate(){let t=new mt(g("Actions.ChooseResearch.title"),this.value().available.map(e=>({label:`${g(`${e._}.name`,{defaultValue:e._,ns:"science"})}`,value:e._})),e=>{!e||(this.transport().send("action",{name:"ChooseResearch",id:this.value().id,chosen:e||"@"}),this.complete(),t.close())},g("Actions.ChooseResearch.body"),{displayAll:!0})}build(){$.get("./assets/city/bulb.png").then(t=>this.append((0,pl.s)(`<button class="large chooseResearch" title="${g("Actions.ChooseResearch.title")}"><img src="${t.uri}"></button>`)))}value(){return super.value()}};o(Si,"ChooseResearch");var hl=Si;I();var K=o(i=>i===null?g("None",{ns:"city"}):g(`${i.name}.name`,{defaultValue:i.name,ns:"city"}),"cityName");I();var ma=o(i=>i!=null&&i.item?Ys(i.item):g("City.Build.nothing"),"getLabelForBuildable"),Ys=o(i=>g([`city:Improvement.${i._}.name`,`spaceship:${i._}.name`,`unit:${i._}.name`,`wonder:${i._}.name`],{defaultValue:i._}),"getLabelForBuildableEntity");I();var Yu=o((i,...t)=>{var e;return(e=i==null?void 0:i.__.some(a=>t.includes(a)))!=null?e:!1},"instanceOf");var Ne=Yu;var gn={Food:"Food",UnitSupportFood:"Food",PopulationSupportFood:"Food",Production:"Production",UnitSupportProduction:"Production",Trade:"Trade",Corruption:"Trade",Happiness:"Happiness",LuxuryHappiness:"Happiness",Unhappiness:"Unhappiness",MartialLaw:"Unhappiness",MilitaryUnhappiness:"Unhappiness",PopulationUnhappiness:"Unhappiness",CityImprovementContent:"Unhappiness",Research:"Research",Luxuries:"Luxuries",Gold:"Gold",CityImprovementMaintenanceGold:"Gold"},Pi=Object.entries(gn).reduce((i,[t,e])=>(Object.prototype.hasOwnProperty.call(i,e)||(i[e]=[]),Object.prototype.hasOwnProperty.call(i,t)||(i[t]=[]),i[e].push(t),i[t].push(t),i),{}),fn=o((i,...t)=>i.reduce((e,a)=>(t.forEach((n,r)=>{Ne(a,n)&&(e[r]+=a.value)}),e),t.map(()=>0)),"reduceKnownYields"),pa=o((i,t)=>fn(i,t)[0],"reduceKnownYield"),je={Food:"city/food.png",Production:"city/production.png",Trade:"city/trade.png",Gold:"city/gold.png",Luxuries:"city/luxury.png",Pollution:"city/pollution.png",Research:"city/bulb.png",Unhappiness:"city/sad.png"};var ha=_(D());I();var yn=o((i,t=i.yields)=>{let e=i.growth,a=parseInt(i.name.replace(/[^a-z]/gi,""),36).toString(2),n=new Array(e.size).fill(1),r=(0,ha.s)('<div class="population"></div>'),[s,l]=fn(t,"Happiness","Unhappiness"),d=n.length-1;for(;l>0&&d>-1;)n[d--]=0,l--;for(d=0;s>0&&d<n.length;)n[d]===0&&(n[d]++,s--),n[d]===1&&(n[d++]++,s--),n[d]===2&&d++;return n.forEach((m,p)=>$.getScaled(`./assets/city/people_${["unhappy","content","happy"][m]}_${["f","m"][parseInt(a[p%a.length],10)]}.png`,2).then(c=>r.append((0,ha.s)('<span class="citizen"></span>',(0,ha.s)(`<img src="${c.toDataURL("image/png")}">`))))),r},"renderPopulation"),qs=o((i,t,e)=>g("Progress.body",{progress:i.progress.value,total:i.cost.value,turns:pt(i,t,e)}),"renderProgress"),pt=o((i,t,e)=>{let a=Math.max(1,Math.ceil((i.cost.value-i.progress.value)/Math.abs(pa(t,e))));return Number.isFinite(a)?a:0},"turnsLeft");var Ti=o((i,t)=>i.yields.reduce(([e,a,n],r)=>{var l;let s=(l=Pi[t])==null?void 0:l.includes(r._);return s&&r.value>0&&(e+=r.value),s&&r.value<0&&(a+=r.value),s&&(n+=r.value),[e,a,n]},[0,0,0]),"yieldData"),vn=o(i=>new Array(Math.trunc(Math.abs(i.value))).fill(0).map(()=>{let t=(0,ha.s)('<span class="yield-icon"></span>');return $.getScaled(`./assets/${je[gn[i._]]}`,2).then(e=>t.append((0,ha.s)(`<img src="${e.toDataURL("image/png")}">`))),t}),"yieldImages");var bn,Ei,Mi=class extends mt{constructor(e,a,n=()=>{},r={}){super(g("Actions.CityBuildSelectionWindow.title",{cityName:K(e.city)}),e.available.map(s=>({label:g("City.Build.build-item",{item:ma(s),cost:s.cost.value,turns:pt({...e,...s},e.city.yields,"Production")}),value:s.item._})),s=>{!s||(a.send("action",{name:e.building===null?"CityBuild":"ChangeProduction",id:e.id,chosen:s||"@"}),this.close(!0))},null,{actions:r,displayAll:!0});y(this,bn,void 0);y(this,Ei,void 0);v(this,bn,n),v(this,Ei,a)}close(e=!1){super.close(),e&&u(this,bn).call(this,e)}};o(Mi,"CityBuildSelectionWindow"),bn=new WeakMap,Ei=new WeakMap;var Fi=Mi;var Rl=_(D());var H=_(D());var gl=_(D());var fl,yl=o(i=>fl=i,"setPreloadContainer"),Zs=o(i=>{let t=fl.querySelector(`[data-path$="${i}.png"]`);return t===null?(console.error(`Missing image: ${i}.`),(0,gl.s)("<canvas></canvas>")):t},"getPreloadedImage"),Js=Zs;var Qs=_(D());var Xs=new Map,qu=o((i,t,e)=>{let a=(i instanceof HTMLImageElement?i.src:Math.random())+e.toString();if(Xs.has(a)){let p=Xs.get(a),c=(0,Qs.s)("<canvas></canvas>"),h=c.getContext("2d");return c.height=p.height,c.width=p.width,h.drawImage(p,0,0),c}let n=(0,Qs.s)("<canvas></canvas>"),r=n.getContext("2d");n.width=i.width,n.height=i.height,r.drawImage(i,0,0,i.width,i.height);let s=r.getImageData(0,0,n.width,n.height),l=o(p=>{var f;let c=null,h={r:0,g:0,b:0,a:0};return typeof p=="string"?(c=p.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i))!==null?h={r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16),a:1}:(c=p.match(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/))!==null?h={r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}:(c=p.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/))!==null?h={r:parseInt(c[1]),g:parseInt(c[2]),b:parseInt(c[3]),a:1}:(c=p.match(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+|\d+\.|\.\d+|\d+\.\d+)\s*\)\s*$/))!==null&&(h={r:parseInt(c[1]),g:parseInt(c[2]),b:parseInt(c[3]),a:parseFloat((f=c[4])!=null?f:1)}):"length"in p&&(h={r:p[0]||0,g:p[1]||0,b:p[2]||0,a:p[3]||1}),h},"getColor"),d=t.map(l),m=e.map(l);for(let p=0;p<s.data.length;p+=4)d.forEach((c,h)=>{s.data[p]===c.r&&s.data[p+1]===c.g&&s.data[p+2]===c.b&&s.data[p+3]===c.a*255&&(s.data[p]=(m[h]||m[0]).r,s.data[p+1]=(m[h]||m[0]).g,s.data[p+2]=(m[h]||m[0]).b,s.data[p+3]=Math.trunc((m[h]||m[0]).a*255))});return r.putImageData(s,0,0),Xs.set(a,n),n},"replaceColours"),_i=qu;var vl=_(D());var ht,_t,wn,gt,xn,ft,Ce=class{constructor(t,e=2,a=16,n=(0,vl.s)("<canvas></canvas>")){y(this,ht,void 0);y(this,_t,void 0);y(this,wn,!0);y(this,gt,void 0);y(this,xn,void 0);y(this,ft,void 0);v(this,ht,n),v(this,ft,t),v(this,xn,a),v(this,gt,e),this.setCanvasSize(),v(this,_t,u(this,ht).getContext("2d")),yl(document.querySelector("#preload"))}canvas(){return u(this,ht)}clear(){this.context().clearRect(0,0,this.canvas().width,this.canvas().height)}context(){return u(this,_t)}render(t=this.world().tiles()){this.clear(),t.forEach(({x:e,y:a})=>this.renderTile(this.world().get(e,a)))}renderTile({x:t,y:e}){let a=this.tileSize(),n=t*a,r=e*a;this.context().clearRect(n,r,a,a)}scale(){return u(this,gt)}tileSize(){return u(this,xn)*u(this,gt)}update(t){t.forEach(({x:e,y:a})=>this.renderTile(this.world().get(e,a)))}world(){return u(this,ft)}drawImage(t,e,a,n={}){var m,p;let r=this.tileSize(),s=e*r,l=a*r,d=this.getPreloadedImage(t);this.putImage(n.augment?n.augment(d):d,s+((m=n.offsetX)!=null?m:0),l+((p=n.offsetY)!=null?p:0))}filterNeighbours(t,e,a=["n","e","s","w"]){return a.filter(n=>e(u(this,ft).getNeighbour(t,n)))}getPreloadedImage(t){return Zs(t)}putImage(t,e,a){u(this,_t).imageSmoothingEnabled=!1,u(this,_t).drawImage(t,e,a,t.width*u(this,gt),t.height*u(this,gt))}replaceColours(t,e,a){return _i(t,e,a)}setCanvasSize(){u(this,ht).height=u(this,ft).height()*this.tileSize(),u(this,ht).width=u(this,ft).width()*this.tileSize()}isVisible(){return u(this,wn)}setVisible(t){v(this,wn,t)}};o(Ce,"Map"),ht=new WeakMap,_t=new WeakMap,wn=new WeakMap,gt=new WeakMap,xn=new WeakMap,ft=new WeakMap;var Di=Ce;var Li=class extends Ce{renderTile(t){super.renderTile(t);let{x:e,y:a}=t,n=this.tileSize(),r=e*n,s=a*n;if(t.city){let l=t.city,d=l.player,m=d.civilization,[p]=m.attributes.filter(c=>c.name==="colors");t.units.length>0&&(this.context().fillStyle="#000",this.context().fillRect(r,s,n,n)),this.context().fillStyle=p.value[0],this.context().fillRect(r+this.scale(),s+this.scale(),n-this.scale()*2,n-this.scale()*2),this.drawImage("map/city",e,a,{augment:c=>this.replaceColours(c,["#000"],[p.value[1]]),offsetX:this.scale(),offsetY:this.scale()})}}};o(Li,"Cities");var An=Li;var Cn=_(D());I();var Ui=class extends dt{constructor(t,e,a,n={}){var s,l;let r=E((0,Cn.s)(`<button>${g((s=n.okLabel)!=null?s:"Generic.ok")}</button>`),{click:()=>{a(),this.close()},keydown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.stopPropagation(),a(),this.close())}});super(t,(0,Cn.s)(`<div class="content"><p>${e}</p></div>`,(0,Cn.s)("<footer></footer>",r,E((0,Cn.s)(`<button>${g((l=n.cancelLabel)!=null?l:"Generic.cancel")}</button>`),{click:()=>this.close(),keydown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.stopPropagation(),this.close())}}))),{classes:"confirmationWindow",...n,queue:!1}),r.focus()}};o(Ui,"ConfirmationWindow");var Dt=Ui;var ga,fa,Bi=class{constructor(t,e){y(this,ga,void 0);y(this,fa,[]);this.setIds(t),v(this,ga,a=>{let{detail:n}=a,r=n.value.objects;!r||u(this,fa).some(s=>s in r)&&document.addEventListener("dataupdated",s=>e(s.detail.data),{once:!0})}),document.addEventListener("patchdatareceived",u(this,ga))}dispose(){document.removeEventListener("patchdatareceived",u(this,ga))}setIds(t){u(this,fa).splice(0,u(this,fa).length,...t)}};o(Bi,"DataObserver"),ga=new WeakMap,fa=new WeakMap;var ge=Bi;var Oi=class extends Ce{update(t){let e=[...t];return t.forEach(a=>{["n","ne","e","se","s","sw","w","nw"].forEach(n=>{let r=this.world().getNeighbour(a,n);e.includes(r)||e.push(r)})}),super.update(e)}};o(Oi,"TerrainAbstract");var fe=Oi;var zi=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t;t.terrain.features.length&&t.terrain.features.forEach(n=>n._==="Shield"?this.drawImage(`terrain/${n._.toLowerCase()}`,e,a,{offsetX:4*this.scale(),offsetY:4*this.scale()}):this.drawImage(`terrain/${n._.toLowerCase()}`,e,a))}};o(zi,"Feature");var Gi=zi;var Ni=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t;this.filterNeighbours(t,n=>n.terrain._==="Unknown").forEach(n=>this.drawImage(`map/fog_${n}`,e,a))}};o(Ni,"Fog");var ji=Ni;var $i=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t,n=t.improvements.reduce((r,s)=>{let l=s._;return l in r&&(r[l]=!0),r},{Mine:!1,Road:!1,Railroad:!1,Pollution:!1});if(["Mine","Pollution"].forEach(r=>{n[r]&&this.drawImage(`improvements/${r.toLowerCase()}`,e,a)}),n.Road){let r=this.filterNeighbours(t,l=>l.improvements.some(d=>d._==="Road"),["n","ne","e","se","s","sw","w","nw"]),s=this.filterNeighbours(t,l=>!!l.city||l.improvements.some(d=>d._==="Railroad"),["n","ne","e","se","s","sw","w","nw"]);if(r.forEach(l=>{(!n.Railroad||!s.includes(l))&&this.drawImage(`improvements/road_${l}`,e,a)}),n.Railroad&&s.forEach(l=>this.drawImage(`improvements/railroad_${l}`,e,a)),r.length===0&&s.length===0){let l=this.tileSize(),d=e*l,m=a*l,p=Math.floor(this.tileSize()/2)-this.scale();this.context().fillStyle=n.Railroad?"#000":"#8c5828",this.context().rect(d+p,m+p,this.scale()*2,this.scale()*2),this.context().fill()}}}};o($i,"Terrain");var Wi=$i;var Hi=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t;!t.improvements.some(r=>r._==="Irrigation")||this.drawImage("improvements/irrigation",e,a)}};o(Hi,"Terrain");var Vi=Hi;var bl=_(D());var Ki=class extends fe{renderTile(t){super.renderTile(t);let{x:e,y:a}=t,n=this.tileSize(),r=e*n,s=a*n;if(t.terrain._!=="Unknown"){if(t.isLand)this.drawImage("terrain/land",e,a);else if(t.isWater&&(this.drawImage("terrain/ocean",e,a),t.isCoast)){let l=this.getPreloadedImage("terrain/coast_sprite"),d=(this.world().getNeighbour(t,"w").isLand?1:0)|(this.world().getNeighbour(t,"nw").isLand?2:0)|(this.world().getNeighbour(t,"n").isLand?4:0)|(this.world().getNeighbour(t,"ne").isLand?8:0)|(this.world().getNeighbour(t,"e").isLand?16:0)|(this.world().getNeighbour(t,"se").isLand?32:0)|(this.world().getNeighbour(t,"s").isLand?64:0)|(this.world().getNeighbour(t,"sw").isLand?128:0);if(d>0){let m=d&7,p=d>>2&7,c=d>>4&7,h=d>>6&7|(d&1)<<2,f=(0,bl.s)('<canvas height="16" width="16"></canvas>'),w=f.getContext("2d");w.drawImage(l,m<<4,0,8,8,0,0,8,8),w.drawImage(l,(p<<4)+8,0,8,8,8,0,8,8),w.drawImage(l,(c<<4)+8,8,8,8,8,8,8,8),w.drawImage(l,h<<4,8,8,8,0,8,8,8),this.putImage(f,r,s)}this.filterNeighbours(t,m=>m.terrain._==="River").forEach(m=>this.drawImage(`terrain/river_mouth_${m}`,e,a))}}}};o(Ki,"Land");var kn=Ki;var xl=_(wl()),Al=_(D());var Zu={playerId:null,scale:2,tileSize:16},ne,oe,Ut,Bt,In,ya,va,Sn,Z,Yi=class extends xl.EventEmitter{constructor(e,a,n=(0,Al.s)("<canvas></canvas>"),r={playerId:null,scale:2},...s){let l={...Zu,...r};super();y(this,ne,void 0);y(this,oe,{x:0,y:0});y(this,Ut,void 0);y(this,Bt,[]);y(this,In,null);y(this,ya,void 0);y(this,va,void 0);y(this,Sn,void 0);y(this,Z,void 0);v(this,Z,e),v(this,ne,n),v(this,In,l.playerId),v(this,va,l.tileSize),v(this,ya,l.scale),v(this,Sn,a),s.forEach(d=>u(this,Bt).push(new d(u(this,Z),this.scale(),u(this,va)))),v(this,Ut,n.getContext("2d")),this.bindEvents()}bindEvents(){}build(e){u(this,Bt).forEach(a=>a.update(e))}canvas(){return u(this,ne)}center(){return u(this,oe)}getLayer(e){var a;return(a=this.getLayers(e).shift())!=null?a:null}getLayers(e){return u(this,Bt).filter(a=>a instanceof e)}isVisible(e,a){let n=Math.floor(u(this,ne).width/this.tileSize()),r=Math.floor(u(this,ne).height/this.tileSize());if(n>=u(this,Z).width()&&r>=u(this,Z).height())return!0;let[s,l,d,m]=this.visibleBounds();return(n>=u(this,Z).width()||(s>l?e<l||e>s:e<l&&e>s))&&(r>=u(this,Z).height()||(d>m?a<m||a>d:a<m&&a>d))}playerId(){return u(this,In)}render(){let e=this.tileSize(),a=u(this,Z).width()*e,n=u(this,oe).x*e+Math.trunc(e/this.scale()),r=Math.trunc(u(this,ne).width/2),s=u(this,Z).height()*e,l=u(this,oe).y*e+Math.trunc(e/this.scale()),d=Math.trunc(u(this,ne).height/2),m=r-n,p=r+a,c=d-l,h=d+s;for(;m>0;)m-=a;for(;c>0;)c-=s;for(;p<u(this,ne).width;)p+=a;for(;h<u(this,ne).height;)h+=s;u(this,Ut).fillStyle="#000",u(this,Ut).fillRect(0,0,Math.max(u(this,Z).width()*e,u(this,ne).width),Math.max(u(this,Z).height()*e,u(this,ne).height));for(let f=m;f<p;f+=a)for(let w=c;w<h;w+=s)u(this,Bt).forEach(C=>{if(!C.isVisible())return;let A=C.canvas();u(this,Ut).drawImage(A,f,w,A.width,A.height)})}scale(){return u(this,ya)}setCenter(e,a){u(this,oe).x=e,u(this,oe).y=a,this.render(),this.emit("focus-changed",e,a)}tileSize(){return u(this,va)*u(this,ya)}transport(){return u(this,Sn)}visibleBounds(){let[{x:e,y:a},{x:n,y:r}]=this.visibleRange();return[e,n,a,r]}visibleRange(){let e=Math.floor(Math.floor(u(this,ne).width/this.tileSize())/2),a=Math.floor(Math.floor(u(this,ne).height/this.tileSize())/2);return[{x:(u(this,oe).x-e+u(this,Z).width())%u(this,Z).width(),y:(u(this,oe).y-a+u(this,Z).height())%u(this,Z).height()},{x:(u(this,oe).x+e)%u(this,Z).width(),y:(u(this,oe).y+a)%u(this,Z).height()}]}rawVisibleRange(){let e=Math.floor(Math.floor(u(this,ne).width/this.tileSize())/2),a=Math.floor(Math.floor(u(this,ne).height/this.tileSize())/2);return[{x:u(this,oe).x-e,y:u(this,oe).y-a},{x:u(this,oe).x+e,y:u(this,oe).y+a}]}world(){return u(this,Z)}};o(Yi,"Portal"),ne=new WeakMap,oe=new WeakMap,Ut=new WeakMap,Bt=new WeakMap,In=new WeakMap,ya=new WeakMap,va=new WeakMap,Sn=new WeakMap,Z=new WeakMap;var qi=Yi;var er=_(D());var Xi=_(D());I();var eo=o((i,t,e,a="name",n=i==null?void 0:i._)=>i?g((t?t+":":"")+(e?e+".":"")+i._+"."+a,{defaultValue:n!=null?n:i._}):"","entityName");var Ju=o((i,t=16)=>{var l;let e=i.player,a=e.civilization,[n]=a.attributes.filter(d=>d.name==="colors"),r=_i(Js(`units/${i._.toLowerCase()}`),["#60E064","#2C7800"],n.value),s=r.getContext("2d");if(s.imageSmoothingEnabled=!1,(l=i.improvements)!=null&&l.some(d=>d._==="Fortified")&&s.drawImage(Js("map/fortify"),0,0),i.busy){let d=t/2,m=t*.75,p=eo(i.busy,"unit","Busy","icon",eo(i.busy,"unit","Busy").replace(/[a-z]+/g,""));s.font="bold 8px sans-serif",s.fillStyle="black",s.textAlign="center",s.fillText(p,d,m),s.fillStyle="white",s.fillText(p,d,m)}return r},"renderUnit"),Zi=Ju;var Pn,Ji=class extends Xi.Element{constructor(e,a=2){super((0,Xi.s)('<canvas width="32" height="32"></canvas>'));y(this,Pn,2);v(this,Pn,a),this.build(e)}build(e){let a=Zi(e),n=this.element().getContext("2d"),r=this.size(a.width),s=this.size(a.height),l=Math.floor((this.size(16)-r)/2),d=Math.floor((this.size(16)-s)/2);n.imageSmoothingEnabled=!1,n.drawImage(a,l,d,r,s)}element(){return super.element()}size(e){return e*u(this,Pn)}};o(Ji,"Unit"),Pn=new WeakMap;var Pe=Ji;var Qi=class extends er.Element{constructor(t,e,a=["UnitSupportFood","UnitSupportProduction","MilitaryUnhappiness"]){super((0,er.s)('<span class="supported-unit"></span>',new Pe(e),...t.yields.filter(n=>a.includes(n._)).filter(n=>n.unit.id===e.id).flatMap(n=>vn(n))))}};o(Qi,"SupportedUnit");var tr=Qi;var ar=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t,n=this.filterNeighbours(t,r=>t.terrain._==="River"&&r.isWater||t.terrain._===r.terrain._).join("");t.terrain._!=="Ocean"&&(n?this.drawImage(`terrain/${t.terrain._.toLowerCase()}_${n}`,e,a):this.drawImage(`terrain/${t.terrain._.toLowerCase()}`,e,a))}};o(ar,"Terrain");var nr=ar;var to=_(D());I();var Cl=o((i,t,e)=>(0,to.s)("<div></div>",...i.map(a=>{let n=new Pe(a);return E(n.element(),{click:()=>{a.active||(t.send("action",{name:"InactiveUnit",id:a.id}),e(a))}}),n})),"build"),rr,ir=class extends Y{constructor(e,a,n=()=>{}){super(g("UnitSelectionWindow.title"),(0,to.s)("<div></div>"));y(this,rr,void 0);let r=e.map(s=>s.id);v(this,rr,new ge(r,s=>{var d,m;let l=((m=(d=s.player)==null?void 0:d.units)!=null?m:[]).filter(p=>r.includes(p.id));if(!l.length){this.close();return}this.update(Cl(l,a,n))})),this.update(Cl(e,a,n))}};o(ir,"UnitSelectionWindow"),rr=new WeakMap;var sr=ir;var Ot,or=class extends Ce{constructor(){super(...arguments);y(this,Ot,null)}renderTile(e){super.renderTile(e);let{x:a,y:n}=e,r=this.tileSize(),s=a*r,l=n*r;if(e.units.length>0&&(u(this,Ot)!==null?u(this,Ot).tile.id!==e.id:!0)){let[d]=e.units.sort((p,c)=>{var h,f;return((h=c.defence)==null?void 0:h.value)-((f=p.defence)==null?void 0:f.value)}),m=this.renderUnit(d);e.units.length>1&&this.putImage(m,s-this.scale(),l-this.scale()),this.putImage(m,s,l)}}renderUnit(e){return Zi(e)}setActiveUnit(e){v(this,Ot,e)}activeUnit(){return u(this,Ot)}};o(or,"Units"),Ot=new WeakMap;var vt=or;var ba,lr=class extends Di{constructor(){super(...arguments);y(this,ba,null)}setCity(e){v(this,ba,e)}renderTile(e){let{x:a,y:n}=e,r=this.tileSize(),s=a*r,l=n*r;e.workedBy!==null&&u(this,ba)!==null&&e.workedBy.id!==u(this,ba).id&&(this.context().fillStyle="rgba(200, 64, 64, 0.5)",this.context().fillRect(s,l,r,r))}};o(lr,"Unworkable"),ba=new WeakMap;var ao=lr;var ur,wa,bt,wt,xt,dr=class{constructor(t){y(this,ur,o((t,e)=>({_:"Tile",__:["Tile","DataObject"],id:`Tile-${t}--${e}`,city:null,goodyHut:null,improvements:[],isCoast:!1,isLand:!1,isWater:!1,terrain:{_:"Unknown",__:["Unknown","Terrain","DataObject"],id:`UnknownTerrain-${t}--${e}`,features:[]},units:[],workedBy:null,x:t,y:e,yields:[]}),"#unknown"));y(this,wa,{});y(this,bt,void 0);y(this,wt,void 0);y(this,xt,void 0);v(this,wt,t.height),v(this,xt,t.width),v(this,bt,t.tiles||[])}get(t,e){for(;t<0;)t+=u(this,xt);for(;e<0;)e+=u(this,wt);for(;t>=u(this,xt);)t-=u(this,xt);for(;e>=u(this,wt);)e-=u(this,wt);let a=[t,e].toString();if(!(a in u(this,wa))){let n=u(this,bt).findIndex(r=>r.x===t&&r.y===e);if(n===-1)return u(this,ur).call(this,t,e);u(this,wa)[a]=n}return u(this,bt)[u(this,wa)[a]]}getNeighbour(t,e){if(e==="n")return this.get(t.x,t.y-1);if(e==="ne")return this.get(t.x+1,t.y-1);if(e==="e")return this.get(t.x+1,t.y);if(e==="se")return this.get(t.x+1,t.y+1);if(e==="s")return this.get(t.x,t.y+1);if(e==="sw")return this.get(t.x-1,t.y+1);if(e==="w")return this.get(t.x-1,t.y);if(e==="nw")return this.get(t.x-1,t.y-1);throw new TypeError("Invalid direction.")}height(){return u(this,wt)}tiles(){return u(this,bt)}width(){return u(this,xt)}setTiles(t){v(this,bt,t)}};o(dr,"World"),ur=new WeakMap,wa=new WeakMap,bt=new WeakMap,wt=new WeakMap,xt=new WeakMap;var cr=dr;var mr=class extends Di{renderTile(t){super.renderTile(t);let{x:e,y:a}=t,n=this.tileSize(),r=e*n,s=a*n,l=t.yields.reduce((c,h)=>c+h.value,0),d=t.yields.sort((c,h)=>c._.charCodeAt(0)-h._.charCodeAt(0)),m=0;if(l<5){let c=[[r,s],[r+n/2,s],[r,s+n/2],[r+n/2,s+n/2]];d.forEach(h=>{for(let f=0;f<h.value;f++)this.putImage(this.getPreloadedImage(`city/${h._.toLowerCase()}`),...c[m++])});return}if(l<7){let c=[[r,s],[r+n/3,s],[r+n/3*2,s],[r,s+n/2],[r+n/3,s+n/2],[r+n/3*2,s+n/2]];d.forEach(h=>{for(let f=0;f<h.value;f++)this.putImage(this.getPreloadedImage(`city/${h._.toLowerCase()}`),c[m][0],c[m++][1])});return}if(l<9){let c=[[r,s],[r+n/4,s],[r+n/4*2,s],[r+n/4*3,s],[r,s+n/2],[r+n/4,s+n/2],[r+n/4*2,s+n/2],[r+n/4*3,s+n/2]];d.forEach(h=>{for(let f=0;f<h.value;f++)this.putImage(this.getPreloadedImage(`city/${h._.toLowerCase()}`),...c[m++])});return}if(l<11){let c=[[r,s],[r+n/5,s],[r+n/5*2,s],[r+n/5*3,s],[r+n/5*4,s],[r,s+n/2],[r+n/5,s+n/2],[r+n/5*2,s+n/2],[r+n/5*3,s+n/2],[r+n/5*4,s+n/2]];d.forEach(h=>{for(let f=0;f<h.value;f++)this.putImage(this.getPreloadedImage(`city/${h._.toLowerCase()}`),...c[m++])});return}let p=[[r,s],[r+n/6,s],[r+n/6*2,s],[r+n/6*3,s],[r+n/6*4,s],[r+n/6*5,s],[r,s+n/2],[r+n/6,s+n/2],[r+n/6*2,s+n/2],[r+n/6*3,s+n/2],[r+n/6*4,s+n/2],[r+n/6*5,s+n/2]];d.forEach(c=>{for(let h=0;h<c.value;h++)this.putImage(this.getPreloadedImage(`city/${c._.toLowerCase()}`),...p[m++])})}};o(mr,"Yields");var xa=mr;var hr,Aa,Tn,pr=class{constructor(t=navigator.language,e=[...navigator.languages],a="en"){y(this,hr,void 0);y(this,Aa,void 0);y(this,Tn,void 0);v(this,Aa,t||a),v(this,Tn,e.length>0?e.includes(a)?e:[...e,a]:t?[t,a]:[a]),v(this,hr,a)}locale(){return u(this,Aa)}locales(){return u(this,Tn)}list(t,e){return new Intl.ListFormat(this.locales(),{style:"long",type:"conjunction",...e}).format(t)}number(t,e){return new Intl.NumberFormat(this.locales(),{maximumFractionDigits:0,...e}).format(t)}percent(t,e){return this.number(t,{style:"percent",maximumFractionDigits:0,...e})}setLocale(t){v(this,Aa,t)}timeSince(t,e){let a=new Intl.RelativeTimeFormat(this.locales(),e),n=Math.trunc((t.getTime()-Date.now())/1e3);if(Math.abs(n)<10)return"just now";let[r,s]=[[60,"seconds"],[60,"minutes"],[24,"hours"],[28,"days"],[12,"months"],[1/0,"years"]].reduce(([l,d,m],[p,c])=>m?[l,d,m]:Math.abs(l)<=p?[l,c,!0]:[Math.trunc(l/p),c,!1],[n,"seconds",!1]);return a.format(r,s)}};o(pr,"LocaleProvider"),hr=new WeakMap,Aa=new WeakMap,Tn=new WeakMap;var ie=new pr;I();var Xu=o((i,t)=>t.filter(e=>Pi[i].includes(e._)).reduce(([e,a],n)=>[e+(n.value<0?-n.value:0),a+n.value],[0,0]),"reduceYield"),Qu=o(i=>(0,H.s)('<div class="yields-detail"></div>',...[["Food"],["Production"],["Trade"],["Luxuries","Gold","Research"]].map(t=>(0,H.s)(`<div class="yields" data-yields="${t.join(" ")}"></div>`,...t.map(e=>(0,H.s)(`<span class="yield" data-yield="${e}"></span>`,...Xu(e,i.yields).map((a,n)=>(0,H.s)(`<span class="${["used","free"][n]}"></span>`,...vn({_:e,value:a}))))))),...Object.entries(i.yields.filter(t=>!Object.keys(gn).includes(t._)).reduce((t,e)=>(e._ in t||(t[e._]=0),t[e._]+=e.value,t),{})).map(([t,e])=>(0,H.s)(`<div><div>${g(`${t}.name`,{defaultValue:t,ns:"yield"})}</div><div>${e}</div></div>`))),"renderYields"),no=o(i=>{let t=i.querySelectorAll(".yields-detail .yield");Array.from(t).forEach(e=>{let[a,n]=Array.from(e.children);for(;a.scrollWidth+n.scrollWidth>e.clientWidth;){let r=parseInt(e.getAttribute("data-max-width")||"14",10);if(r===0)break;e.setAttribute("data-max-width",(r-1).toString())}})},"resizeYields"),ec=o((i,t,e)=>{let a=(0,H.s)("<canvas></canvas>"),n=new qi(new cr({...t.player.world,tiles:t.tiles}),e,a,{playerId:t.player.id,scale:i.scale(),tileSize:i.tileSize()/i.scale()},kn,Vi,nr,Wi,Gi,ji,An,vt,xa,ao);a.height=i.tileSize()*5,a.width=i.tileSize()*5,n.setCenter(t.tile.x,t.tile.y),n.build(t.tiles),n.getLayer(vt).render(t.tiles.filter(d=>d.units.some(m=>m.player.id!==t.player.id))),n.getLayer(xa).render(t.tilesWorked);let l=n.getLayer(ao);return l.setCity(t),l.render(t.tiles),n.render(),E((0,H.s)('<div class="city-map"></div>',a),{click:()=>e.send("action",{name:"ReassignWorkers",city:t.id})})},"renderMap"),tc=o((i,t,e)=>(0,H.s)('<div class="build"></div>',(0,H.s)("<header></header>",i.build.building&&Ne(i.build.building.item,"Unit")?new Pe({...i.build.building.item,player:i.player,improvements:[],busy:null}):g("City.Build.title",{item:ma(i.build.building)})),E((0,H.s)(`<button>${g(i.build.building?"City.Build.change":"City.Build.choose")}</button>`),{click(){t()}}),...i.build.spendCost.map(a=>E((0,H.s)(`<button class="buy" data-resource="${a.resource._}">${g("City.Build.buy-with",{spendCost:a})}</button>`),{click(){e(a)}})),i.build.building?(0,H.s)(`<p>${qs(i.build,i.yields,"Production")}</p>`):""),"renderBuild"),ac=o(i=>(0,H.s)(`<div class="growth"><header>${g("City.Growth.title")}</header><p>${g("City.Growth.size",{size:ie.number(i.growth.size)})}</p><p>${qs(i.growth,i.yields,"Food")}</p></div>`),"renderGrowth"),nc=o(i=>(0,H.s)('<div class="improvements"></div>',(0,H.s)("<div></div>",...i.improvements.map(t=>(0,H.s)(`<div>${g(`Improvement.${t._}.name`,{defaultValue:t._,ns:"city"})}</div>`,...i.yields.filter(e=>e._==="CityImprovementMaintenanceGold"&&e.cityImprovement.id===t.id).flatMap(e=>vn(e)))))),"renderImprovements"),ic=o((i,t)=>E((0,H.s)(`<div class="garrisoned-units"><header>${g("City.GarrisonedUnits.title")}</header></div>`,(0,H.s)('<div class="units"></div>',...i.tile.units.map(e=>new Pe(e).element()))),{click(){let e=i.tile.units.filter(a=>a.player.id===i.player.id);e.length!==0&&new sr(e,t)}}),"renderGarrisonedUnits"),rc=o(i=>(0,H.s)(`<div class="supported-units"><header>${g("City.SupportedUnits.title")}</header></div>`,(0,H.s)('<div class="units"></div>',...i.units.map(t=>new tr(i,t)))),"renderSupportedUnits"),kl=o((i,t,e,a,n)=>(0,H.s)('<div class="city-screen"></div>',(0,H.s)('<div class="top-row"></div>',(0,H.s)('<div class="yield-details"></div>',yn(i),Qu(i),rc(i)),ec(t,i,e),nc(i)),(0,H.s)('<div class="bottom-row"></div>',ac(i),(0,H.s)('<div class="tabbed-details"></div>',(0,H.s)('<div class="info"></div>',ic(i,e))),tc(i,a,n))),"cityDetails"),gr=o((i,t)=>i.treasuries.filter(e=>e.yield._===t)[0],"getTreasuryForYield"),at,Ca,Mn,ka,En,fr=class extends Y{constructor(e,a,n){super(K(e),kl(e,a,n,()=>this.changeProduction(),s=>this.completeProduction(s)),{canResize:!0,canMaximise:!0,classes:"city-screen-window",size:"maximised"});y(this,at,void 0);y(this,Ca,void 0);y(this,Mn,void 0);y(this,ka,void 0);y(this,En,void 0);setTimeout(()=>no(this.element()),200),v(this,at,e),v(this,Mn,a),v(this,ka,n),v(this,En,gr(e.player,"Gold")),v(this,Ca,new ge([e.id,e.build.id,e.growth.id,...e.units.map(s=>s.id),gr(e.player,"Gold").id],s=>{var d,m;let[l]=((m=(d=s.player)==null?void 0:d.cities)!=null?m:[]).filter(p=>e.id===p.id);if(v(this,En,gr(s.player,"Gold")),!l){this.close();return}v(this,at,l),u(this,Ca).setIds([l.id,l.build.id,l.growth.id,...l.units.map(p=>p.id)]),this.update(kl(l,u(this,Mn),n,()=>this.changeProduction(),p=>this.completeProduction(p))),this.element().focus(),setTimeout(()=>no(this.element()),200)})),this.on("keydown",s=>{if(["c","C"].includes(s.key)&&(this.changeProduction(),s.preventDefault(),s.stopPropagation()),["b","B"].includes(s.key)){let l=this.queryAll("button.buy");(0,H.emit)(l[0],new MouseEvent("click")),s.preventDefault(),s.stopPropagation()}["Enter","x","X"].includes(s.key)&&this.close()});let r=o(()=>setTimeout(()=>no(this.element()),200),"resizeHandler");this.on("close",()=>window.removeEventListener("resize",r)),window.addEventListener("resize",r),this.on("close",()=>this.off("resize",r)),this.on("resize",r)}changeProduction(){new Fi(u(this,at).build,u(this,ka),()=>this.element().focus())}close(){u(this,Ca).dispose(),super.close()}completeProduction(e){let a=u(this,at).build;if(!a.building)return;let n=gr(u(this,at).player,e.resource._);new Dt(g("ConfirmationWindow.Generic.title"),g("City.CompleteProduction.body",{item:Ys(a.building.item),spendCost:e,treasury:n}),()=>u(this,ka).send("action",{name:"CompleteProduction",id:u(this,at).build.id,treasury:n.id}))}};o(fr,"City"),at=new WeakMap,Ca=new WeakMap,Mn=new WeakMap,ka=new WeakMap,En=new WeakMap;var We=fr;I();var sc=o((i,t,e)=>({label:g("Actions.ShowCity.label",{cityName:K(i)}),action(a){a.close(),new We(i,t,e)}}),"showCityAction"),yr=sc;I();var oc=o((i,t)=>({label:g("Actions.ShowOnMap.label",{cityName:K(i)}),action(e){e.close(),t.setCenter(i.tile.x,i.tile.y)}}),"showCityOnMapAction"),vr=oc;I();var Ra,br=class extends he{constructor(e,a,n){super(e,n);y(this,Ra,void 0);v(this,Ra,a)}activate(){new Fi(this.value(),this.transport(),()=>this.complete(),{showCity:yr(this.value().city,u(this,Ra),this.transport()),showCityOnMap:vr(this.value().city,u(this,Ra))})}build(){let e=this.value();$.get("./assets/city/production.png").then(a=>this.append((0,Rl.s)(`<button class="large cityBuild" title="${g("Actions.CityBuildSelectionWindow.title",{cityName:K(e.city)})}"><img src="${a.uri}"></button>`)))}value(){return super.value()}};o(br,"CityBuild"),Ra=new WeakMap;var Il=br;var Sl=_(D());I();var Ia,wr=class extends he{constructor(e,a,n){super(e,n);y(this,Ia,void 0);v(this,Ia,a)}activate(){let e=this.value();new Ii(g("Actions.CivilDisorder.title",{cityName:K(e)}),g("Actions.CivilDisorder.body",{cityName:K(e)}),{actions:{showCity:yr(e,u(this,Ia),this.transport()),showCityOnMap:vr(e,u(this,Ia))}})}build(){let e=this.value();$.get("./assets/city/people_unhappy_m.png").then(a=>this.append((0,Sl.s)(`<button class="civilDisorder" title="${g("Actions.CivilDisorder.title",{cityName:K(e)})}"><img src="${a.uri}"></button>`)))}};o(wr,"CivilDisorder"),Ia=new WeakMap;var Pl=wr;var Tl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItY2hlY2stY2lyY2xlIj48cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0Ij48L3BhdGg+PHBvbHlsaW5lIHBvaW50cz0iMjIgNCAxMiAxNC4wMSA5IDExLjAxIj48L3BvbHlsaW5lPjwvc3ZnPg==";var Ml=_(D());I();var xr=class extends he{activate(){this.element().setAttribute("disabled",""),this.transport().send("action",{name:"EndTurn"})}build(){this.append((0,Ml.s)(`<button class="large gradient endTurn" title="${g("Actions.EndTurn.title")}"><img src="${Tl}"</button>`))}};o(xr,"EndTurn");var El=xr;var Fl=_(D());I();var Ar=class extends he{activate(){let t=new mt(g("Actions.Revolution.title"),this.value().available.map(e=>({value:e._})),e=>{!e||(this.transport().send("action",{name:"Revolution",id:this.value().id,chosen:e||"@"}),this.complete(),t.close())},g("Actions.Revolution.body"),{displayAll:!0})}build(){$.get("./assets/city/sad.png").then(t=>this.append((0,Fl.s)(`<button class="chooseGovernment small" title="${g("Actions.Revolution.title")}"><img src="${t.uri}"></button>`)))}value(){return super.value()}};o(Ar,"Revolution");var _l=Ar;var Dl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItZ2xvYmUiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48bGluZSB4MT0iMiIgeTE9IjEyIiB4Mj0iMjIiIHkyPSIxMiI+PC9saW5lPjxwYXRoIGQ9Ik0xMiAyYTE1LjMgMTUuMyAwIDAgMSA0IDEwIDE1LjMgMTUuMyAwIDAgMS00IDEwIDE1LjMgMTUuMyAwIDAgMS00LTEwIDE1LjMgMTUuMyAwIDAgMSA0LTEweiI+PC9wYXRoPjwvc3ZnPg==";var zt=_(D());I();var Cr=class extends he{activate(){let t=this.value(),e=t.yields.reduce((d,m)=>m._ in d?m.value<0?(d[m._][1]+=Math.abs(m.value),d):(d[m._][0]+=m.value,d):d,{Energy:[0,0],LifeSupport:[0,0],Mass:[0,0],Population:[0,0]}),a=t.activeParts.reduce((d,m)=>(m._ in d&&d[m._]++,d),{Structural:0,Fuel:0,Propulsion:0,Habitation:0,LifeSupport:0,Power:0}),n=t.inactiveParts.reduce((d,m)=>(m._ in d&&d[m._]++,d),{Structural:0,Fuel:0,Propulsion:0,Habitation:0,LifeSupport:0,Power:0}),r=[[g("Actions.Spaceship.chance-of-success"),ie.percent(t.chanceOfSuccess)],[g("Actions.Spaceship.flight-time"),ie.number(t.flightTime,{style:"unit",unit:"year",unitDisplay:"long"})],[g("Actions.Spaceship.has-launched"),g(t.launched?"Generic.yes":"Generic.no")],[g("Actions.Spaceship.mass"),ie.number(e.Mass[0]*1e3,{style:"unit",unit:"kilogram"})],[g("Actions.Spaceship.population"),ie.number(e.Population[0])],[g("Actions.Spaceship.energy"),ie.percent(e.Energy[1]>0?e.Energy[0]/e.Energy[1]:0)],[g("Actions.Spaceship.life-support"),ie.percent(e.LifeSupport[1]>0?e.LifeSupport[0]/e.LifeSupport[1]:0)]],s=o(()=>{this.transport().send("action",{name:"LaunchSpaceship",id:t.id}),l.close()},"launch"),l=new Y(g("Actions.Spaceship.spaceship-name",{nation:g(`${t.player.civilization._}.name`,{defaultValue:t.player.civilization._,ns:"civilization"})}),(0,zt.s)("<div></div>",(0,zt.s)(`<dl>${Object.entries(a).map(([d,m])=>`<dd>${g(`${d}.name`,{defaultValue:d,ns:"spaceship"})}</dd><dt>${ie.number(m)}${n[d]===0?"":` <span class="inactive">${g("Actions.Spaceship.inactive-part",{inactiveParts:n[d]})}</span>`}</dt>`).join("")}</dl>`),(0,zt.s)(`<dl>${r.map(([d,m])=>`<dd>${d}</dd><dt>${m}</dt>`).join("")}</dl>`),(0,zt.s)("<footer></footer>",E((0,zt.s)(`<button${t.launched||t.chanceOfSuccess===0?" disabled":""}>${g(t.launched?"Actions.Spaceship.launched":"Actions.Spaceship.launch")}</button>`),{keydown(d){["Enter"," "].includes(d.key)&&s()},click(){s()}}))));l.addClass("spaceship")}build(){this.append((0,zt.s)(`<button class="spaceship" title="${g("Actions.Spaceship.title")}"><img src="${Dl}"/></button>`))}value(){return super.value()}};o(Cr,"Spaceship");var Ll=Cr;var Sa,Te,kr=class extends Rr.Element{constructor(e=(0,Rr.s)('<div class="actions"></div>'),a,n){super(e);y(this,Sa,void 0);y(this,Te,void 0);v(this,Sa,a),v(this,Te,n),this.on("actioned",r=>r.detail.remove()),this.on("keydown",r=>{var c;let s=document.activeElement;if(!this.element().contains(s))return;let l=ut(r),d=Array.from(this.element().children);if(!["ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(l)||d.length===0)return;r.preventDefault(),r.stopPropagation();let m=s===this.element()?["ArrowLeft","ArrowUp"].includes(l)?s.firstElementChild:s.lastElementChild:s;for(;m.parentElement!==this.element();)m=m.parentElement;let p=d.indexOf(m);if(["ArrowUp","ArrowLeft"].includes(l)){if(p>0){(c=d[p-1].querySelector("button"))==null||c.focus();return}d.pop().querySelector("button").focus();return}if(["ArrowDown","ArrowRight"].includes(l)){if(p<d.length-1){d[p+1].querySelector("button").focus();return}d.shift().querySelector("button").focus();return}},!0)}build(e){this.empty(),e.forEach(a=>{let n;switch(a._){case"ActiveUnit":return;case"AdjustTradeRates":n=new ul(a,u(this,Te));break;case"ChooseResearch":n=new hl(a,u(this,Te));break;case"CityBuild":n=new Il(a,u(this,Sa),u(this,Te));break;case"CivilDisorder":n=new Pl(a,u(this,Sa),u(this,Te));break;case"EndTurn":n=new El(a,u(this,Te));break;case"LaunchSpaceship":n=new Ll(a,u(this,Te));break;case"Revolution":n=new _l(a,u(this,Te));break;case"ChangeProduction":case"CompleteProduction":case"InactiveUnit":return;default:console.log("need to handle "+a._);return}this.element().prepend(E(n.element(),{click:()=>n.activate(),keydown:({key:r})=>{(r===" "||r==="Enter")&&n.activate()}}))})}};o(kr,"Actions"),Sa=new WeakMap,Te=new WeakMap;var io=kr;var Ir=class extends vt{render(){this.clear();let t=this.activeUnit();if(t===null)return;let{x:e,y:a}=t.tile,n=this.world().get(e,a),r=this.tileSize(),s=e*r,l=a*r,d=this.renderUnit(t);n.units.length>1&&this.putImage(d,s-this.scale(),l-this.scale()),this.putImage(d,s,l)}update(){this.render()}};o(Ir,"ActiveUnit");var ro=Ir;var Sr=class extends Ce{renderTile(t){if(!t.city)return;super.renderTile(t);let{x:e,y:a}=t,n=this.tileSize(),r=e*n,s=a*n,l=t.city,d=this.tileSize()/2,m=this.tileSize()*.75,p=this.tileSize()/2,c=this.tileSize()*1.6;this.context().font=`bold ${8*this.scale()}px sans-serif`,this.context().fillStyle="black",this.context().textAlign="center",this.context().fillText(ie.number(l.growth.size),r+d+this.scale(),s+m),this.context().fillText(K(l),r+p+this.scale(),s+c),this.context().fillStyle="white",this.context().fillText(ie.number(l.growth.size),r+d,s+m-this.scale()),this.context().fillText(K(l),r+p,s+c-this.scale())}update(){this.clear(),this.world().tiles().filter(t=>!!t.city).forEach(t=>this.renderTile(t))}};o(Sr,"CityNames");var so=Sr;var Gt=_(D());I();var uc=o(async i=>{let[t,e,a,n,r,s]=["Food","Production","Trade","Research","Gold","Luxuries"].map(f=>Ti(i,f)),[l,d,m,p,c,h]=await Promise.all(["Food","Production","Trade","Research","Gold","Luxuries"].map(f=>$.getScaled(`./assets/${je[f]}`,2).then(w=>`<img src="${w.toDataURL("image/png")}">`)));return[(0,Gt.s)(`<header>${K(i)}</header>`),(0,Gt.s)(`<div class="growth"><strong>${g("City.size",i.growth)}</strong> ${l} ${g("CityStatus.growth",{free:t[2],total:t[0],totals_context:t[0]===t[2]?"equal":"unequal",turns:pt(i.growth,i.yields,"Food")})}</div>`),(0,Gt.s)(`<div class="build">${d}  ${g("CityStatus.build",{free:e[2],total:e[0],context:i.build.building?"nonempty":"empty",totals_context:e[0]===e[2]?"equal":"unequal",buildable:ma(i.build.building),turns:i.build.building?pt(i.build,i.yields,"Production"):1/0})}</div>`),(0,Gt.s)(`<div class="yields">${[[a,m],[n,p],[r,c],[s,h]].filter(([[f]])=>f!==0).map(([[f,,w],C])=>`${C} ${g("CityStatus.totals",{free:w,total:f,context:w===f?"equal":"unequal"})}`).join(", ")}</div>`)]},"buildCityRow"),Nt,Pa,Fn,_n,Pr=class extends Y{constructor(e,a,n){super(g("CityStatus.title"),(0,Gt.s)('<div class="loading"></div>'),{classes:"city-status"});y(this,Nt,void 0);y(this,Pa,void 0);y(this,Fn,void 0);y(this,_n,void 0);v(this,Nt,e.cities),v(this,Pa,new ge([e.id,...e.cities.flatMap(({id:r,build:s,growth:l})=>[r,l.id,s.id])],r=>{let s=r.player;v(this,Nt,s.cities),u(this,Pa).setIds([s.id,...s.cities.flatMap(({id:l,build:d,growth:m})=>[l,m.id,d.id])]),this.update()})),v(this,Fn,a),v(this,_n,n),this.update()}close(){return u(this,Pa).dispose(),super.close()}update(){Promise.all(u(this,Nt).map(e=>uc(e))).then(e=>super.update((0,Gt.s)("<table></table>",...e.map(([a,n,r,s],l)=>{let d=document.createElement("tr");return d.append(...[[a,"th"],[n,"td"],[r,"td"],[s,"td"]].map(([m,p])=>{let c=document.createElement(p);return c.append(m),c})),E(d,{click:()=>new We(u(this,Nt)[l],u(this,Fn),u(this,_n))})}))))}};o(Pr,"CityStatus"),Nt=new WeakMap,Pa=new WeakMap,Fn=new WeakMap,_n=new WeakMap;var Tr=Pr;var Er=_(D());I();var Dn,Ln,Mr=class extends Er.Element{constructor(e,a,n){super(e);y(this,Dn,void 0);y(this,Ln,void 0);v(this,Dn,a),v(this,Ln,n)}build(){this.empty(),this.append((0,Er.s)(`<h3><span class="year">${this.year()}</span><span class="turn">${g("GameDetails.turn",{turn:u(this,Dn).value})}</span></h3>`))}year(e=u(this,Ln).value){return g("GameDetails.year",{year:Math.abs(e)||1,context:e<0?"bce":"ce"})}};o(Mr,"GameDetails"),Dn=new WeakMap,Ln=new WeakMap;var Ul=Mr;var Hr=_(D());var Ta=class{#t=[];#e=[];constructor(...t){this.#t.push(...t)}accepts(t){return this.#t.some(e=>t instanceof e)}entries(){return this.#e.slice()}every(t){return this.entries().every(t)}filter(t){return this.entries().filter(t)}forEach(t){return this.entries().forEach(t)}getBy(t,e){return this.filter(a=>{let n=a[t];return n instanceof Function?n.bind(a)()===e:a[t]===e})}includes(t){return this.#e.includes(t)}indexOf(t){return this.#e.indexOf(t)}get length(){return this.entries().length}map(t){return this.entries().map(t)}register(...t){t.forEach(e=>{if(!this.accepts(e))throw new TypeError(`Registry#register: Invalid entity attempted to be registered: '${e}'.`);this.#e.includes(e)||this.#e.push(e)})}some(t){return this.entries().some(t)}unregister(...t){t.forEach(e=>{let a=this.#e.indexOf(e);a>-1&&this.#e.splice(a,1)})}};o(Ta,"EntityRegistry");var Fr=Ta;var Un,Bn,_r=class{constructor(t,e){y(this,Un,void 0);y(this,Bn,void 0);v(this,Un,t),v(this,Bn,e)}key(){return u(this,Un)}value(){return u(this,Bn)}};o(_r,"GameOption"),Un=new WeakMap,Bn=new WeakMap;var oo=_r;var Dr=class extends Fr{constructor(){super(oo)}get(t){let[e]=this.getBy("key",t);return e?e.value():null}set(t,e){let a=this.getBy("key",t);a.length&&this.unregister(...a),this.register(new oo(t,e))}};o(Dr,"GameOptionsRegistry");var Ma=new Dr;var Lr=_(D());I();var Ur=class extends Y{constructor(){super("Options",(0,Lr.s)("<div></div>",(0,Lr.s)(`<label>${g("GameOptions.auto-end-turn")}</label>`,(()=>{let t=(0,Lr.s)(`<input type="checkbox"${Ma.get("autoEndOfTurn")?" checked":""}>`);return E(t,{change:()=>Ma.set("autoEndOfTurn",t.checked)})})()))),this.addClass("game-options")}};o(Ur,"GameOptions");var Bl=Ur;var He=_(D());I();var cc=o(async(i,t,e)=>{let a={CityImprovementContent:l=>l.cityImprovement._,MartialLaw:l=>new Pe(l.unit),MilitaryUnhappiness:l=>new tr(i,l.unit,["MilitaryUnhappiness"]),LuxuryHappiness:()=>{let l=(0,He.s)("<span></span>");return $.getScaled(`./assets/${je.Luxuries}`,2).then(d=>l.append((0,He.s)(`<img src="${d.toDataURL("image/png")}">`),ie.number(pa(i.yields,"Luxuries")))),l}},n=i.yields.filter(l=>Ne(l,"Happiness","Unhappiness")&&l.value!==0),r=n.map((l,d)=>(0,He.s)('<div class="reason"></div>',yn(i,n.slice(0,d+1)),(0,He.s)('<div class="detail"></div>',a[l._]?a[l._](l):l._))),s=(0,He.s)('<div class="reasons hidden"></div>',...r);return E((0,He.s)(`<div class="city${i.celebrateLeader?" celebrateLeader":""}${i.civilDisorder?" civilDisorder":""}"><div class="name">${K(i)}</div></div>`,yn(i),E((0,He.s)(`<button>${g("HappinessReport.view-city",{cityName:K(i)})}</button>`),{click(l){l.stopPropagation(),new We(i,t,e)}}),s),{click(){r.length!==0&&s.classList.toggle("hidden")}})},"buildCityRow"),Ea,Fa,On,zn,Br=class extends Y{constructor(e,a,n){super("Happiness report",(0,He.s)("<div></div>"),{classes:"happiness-report"});y(this,Ea,void 0);y(this,Fa,void 0);y(this,On,void 0);y(this,zn,void 0);this.element().setAttribute("data-i18n-breakdown",g("HappinessReport.breakdown")),v(this,Ea,new ge([e.id,...e.cities.map(r=>r.id)],r=>{v(this,Fa,r.player),u(this,Ea).setIds([e.id,...e.cities.map(s=>s.id)]),this.update()})),v(this,Fa,e),v(this,On,a),v(this,zn,n),this.update()}close(){return u(this,Ea).dispose(),super.close()}update(){Promise.all(u(this,Fa).cities.map(e=>cc(e,u(this,On),u(this,zn)))).then(e=>super.update((0,He.s)("<div></div>",...e)))}};o(Br,"HappinessReport"),Ea=new WeakMap,Fa=new WeakMap,On=new WeakMap,zn=new WeakMap;var Or=Br;var Me=_(D());I();var lo=new Map,Gn,Da,Nn,jn,Ve,_a=class extends Me.Element{constructor(e,a,n,r,s={}){super((0,Me.s)('<div class="popup-menu hide"></div>'));y(this,Gn,[]);y(this,Da,o(()=>{},"#targetPointerUpListener"));y(this,Nn,void 0);y(this,jn,void 0);y(this,Ve,{align:"left",fullWidth:!1,target:document.body});lo.has(e)&&lo.get(e).remove(),lo.set(e,this),v(this,Gn,r),v(this,Nn,a),v(this,jn,n),v(this,Ve,{...u(this,Ve),...s}),this.build()}build(){let e=u(this,Gn);if(e.length===0){this.remove();return}this.element().style.setProperty("left",u(this,Nn)+"px"),this.element().style.setProperty("top",u(this,jn)+"px"),this.removeClass("hide"),this.append(...e.map(({action:a,label:n})=>{let r=(0,Me.s)(`<button>${n}</button>`);return(0,Me.on)(r,"pointerup",()=>{a(this),this.remove()}),r}),E((0,Me.s)(`<button class="close" aria-label="${g("Generic.close")}">&times;</button>`),{pointerup:()=>this.remove()})),this.addClass(u(this,Ve).align),u(this,Ve).fullWidth&&this.addClass("full-width"),v(this,Da,()=>this.remove()),(0,Me.on)(u(this,Ve).target,"pointerup",u(this,Da)),u(this,Ve).target.append(this.element())}remove(){this.addClass("hide"),setTimeout(()=>{super.remove()},250),(0,Me.off)(u(this,Ve).target,"pointerup",u(this,Da))}};o(_a,"PopupMenu"),Gn=new WeakMap,Da=new WeakMap,Nn=new WeakMap,jn=new WeakMap,Ve=new WeakMap;var Ol=_a;var zl=o(i=>i.cities.reduce((t,e)=>t.concat(e.yields),[]),"combinedYields");var uo=_(D());I();var mc=o(async(i,t)=>{var a;let e=await $.getScaled(`./assets/${je.Research}`,2).then(n=>`<img src="${n.toDataURL("image/png")}">`);return(0,uo.s)(`<div><p><strong>${g("ScienceReport.researching",{researching:(a=i.researching)==null?void 0:a._,context:i.researching?"researching":"notresearching"})}</strong></p><p>${g("ScienceReport.progress",{progress:i.progress.value,total:i.cost.value,turns:pt(i,t,"Research"),context:i.researching?"researching":"notresearching"})}</p><p>${e} ${g("Progress.per-turn",{count:pa(t,"Research")})}</p><div class="discovered">${i.complete.map(n=>`<div>${g(`${n._}.name`,{defaultValue:n._,ns:"science"})}</div>`).join("")}</div></div>`)},"template"),La,jt,zr=class extends Y{constructor(e){super(g("ScienceReport.title"),(0,uo.s)("<div></div>"),{classes:"science-report"});y(this,La,void 0);y(this,jt,void 0);v(this,jt,e),this.update(),v(this,La,new ge([e.id,e.research.id,...e.cities.map(a=>a.id)],a=>{let n=a.player;u(this,La).setIds([n.id,n.research.id,...n.cities.map(r=>r.id)]),v(this,jt,n),this.update()}))}close(){return u(this,La).dispose(),super.close()}update(){mc(u(this,jt).research,zl(u(this,jt))).then(e=>super.update(e))}};o(zr,"ScienceReport"),La=new WeakMap,jt=new WeakMap;var Gr=zr;var nt=_(D());I();var Ua,Ba,$n,Wn,Nr=class extends Y{constructor(e,a,n){super(g("TradeReport.title"),(0,nt.s)('<div class="loading"></div>'),{classes:"trade-report"});y(this,Ua,void 0);y(this,Ba,void 0);y(this,$n,void 0);y(this,Wn,void 0);v(this,Ua,e.cities),v(this,Ba,new ge([e.id,...e.cities.flatMap(({id:r,build:s,growth:l})=>[r,l.id,s.id])],r=>{let s=r.player;v(this,Ua,s.cities),u(this,Ba).setIds([s.id,...s.cities.flatMap(({id:l,build:d,growth:m})=>[l,m.id,d.id])]),this.update()})),v(this,$n,a),v(this,Wn,n),this.update()}close(){return u(this,Ba).dispose(),super.close()}async update(){let e=await $.getScaled(`./assets/${je.Gold}`,2).then(m=>`<img src="${m.toDataURL("image/png")}">`),a=(0,nt.s)('<table class="city-list"></table>'),n=(0,nt.s)('<table class="improvement-list"></table>'),r={},[s,l,d]=u(this,Ua).reduce(([m,p,c],h)=>{h.yields.forEach(b=>{if(b._==="CityImprovementMaintenanceGold"){let x=b.cityImprovement;x._ in r||(r[x._]={count:0,cost:b.value}),r[x._].count++}});let[f,w,C]=Ti(h,"Gold"),A=document.createElement("tr");return E(A,{click:()=>new We(h,u(this,$n),u(this,Wn))}),A.append(...[K(h),`${e} ${g("CityStatus.totals",{total:f,free:C,context:C===f?"equal":"unequal"})}`].map(b=>{let x=document.createElement("td");return x.innerHTML=b,x})),a.append(A),[m+f,p+w,c+C]},[0,0,0]);n.append(...Object.entries(r).map(([m,{count:p,cost:c}])=>{let h=document.createElement("tr");return h.append(...[g("TradeReport.ImprovementList.item",{count:p,name:m}),g("TradeReport.ImprovementList.cost",{icon:e,total:Math.abs(p*-c)})].map(f=>{let w=document.createElement("td");return w.innerHTML=f,w})),h})),super.update((0,nt.s)("<div></div>",(0,nt.s)('<div class="two-column-wrapper"></div>',(0,nt.s)("<div></div>",a),(0,nt.s)("<div></div>",n,(0,nt.s)(`    <dl class="totals">
      <dt>${g("TradeReport.ImprovementList.income-title")}</dt>
      <dd>${g("TradeReport.ImprovementList.income-value",{icon:e,count:s})}</dd>
      <dt>${g("TradeReport.ImprovementList.cost-title")}</dt>
      <dd>${g("TradeReport.ImprovementList.income-value",{icon:e,count:Math.abs(l)})}</dd>
      <dt>${g("TradeReport.ImprovementList.surplus-title")}</dt>
      <dd>${g("TradeReport.ImprovementList.income-value",{icon:e,count:d})}</dd>
    </dl>
`)))))}};o(Nr,"TradeReport"),Ua=new WeakMap,Ba=new WeakMap,$n=new WeakMap,Wn=new WeakMap;var jr=Nr;var Gl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItbWVudSI+PGxpbmUgeDE9IjMiIHkxPSIxMiIgeDI9IjIxIiB5Mj0iMTIiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjYiIHgyPSIyMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjE4IiB4Mj0iMjEiIHkyPSIxOCI+PC9saW5lPjwvc3ZnPg==";I();var Wr,it,$t,Wt,$r=class extends Hr.Element{constructor(e,a,n,r){super(e);y(this,Wr,void 0);y(this,it,void 0);y(this,$t,void 0);y(this,Wt,void 0);v(this,it,a),v(this,$t,n),v(this,Wt,r),v(this,Wr,new ge([a.id],s=>v(this,it,s.player)))}build(){let e=(0,Hr.s)(`<button><img src="${Gl}"></button>`);this.append(E(e,{click:()=>{let{offsetLeft:a,offsetTop:n}=this.element(),{offsetLeft:r,offsetTop:s}=e;new Ol(this,a+r,n+s,[{label:g("GameMenu.options"),action(){new Bl}},{label:g("GameMenu.city-status"),action:()=>{new Tr(u(this,it),u(this,$t),u(this,Wt))}},{label:g("GameMenu.happiness-report"),action:()=>{new Or(u(this,it),u(this,$t),u(this,Wt))}},{label:g("GameMenu.trade-report"),action:()=>{new jr(u(this,it),u(this,$t),u(this,Wt))}},{label:g("GameMenu.science-report"),action:()=>{new Gr(u(this,it))}}],{align:"right",fullWidth:!0})}}))}};o($r,"GameMenu"),Wr=new WeakMap,it=new WeakMap,$t=new WeakMap,Wt=new WeakMap;var Nl=$r;var Kr=_(D());I();var hc=o((i,t,e)=>{let a=[];i===t.tile&&(a=t.actions);let[n]=Object.entries(t.actionsForNeighbours).filter(([,s])=>{let[l]=s;return l?l.to===i:!1}),[,r]=n!=null?n:[];return r&&(a=r),a.map(s=>{let l=o(()=>e.send("action",{name:"ActiveUnit",id:t.id,unitAction:s._,target:s.to.id}),"perform");return["SneakAttack","SneakCaptureCity"].includes(s._)?{label:g(`Action.${s._}.name`,{defaultValue:s._,ns:"unit"}),action:()=>new Dt(g("SneakAttack.title"),g("SneakAttack.body",{nation:g(`${s.enemy.civilization._}.nation`,{defaultValue:s.enemy.civilization._,ns:"civilization"})}),()=>l())}:{label:g(`Action.${s._}.name`,{defaultValue:s._,ns:"unit"}),action:()=>l()}})},"buildActions"),co=o(()=>{},"bodyListener"),Vr=class extends _a{constructor(t,e,a,n,r,s){super(t,e,a,hc(r,n,s),{align:"center"}),this.addClass("unit-actions")}build(){co=o(t=>{let e=document.elementFromPoint(t.pageX,t.pageY);!(e!=null&&e.matches(".popup-menu button"))||(t.preventDefault(),e.dispatchEvent(new PointerEvent("pointerup")))},"bodyListener"),(0,Kr.on)(document.body,"pointerup",co),super.build()}remove(){super.remove(),(0,Kr.off)(document.body,"pointerup",co)}};o(Vr,"UnitActionMenu");var jl=Vr;var Yr=_(D());var Oa,Ht,qr=class extends qi{constructor(){super(...arguments);y(this,Oa,null);y(this,Ht,null)}bindEvents(){(0,Yr.on)(this.canvas(),"pointerup",a=>{let n=document.elementFromPoint(a.pageX,a.pageY);if(n!=null&&n.matches(".unit-actions *"))return;this.clearTimeout();let r=this.tileFromOffsets(a.offsetX,a.offsetY),s=r.units.filter(l=>l.player.id===this.playerId());if(r.city&&r.city.player.id===this.playerId())new We(r.city,this,this.transport());else if(s.length){new sr(s,this.transport(),l=>this.emit("activate-unit",l));return}this.setCenter(r.x,r.y)});let e=o((a,n,r)=>{this.clearTimeout(),u(this,Oa)!==null&&v(this,Ht,window.setTimeout(()=>new jl(this,n,r,u(this,Oa),a,this.transport()),350))},"showActionMenu");(0,Yr.on)(this.canvas(),"touchstart",a=>a.preventDefault()),(0,Yr.on)(this.canvas(),"pointerdown",a=>{a.preventDefault(),e(this.tileFromOffsets(a.offsetX,a.offsetY),a.x,a.y)})}clearTimeout(){u(this,Ht)!==null&&(window.clearTimeout(u(this,Ht)),v(this,Ht,null))}setActiveUnit(e=null){v(this,Oa,e)}tileFromOffsets(e,a){let n=this.center(),r={x:Math.floor(this.canvas().width/2-this.tileSize()/2),y:Math.floor(this.canvas().height/2-this.tileSize()/2)},s=n.x+Math.trunc(((e-r.x)/this.tileSize()+this.world().width())%this.world().width()),l=n.y+Math.trunc(((a-r.y)/this.tileSize()+this.world().height())%this.world().height());return this.world().get(s,l)}};o(qr,"GamePortal"),Oa=new WeakMap,Ht=new WeakMap;var $l=qr;var Zr=class extends fe{renderTile(t){if(super.renderTile(t),t.terrain._==="Unknown")return;let{x:e,y:a}=t;t.goodyHut!==null&&this.drawImage("map/hut",e,a)}};o(Zr,"Terrain");var Wl=Zr;var Vt,At,Jr=class{constructor(t=500){y(this,Vt,!1);y(this,At,[]);setInterval(()=>this.check(),t)}check(){u(this,Vt)||u(this,At).forEach(t=>t())}clear(){v(this,At,[])}off(t){v(this,At,u(this,At).filter(e=>e!==t))}on(t){u(this,At).push(t)}pause(){v(this,Vt,!0)}isPaused(){return u(this,Vt)}resume(){v(this,Vt,!1)}};o(Jr,"IntervalHandler"),Vt=new WeakMap,At=new WeakMap;var Hl=Jr;Ss();Ms();var Zl=[],gc=Zl.forEach,fc=Zl.slice;function yc(i){return gc.call(fc.call(arguments,1),function(t){if(t)for(var e in t)i[e]===void 0&&(i[e]=t[e])}),i}o(yc,"defaults");var Vl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vc=o(function(t,e,a){var n=a||{};n.path=n.path||"/";var r=encodeURIComponent(e),s="".concat(t,"=").concat(r);if(n.maxAge>0){var l=n.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+="; Max-Age=".concat(Math.floor(l))}if(n.domain){if(!Vl.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain=".concat(n.domain)}if(n.path){if(!Vl.test(n.path))throw new TypeError("option path is invalid");s+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},"serializeCookie"),Kl={create:o(function(t,e,a,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+a*60*1e3)),n&&(r.domain=n),document.cookie=vc(t,encodeURIComponent(e),r)},"create"),read:o(function(t){for(var e="".concat(t,"="),a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},"read"),remove:o(function(t){this.create(t,"",-1)},"remove")},bc={name:"cookie",lookup:o(function(t){var e;if(t.lookupCookie&&typeof document<"u"){var a=Kl.read(t.lookupCookie);a&&(e=a)}return e},"lookup"),cacheUserLanguage:o(function(t,e){e.lookupCookie&&typeof document<"u"&&Kl.create(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)},"cacheUserLanguage")},wc={name:"querystring",lookup:o(function(t){var e;if(typeof window<"u"){var a=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=a.substring(1),r=n.split("&"),s=0;s<r.length;s++){var l=r[s].indexOf("=");if(l>0){var d=r[s].substring(0,l);d===t.lookupQuerystring&&(e=r[s].substring(l+1))}}}return e},"lookup")},Hn=null,Yl=o(function(){if(Hn!==null)return Hn;try{Hn=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Hn=!1}return Hn},"localStorageAvailable"),xc={name:"localStorage",lookup:o(function(t){var e;if(t.lookupLocalStorage&&Yl()){var a=window.localStorage.getItem(t.lookupLocalStorage);a&&(e=a)}return e},"lookup"),cacheUserLanguage:o(function(t,e){e.lookupLocalStorage&&Yl()&&window.localStorage.setItem(e.lookupLocalStorage,t)},"cacheUserLanguage")},Vn=null,ql=o(function(){if(Vn!==null)return Vn;try{Vn=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Vn=!1}return Vn},"sessionStorageAvailable"),Ac={name:"sessionStorage",lookup:o(function(t){var e;if(t.lookupSessionStorage&&ql()){var a=window.sessionStorage.getItem(t.lookupSessionStorage);a&&(e=a)}return e},"lookup"),cacheUserLanguage:o(function(t,e){e.lookupSessionStorage&&ql()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)},"cacheUserLanguage")},Cc={name:"navigator",lookup:o(function(t){var e=[];if(typeof navigator<"u"){if(navigator.languages)for(var a=0;a<navigator.languages.length;a++)e.push(navigator.languages[a]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0},"lookup")},kc={name:"htmlTag",lookup:o(function(t){var e,a=t.htmlTag||(typeof document<"u"?document.documentElement:null);return a&&typeof a.getAttribute=="function"&&(e=a.getAttribute("lang")),e},"lookup")},Rc={name:"path",lookup:o(function(t){var e;if(typeof window<"u"){var a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(a instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof a[t.lookupFromPathIndex]!="string")return;e=a[t.lookupFromPathIndex].replace("/","")}else e=a[0].replace("/","")}return e},"lookup")},Ic={name:"subdomain",lookup:o(function(t){var e=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,a=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(!!a)return a[e]},"lookup")};function Sc(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}o(Sc,"getDefaults");var mo=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};me(this,i),this.type="languageDetector",this.detectors={},this.init(t,e)}return o(i,"Browser"),pe(i,[{key:"init",value:o(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=yc(a,this.options||{},Sc()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(bc),this.addDetector(wc),this.addDetector(xc),this.addDetector(Ac),this.addDetector(Cc),this.addDetector(kc),this.addDetector(Rc),this.addDetector(Ic)},"init")},{key:"addDetector",value:o(function(e){this.detectors[e.name]=e},"addDetector")},{key:"detect",value:o(function(e){var a=this;e||(e=this.options.order);var n=[];return e.forEach(function(r){if(a.detectors[r]){var s=a.detectors[r].lookup(a.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null},"detect")},{key:"cacheUserLanguage",value:o(function(e,a){var n=this;a||(a=this.options.caches),a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||a.forEach(function(r){n.detectors[r]&&n.detectors[r].cacheUserLanguage(e,n.options)}))},"cacheUserLanguage")}]),i}();mo.type="languageDetector";var _e=_(D());var Kn,Yn,Xr=class{constructor(t,...e){y(this,Kn,void 0);y(this,Yn,void 0);v(this,Kn,e),v(this,Yn,t)}args(){return u(this,Kn)}channel(){return u(this,Yn)}};o(Xr,"Request"),Kn=new WeakMap,Yn=new WeakMap;var Ct=Xr;var Qr=class extends Ct{constructor(t){super("getOptions",t)}};o(Qr,"Options");var Jl=Qr;var le=_(D());I();var za,Kt,es=class extends Y{constructor(e,a){super(g("CustomizeWorld.title"),(0,le.s)('<div class="customise-world"></div>'));y(this,za,void 0);y(this,Kt,void 0);v(this,za,a),v(this,Kt,e),this.init()}build(){super.build(),this.init()}async init(){var p,c,h,f,w,C;let e=await u(this,Kt).request(new Jl(["players","height","width","landCoverage","landSize","maxIterations"])),a=(0,le.s)(`<input name="players" type="number" value="${(p=e.players)!=null?p:7}" step="1" min="1" max="20">`),n=(0,le.s)(`<input name="height" type="number" value="${(c=e.height)!=null?c:60}" step="1" min="1">`),r=(0,le.s)(`<input name="width" type="number" value="${(h=e.width)!=null?h:80}" step="1" min="1">`),s=(0,le.s)(`<input name="landCoverage" type="number" value="${(f=e.landCoverage)!=null?f:.4}" step="0.01" min="0">`),l=(0,le.s)(`<input name="landSize" type="number" value="${(w=e.landSize)!=null?w:.2}" step="0.01" min="0">`),d=(0,le.s)(`<input name="maxIterations" type="number" value="${(C=e.maxIterations)!=null?C:20}" step="1" min="1">`),m=o(async()=>{this.close(),await u(this,Kt).request(new Ct("setOptions",{players:a.value,height:n.value,width:r.value,landCoverage:s.value,landSize:l.value,maxIterations:d.value})),u(this,Kt).send("start",null),u(this,za)&&u(this,za).call(this)},"submit");this.update((0,le.s)('<div class="customise-world"></div>',(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.players")}</label></div>`,a),(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.height")}</label></div>`,n),(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.width")}</label></div>`,r),(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.land-coverage")}</label></div>`,s),(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.land-size")}</label></div>`,l),(0,le.s)(`<div class="option"><label>${g("CustomizeWorld.max-iterations")}</label></div>`,d),E((0,le.s)(`<button>${g("CustomizeWorld.build")}</button>`),{click:()=>m()}))),this.on("keydown",A=>{A.key==="Enter"&&m()})}};o(es,"CustomiseWorldWindow"),za=new WeakMap,Kt=new WeakMap;var Xl=es;I();var ts=class extends ca{constructor(t,e,a,n=g("MandatorySelection.default-body"),r={canClose:!1}){super(t,e,a,n,{...r,displayAll:!0,modal:!0})}display(){return new Promise(t=>{this.on("selection",({detail:e})=>t(e)),super.display()})}};o(ts,"MandatorySelection");var Ql=ts;I();var Ga=class extends Ql{constructor(t,e){super(g("NewGameWindow.number-of-players"),[7,6,5,4,3].map(a=>({label:g("NewGameWindow.civilizations",{count:a}),value:a})),async a=>{this.close(),await t.request(new Ct("setOptions",{width:80,height:60,players:parseInt(a,10)})),e&&await e(),t.send("start",null)},void 0,{modal:!0})}};o(Ga,"NewGameWindow");var ed=Ga;var as=class extends Ga{constructor(t,e){super(t,async()=>{e&&await e(),await t.request(new Ct("setOptions",{width:80,height:50,earth:!0}))})}};o(as,"EarthWindow");var td=as;var ns=class{constructor(){this.blob=null;this.ptr=-1}fromString(t,e){this.blob=t,this.ptr=0,this.decode(e)}getUByte(){return this.blob.charCodeAt(this.ptr++)}getUShort(){let t=this.getUByte();return(this.getUByte()<<8)+t}getShort(){return(this.getUShort()+32768)%65536-32768}getString(t){let e=this.ptr;return this.ptr+=t,this.blob.substr(e,t)}decode(t){if(this.blob===null){console.warn("file has not been loaded!");return}console.warn("The decode function should be overwritten"),t&&t()}};o(ns,"BinFile");var ad=ns;var is=class{constructor(t){this.dicTable=[];this.dicTable=[],this.dicSize=1<<t;for(let e=0;e<this.dicSize;e++)e<256?this.dicTable[e]=[e]:this.dicTable[e]=null;this.curPos=257}getEntry(t){return t<this.curPos?this.dicTable[t]:null}isFull(){return this.curPos===this.dicTable.length}getCurPos(){return this.curPos}addEntry(t){return this.curPos<this.dicTable.length&&(this.dicTable[this.curPos]=t,this.curPos++),this.curPos-1}};o(is,"LZWDictionary");var nd=is;var rs=class{static parseByteStreamToIndexes(t,e,a){let n=[],r=0,s=0,l=1,d=1,m=256,p=0,c=0;for(;e>0;){for(;s<8+l;)r|=t.getUByte()<<s,e--,s+=8;for(;s>=8+l;)c=r&(d<<8&65280|255),r>>=8+l,s-=8+l,p++,p==m&&(p=0,l+=1,d<<=1,d|=1,m<<=1,8+l>a&&(p=0,l=1,d=1,m=256)),n.push(c)}return n}static decode(t,e){e=e||11;let a=t,n=[];for(;a.length>0;){let r=new nd(e),s=[a[0]],l=a[0],d=r.getEntry(l),m=l,p,c=0;for(;!r.isFull()&&c++<a.length-1;){p=a[c];let h=[];p>=r.getCurPos()?(h=r.getEntry(l),h===null&&console.error(`No dictionary entry in LZW special case: oldCode=${l}; newCode=${p}; i=${c}; buffer=${d}`),h=[...h??[],m]):h=r.getEntry(a[c]),s.push.apply(s,h),m=h[0],r.addEntry(d.concat(m)),l=p,d=r.getEntry(l)}n.push.apply(n,s),a=a.slice(c+1)}return n}static RLEDecode(t){let e=[],a=0,n=!1;for(let r=0;r<t.length;r++){let s=t[r];if(n){if(s==0)a=144,e.push(144);else for(let l=0;l<s-1;l++)e.push(a);n=!1}else s==144?n=!0:(e.push(s),a=s)}return e}};o(rs,"LZW");var ss=rs;var Pc=o(i=>i&15,"lowerNibble"),id=Pc;var Tc=o(i=>(i&240)>>4,"upperNibble"),rd=Tc;var os=class extends ad{constructor(){super(...arguments);this.palette=[];this.palette16=[{r:255,g:255,b:255,a:0},{r:170,g:0,b:0,a:255},{r:0,g:170,b:0,a:255},{r:170,g:170,b:0,a:255},{r:0,g:0,b:170,a:255},{r:0,g:0,b:0,a:255},{r:0,g:85,b:170,a:255},{r:170,g:170,b:170,a:255},{r:85,g:85,b:85,a:255},{r:255,g:85,b:85,a:255},{r:85,g:255,b:85,a:255},{r:255,g:255,b:85,a:255},{r:85,g:85,b:255,a:255},{r:255,g:85,b:255,a:255},{r:85,g:255,b:255,a:255},{r:255,g:255,b:255,a:255}];this.imageData=null;this.imageHeight=0;this.imageWidth=0;this.byteMode=11}decode(e){let a=this.getString(2),n=this.getShort();if(a=="M0")this.getPaletteData(),a=this.getString(2),n=this.getShort();else{console.log("Creating a random color palette...");for(let r=0;r<256;r++)r<16?this.palette.push(this.palette16[r]):this.palette.push({r:Math.floor(Math.random()*256),g:Math.floor(Math.random()*256),b:Math.floor(Math.random()*256),a:255})}a=="X0"?this.getX0ImageData(n):a=="X1"?this.getX1ImageData(n):console.error('"'+a+'" is an unknown chunk type'),e&&e()}getPaletteData(){let e=this.getUByte(),a=this.getUByte(),n=a-e+1,r=!1;for(let s=0;s<n;s++){let l={r:this.getUByte()*4,g:this.getUByte()*4,b:this.getUByte()*4,a:255};this.palette.push(l),l.r===l.g&&l.g===l.b&&l.r===0&&(r||(l.a=0),r=!0)}this.palette.push({r:0,g:0,b:0,a:0})}getX0ImageData(e){this.imageWidth=this.getShort(),this.imageHeight=this.getShort(),this.byteMode=this.getUByte();let a=ss.parseByteStreamToIndexes(this,e-5,this.byteMode),n=ss.decode(a,this.byteMode);this.imageData=ss.RLEDecode(n)}getX1ImageData(e){this.getX0ImageData(e);let a=this.imageData;this.imageData=[];for(let n=0;n<a.length;n++)this.imageData.push(id(a[n])),this.imageData.push(rd(a[n]));this.palette=this.palette16}draw(e,a=0,n=0){let r=e.getImageData(0,0,this.imageWidth,this.imageHeight),s=0;for(let l=0;l<this.imageHeight;l++)for(let d=0;d<this.imageWidth;d++){let m=this.imageData[s],p=(d+l*this.imageWidth)*4;r.data[p]=this.palette[m].r,r.data[p+1]=this.palette[m].g,r.data[p+2]=this.palette[m].b,r.data[p+3]=this.palette[m].a,s++}e.putImageData(r,a,n)}getPixel(e,a){return this.imageData?this.imageData[e+this.imageWidth*a]:0}};o(os,"PicImage");var sd=os;var od=o((i,t,e,a,n=r=>console.log(r))=>{let r=a(320,200),s=new sd,l=[];return s.fromString(i,()=>{s.draw(r.getContext("2d",{willReadFrequently:!0})),Object.entries(t).forEach(([d,m])=>m.forEach(p=>p.contents.forEach(c=>{let h={...e,...p,...c},f=`./assets/${d+h.name}.png`,w=a(h.width,h.height),C=w.getContext("2d",{willReadFrequently:!0});C.clearRect(0,0,h.width,h.height),C.drawImage(r,h.x,h.y,h.width,h.height,0,0,h.width,h.height);for(let A=0;A<r.width;A++)for(let b=0;b<r.height;b++){let x=C.getImageData(A,b,1,1).data;x[0]==h.clear.r&&x[1]==h.clear.g&&x[2]==h.clear.b&&C.clearRect(A,b,1,1)}n(`Processing ${f}...`),l.push({name:f,uri:w.toDataURL("image/png")})})))}),l},"extractSprites");var qn={defaults:{height:16,width:16,clear:{r:0,g:170,b:170}},files:{"SP257.PIC":{"cursor/go":[{y:33,x:33,height:12,width:12,contents:[{name:""}]}],"city/pollution":[{y:32,x:48,contents:[{name:""}]}],"improvements/irrigation":[{y:32,x:64,contents:[{name:""}]}],"improvements/mine":[{y:32,x:80,contents:[{name:""}]}],"improvements/pollution":[{y:32,x:96,contents:[{name:""}]}],"cursor/torch":[{y:33,x:113,height:13,width:13,contents:[{name:""}]}],"city/food":[{y:33,x:129,height:7,width:7,contents:[{name:""}]}],"city/production":[{y:33,x:137,height:7,width:7,contents:[{name:""}]}],"city/trade":[{y:33,x:145,height:7,width:7,contents:[{name:""}]}],"city/gold":[{y:33,x:153,height:7,width:7,contents:[{name:""}]}],"city/bulb":[{y:41,x:129,height:7,width:7,contents:[{name:""}]}],"city/sad":[{y:41,x:137,height:7,width:7,contents:[{name:""}]}],"city/luxury":[{y:41,x:145,height:7,width:7,contents:[{name:""}]}],"terrain/":[{y:41,x:153,height:7,width:7,contents:[{name:"shield"}]}],"improvements/road":[{y:48,contents:[{name:"_n",x:0},{name:"_ne",x:16},{name:"_e",x:32},{name:"_se",x:48},{name:"_s",x:64},{name:"_sw",x:80},{name:"_w",x:96},{name:"_nw",x:112}]}],"status/science":[{y:48,height:8,width:8,contents:[{name:"_0",x:128},{name:"_25",x:136},{name:"_50",x:144},{name:"_75",x:152}]}],"status/pollution":[{y:56,height:8,width:8,contents:[{name:"_0",x:128},{name:"_25",x:136},{name:"_50",x:144},{name:"_75",x:152}]}],"terrain/land":[{y:64,contents:[{name:"",x:0}]}],"terrain/river":[{y:64,contents:[{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:224},{name:"_nesw",x:240}]}],"units/combat":[{y:97,height:15,width:15,contents:[{name:"_1",x:1},{name:"_2",x:17},{name:"_3",x:33},{name:"_4",x:49},{name:"_5",x:65},{name:"_6",x:81},{name:"_7",x:97},{name:"_8",x:113}]}],"improvements/railroad":[{y:96,contents:[{name:"_n",x:128},{name:"_ne",x:144},{name:"_e",x:160},{name:"_se",x:176},{name:"_s",x:192},{name:"_sw",x:208},{name:"_w",x:224},{name:"_nw",x:240}]}],"terrain/oasis":[{y:113,height:15,width:15,contents:[{name:"",x:1}]}],"terrain/horse":[{y:113,height:15,width:15,contents:[{name:"",x:17}]}],"terrain/doe":[{y:113,height:15,width:15,contents:[{name:"",x:49}]}],"terrain/coal":[{y:113,height:15,width:15,contents:[{name:"",x:65}]}],"terrain/gold":[{y:113,height:15,width:15,contents:[{name:"",x:81}]}],"terrain/game":[{y:113,height:15,width:15,contents:[{name:"",x:97}]}],"terrain/seal":[{y:113,height:15,width:15,contents:[{name:"",x:113}]}],"terrain/oil":[{y:113,height:15,width:15,contents:[{name:"",x:129}]}],"terrain/gems":[{y:113,height:15,width:15,contents:[{name:"",x:145}]}],"terrain/fish":[{y:113,width:15,height:15,contents:[{name:"",x:161}]}],"map/city":[{y:113,contents:[{name:"",x:193}]}],"map/fortify":[{width:15,height:15,y:113,contents:[{name:"",x:209}]}],"map/fort":[{width:15,height:15,y:113,contents:[{name:"",x:225}]}],"map/hut":[{y:113,height:15,width:15,contents:[{name:"",x:241}]}],"city/people":[{y:128,height:16,width:8,contents:[{name:"_happy_m",x:0},{name:"_happy_f",x:8},{name:"_content_m",x:16},{name:"_content_f",x:24},{name:"_unhappy_m",x:32},{name:"_unhappy_f",x:40},{name:"_tax",x:48},{name:"_science",x:56},{name:"_luxury",x:64}]}],"map/fog":[{y:128,contents:[{name:"_n",x:80},{name:"_e",x:96},{name:"_s",x:112},{name:"_w",x:128}]}],"units/":[{y:161,height:15,width:15,contents:[{name:"settlers",x:1},{name:"warrior",x:17},{name:"spearman",x:33},{name:"swordman",x:49},{name:"musketman",x:65},{name:"rifleman",x:81},{name:"horseman",x:97},{name:"knight",x:113},{name:"catapult",x:129},{name:"cannon",x:145},{name:"chariot",x:161},{name:"tank",x:177},{name:"mechanizedinfantry",x:193},{name:"artillery",x:209},{name:"fighter",x:225},{name:"bomber",x:241},{name:"trireme",x:257},{name:"sail",x:273},{name:"frigate",x:289},{name:"ironclad",x:305}]},{y:177,contents:[{name:"cruiser",x:1},{name:"battleship",x:17},{name:"submarine",x:33},{name:"carrier",x:49},{name:"transport",x:65},{name:"nuclear",x:81},{name:"diplomat",x:97},{name:"caravan",x:113}]}],"general/texture":[{y:176,contents:[{name:"_1",x:288},{name:"_2",x:304}]}]},"TER257.PIC":{"terrain/desert":[{y:0,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/plains":[{y:16,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/grassland":[{y:32,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/forest":[{y:48,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/hills":[{y:64,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/mountains":[{y:80,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/tundra":[{y:96,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/arctic":[{y:112,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/swamp":[{y:128,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/jungle":[{y:144,contents:[{name:"",x:0},{name:"_n",x:16},{name:"_e",x:32},{name:"_ne",x:48},{name:"_s",x:64},{name:"_ns",x:80},{name:"_es",x:96},{name:"_nes",x:112},{name:"_w",x:128},{name:"_nw",x:144},{name:"_ew",x:160},{name:"_new",x:176},{name:"_sw",x:192},{name:"_nsw",x:208},{name:"_esw",x:222},{name:"_nesw",x:228}]}],"terrain/ocean":[{y:160,contents:[{name:"",x:0}]}],"terrain/coast_sprite":[{x:0,y:176,height:16,width:128,contents:[{name:""}]}],"terrain/river":[{y:160,contents:[{name:"",x:240}]},{y:176,contents:[{name:"_mouth_n",x:128},{name:"_mouth_e",x:144},{name:"_mouth_s",x:160},{name:"_mouth_w",x:176}]}]}}};var Zn=_(D());I();var Na,ye,ls=class extends Y{constructor(){let e=(0,Zn.s)('<input type="file" multiple>'),a=(0,Zn.s)('<p class="loading" hidden></p>');super(g("ImportAssetsWindow.title"),(0,Zn.s)(`<div class="import-assets"><p>${g("ImportAssetsWindow.instructions",{files:Object.keys(qn.files)})}</p><div class="brave" ${navigator!=null&&navigator.brave?"":" hidden"}>${g("ImportAssetsWindow.brave")}</div></div>`,(0,Zn.s)("<p></p>",E(e,{change:n=>this.handleFileUpload(n)})),a));y(this,Na,void 0);y(this,ye,void 0);v(this,Na,e),v(this,ye,a)}async handleFileUpload(e){var d;u(this,ye).removeAttribute("hidden"),u(this,ye).style.color="inherit";let a=Array.from((d=e.target.files)!=null?d:[]),n=a.map(m=>m.name),r=Object.keys(qn.files);if(!r.map(m=>new RegExp(m,"i")).every(m=>n.some(p=>p.match(m)))){u(this,ye).style.color="#f00",u(this,ye).innerText=g("ImportAssetsWindow.missing-files",{files:r});return}u(this,Na).setAttribute("disabled",""),u(this,ye).innerText=g("ImportAssetsWindow.progress-building");let l=[];if(await Promise.all(a.map(async m=>new Promise(p=>{let c=qn.files[m.name.toUpperCase()];if(!c){console.warn(`No definitions found for ${m.name}, skipping.`);return}let h=new FileReader;h.addEventListener("load",async f=>{od(f.target.result,c,qn.defaults,(w,C)=>{let A=document.createElement("canvas");return A.width=w,A.height=C,A},w=>{u(this,ye).innerText=w}).forEach(w=>l.push(w)),p()}),h.readAsBinaryString(m)}))),u(this,ye).innerText=g("ImportAssetsWindow.progress-writing"),await Promise.all(l.map(m=>$.set(m))),!await $.hasAllAssets()){console.error("Something went wrong..."),u(this,ye).style.color="#f00",u(this,ye).innerText=g("ImportAssetsWindow.missing-data",{files:await $.missingAssets()}),u(this,Na).removeAttribute("disabled");return}u(this,ye).innerText=g("ImportAssetsWindow.done"),location.reload()}};o(ls,"ImportAssetsWindow"),Na=new WeakMap,ye=new WeakMap;var ld=ls;var ms=_(D());var dd=[{version:"0.1.0@8a11546",date:"2023-04-25T18:45:15.000Z",localChanges:['Fix empty landing page as reported by user "King of Persia" on CivFanatics forums.'],externalChanges:{}},{version:"0.1.0@5e59c26",date:"2023-04-14T19:15:22.000Z",localChanges:["Major update to many areas of the UI making it all translatable.","","- Add translations via i18next.","- Animate the `End turn` button.","- Style the `PopupMenu`s.","- Add modal `Window`s.","- Add timeout to ensure `Negotiation`s with `AIClient` don't hang.","- Update enemy `City` details (before these were static in error).","- Ensure a notification is triggered when a `City` cannot support a `Unit`.","- Fixed a range of bugs with `Negotiation`s.","- Added support for using multiple `PlayerTreasury`s (e.g. for future work with `Faith`)","- Fix missing warning on Mac for reloading the page.","- Add efficiencies in which `Tile`s are redrawn when the `Map` layers are built.","- Fix a few bugs with `Window`s and ensure notifications are triggered when another is closed.","- Replace `InactiveUnit` menu with icons and ensure they update when toggled.","- Cache `Unit` images when they have had their colours replaced."],externalChanges:{"base-civilization-american":{status:"updated",log:["Remove repeated `City` names."]},"base-civilization-chinese":{status:"updated",log:["Remove anchor markers from `City` names."]},"base-civilization-french":{status:"updated",log:["Remove repeated `City` names."]},"base-civilization-greek":{status:"updated",log:["Remove repeated `City` names."]},"base-civilization-indian":{status:"updated",log:["Remove repeated `City` names."]},"base-civilization-roman":{status:"updated",log:["Remove repeated `City` names."]},"base-unit-action-attack":{status:"updated",log:["Ensure `Moved` `Rule` is triggered after a `Unit` `Attack`s."]},"base-unit-action-disband":{status:"updated",log:["Ensure `Moved` `Rule` is triggered after a `Unit` is `Disband`ed."]},"base-unit-action-unload":{status:"updated",log:["Ensure `Moved` `Rule` is triggered after a `Unit` `Unload`s its `cargo`."]},"civ1-city":{status:"updated",log:["Ensure the `Unit`s farthest away from the `City` are lost when they are unable to be supported."]},"civ1-diplomacy":{status:"updated",log:["Ensure that once an `ExchangeKnowledge` `Proposal` is `Decline`d it will stop being offered, include the available `Advance`s in the `Proposal` contents, allow the discussion to be passed back to the other player as per the original game and allow each `Player` to select the desired `Advance`s when exchanging."]},"civ1-goody-hut":{status:"updated",log:["Ensure the `goody-hut:discovered` event is triggered before the effect of the `GoodyHut` itself.","Remove `Priority` as this isn't doing anything!"]},"civ1-player":{status:"updated",log:["Remove unneeded debug."]},"civ1-treasury":{status:"updated",log:["Ensure `Gold` is properly handled when processing the `City` `Yield`s. When you don't have enough `Gold` in your `PlayerTreasury` to support a `CityImprovement` it will be sold."]},"civ1-unit":{status:"updated",log:["Ensure `SneakAttack` and `SneakCaptureCity` actually expire any active `Peace` `Declaration`s."]},"core-diplomacy":{status:"updated",log:["Ensure `when` is exposed for `Interaction`s and Make `Propsal`.`resolve` return a `Promise` so that the `Resolved` `Rule`s can be `await`ed."]},"core-goody-hut":{status:"updated",log:['Ensure `ActionPerformed` `Rule` is triggered before the action itself, this ensures that the "You have discovered scrolls of ancient wisdom" message can be displayed before the advance is discovered.']},"library-diplomacy":{status:"updated",log:['Store, and expose, the advances available to the `for` `Player`s when an `ExchangeKnowledge` `Proposal` is created. This allows the data to be used in the front end messaging as in: "We note that your primitive civilisation has not discovered Writing."']},"simple-ai-client":{status:"updated",log:["Add timeout mechanism to avoid hangs when multiple `AIClient`s are in `Negotiation`s."]}}},{version:"0.1.0@d2b84be",date:"2023-04-04T13:59:57.000Z",localChanges:["Implement negotiations with enemy players. This is very primitive at the moment and the AI will always offer, and respect, `Peace`."],externalChanges:{"base-unit-action-disband":{status:"updated",log:["Repo cleansing.","Add missing transpiled JS, definition and map files."]},"base-unit-action-found-city":{status:"updated",log:["Repo cleansing.","Ensure `WorkedTileRegistry` is passed onto the `City` constructor."]},"civ1-diplomacy":{status:"updated",log:["Add in `Negotiation`-related `Rule`s."]},"civ1-player":{status:"updated",log:["Update `Built` `Rule`s to handle new `Client` changes for `chooseFromList` instead of `chooseCivilization` and `chooseLeader`."]},"civ1-unit":{status:"updated",log:["Refactor to utilise `library-unit` package.","Add `SneakAttack` and `SneakCaptureCity` so these can be avoided/warned about when `Player`s have `Peace` `Declaration`.","Ensure `WorkedTileRegistry` is passed to the `FoundCity` constructor."]},"core-ai-client":{status:"updated",log:["Simpliy AIClient base class."]},"core-client":{status:"updated",log:["Add `chooseFromList` `Client` method.","Add supplemental data to `ChoiceMeta` objects."]},"core-diplomacy":{status:"updated",log:["Add `active`, `expire` and `expiry` methods to `Declaration`s.","Make `Expiry` a simpler class that can be instantiated with a specific end turn.","Add `when` to `Interaction`s.","Add `Negotiation` alongside `Proposal` and `Resolution`, and some base implementations of each."]},"library-diplomacy":{status:"added",log:["Initial commit"]},"library-unit":{status:"added",log:["Initial commit","Add missing `UnitImprovement`."]},"simple-ai-client":{status:"updated",log:["Add diplomacy support (`Negotiation`s)."]},"web-renderer":{status:"removed"}}},{version:"0.1.0@0978f23",date:"2023-02-22T19:25:40.000Z",localChanges:["Refactor `Transport` class to make it easier to prefill and type the arguments to send/receive and reduce errors."],externalChanges:{}},{version:"0.1.0@9be9ab0",date:"2023-01-29T19:10:23.000Z",localChanges:["Fix `UnitActionMenu` on touch devices."],externalChanges:{}},{version:"0.1.0@dc2cd0d",date:"2023-01-27T20:50:34.000Z",localChanges:["Refactor `UnitActionMenu` into `PopupMenu` for re-use.","Refactor the `Action` buttons into their own item similar to Civ5 style buttons.","Add a `GameOptions` menu to allow controlling the `EndOfTurn` action.","Add UI method to get access to the various reports.","Rework the `HappinessReport` to show a breakdown of the reasons for `Happiness`/`Unhappiness`.","Fix bug for `SelectionWindow`s with one item did not close using [Enter].","Additional updates and minor bugfixes."],externalChanges:{"civ1-city-happiness":{status:"updated",log:["Only announce `CelebrateLeader` on start and end, not every `Turn`."]},"civ1-trade-rate":{status:"updated",log:["Use whole integers for `TradeRate` values instead of floats as per updates to `core-trade-rate`."]},"core-data-object":{status:"updated",log:["Add `__` property for plain objects that includes their parent classes."]},"core-trade-rate":{status:"updated",log:["Repo cleansing.","Update to use integers instead of floats to avoid floating point discrepencies throwing exceptions (e.g. `(0.2 + 0.7 + 0.1) !== 1`)."]}}},{version:"0.1.0@1e76df3",date:"2023-01-20T22:09:39.000Z",localChanges:["Refactor `SelectionWindow` into `ActionWindow`.","Add `CivilDisorder` `ActionWindow`.","Show `Unworkable` `Tile`s in the `City` view.","Update `<buttons/>` for `CityBuild` and `ChooseResearch` to look more like Civ 5.","Re-work `Actions` to filter `Action`s to top/bottom section more reliably.","Use `LocaleProvider` to format numbers."],externalChanges:{"civ1-city-happiness":{status:"updated",log:["Add `CivilDisorder` `PlayerAction` which allows viewing the `City` in `CivilDisorder`."]},"civ1-city":{status:"updated",log:["Update `core-city` and add `Rule`s around `WorkedTile`s.","Fix logic for selecting `WorkedTile`s."]},"civ1-unit":{status:"updated",log:["Ensure `Air` `Unit`s can reset their status by `Embark`ing in a `Transport`."]},"core-city":{status:"updated",log:["Add `WorkedTile` and `WorkedTileRegistry` and associated `Rule`s.","Ensure `City` `Tile`s are selected via `Rule`s."]}}},{version:"0.1.0@d4a32a4",date:"2023-01-17T22:01:12.000Z",localChanges:["Bump dependencies and update UI to match."],externalChanges:{"base-goody-hut-gold":{status:"updated",log:["Update to latest version of `core-treasury`."]},"civ1-city-happiness":{status:"updated",log:["Update `CivilDisorder` and `CelebrateLeader` `Rule`s to be closer to original Civilization.","Trigger an event when `CivilDisorder` or `CelebrateLeader` are reverted.","Add `CelebrateLeader` effect (`City` grows each turn)."]},"civ1-city":{status:"updated",log:["Update to latest version of `core-city-happiness`."]},"civ1-science":{status:"updated",log:["Update to latest version of `core-city-happiness`."]},"civ1-spaceship":{status:"updated",log:["Update to latest version of `core-treasury`."]},"civ1-treasury":{status:"updated",log:["Ensure `CompleteProduction` `PlayerAction` contains `CityBuild` instead of `City`.","Update to use latest version of `core-treasury` and `core-city-happiness`."]},"civ1-unit":{status:"updated",log:["Remove dependency on `civ1-science` and import each advance separately.","Fix `Fighter`, `Nuclear` and `Bomber` behaviour (`LostAtSea` to be replaced)."]},"civ1-wonder":{status:"updated",log:["Ensure `Nuclear` can only be built once `ManhattanProject` has been built by any player."]},"core-city-happiness":{status:"updated",log:["Add `civilDisorder` and `celebrateLeader` `AdditionalData` to `City`s.","Make `CivilDisorder` and `CelebrateLeader` return `boolean` instead of being `validate` only `Rule`s."]},"core-treasury":{status:"updated",log:["Generalise `PlayerTreasury` to allow storage of any `Yield`.","Add `spendCost` `AdditionalData` to `CityBuild`s.","Add `Rush` `Rule` triggered when `CompleteProduction` is called.","Update `Spend` `Rule` to return `SpendCost` value object instead of modifying a `Yield`."]},"simple-ai-client":{status:"updated",log:["Update to latest version of `core-treasury`."]}}},{version:"0.1.0@b6d38dd",date:"2023-01-13T08:40:36.000Z",localChanges:["Add beginnings of a touch compatible interface for moving `Unit`s."],externalChanges:{}},{version:"0.1.0@fb75d4d",date:"2023-01-13T08:37:10.000Z",localChanges:["Add changelog mechanism and populate with historic data."],externalChanges:{}},{version:"0.1.0@8cae915",date:"2023-01-05T19:45:55.000Z",localChanges:["Change `docker-compose` port to avoid local conflicts.","Add `civ1-spaceship` - this enables building `Spaceship` components. (Note: victories are not yet implemented!)","Add `Spaceship` `Window` to display details and allow launch.","Add `LocaleProvider` class to wrap convenience methods for lists and number formatting.","Update lib version to support `es2021.intl`.","Refactor `Actions` to automatically import non-`MandatoryAction`s."],externalChanges:{"base-player-action-launch-spaceship":{status:"added",log:["Initial commit"]},"base-spaceship-fuel":{status:"added",log:["Initial commit"]},"base-spaceship-habitation":{status:"added",log:["Initial commit"]},"base-spaceship-life-support":{status:"added",log:["Initial commit"]},"base-spaceship-power":{status:"added",log:["Initial commit"]},"base-spaceship-propulsion":{status:"added",log:["Initial commit"]},"base-spaceship-structural":{status:"added",log:["Initial commit"]},"base-spaceship-yield-energy":{status:"added",log:["Initial commit","Add `AdditionalData` to `Spaceship`s."]},"base-spaceship-yield-life-support":{status:"added",log:["Initial commit","Add `AdditionalData` to `Spaceship`s.","Update to use npm version of core-spaceship."]},"base-spaceship-yield-mass":{status:"added",log:["Initial commit","Add `AdditionalData` to `Spaceship`s."]},"base-spaceship-yield-population":{status:"added",log:["Initial commit","Add `AdditionalData` to `Spaceship`s."]},"civ1-city-happiness":{status:"updated",log:["Bump dependencies."]},"civ1-default-spaceship-layout":{status:"added",log:["Initial commit"]},"civ1-spaceship":{status:"added",log:["Initial commit","Move default `Layout` to its own repo and make it a class instead of an instance.","Add a `Player` `Action` for launching the `Spaceship`.","Remove unused variable in tests.","Add `LaunchSpaceship` `PlayerAction`.","Add `Spend` `Rule`s for `Part`s.","Add `Active` `Rule`s for `Slot`s.","Add `Landed `Rule`s for `Spaceship`.","Add `Turn` `Start` `Rule`s` to check if `Spaceship` is `Landed` or `Lost`.","Ensure `Spaceship` `Part`s cannot be built when a `Spaceship` is in-flight.","Use updated `LayoutRegistry`.","Update updated `Active` `Slot` mechanism."]},"core-spaceship":{status:"added",log:["Initial commit","Add `yield` to `Spaceship`.","Add `SpaceshipRegistry`.","Add `spaceship` key to `Player`s as `AdditionalData`.","Re-work `Spaceship` and `Part` `yields`.","Add `Validation` `Rule` to prevent adding unusable `Part`s.","Add `chanceOfSuccess` method.","Add `Layout`, `LayoutRegistry` and `Slot` entities, and update `Spaceship` to use them.","Update layout registry to store constructors instead of instances.","Ensure `Layout` is included when `Spaceship` is converted to `PlainObject`.","Ensure `AdditionalData` is correctly registered.","Add index.js entrypoint.","Break down `Slot`s in a `Layout` into active and inactive.","Replace `Validate` `Rule` with `Active`.","Add `activeParts` and `inactiveParts` to `Spaceship`."]}}},{version:"0.1.0@a999e22",date:"2022-12-05T21:31:36.000Z",localChanges:["Support numpad movement on macOS using a non-Apple keyboard."],externalChanges:{}},{version:"0.1.0@39cbaeb",date:"2022-12-04T21:22:23.000Z",localChanges:["Feed back about requiring all asset files when generating assets."],externalChanges:{}},{version:"0.1.0@7ea1d26",date:"2022-11-25T21:12:28.000Z",localChanges:["Fix missing `Import assets` menu item."],externalChanges:{}},{version:"0.1.0@be9ad8d",date:"2022-11-25T11:01:29.000Z",localChanges:["Bump dependencies."],externalChanges:{"base-city-yield-martial-law-content":{status:"updated",log:["Ensure `unit` key is exposed."]},"civ1-city-improvement":{status:"updated",log:["Destroy `CityImprovement`s when a `City` is `Captured` or `Destroyed`."]},"civ1-city":{status:"updated",log:["Track `destroyed` status rather than unregister the `City`."]},"civ1-player":{status:"updated",log:["Ensure `destroyed` `Unit`s are excluded from being processed."]},"civ1-unit":{status:"updated",log:["Use `IBuildable` interface for `BuildingComplete` `Rule`s.","Ensure `Submarine`s cannot bombard `Land` `Unit`s.","Ensure only `Fighter`s can `Attack` other `Air` `Unit`s.","Annotate `Attack` `Action` `Rule`s.","Ensure all `Unit`s on a `Tile` are destroyed when the defending `Unit` is `Destroyed`, unless in a `City`.","Track `destroyed` status rather than unregister the `Unit`."]},"civ1-wonder":{status:"updated",log:["Ensure `IBuildable` interface is used.","Add benefits for `DarwinsVoyage`."]},"core-city-build":{status:"updated",log:["Make `AvailableCityBuildItemsRegistry` more flexible.","Re-work entities and interfaces to avoid having to forcibly cast everything."]},"core-city-improvement":{status:"updated",log:["Track `destroyed` status rather than unregister the `CityImprovement`."]},"core-city":{status:"updated",log:["Repo cleansing.","Track `destroyed` status rather than unregister the `City`."]},"core-data-object":{status:"updated",log:["Make `IDataObject` interface more flexible."]},"core-unit-transport":{status:"updated",log:["Ensure `Base` is `typeof Unit` so that it includes the static methods required by `IBuildable`."]},"core-unit":{status:"updated",log:["Track `destroyed` status rather than unregister the `Unit`."]}}},{version:"0.1.0@55c0fae",date:"2022-11-22T21:24:59.000Z",localChanges:["Remove fixed `Window` width.","Ensure `GameData` variable in `Renderer` is updated.","Add initial `CityStatus` (`F1`), `HappinessReport` (`F4`) and `ScienceReport` (`F6`) screens.","Simplify `City` screen component, moving out some parts to shared lib files or components."],externalChanges:{"base-city-yield-city-improvement-content":{status:"updated",log:["Ensure `CityImprovement` is exposed."]}}},{version:"0.1.0@9efb4a2",date:"2022-11-21T21:48:43.000Z",localChanges:["Add favicon."],externalChanges:{}},{version:"0.1.0@4cb5589",date:"2022-11-21T21:04:26.000Z",localChanges:["Use `@dom111/Element` instead of a divergent package in the repo.","An attempt to resize the `Yield` images when there are too many to fit in the available space.","Add build version information to the landing page.","Inline the `Window` button images.","Clean up source files (remove unncessary `public` declarations.)","Prevent accidental page reloads.","Remove code clean up (return to leaking memory...) to speed up later game.","Fix growth details in `City` screen.","Fix number of turns shown on `CityBuildSelectionWdindow`.","Fix inheritence for `Window` and children.","Fix `Portal` centering bug.","Fix `Gold` and `Research` per turn indicator in sidebar.","Allow `Window` elements to be moved."],externalChanges:{"civ1-earth-generator":{status:"updated",log:["Refactor `Earth` start `Tile`s to use the `Regitry` mechanism."]},"civ1-world":{status:"updated",log:["Use updated `civ1-earth-generator` package."]}}},{version:"0.1.0@ad66e17",date:"2022-11-17T12:49:59.000Z",localChanges:["Add warning about generating assets on Brave.","Ensure `Earth` `MainMenu` option is hidden when the assets are missing."],externalChanges:{}},{version:"0.1.0@7fce207",date:"2022-11-16T21:56:29.000Z",localChanges:["Ensure all assets are loaded before trying to use the curosr.","Add `Earth` `World` `Generator`.","Only trigger `City` screen for `Player`s `City`s.","Only focus the `<select/>` in a `SelectionWindow` if there is more than one item."],externalChanges:{"civ1-asset-extractor":{status:"updated",log:["Add `Map` class and `extractMap` script to convert Civ 1 `*.MAP` (or `MAP.PIC`) files to RLE representations."]},"civ1-earth-generator":{status:"added",log:["Initial commit","Refactor `Earth` start `Tile`s to use the `Regitry` mechanism."]},"civ1-player":{status:"updated",log:["Simplify `World` built `Rule` by breaking out into `Spawn` and `PickStartTile` `Rule`s."]},"civ1-world":{status:"updated",log:["Add support for `Earth` `Generator` and fixed start `Tile`s associated.","Move random start `Tile` selection to `Rule`s."]},"core-player":{status:"updated",log:["Add `Spawn` `Rule` to control what happens when a `Player` is spawned into the game."]},"core-world-generator":{status:"updated",log:["Add `PickGenerator` (to choose the `Generator` to build the `World` map) and `PickStartTile` (to choose the starting `Tile`s for the `Player`) `Rule`s."]},"simple-ai-client":{status:"updated",log:["Add hard-coded check for `Earth` map to ensure first `City` is built in the right place."]},"simple-world-generator":{status:"updated",log:[]}}},{version:"0.1.0@575f690",date:"2022-11-15T20:13:36.000Z",localChanges:["Remove unused packages from esbuild.js.","Fix `Yield`s not being rendered in `City` screen."],externalChanges:{}},{version:"0.1.0@4c67745",date:"2022-11-15T17:00:58.000Z",localChanges:["Reorganise the repo to make it easier to navigate.","Add `AssetStore`.","Use `AssetStore` assets instead of hard-coded links to images.","Break down `MainMenu` into smaller pieces.","Customise esbuild process.","Ensure `Transport` is passed in directly, instead of relying on a global object."],externalChanges:{"base-unit-action-disband":{status:"added",log:["Initial commit","Repo cleansing."]},"civ1-asset-extractor":{status:"added",log:["Initial commit","Updates to fix the incorrect padding around elements.","Fix misnamed assets.","Refactor to allow usage within a browser context.","Add `Map` class and `extractMap` script to convert Civ 1 `*.MAP` (or `MAP.PIC`) files to RLE representations."]},"civ1-player":{status:"updated",log:["Refactor out `Worker`. This probably needs to be added back in at some point..."]},"civ1-science":{status:"updated",log:["Remove unnecessary `Registry` interface."]},"civ1-treasury":{status:"updated",log:["Remove unnecessary `Registry` interface."]},"civ1-unit":{status:"updated",log:["Add `Disband` `Action`."]},"core-data-object":{status:"updated",log:["Ensure `id` is included in `IDataObject` so that `keys` for both `DataObject` and `IDataObject` return the same thing."]},"core-engine":{status:"updated",log:["Remove reliance on `node` so that a browser can be used instead."]},"core-turn-based-game":{status:"updated",log:["Ensure return types match for TypeScript compiler."]},"simple-world-generator":{status:"updated",log:["Remove reliance on `node` so that a browser can be used instead."]}}},{version:"0.1.0@425962f",date:"2022-11-12T23:14:56.000Z",localChanges:["Remove unused logging.","Add `Customise world` option to `MainMenu`.","Fix bug where `Portal` would be re-centered even when map is fully displayed on screen."],externalChanges:{}},{version:"0.1.0@4f027f6",date:"2022-11-10T22:14:42.000Z",localChanges:["Initial version of web-renderer."],externalChanges:{}},{version:"0.1.0@93bb88d",date:"2022-11-09T21:54:44.000Z",localChanges:["Ensure `City` `Yield`s are updated when `Unit`s are moved or destroyed.","Update `City` display screen to be closer to the original game."],externalChanges:{"base-city-yield-city-improvement-maintenance-gold":{status:"updated",log:["Make class extend `Gold` `Yield` and store the value negated."]},"base-city-yield-city-improvement-content":{status:"added",log:["Initial commit","Ensure `CityImprovement` is exposed."]},"base-city-yield-corruption":{status:"updated",log:["Make class extend `Trade` `Yield` and store the value negated."]},"base-city-yield-population-support-food":{status:"updated",log:["Make class extend `Food` `Yield` and store the value negated."]},"base-city-yield-luxury-happiness":{status:"added",log:["Initial commit"]},"base-city-yield-martial-law-content":{status:"added",log:["Initial commit","Ensure `unit` key is exposed."]},"base-city-yield-military-unhappiness":{status:"added",log:["Initial commit","Ensure `unit` key is exposed when the `Yield` is exported as raw data."]},"base-city-yield-population-unhappiness":{status:"added",log:["Initial commit"]},"base-city-yield-unit-support-food":{status:"updated",log:["Make class extend `Food` `Yield` and store the value negated."]},"base-city-yield-unit-support-production":{status:"updated",log:["Make class extend `Production` `Yield` and store the value negated."]},"base-goody-hut-unit":{status:"updated",log:["Remove `RuleRegistry` interface for `Unit` `Rule`."]},"base-player-action-active-unit":{status:"updated",log:["Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-adjust-trade-rates":{status:"updated",log:["Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-inactive-unit":{status:"updated",log:["Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-revolution":{status:"updated",log:["Update dependencies and add generic property for `PlayerAction`."]},"base-unit-action-attack":{status:"updated",log:["Pass the `Attack` instance to the `Defeated` `Rule` so it can be determined if a `Unit` in a `City` was a defender or not.","Remove `RuleRegistry` interface usage for `Defeated` `Rule`.","Move `unitRegistry` into the `Attack` constructor.","Replace usages of `Math.random` with a testable injected dependency."]},"base-unit-action-build-irrigation":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-mine":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-road":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-forest":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-jungle":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-swamp":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-embark":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` `Rule`s."]},"base-unit-action-fortify":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-found-city":{status:"updated",log:["Ensure local `RuleRegistry` is passed on to `City` constructor."]},"base-unit-action-move":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved`, `MovementCost` and `ValidateMove` `Rule`s."]},"base-unit-action-pillage":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-plant-forest":{status:"updated",log:["Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-type-naval-transport":{status:"updated",log:["Update to use latest `core-unit-transport` changes."]},"civ1-city-happiness":{status:"updated",log:["Bump dependencies.","Consolidate `Cost` `Rule`s.","Remove unused `Rule` classes.","Rewrite to use customised `Yield`s for each property.","Update to latest version of `core-city-improvement`."]},"civ1-city-improvement":{status:"updated",log:["Reclassify `CityImprovementMaintenanceGold` `Yield` `Rule`s as `Cost` `Rule`s.","Ensure `Corruption` is provided as expected`.","Add some basic cleanup for when `City`s are destroyed.","Update to latest version of `core-city-improvement`.","Move `Corruption` generation to `civ1-city`, where it makes more sense to exist.","Work on test coverage.","Bump dependencies."]},"civ1-city":{status:"updated",log:["Update `CityBuild` and `ChangeProduction` instantiations with new `PlayerAction` changes.","Ensure when a `Unit` is defeated in a `City` that the population is only reduced when it's a defender.","Use `FoodExhausted` and `Unsupported` `Rule`s.","Refactor `Yield`, `Cost` and `ProcessYield` `Rule` usages.","Update `ProcessYield` usage.","Use updated `CityRegistry.getByTile` method.","Update `setUpCity` mechanism.","Ensure `Irrigation` and `Road` `TileImprovement`s are only added if they don't already exist.","Update `setUpCity` to allow bypassing of `TileImprovement` additions.","Move `Corruption` generation from `civ1-city-improvement`.","Ensure `@civ-clone/core-city-happiness` is used as a package, not a github repo.","Improve test coverage."]},"civ1-civilization":{status:"updated",log:["Repo cleansing."]},"civ1-goody-hut":{status:"updated",log:["Update to use latest `CityRegistry` changes.","Update usages of `Math.random` to be an injectable number provider.","Another attempt at the `City` type of `GoodyHut`."]},"civ1-government":{status:"updated",log:["Update `Revolution` instantiation with new `PlayerAction` changes."]},"civ1-player":{status:"updated",log:["Update `EndTurn` instantiation with new `PlayerAction` changes.","Use `Defeated` `Rule` from `core-player`.","Use `TurnStart` `Rule`s where applicable.","Refactor `ProcessYield` approach.","Use correct type for `City` `Destroyed` and `Unit` `Destroyed` `Rule`s.","Re-work the `Unit` `DelayedAction` handling.","Move event contents into `Rule`s where possible.","Remove reliance on other `civ1-*` packages, preferring individual packages instead.","Add unit tests.","Ensure local `RuleRegistry` is passed in to `World` `Built` `Rule`s when `Unit`s are created.","Fix `ProcessYield` problem in `TurnStart` `Rule`."]},"civ1-science":{status:"updated",log:["Update `ChooseResearch` instantiation with new `PlayerAction` changes.","Update dependencies.","Add unit tests.","Ensure `@civ-clone/core-city-happiness` is used as a module, not a github repo.","Add `randomNumberGenerator` provider for `captured` `Rule`."]},"civ1-trade-rate":{status:"updated",log:["Update `AdjustTradeRates` instantiation with new `PlayerAction` changes.","Ensure `Corruption` can never exceed the available `Trade`.","Add `Player` `turn-start` `Rule` to convert `Trade` into the component `Yield`s."]},"civ1-treasury":{status:"updated",log:["Update `CompleteProduction` instantiation with new `PlayerAction` changes.","Ensure `@civ-clone/core-city-happiness` is used as a package, not a github repo."]},"civ1-unit":{status:"updated",log:["Update `ActiveUnit` and `InactiveUnit` instantiations with new `PlayerAction` changes.","Use `Unsupported` and `Stowed` `Rule`s.","Ensure `Sail` is obselete with `Magenetism`.","Simplify and clarify `Move` action constraints.","Clean up when `Unit` is `Destroyed`.","Add better test coverage.","Add missing `MovementCost`s and use named re-usable `Criterion`s for `Action` `Rule`s where possible.","Ensure `Air` `Unit`s can attack `Land` `Unit`s."]},"civ1-wonder":{status:"updated",log:["Use updated `Yield` mechanism.","Add `CureForCancer` effects.","Add obsoletion for `Lighthouse`.","Rework the tests.","Update to remove requirement for `Player` to be passed into the `Wonder` constructor.","Fix some wonder effects.","Ensure `engine` parameter of `Wonder` `obsolete` `Rule`s is optional.","Add `Wonder` `obsolete` `Rule`s."]},"civ1-world":{status:"updated",log:["Update calls to `Math.random` to be an injectable random number generator.","Ensure `Road` and `Railroad` are not applied multiple times."]},"core-ai-client":{status:"updated",log:["Replace usages of `Math.random` with a testable injected dependency."]},"core-city-build":{status:"updated",log:["Update to use `PlayerAction` generics and fix return type of `Buildable`.","Simpliy `Rule`s."]},"core-city-growth":{status:"updated",log:["Add `CityGrowth` object as an argument to `FoodExhasted` `Rule` instead of `City`.","Fix tests.","Update `README.md`.","Update dependencies."]},"core-city-happiness":{status:"updated",log:["Simpliy `Rule`s.","Repo cleansing."]},"core-city-improvement":{status:"updated",log:["Remove `Player` as a constructor argument since this is available (and more likely reliable) via `City` instead."]},"core-city":{status:"updated",log:["Change `CityRegistry.getByTile` to return `City` instead of `City[]`."]},"core-civilization":{status:"updated",log:["Update to use `DataObject.sourceClass()` for `TraitRegistry` interactions.","Update to use injectable random number generator instead of hard-coded `Math.random`.","Add `getBySubclass` to `TraitRegistry`."]},"core-data-object":{status:"updated",log:["Add `sourceClass()` method to auto cast to `IConstructor`.","Bump dependencies.","Update `DataObject.sourceClass()` type annotations after usage."]},"core-game-year":{status:"updated",log:["Simpliy `Rule`s."]},"core-goody-hut":{status:"updated",log:["Simpliy `Rule`s."]},"core-government":{status:"updated",log:["Simpliy `Rule`s."]},"core-player-world":{status:"updated",log:["Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Fix bug with `PlayerTile.update`.","Allow defined properties to remain `configurable` when (for example) a `City` is built on an already known `Tile`."]},"core-player":{status:"updated",log:["Add `Player` as an argument to `PlayerAction`s.","Make `PlayerAction`s generic to make using `PlayerAction.value()` easier.","Add `Defeated` `Rule`.","Fix typo in filename."]},"core-registry":{status:"updated",log:["Add .deepsource.toml","Improve TypeScript bindings on `Registry.getBy` to hint at properties to search for.","Bump dependencies."]},"core-rule":{status:"updated",log:["Using generics in a better way to provide better hints to arguments for `RuleRegistry.process`.","Refine typings further for `RuleRegistry`."]},"core-science":{status:"updated",log:["Simpliy `Rule`s."]},"core-terrain-feature":{status:"updated",log:["Simpliy `Rule`s.","Replace `Math.random` with injectable generator.","Add a caching layer for `TerrainFeatureRegistry.getByTerrain`. This sped up the map generation and start `Tile` sorting by a considerable amount."]},"core-terrain":{status:"updated",log:["Simpliy `Rule`s."]},"core-tile-improvement":{status:"updated",log:["Simpliy `Rule`s."]},"core-treasury":{status:"updated",log:["Simplify `Rule`s.","Change how `PlayerTreasury.cost` works with updated `Rule`s.","Ensure an empty `Yield` is passed in to the `Cost` `Rule`s in `PlayerTreasury`."]},"core-turn-based-game":{status:"updated",log:["Simpliy `Rule`s.","Amend `Turn` to no longer inherit from `Yield`.","Ensure instances are able to be passed in for events and `Rule`s.","Repo cleansing.","Ensure `Turn` extends `DataObject` and includes the `value`."]},"core-unit-transport":{status:"updated",log:["Update `Transport` to include a mixin mechanism for extending existing classes, reducing repetition for `Transport` `Unit`s of different types.","Add `Stowed` and `Unloaded` `Rule`s.","Add tests.","Bump dependencies."]},"core-unit":{status:"updated",log:["Include the `Action` in `Defeated` `Rule`s so when a `Unit` in a `City` is `Destroyed` it's easy enough to work out if it was a defender.","Add `Unsupported` `Rule`.","Bump depenedencies.","Update typings."]},"core-wonder":{status:"updated",log:["Add `WonderRegistry.getByPlayer`.","Fix `WonderRegistry.getByPlayer`."]},"core-world":{status:"updated",log:["Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Ensure `RuleRegistry` is passed into `World`s constructor, instead of when used by `build`."]},"core-yield":{status:"updated",log:["Add `NegativeYield` as a convenience object for costs."]},"simple-ai-client":{status:"updated",log:["Update dependencies and fix tests."]},"simple-world-generator":{status:"updated",log:["Ensure `TerrainFeatureRegistry` is passed in to `simpleRLELoader`.","Replace `Math.random` calls with injectable random number generator."]}}},{version:"0.1.0@7df4e13",date:"2022-04-07T20:46:58.000Z",localChanges:["Add messaging for unsupported `Unit`s, `City` size decreases, etc."],externalChanges:{"base-city-yield-corruption":{status:"added",log:["Initial commit","Make class extend `Trade` `Yield` and store the value negated."]},"civ1-city-improvement":{status:"updated",log:["Add `Corruption` `Yield` and `Effect`s of `Palace` and `Courthouse`.","Ensure `Palace` is destroyed when a `City` is captured."]},"civ1-city":{status:"updated",log:["Process `Unit` and population support (`Food` and `Production`)."]},"civ1-trade-rate":{status:"updated",log:["Implement `Corruption` `Effect`s."]},"civ1-treasury":{status:"updated",log:["Handle running out of `Gold` in the treasury by selling the maintained `CityImprovement` that would deplete it."]}}},{version:"0.1.0@deeed3f",date:"2022-04-06T20:36:41.000Z",localChanges:["Implement `GamePortal` to begin to remove the inline code from `renderer.ts`.","Replace TypeScript generated modules with an ESBuild bundle.","Beginnings of work to separate the view code from the `ElectronClient` package."],externalChanges:{}},{version:"0.1.0@1d0e3e5",date:"2022-04-04T21:04:11.000Z",localChanges:["Add confirmation dialog when quitting.","Re-enable map cheat.","Add a fudge for `ReassignWorkers` action.","Work on having `SelectionWindow`s automatically sized to fit available options.","Allow `Escape` to return focus to the map when `Action`s are selected.",'Fix occasional bug with `TradeRates` sliders "not adding up to 1".',"Show how many turns the `CityBuild` item will take.","Consolidate the `Yield`s shown in `City` view and show a breakdown with the providers for further inspection.","Allow positioning adjustments in `Map`s.","Adjust position of `Shield`s and the `City` tile.","Sort the `Yield`s when displayed in a `Map`.","Fix the `visibleRange` behaviour in the `Portal`.","Show `Tile` info (`Terrain`, `Feature`s, `Improvement`s) in `UnitDetails`.","Refactor `ActiveUnit` handling - still some work to do here when activating another unit.","Implement `w`ait key functionality.","Display `Unit` `Busy` status.","Fix bug where the `Minimap` wasn't updating in some circumstances."],externalChanges:{"base-city-yield-city-improvement-maintenance-gold":{status:"added",log:["Initial commit","Make class extend `Gold` `Yield` and store the value negated."]},"base-city-yield-population-support-food":{status:"added",log:["Initial commit","Make class extend `Food` `Yield` and store the value negated."]},"base-city-yield-unit-support-food":{status:"added",log:["Initial commit","Make class extend `Food` `Yield` and store the value negated."]},"base-city-yield-unit-support-production":{status:"added",log:["Initial commit","Make class extend `Production` `Yield` and store the value negated."]},"civ1-city-happiness":{status:"updated",log:["Update to use new `Yield` mechanism. Actually, it was in part due to this module that the mechanism changed...","Fix a bug where `CivilDisorder` effects were applied even if the `City` wasn't in civil disorder.","Remove `CivilDisorder` `Yield` effects and move those to the respective `civ-`... modules."]},"civ1-city-improvement":{status:"updated",log:["Update method of processing `Yield`s.","Add requirements for a `Factory` to be built before a `PowerPlant` can be built.","Ensure only one type of `PowerPlant` can exist within a `City`.","Add missing `Yield` and `YieldModifier` `Rule`s."]},"civ1-city":{status:"updated",log:["Fix bug where `Unit`s weren't destroyed when their supporting `City` was destroyed.","Rework `ProcessYield` `Rule`s to utilise new ...`Support` `Yield`s.","Remove `Rule` that empties the `FoodStorage` on shrink.","Add `Unit` `Defeated` `Rule` to handle a `City` being destroyed instead of captured.","Use updated `Yield` `Rule`s.","Slight tweak to how `Yield`s are weighted.","Update handling not adding `Production` when `City` is in `CivilDisorder`."]},"civ1-goody-hut":{status:"updated",log:["Updates to `Yield` weights."]},"civ1-player":{status:"updated",log:["Add restrictions on the types of `Terrain`s that can be start squares.","Ensure `Tile` `Yield` cache is cleared each time visibility is changed.","Update to `Yield` weights."]},"civ1-science":{status:"updated",log:["Fix a bug where if there are no `Advance`s available to research (or fewer than the number of granted `Advance`s will be) it'll grant as many are available.","Update handling not adding `Research` when `City` is in `CivilDisorder`."]},"civ1-trade-rate":{status:"updated",log:["Simplify `Yield` `Rule`s."]},"civ1-treasury":{status:"updated",log:["Use updated `Yield` mechanism.","Update handling not adding `Gold` when `City` is in `CivilDisorder`."]},"civ1-unit":{status:"updated",log:["Fix bug where units could retry a failed move over and over.","Made it more likely that your `Move` would succeed (>50% of `Move`s means it'll work - in-line with Civ)."]},"civ1-world":{status:"updated",log:["Update `Yield` mechanism.","Fix a few `Tile` `Yield`s."]},"core-city-happiness":{status:"updated",log:[]},"core-city":{status:"updated",log:["Rework `Yield` `Rule`s to return `Yield`s rather than expecting `Yield` constructors to be provided."]},"core-player-world":{status:"updated",log:["Updates to `Yield` mechanism."]},"core-world":{status:"updated",log:["Update `Yield` mechanism for `Tile`s.","Fix bug where all `Tile`s were rated as `0` since the changes to `Yield`s."]},"core-yield":{status:"updated",log:["Add `reduceYields` utility function."]}}},{version:"0.1.0@1e05c11",date:"2022-03-23T22:18:44.000Z",localChanges:["Updates to utilise `PlayerTile`s.","Update styling for `AdjutstTradeRates` and `Revolution` `PlayerAction`s.","Fix `Actions` `keydown` event to allow selecting events with arrow keys.","Add `Unit` `Busy` indicators."],externalChanges:{"base-city-improvement-aqueduct":{status:"added",log:["Initial commit"]},"base-city-improvement-bank":{status:"added",log:["Initial commit."]},"base-city-improvement-barracks":{status:"added",log:["Initial commit"]},"base-city-improvement-cathedral":{status:"added",log:["Initial commit."]},"base-city-improvement-citywalls":{status:"added",log:["Initial commit"]},"base-city-improvement-colosseum":{status:"added",log:["Initial commit"]},"base-city-improvement-courthouse":{status:"added",log:["Initial commit"]},"base-city-improvement-factory":{status:"added",log:["Initial commit."]},"base-city-improvement-granary":{status:"added",log:["Initial commit"]},"base-city-improvement-hydroplant":{status:"added",log:["Initial commit."]},"base-city-improvement-library":{status:"added",log:["Initial commit"]},"base-city-improvement-manufacturingplant":{status:"added",log:["Initial commit."]},"base-city-improvement-marketplace":{status:"added",log:["Initial commit"]},"base-city-improvement-masstransit":{status:"added",log:["Initial commit."]},"base-city-improvement-nuclearplant":{status:"added",log:["Initial commit."]},"base-city-improvement-palace":{status:"added",log:["Initial commit"]},"base-city-improvement-powerplant":{status:"added",log:["Initial commit."]},"base-city-improvement-recyclingcenter":{status:"added",log:["Initial commit."]},"base-city-improvement-sdidefence":{status:"added",log:["Initial commit."]},"base-city-improvement-temple":{status:"added",log:["Initial commit"]},"base-city-improvement-university":{status:"added",log:["Initial commit."]},"base-city-yield-gold":{status:"added",log:["Initial commit"]},"base-city-yield-happiness":{status:"added",log:["Initial commit"]},"base-city-yield-luxuries":{status:"added",log:["Initial commit"]},"base-city-yield-research":{status:"added",log:["Initial commit"]},"base-city-yield-unhappiness":{status:"added",log:["Initial commit","Fix package name and repo URL.","Actually fix package name and repo URL..."]},"base-civilization-american":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-aztec":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-babylonian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-chinese":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-egyptian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-english":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-french":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-german":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-greek":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-indian":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-mongol":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-roman":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-russian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-zulu":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-diplomacy-declaration-peace":{status:"added",log:["Initial commit"]},"base-diplomacy-declaration-war":{status:"added",log:["Initial commit"]},"base-diplomacy-interaction-contact":{status:"added",log:["Initial commit"]},"base-goody-hut-advance":{status:"added",log:["Initial commit"]},"base-goody-hut-city":{status:"added",log:["Initial commit"]},"base-goody-hut-gold":{status:"added",log:["Initial commit"]},"base-goody-hut-unit":{status:"added",log:["Initial commit","Use consistent references to github repos","Bump dependencies after changing naming convention to be consistent","Add `Unit` `Rule` for determining which `Unit` is provided","Remove redundant dependency.","Update naming for imports from `core-goody-hut`.","Remove `RuleRegistry` interface for `Unit` `Rule`."]},"base-government-anarchy":{status:"added",log:["Initial commit"]},"base-government-communism":{status:"added",log:["Initial commit"]},"base-government-democracy":{status:"added",log:["Initial commit"]},"base-government-despotism":{status:"added",log:["Initial commit"]},"base-government-monarchy":{status:"added",log:["Initial commit"]},"base-government-republic":{status:"added",log:["Initial commit"]},"base-leader-trait-aggression":{status:"added",log:["Initial commit"]},"base-leader-trait-development":{status:"added",log:["Initial commit"]},"base-leader-trait-militarism":{status:"added",log:["Initial commit"]},"base-player-action-active-unit":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-adjust-trade-rates":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-end-turn":{status:"added",log:["Initial commit"]},"base-player-action-inactive-unit":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-revolution":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-science-advance-advancedflight":{status:"added",log:["Initial commit."]},"base-science-advance-alphabet":{status:"added",log:["Initial commit"]},"base-science-advance-astronomy":{status:"added",log:["Initial commit"]},"base-science-advance-atomictheory":{status:"added",log:["Initial commit."]},"base-science-advance-automobile":{status:"added",log:["Initial commit."]},"base-science-advance-banking":{status:"added",log:["Initial commit."]},"base-science-advance-bridgebuilding":{status:"added",log:["Initial commit"]},"base-science-advance-bronzeworking":{status:"added",log:["Initial commit"]},"base-science-advance-ceremonialburial":{status:"added",log:["Initial commit"]},"base-science-advance-chemistry":{status:"added",log:["Initial commit."]},"base-science-advance-chivalry":{status:"added",log:["Initial commit"]},"base-science-advance-codeoflaws":{status:"added",log:["Initial commit"]},"base-science-advance-combustion":{status:"added",log:["Initial commit."]},"base-science-advance-communism":{status:"added",log:["Initial commit."]},"base-science-advance-computers":{status:"added",log:["Initial commit."]},"base-science-advance-conscription":{status:"added",log:["Initial commit."]},"base-science-advance-construction":{status:"added",log:["Initial commit"]},"base-science-advance-corporation":{status:"added",log:["Initial commit."]},"base-science-advance-currency":{status:"added",log:["Initial commit"]},"base-science-advance-democracy":{status:"added",log:["Initial commit."]},"base-science-advance-electricity":{status:"added",log:["Initial commit."]},"base-science-advance-electronics":{status:"added",log:["Initial commit."]},"base-science-advance-engineering":{status:"added",log:["Initial commit"]},"base-science-advance-explosives":{status:"added",log:["Initial commit."]},"base-science-advance-feudalism":{status:"added",log:["Initial commit"]},"base-science-advance-flight":{status:"added",log:["Initial commit."]},"base-science-advance-fusionpower":{status:"added",log:["Initial commit."]},"base-science-advance-geneticengineering":{status:"added",log:["Initial commit."]},"base-science-advance-gunpowder":{status:"added",log:["Initial commit","Repo cleansing."]},"base-science-advance-horsebackriding":{status:"added",log:["Initial commit"]},"base-science-advance-industrialization":{status:"added",log:["Initial commit."]},"base-science-advance-invention":{status:"added",log:["Initial commit"]},"base-science-advance-ironworking":{status:"added",log:["Initial commit"]},"base-science-advance-laborunion":{status:"added",log:["Initial commit."]},"base-science-advance-literacy":{status:"added",log:["Initial commit"]},"base-science-advance-magnetism":{status:"added",log:["Initial commit."]},"base-science-advance-mapmaking":{status:"added",log:["Initial commit"]},"base-science-advance-masonry":{status:"added",log:["Initial commit"]},"base-science-advance-massproduction":{status:"added",log:["Initial commit."]},"base-science-advance-mathematics":{status:"added",log:["Initial commit"]},"base-science-advance-medicine":{status:"added",log:["Initial commit."]},"base-science-advance-metallurgy":{status:"added",log:["Initial commit."]},"base-science-advance-monarchy":{status:"added",log:["Initial commit"]},"base-science-advance-mysticism":{status:"added",log:["Initial commit"]},"base-science-advance-navigation":{status:"added",log:["Initial commit"]},"base-science-advance-nuclearfission":{status:"added",log:["Initial commit."]},"base-science-advance-nuclearpower":{status:"added",log:["Initial commit."]},"base-science-advance-philosophy":{status:"added",log:["Initial commit."]},"base-science-advance-physics":{status:"added",log:["Initial commit."]},"base-science-advance-plastics":{status:"added",log:["Initial commit."]},"base-science-advance-pottery":{status:"added",log:["Initial commit"]},"base-science-advance-railroad":{status:"added",log:["Initial commit."]},"base-science-advance-recycling":{status:"added",log:["Initial commit."]},"base-science-advance-refining":{status:"added",log:["Initial commit."]},"base-science-advance-religion":{status:"added",log:["Initial commit."]},"base-science-advance-robotics":{status:"added",log:["Initial commit."]},"base-science-advance-rocketry":{status:"added",log:["Initial commit."]},"base-science-advance-spaceflight":{status:"added",log:["Initial commit."]},"base-science-advance-steamengine":{status:"added",log:["Initial commit."]},"base-science-advance-steel":{status:"added",log:["Initial commit."]},"base-science-advance-superconductor":{status:"added",log:["Initial commit."]},"base-science-advance-theoryofgravity":{status:"added",log:["Initial commit."]},"base-science-advance-therepublic":{status:"added",log:["Initial commit"]},"base-science-advance-thewheel":{status:"added",log:["Initial commit"]},"base-science-advance-trade":{status:"added",log:["Initial commit."]},"base-science-advance-university":{status:"added",log:["Initial commit."]},"base-science-advance-writing":{status:"added",log:["Initial commit"]},"base-terrain-arctic":{status:"added",log:["Initial commit"]},"base-terrain-desert":{status:"added",log:["Initial commit"]},"base-terrain-feature-coal":{status:"added",log:["Initial commit"]},"base-terrain-feature-fish":{status:"added",log:["Initial commit"]},"base-terrain-feature-game":{status:"added",log:["Initial commit"]},"base-terrain-feature-gems":{status:"added",log:["Initial commit"]},"base-terrain-feature-gold":{status:"added",log:["Initial commit"]},"base-terrain-feature-horse":{status:"added",log:["Initial commit"]},"base-terrain-feature-oasis":{status:"added",log:["Initial commit"]},"base-terrain-feature-oil":{status:"added",log:["Initial commit"]},"base-terrain-feature-seal":{status:"added",log:["Initial commit"]},"base-terrain-feature-shield":{status:"added",log:["Initial commit"]},"base-terrain-forest":{status:"added",log:["Initial commit"]},"base-terrain-grassland":{status:"added",log:["Initial commit"]},"base-terrain-hills":{status:"added",log:["Initial commit"]},"base-terrain-jungle":{status:"added",log:["Initial commit"]},"base-terrain-mountains":{status:"added",log:["Initial commit"]},"base-terrain-ocean":{status:"added",log:["Initial commit"]},"base-terrain-plains":{status:"added",log:["Initial commit"]},"base-terrain-river":{status:"added",log:["Initial commit"]},"base-terrain-swamp":{status:"added",log:["Initial commit"]},"base-terrain-tundra":{status:"added",log:["Initial commit"]},"base-terrain-yield-food":{status:"added",log:["Initial commit"]},"base-terrain-yield-production":{status:"added",log:["Initial commit"]},"base-terrain-yield-trade":{status:"added",log:["Initial commit"]},"base-tile-improvement-irrigation":{status:"added",log:["Initial commit"]},"base-tile-improvement-mine":{status:"added",log:["Initial commit"]},"base-tile-improvement-pollution":{status:"added",log:["Initial commit"]},"base-tile-improvement-railroad":{status:"added",log:["Initial commit"]},"base-tile-improvement-road":{status:"added",log:["Initial commit"]},"base-trade-rate-luxuries":{status:"added",log:["Initial commit"]},"base-trade-rate-research":{status:"added",log:["Initial commit"]},"base-trade-rate-tax":{status:"added",log:["Initial commit"]},"base-unit-action-attack":{status:"added",log:["Initial commit","Reduce `Attack` when `moves` is < 1.","Reduce `moves` when attacking.","Pass the `Attack` instance to the `Defeated` `Rule` so it can be determined if a `Unit` in a `City` was a defender or not.","Remove `RuleRegistry` interface usage for `Defeated` `Rule`.","Move `unitRegistry` into the `Attack` constructor.","Replace usages of `Math.random` with a testable injected dependency."]},"base-unit-action-build-irrigation":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-mine":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-railroad":{status:"added",log:["Initial commit.","Add custom `Busy` `Rule`.","Somehow broke 0.1.1 (and now deleted 0.1.0 too, oops!).","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-road":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-capture-city":{status:"added",log:["Initial commit","Rework constructor to accept the target `City`."]},"base-unit-action-clear-forest":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-jungle":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-swamp":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-disembark":{status:"added",log:["Initial commit","Rework constructor to accept the target `ITransport`."]},"base-unit-action-embark":{status:"added",log:["Initial commit","Update `Move` dependency","Rework constructor to accept the target `ITransport`.","Remove `RuleRegistry` interface usage for `Moved` `Rule`s."]},"base-unit-action-fortify":{status:"added",log:["Initial commit","Add `UnitImprovementRegistry` via constructor and use updated `DelayedAction` constructor.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-found-city":{status:"added",log:["Initial commit","Ensure `CityNameRegistry` is used for `City` names.","Ensure local `RuleRegistry` is passed on to `City` constructor.","Repo cleansing."]},"base-unit-action-move":{status:"added",log:["Initial commit","Extract `movementCost` and `validate` functions into members.","Remove `RuleRegistry` interface usage for `Moved`, `MovementCost` and `ValidateMove` `Rule`s."]},"base-unit-action-no-orders":{status:"added",log:["Initial commit"]},"base-unit-action-pillage":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-plant-forest":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-sleep":{status:"added",log:["Initial commit","Update to latest `DelayedAction` version and add wake condition to `Busy`","Ensure `Unit` `visibility` is used to check when to wake after `Sleep`ing.","Add labelled `Busy` `Rule` (`Sleeping`) to indicate the action being performed.","Repo cleansing."]},"base-unit-action-unload":{status:"added",log:["Initial commit","Ensure `cargo` is correctly reset with required number of moves when `Unload`ing."]},"base-unit-artillery":{status:"added",log:["Initial commit."]},"base-unit-battleship":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-bomber":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-cannon":{status:"added",log:["Initial commit."]},"base-unit-caravan":{status:"added",log:["Initial commit."]},"base-unit-carrier":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-catapult":{status:"added",log:["Initial commit"]},"base-unit-chariot":{status:"added",log:["Initial commit"]},"base-unit-cruiser":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-diplomat":{status:"added",log:["Initial commit."]},"base-unit-fighter":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-frigate":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-horseman":{status:"added",log:["Initial commit"]},"base-unit-improvement-fortified":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone"]},"base-unit-improvement-veteran":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone"]},"base-unit-ironclad":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-knight":{status:"added",log:["Initial commit"]},"base-unit-mechanizedinfanty":{status:"added",log:["Initial commit.","Oops! Mass rename from `MechanizedInfanty` to `MechanizedInfantry`..."]},"base-unit-mechanizedinfantry":{status:"added",log:["Initial commit.","Oops! Mass rename from `MechanizedInfanty` to `MechanizedInfantry`..."]},"base-unit-musketman":{status:"added",log:["Initial commit","Repo cleansing."]},"base-unit-nuclear":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-rifleman":{status:"added",log:["Initial commit."]},"base-unit-sail":{status:"added",log:["Initial commit"]},"base-unit-settlers":{status:"added",log:["Initial commit"]},"base-unit-spearman":{status:"added",log:["Initial commit"]},"base-unit-submarine":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-swordman":{status:"added",log:["Initial commit"]},"base-unit-tank":{status:"added",log:["Initial commit."]},"base-unit-transport":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-trireme":{status:"added",log:["Initial commit"]},"base-unit-type-air":{status:"added",log:["Initial commit."]},"base-unit-type-fortifiable":{status:"added",log:["Initial commit"]},"base-unit-type-land":{status:"added",log:["Initial commit"]},"base-unit-type-naval-transport":{status:"added",log:["Initial commit","Ensure type safety when using `this` to refer to `ITransport`.","Update to use latest `core-unit-transport` changes."]},"base-unit-type-naval":{status:"added",log:["Initial commit"]},"base-unit-type-worker":{status:"added",log:["Initial commit"]},"base-unit-warrior":{status:"added",log:["Initial commit"]},"base-wonder-apolloprogram":{status:"added",log:["Initial commit."]},"base-wonder-colossus":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-copernicus-observatory":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-cureforcancer":{status:"added",log:["Initial commit."]},"base-wonder-darwinsvoyage":{status:"added",log:["Initial commit."]},"base-wonder-great-library":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-great-wall":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-hanging-gardens":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-hooverdam":{status:"added",log:["Initial commit."]},"base-wonder-isaacnewtonscollege":{status:"added",log:["Initial commit."]},"base-wonder-jsbachscathedral":{status:"added",log:["Initial commit."]},"base-wonder-lighthouse":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-magellans-expedition":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-manhattanproject":{status:"added",log:["Initial commit."]},"base-wonder-michelangeloschapel":{status:"added",log:["Initial commit."]},"base-wonder-oracle":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-pyramids":{status:"added",log:["Initial commit"]},"base-wonder-setiprogram":{status:"added",log:["Initial commit."]},"base-wonder-shakespearestheatre":{status:"added",log:["Initial commit."]},"base-wonder-unitednations":{status:"added",log:["Initial commit."]},"base-wonder-womenssuffrage":{status:"added",log:["Initial commit."]},"civ1-city-happiness":{status:"updated",log:["Add effect for `Cololsseum` and `Cathedral`.","Add military wariness to `Republic` and `Democracy` governments.","Fix values for `Colosseum` and `Cathedral`.","Attempt to fix perpetual `CivilDisorder` and `Production` causing `Unit`s to become unsupported.","Fixed bug where `CivilDisorder` effects were active any time there was any `Unhappiness`."]},"civ1-city-improvement":{status:"updated",log:["Add missing `CityImprovement`s.","Update to use new `CityBuild` mechanism.","Fix tests.","Add `Yield` modifiers for `Factory` etc."]},"civ1-city":{status:"updated",log:["Update `Captured` event to include both previous owner and capturing player.","Move `Captured` event to `Player` to handle `player:defeated` events.","Updates to allow setting `YieldRegistry` in `setUpCity`."]},"civ1-government":{status:"updated",log:["Utilise `AvailableGovernmentsRegistry` and separate `Revolution` `PlayerAction` (although TODO, change that to the request and a random delay for the `ChooseGovernment` `MandatoryAction`).","Update `GovernmentChanged` `Rule` to be compatible with `PlayerTile`s."]},"civ1-player":{status:"updated",log:["Allow async `Client` methods (`chooseCivilization`, `chooseLeader`)","Fix `player:defeated` conditions.","Incorporate `Captured` events from `City` `Captured` events."]},"civ1-science":{status:"updated",log:["Updates to randomly start with some `Advance`s.","Acquire `Advance`s when capturing an advance enemey `City`."]},"civ1-trade-rate":{status:"updated",log:["Add `AdjustTradeRates` `PlayerAction`."]},"civ1-unit":{status:"updated",log:["Correct misspelled `MechanizedInfantry`.","Update to use new `CityBuild` mechanism.","Fix tests","Add `BuildRailroad`.","Fix movement costs."]},"civ1-wonder":{status:"updated",log:["Add missing `Wonder`s.","Utilise new `CityBuild` mechanism for registering.","Fix missing cost for `DarwinsVoyage`.","Add effects for `MichelangelosChapel` and `WomensSuffrage`.","Add `Obsoletion` `Rule` to notify `Wonder` owners for obsolesence.","Move `Yield` `Rule`s to `Cost` `Rule`s to enable accurate processing."]},"civ1-world":{status:"updated",log:["Updating world generator values to generate maps closer to those from the original Civilization. More work still to do here.","Fix bug with incorrect `Yield`s for `Plains` with `Horse`.","Enable `Railroad` construction.","Fix bug where `Irrigation` and `Mine` could both exist on the same `Tile`.","Add `Railroad` `Yield` modifier.","Add updated `Tile` yields for other governments."]},"core-ai-client":{status:"added",log:["Initial commit","Add missing `instance` to `AIClientRegistry` and allow `LeaderRegistry` instance to be passed in.","Replace usages of `Math.random` with a testable injected dependency."]},"core-city-build":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Make `CityBuild`s extend `DataObject`s for exposing data to `Client`s.","Add `City` to exported fields from `DataObject#toPlainObject`.","Add `ChangeProduction` `PlayerAction` when a `City` is already building something.",'Fix path reference from relative to "absolute" via `@civ-clone`.',"Update `CityBuild#available` mechanism to show resource costs for items.","Add `Buildable` class that `Unit`s and `CityImprovement`s inherit from.","Change logic to pave the way for alternative costs associated to `Buildable` items.","Update to use `PlayerAction` generics and fix return type of `Buildable`.","Simpliy `Rule`s.","Make `AvailableCityBuildItemsRegistry` more flexible.","Re-work entities and interfaces to avoid having to forcibly cast everything."]},"core-city-growth":{status:"added",log:["Initial commit","Fix missing `CityGrowth` `AdditionalData` from `City`s.","Add `CityGrowth` object as an argument to `FoodExhasted` `Rule` instead of `City`.","Fix tests.","Update `README.md`.","Update dependencies.","Repo cleansing."]},"core-city-happiness":{status:"added",log:["Initial commit","Simpliy `Rule`s.","Repo cleansing."]},"core-city-improvement":{status:"added",log:["Initial commit","Make `CityImprovement`s extend `DataObject`.","Update to use new `Buildable` class from core-city-build.","Remove `Player` as a constructor argument since this is available (and more likely reliable) via `City` instead.","Track `destroyed` status rather than unregister the `CityImprovement`."]},"core-city":{status:"added",log:["Initial commit","Add `cities` `AdditionalData` to `Player`s.","Add `player` to data transfer information and add `city` `AdditionalData` to `Tile`s.","Add missing fields to be exported via `DataObject#toPlainObject`.","Update `Captured` `Rule` so that the previous owner and the capturing owner are explicitly provided.","Allow `YieldRegistry` to be supplied on construct or runtime (`.yields`).","Update `yields` to process `Yield` then `Cost` `Rule`s, fixing some bugs.","Rework `Yield` `Rule`s to return `Yield`s rather than expecting `Yield` constructors to be provided.","Change `CityRegistry.getByTile` to return `City` instead of `City[]`.","Repo cleansing.","Track `destroyed` status rather than unregister the `City`."]},"core-civ-client":{status:"added",log:["Initial commit"]},"core-civilization":{status:"added",log:["Initial commit","Update `Leader`s to be `DataObject`s.","Update to use `DataObject.sourceClass()` for `TraitRegistry` interactions.","Update to use injectable random number generator instead of hard-coded `Math.random`.","Add `getBySubclass` to `TraitRegistry`."]},"core-client":{status:"added",log:["Initial commit"]},"core-data-object":{status:"added",log:["Initial commit","Add `id` to `DataObject`s to allow easy referencing from within `Client`s.","Allow `AdditionalData` to be applied to child classes.","Change `DataObject`s to allow recursive data to be stored.","Include `reconstitueData` as a core lib to be used in other packages.","Add `Entity` and `EntityInstance` types for use in other packages.","Remove `ulid` and replace with simpler ID generation.","Merge pull request #1 from civ-clone/remove-ulid","Remove `ulid` and replace with simpler ID generation.","Add `toPlainObject` filter to allow masking of unknown objects (enemy `Player`s, `Unit`s etc.)","Perform `filter`ing on all objects, rather than only `DataObject`s. This also means we can return something other than a `DataObject`.","Add `sourceClass()` method to auto cast to `IConstructor`.","Bump dependencies.","Update `DataObject.sourceClass()` type annotations after usage.","Ensure `id` is included in `IDataObject` so that `keys` for both `DataObject` and `IDataObject` return the same thing.","Make `IDataObject` interface more flexible."]},"core-diplomacy":{status:"added",log:["Initial commit"]},"core-engine":{status:"added",log:["Initial commit","Add `@types/glob` as a direct dependency for dependent packages.","Prevent `Start` `Rule`s from being processed directly. Might rever this later...","Remove reliance on `node` so that a browser can be used instead."]},"core-game-year":{status:"added",log:["Initial commit","Make `Year` extend `DataObject`.","Simpliy `Rule`s."]},"core-goody-hut":{status:"added",log:["Initial commit","Add `Distribution` `Rule` for controlling placement of huts within `World`s.","Correct arguments for `Distribution` `Rule`.","Add `goodyHut` `AdditionalData` to `Tile`s.","Ensure `GoodyHut`s extend `DataObject`s.","Simpliy `Rule`s."]},"core-government":{status:"added",log:["Initial commit","Provide `available` `Government`s with the `PlayerGovernment` instance.","Remove `Revolution`. Move to its own package.","Need to call `super(Government)` in `ConstructorRegistry` constructor.","Simpliy `Rule`s."]},"core-player-world":{status:"added",log:["Initial commit","Expose `PlayerWorld`s against the relevant `Player`.","Add missing compiled assets","Bump `core-world` version","Add `VisibilityChanged` `Rule`, triggered when new `Tile`s are registered.","Refactor `PlayerWorld` to store `PlayerTile`s to allow the world changes to be hidden from players (like in the original game).","Updates to `Yield` mechanism.","Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Fix bug with `PlayerTile.update`.","Allow defined properties to remain `configurable` when (for example) a `City` is built on an already known `Tile`."]},"core-player":{status:"added",log:["Initial commit","Add `HiddenPlayerAction` and rename `PlayerAction`-related methods.","Update returned `DataObject` data.","Add `Player` as an argument to `PlayerAction`s.","Make `PlayerAction`s generic to make using `PlayerAction.value()` easier.","Add `Defeated` `Rule`.","Fix typo in filename.","Add `Spawn` `Rule` to control what happens when a `Player` is spawned into the game."]},"core-registry":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Add .deepsource.toml","Improve TypeScript bindings on `Registry.getBy` to hint at properties to search for.","Bump dependencies."]},"core-rule":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Add `enable`/`disable`/`enabled` methods to `Rule`s.","Add `Ruleset`s to enable/disable sets of `Rule`s, this will be useful when these can be managed via a UI.","Allow `RuleRegistry` cache to be cleared externally.","Using generics in a better way to provide better hints to arguments for `RuleRegistry.process`.","Refine typings further for `RuleRegistry`."]},"core-science":{status:"added",log:["Initial commit","Add `research` `AdditionalData` to `Player`s.","Make `PlayerResearch` extend `DataObject`.","Ensure `Advance` extends `DataObject` and type issue in `PlayerResearch`.","Simpliy `Rule`s."]},"core-terrain-feature":{status:"added",log:["Initial commit","Simpliy `Rule`s.","Replace `Math.random` with injectable generator.","Add a caching layer for `TerrainFeatureRegistry.getByTerrain`. This sped up the map generation and start `Tile` sorting by a considerable amount."]},"core-terrain":{status:"added",log:["Initial commit","Remove unused `Rule`s.","Simpliy `Rule`s."]},"core-tile-improvement":{status:"added",log:["Initial commit","Ensure `TileImprovement`s extend `DataObject`.","Simpliy `Rule`s."]},"core-trade-rate":{status:"added",log:["Initial commit","Make `PlayerTradeRates` extend `DataObject` and add `rates` `AdditionalData` to `Player`.","Add convenience method `PlayerTradeRates#setAll` to offload the `balance` functionality to the frontend.","Repo cleansing."]},"core-treasury":{status:"added",log:["Initial commit","Add `terasury` `AdditionalData` to `Player`s.","Simplify `Rule`s.","Change how `PlayerTreasury.cost` works with updated `Rule`s.","Ensure an empty `Yield` is passed in to the `Cost` `Rule`s in `PlayerTreasury`."]},"core-turn-based-game":{status:"added",log:["Initial commit","Add `engine:start` event handler.","Add missing events to trigger `Rule`s.","Simpliy `Rule`s.","Amend `Turn` to no longer inherit from `Yield`.","Ensure instances are able to be passed in for events and `Rule`s.","Repo cleansing.","Ensure `Turn` extends `DataObject` and includes the `value`.","Ensure return types match for TypeScript compiler."]},"core-unit-improvement":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Ensure `UnitImprovement`s are `DataObject`s."]},"core-unit-transport":{status:"added",log:["Initial commit","Update `Transport` to include a mixin mechanism for extending existing classes, reducing repetition for `Transport` `Unit`s of different types.","Add `Stowed` and `Unloaded` `Rule`s.","Add tests.","Bump dependencies.","Ensure `Base` is `typeof Unit` so that it includes the static methods required by `IBuildable`."]},"core-unit":{status:"added",log:["Initial commit","Fix bug in `Yield` `Rule` type","Update `DelayedAction` to have `Turn` passed into the constructor.","Add `units` `AdditionalData` to `Player`s.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Update to add `status` property to capture the current action being performed (if any) and add in `player` and `visibility` keys for data transfer.","Add `units` `AdditionalData` to `Tile`s.","Updates to call `Created` `Rule`s after setting the keys.","Add `City#units` `AdditionalData`.","Update to use new `Buildable` class from core-city-build.","Trigger `Moved` after a `DelayedAction` has completed.","Ensure `Moved` `Rule`s are triggered at the end of the `DelayedAction` too.","Allow custom `Busy` `Rule`s to be supplied to `DelayedAction`s.","Include the `Action` in `Defeated` `Rule`s so when a `Unit` in a `City` is `Destroyed` it's easy enough to work out if it was a defender.","Add `Unsupported` `Rule`.","Bump depenedencies.","Update typings.","Track `destroyed` status rather than unregister the `Unit`."]},"core-wonder":{status:"added",log:["Initial commit","Add missing `instance` to `WonderRegistry`","Add `getByCity` method to `WonderRegistry`","Add event to trigger when `Wonder`s are obsoleted.","Add `WonderRegistry.getByPlayer`.","Fix `WonderRegistry.getByPlayer`."]},"core-world-generator":{status:"added",log:["Initial commit","Ensure `Generator#generate` returns a `Promise`.","Add utilities to help when map data is used elsewhere.","Add `PickGenerator` (to choose the `Generator` to build the `World` map) and `PickStartTile` (to choose the starting `Tile`s for the `Player`) `Rule`s."]},"core-world-path":{status:"added",log:["Initial commit"]},"core-world":{status:"added",log:["Initial commit","Ensure `undefined` is never added to a `Yield`.","Fix caching issue when `Yield`s get modified after caching.","Fix a bug when `Tile` `Yield`s exist for which weights are not provided.","Convert `World` from a `Registry` to a `DataObject` to allow `height` and `width` to be passed to the `Client`.","Ensure `World#build` handles async `Generator#generate`.","Have `World#build` return `Promise<World>` to help with tests in other packages.","Update `Yield` mechanism for `Tile`s.","Fix bug where all `Tile`s were rated as `0` since the changes to `Yield`s.","Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Ensure `RuleRegistry` is passed into `World`s constructor, instead of when used by `build`."]},"core-yield":{status:"added",log:["Initial commit","Ensure `YieldValue` extends `DataObject`.","Remove `YieldValue` value object, the high usage combined with `ulid` from `DataObject` was causing slowdowns and didn't need to be a `DataObject` at all.","Add `reduceYields` utility function.","Add `NegativeYield` as a convenience object for costs."]},"simple-ai-client":{status:"updated",log:["Add methods for catching when `City`s or `Unit`s are captured or defeated.","Fix the test suite.","Fix `SimpleAIClient` to use the new `CityBuild` mechanism.","Updates to utilise updated `PlayerWorld`."]},"simple-world-generator":{status:"updated",log:["Changes to world generation to be closer to the original Civilization.","Fix `simpleRLELoader` to be async."]}}},{version:"0.1.0@8347999",date:"2022-03-20T21:08:10.000Z",localChanges:["Add new cheat (`ModifyUnit`).","Fix `unit:defeated` event.","Add listeners for `city:grow` and `city:shrink`.","Fix `player:defeated` listener.","Allow activating other `ActiveUnit`s.","Refactor city builds to use new `BuildItem` mechanism.","Add basics of `Revolution` handling (WIP).","Add basics of trade rate adjustment (WIP).","Add `Railroad` to be rendered.","Oprhan data cleanup fix attempt - no change."],externalChanges:{}},{version:"0.1.0@be27348",date:"2022-03-13T21:52:17.000Z",localChanges:["Major update collection","","Fix number of players selector.","Allow activating `InactiveUnit`s.","More `DataTransfer` optimisations.","Refactor `Portal` im preparation for making the map area self-contained.","Add `View city` and `Show on map` to `CityBuild` `PlayerAction`s.","Add `ConfirmationWindow`.","Fix map rendering bug on wraps."],externalChanges:{}},{version:"0.1.0@cb8e514",date:"2022-03-06T20:32:00.000Z",localChanges:["Allow selecting player `Civilization` and `Leader` (if there is more than one available)"],externalChanges:{"base-science-advance-advancedflight":{status:"added",log:["Initial commit."]},"base-science-advance-atomictheory":{status:"added",log:["Initial commit."]},"base-science-advance-automobile":{status:"added",log:["Initial commit."]},"base-science-advance-banking":{status:"added",log:["Initial commit."]},"base-science-advance-chemistry":{status:"added",log:["Initial commit."]},"base-science-advance-combustion":{status:"added",log:["Initial commit."]},"base-science-advance-communism":{status:"added",log:["Initial commit."]},"base-science-advance-computers":{status:"added",log:["Initial commit."]},"base-science-advance-conscription":{status:"added",log:["Initial commit."]},"base-science-advance-corporation":{status:"added",log:["Initial commit."]},"base-science-advance-democracy":{status:"added",log:["Initial commit."]},"base-science-advance-electricity":{status:"added",log:["Initial commit."]},"base-science-advance-electronics":{status:"added",log:["Initial commit."]},"base-science-advance-explosives":{status:"added",log:["Initial commit."]},"base-science-advance-flight":{status:"added",log:["Initial commit."]},"base-science-advance-fusionpower":{status:"added",log:["Initial commit."]},"base-science-advance-geneticengineering":{status:"added",log:["Initial commit."]},"base-science-advance-industrialization":{status:"added",log:["Initial commit."]},"base-science-advance-laborunion":{status:"added",log:["Initial commit."]},"base-science-advance-magnetism":{status:"added",log:["Initial commit."]},"base-science-advance-massproduction":{status:"added",log:["Initial commit."]},"base-science-advance-medicine":{status:"added",log:["Initial commit."]},"base-science-advance-metallurgy":{status:"added",log:["Initial commit."]},"base-science-advance-nuclearfission":{status:"added",log:["Initial commit."]},"base-science-advance-nuclearpower":{status:"added",log:["Initial commit."]},"base-science-advance-philosophy":{status:"added",log:["Initial commit."]},"base-science-advance-physics":{status:"added",log:["Initial commit."]},"base-science-advance-plastics":{status:"added",log:["Initial commit."]},"base-science-advance-railroad":{status:"added",log:["Initial commit."]},"base-science-advance-recycling":{status:"added",log:["Initial commit."]},"base-science-advance-refining":{status:"added",log:["Initial commit."]},"base-science-advance-religion":{status:"added",log:["Initial commit."]},"base-science-advance-robotics":{status:"added",log:["Initial commit."]},"base-science-advance-rocketry":{status:"added",log:["Initial commit."]},"base-science-advance-spaceflight":{status:"added",log:["Initial commit."]},"base-science-advance-steamengine":{status:"added",log:["Initial commit."]},"base-science-advance-steel":{status:"added",log:["Initial commit."]},"base-science-advance-superconductor":{status:"added",log:["Initial commit."]},"base-science-advance-theoryofgravity":{status:"added",log:["Initial commit."]},"base-science-advance-trade":{status:"added",log:["Initial commit."]},"base-science-advance-university":{status:"added",log:["Initial commit."]},"base-unit-artillery":{status:"added",log:["Initial commit."]},"base-unit-battleship":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-bomber":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-cannon":{status:"added",log:["Initial commit."]},"base-unit-caravan":{status:"added",log:["Initial commit."]},"base-unit-carrier":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-cruiser":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-diplomat":{status:"added",log:["Initial commit."]},"base-unit-fighter":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-frigate":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-ironclad":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-mechanizedinfanty":{status:"added",log:["Initial commit.","Oops! Mass rename from `MechanizedInfanty` to `MechanizedInfantry`..."]},"base-unit-nuclear":{status:"added",log:["Initial commit.","Correctly extend `Air` - stupid automation..."]},"base-unit-rifleman":{status:"added",log:["Initial commit."]},"base-unit-submarine":{status:"added",log:["Initial commit.","Correctly extend `Naval` - stupid automation..."]},"base-unit-tank":{status:"added",log:["Initial commit."]},"base-unit-transport":{status:"added",log:["Initial commit.","Correctly extend `NavalTransport` - stupid automation..."]},"base-unit-type-air":{status:"added",log:["Initial commit."]},"civ1-city":{status:"updated",log:["Update `Capturing` `Rule` to include `capturingPlayer` as well as the previously owning `Player`.","Add `reassignWorkers` function to be called via UI."]},"civ1-goody-hut":{status:"updated",log:["Fix `FreeCity` behaviour."]},"civ1-player":{status:"updated",log:["Add `EndTurn` action after `Rule` updates.","Add `player:defeated` events based on a `Player` having no more `City`s."]},"civ1-science":{status:"updated",log:["Add remaining missing `Advance`s.","Fix incorrect prerequisites for `Railroad`."]},"civ1-treasury":{status:"updated",log:["Add `CompleteProduction` action."]},"civ1-unit":{status:"updated",log:["Add in missing `Unit`s.","Add missing `Unit`s.","Fix `ClearX` and `PlantForest` actions and give `Ocean` `MovementCost` back to enable `Embark` again."]},"core-city":{status:"added",log:["Initial commit","Add `cities` `AdditionalData` to `Player`s.","Add `player` to data transfer information and add `city` `AdditionalData` to `Tile`s.","Add missing fields to be exported via `DataObject#toPlainObject`.","Update `Captured` `Rule` so that the previous owner and the capturing owner are explicitly provided.","Allow `YieldRegistry` to be supplied on construct or runtime (`.yields`).","Update `yields` to process `Yield` then `Cost` `Rule`s, fixing some bugs.","Rework `Yield` `Rule`s to return `Yield`s rather than expecting `Yield` constructors to be provided.","Change `CityRegistry.getByTile` to return `City` instead of `City[]`.","Repo cleansing.","Track `destroyed` status rather than unregister the `City`."]},"core-rule":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Add `enable`/`disable`/`enabled` methods to `Rule`s.","Add `Ruleset`s to enable/disable sets of `Rule`s, this will be useful when these can be managed via a UI.","Allow `RuleRegistry` cache to be cleared externally.","Using generics in a better way to provide better hints to arguments for `RuleRegistry.process`.","Refine typings further for `RuleRegistry`."]},"core-unit":{status:"added",log:["Initial commit","Fix bug in `Yield` `Rule` type","Update `DelayedAction` to have `Turn` passed into the constructor.","Add `units` `AdditionalData` to `Player`s.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Update to add `status` property to capture the current action being performed (if any) and add in `player` and `visibility` keys for data transfer.","Add `units` `AdditionalData` to `Tile`s.","Updates to call `Created` `Rule`s after setting the keys.","Add `City#units` `AdditionalData`.","Update to use new `Buildable` class from core-city-build.","Trigger `Moved` after a `DelayedAction` has completed.","Ensure `Moved` `Rule`s are triggered at the end of the `DelayedAction` too.","Allow custom `Busy` `Rule`s to be supplied to `DelayedAction`s.","Include the `Action` in `Defeated` `Rule`s so when a `Unit` in a `City` is `Destroyed` it's easy enough to work out if it was a defender.","Add `Unsupported` `Rule`.","Bump depenedencies.","Update typings.","Track `destroyed` status rather than unregister the `Unit`."]},"simple-ai-client":{status:"updated",log:["Updates to prevent TypeScript being sad about the `catch (e)`, `reject(e)` flow.","Add `EndTurn` support."]}}},{version:"0.1.0@e6518a8",date:"2022-03-04T22:23:45.000Z",localChanges:["Add `DataObserver` to track `gamedatapatch`s and act when key components are updated.","Add number of players menu when starting up.","Use `GlobalEventHandlersEventMap` to map expected `Event` types.","Improve efficiencies in `World.get` using caching.","Fix bug in `SelectionWindow`.","Add `autoDisplay` option to `Window`."],externalChanges:{}},{version:"0.1.0@bc6a38f",date:"2022-03-01T07:21:32.000Z",localChanges:["Add cheats (`GrantAdvance` and `GrantGold`) and `CompleteProduction` action.","Make `Actions` component long-lived, instead of a new instance each time an action is performed.","Update `City` component on relevant patch data."],externalChanges:{}},{version:"0.1.0@0b4762d",date:"2022-02-27T22:04:31.000Z",localChanges:["Break `Terrain` `Map` into components.","Handle `EndTurn` `PlayerAction`.","Handle patch driven data transfer (major speedup!).","Add `Minimap` component.","Keep only 1 notification window open at a time.","Selectively update `Map` `Tile`s to speed up renderer."],externalChanges:{}},{version:"0.1.0@6fd2e87",date:"2022-02-21T21:37:07.000Z",localChanges:["Relatively major refactor:","- Add `Window` class and more keyboard shortcuts.","- Updates to `Actions` so that the current highlight is more visible and can be keyboard controlled.","- Allow minimap to be clickable.","- Hide other player details by default.","- Speed improvements for comms (still needs to be improved...)","- Probably more..."],externalChanges:{"core-data-object":{status:"updated",log:["Remove `ulid` and replace with simpler ID generation.","Merge pull request #1 from civ-clone/remove-ulid","Remove `ulid` and replace with simpler ID generation.","Add `toPlainObject` filter to allow masking of unknown objects (enemy `Player`s, `Unit`s etc.)"]}}},{version:"0.1.0@3f94a15",date:"2021-03-10T20:25:38.000Z",localChanges:["Fix `Unit` and `ActiveUnit` `Map`s to work with assets generated by `civ1-asset-extractor`.","Fix `Quit` menu item.","More investigation into incremental data updates - this needs a comprehensive strategy and should also cover enemy `Player`, `Unit` and `City`s with restricted information (a stack of enemy `Unit`s should only show the likely defender etc.)"],externalChanges:{}},{version:"0.1.0@288b2bc",date:"2021-03-08T21:29:54.000Z",localChanges:["Allow closing `NotificationWindow`s with `Escape` and prevent keys from bubbling and affecting the game.","First stab at incremental data updates - all commented out for now...","Sort `activeUnit` by if it was the last one moved, this should help the gameplay feel more like classic Civ."],externalChanges:{"base-civilization-american":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-aztec":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-babylonian":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-chinese":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-egyptian":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-english":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-french":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-german":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-greek":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-indian":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-mongol":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-roman":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-russian":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-civilization-zulu":{status:"updated",log:["Update colours used in `Attribute`s."]},"base-goody-hut-unit":{status:"updated",log:["Remove redundant dependency.","Update naming for imports from `core-goody-hut`."]},"base-unit-action-attack":{status:"updated",log:[]},"base-unit-action-unload":{status:"updated",log:["Ensure `cargo` is correctly reset with required number of moves when `Unload`ing."]},"civ1-city":{status:"updated",log:["Update `tests/lib/setUpCity` to work with updated `World`.","Fix weighting for `City#tilesWorked`.","Add `ChangeProduction` `Rule`."]},"civ1-goody-hut":{status:"updated",log:["Add `index.ts` so that `Rule`s are registered and processed.","Fix method calls and expected returns.","Add missing dependency.","Add missing `Rule`s."]},"civ1-player":{status:"updated",log:["Add `VisibilityChanged` `Rule`s."]},"civ1-unit":{status:"updated",log:["Add `Defeated` implementation to destroy `Unit`s."]},"civ1-wonder":{status:"updated",log:["Update to work with new `setUpCity` form."]},"civ1-world":{status:"updated",log:["Add `Event`s when `TileImprovement`s are `Built` or `Pillaged`.","Update `Engine` `Start` `Rule`s to meet changes to `simple-world-generator`."]},"core-city-build":{status:"updated",log:["Add `ChangeProduction` `PlayerAction` when a `City` is already building something.",'Fix path reference from relative to "absolute" via `@civ-clone`.']},"core-player-world":{status:"updated",log:["Add `VisibilityChanged` `Rule`, triggered when new `Tile`s are registered."]},"core-world":{status:"updated",log:["Have `World#build` return `Promise<World>` to help with tests in other packages."]},"core-yield":{status:"updated",log:["Ensure `YieldValue` extends `DataObject`."]},"simple-ai-client":{status:"updated",log:["Prevent infinite loop and output debug info."]}}},{version:"0.1.0@f0b649b",date:"2021-03-05T23:32:19.000Z",localChanges:["Update `README.md`."],externalChanges:{}},{version:"0.1.0@4fe8fd4",date:"2021-03-04T22:29:57.000Z",localChanges:["Break CSS into SCSS files.","Add a main menu with a background image.","Update maps to add `clear` method to empty.","Fix coast graphics.","Update `City` view to properly show map and worked tiles.","Add `Unload` support for `Transport`s."],externalChanges:{"base-player-action-end-turn":{status:"added",log:["Initial commit"]},"civ1-player":{status:"updated",log:["Move out the calculation of start tiles to a `Worker` to help prevent locking the main thread."]},"core-data-object":{status:"updated",log:["Include `reconstitueData` as a core lib to be used in other packages.","Add `Entity` and `EntityInstance` types for use in other packages."]},"core-tile-improvement":{status:"updated",log:["Ensure `TileImprovement`s extend `DataObject`."]},"core-world-generator":{status:"updated",log:["Ensure `Generator#generate` returns a `Promise`.","Add utilities to help when map data is used elsewhere."]},"core-world":{status:"updated",log:["Ensure `World#build` handles async `Generator#generate`."]},"simple-world-generator":{status:"updated",log:["Update `BaseGenerator` to use updated `Generator` interface and utilise `Promise`s for `#generate`."]}}},{version:"0.1.0@f08bea1",date:"2021-02-27T20:55:42.000Z",localChanges:["Update TODOs."],externalChanges:{}},{version:"0.1.0@5fc5bee",date:"2021-02-27T20:52:12.000Z",localChanges:["Continuing to break `renderer.ts` into components.","Add reusable `Element` and `TransientElement` which other components extend from.","Add `PlayerDetails` to show current research and treasury."],externalChanges:{}},{version:"0.1.0@c1b8fef",date:"2021-02-25T21:32:22.000Z",localChanges:["Add map navigation by clicking on `Tile`s.","Stop notification spam on errors.","City information screen started including showing map. This shows all surrounding tiles somehow...","Fixed `EndOfTurn` bug, this now cycles through turns automatically - client-side.","Move `UnitDetails` into a component."],externalChanges:{"core-player-world":{status:"updated",log:["Bump `core-world` version"]}}},{version:"0.1.0@3012efb",date:"2021-02-24T22:40:18.000Z",localChanges:["Refactor notifications and add ability to handle other `MandatoryAction`s (`CityBuild` and `ChooseResearch`) which notify in a similar way to Civ 5.","Break `Map` into layers (`Terrain`, `Cities`, etc.) and allow use of a `Portal` to view layered maps through.","`City` view is next on the list.","Need to add an `EndOfTurn` `MandatoryAction`."],externalChanges:{"civ1-city-improvement":{status:"updated",log:["Use correct path to `Research` `Yield`."]},"civ1-player":{status:"updated",log:["Reduce starting square calculation time."]},"civ1-wonder":{status:"updated",log:["Add tests for `Wonder` costs."]},"core-city-build":{status:"updated",log:["Add `City` to exported fields from `DataObject#toPlainObject`."]},"core-city":{status:"updated",log:["Add missing fields to be exported via `DataObject#toPlainObject`."]},"core-goody-hut":{status:"updated",log:["Add `goodyHut` `AdditionalData` to `Tile`s.","Ensure `GoodyHut`s extend `DataObject`s."]},"core-world":{status:"updated",log:["Convert `World` from a `Registry` to a `DataObject` to allow `height` and `width` to be passed to the `Client`."]},"simple-ai-client":{status:"updated",log:["Updates to use updated `GoodyHutRegistry#getByTile`."]}}},{version:"0.1.0@5450acb",date:"2021-02-23T21:32:20.000Z",localChanges:["Add missing files.","Resize map view with window size.","Add sidebar.","Flash active Unit.","Fix City name and size display."],externalChanges:{}},{version:"0.1.0@cd8c818",date:"2021-02-22T22:55:06.000Z",localChanges:["Basic renderer working. To get this showing units you need to have extracted the items from the original game data. I aim to make an extractor at some point."],externalChanges:{"core-city":{status:"updated",log:["Add `player` to data transfer information and add `city` `AdditionalData` to `Tile`s."]},"core-data-object":{status:"updated",log:["Change `DataObject`s to allow recursive data to be stored."]},"core-unit":{status:"updated",log:["Update to add `status` property to capture the current action being performed (if any) and add in `player` and `visibility` keys for data transfer.","Add `units` `AdditionalData` to `Tile`s."]}}},{version:"0.1.0@3f031cf",date:"2021-02-19T14:06:01.000Z",localChanges:["Fixed bugs in the data that's returned and 'render' basic maps for surrounding areas of `City`s and `Unit`s. Next step is to try and integrate the old renderer..."],externalChanges:{"base-civilization-greek":{status:"updated",log:["Correct `Leader` name."]},"base-civilization-indian":{status:"updated",log:["Correct `Leader` name."]},"base-civilization-roman":{status:"updated",log:["Correct `Leader` name."]},"civ1-science":{status:"updated",log:["Use external `Research` `Yield` to fix `PlayerResearch`."]},"civ1-treasury":{status:"updated",log:["Ensure `Rule`s are executed by `Engine`."]},"core-data-object":{status:"updated",log:["Allow `AdditionalData` to be applied to child classes."]},"core-science":{status:"updated",log:["Ensure `Advance` extends `DataObject` and type issue in `PlayerResearch`."]},"core-treasury":{status:"updated",log:["Add `terasury` `AdditionalData` to `Player`s."]},"core-unit-improvement":{status:"updated",log:["Ensure `UnitImprovement`s are `DataObject`s."]}}},{version:"0.1.0@7f3ff48",date:"2021-02-18T17:27:54.000Z",localChanges:['Renderer "works" and `Action`s can be performed. Still pretty rudimentary and no graphics are rendered yet.'],externalChanges:{"base-unit-action-fortify":{status:"updated",log:["Fix bug where `Unit`s would become active whilst still having `Fortified` applied."]},"base-unit-action-found-city":{status:"updated",log:[]},"base-unit-action-sleep":{status:"updated",log:["Ensure `Unit` `visibility` is used to check when to wake after `Sleep`ing."]},"civ1-city":{status:"updated",log:["Add missing `Rule`s from `registerRules`."]},"civ1-game-year":{status:"updated",log:["Ensure `registerRules` is called."]},"civ1-player":{status:"updated",log:[]},"civ1-science":{status:"updated",log:["Fix bug that prevented `ChooseResearch` `PlayerAction` from being provided.","Add missing `Rule`s."]},"civ1-unit":{status:"updated",log:["Add `CityNameRegistry` to `action` provider for `FoundCity`."]},"civ1-wonder":{status:"updated",log:["Add `Research` requirements for `Wonder`s."]},"civ1-world":{status:"updated",log:["Update distribution `Rule`s to use `Rule`s defined in `core-world-generator` instead of `core-terrain`."]},"core-city-build":{status:"updated",log:["Make `CityBuild`s extend `DataObject`s for exposing data to `Client`s."]},"core-city-growth":{status:"updated",log:["Fix missing `CityGrowth` `AdditionalData` from `City`s."]},"core-city-improvement":{status:"updated",log:["Make `CityImprovement`s extend `DataObject`."]},"core-city":{status:"updated",log:["Add `cities` `AdditionalData` to `Player`s."]},"core-civilization":{status:"updated",log:["Update `Leader`s to be `DataObject`s."]},"core-game-year":{status:"updated",log:["Make `Year` extend `DataObject`."]},"core-player":{status:"updated",log:["Update returned `DataObject` data."]},"core-science":{status:"updated",log:["Add `research` `AdditionalData` to `Player`s.","Make `PlayerResearch` extend `DataObject`."]},"core-terrain":{status:"updated",log:["Remove unused `Rule`s."]},"core-trade-rate":{status:"updated",log:["Make `PlayerTradeRates` extend `DataObject` and add `rates` `AdditionalData` to `Player`."]},"core-turn-based-game":{status:"updated",log:["Add missing events to trigger `Rule`s."]},"core-unit":{status:"updated",log:["Add `units` `AdditionalData` to `Player`s.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied."]}}},{version:"0.1.0@389523c",date:"2021-02-17T10:38:23.000Z",localChanges:["Basics of the renderer working.","Data can be sent back and forth between the Main and Renderer processes."],externalChanges:{"civ1-player":{status:"updated",log:["Try to improve performance for scoring start tiles.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Reduce starting square calculation time.","Move out the calculation of start tiles to a `Worker` to help prevent locking the main thread.","Add `VisibilityChanged` `Rule`s.","Add `EndTurn` action after `Rule` updates.","Add `player:defeated` events based on a `Player` having no more `City`s.","Allow async `Client` methods (`chooseCivilization`, `chooseLeader`)","Fix `player:defeated` conditions.","Incorporate `Captured` events from `City` `Captured` events.","Add restrictions on the types of `Terrain`s that can be start squares.","Ensure `Tile` `Yield` cache is cleared each time visibility is changed.","Update to `Yield` weights.","Update `EndTurn` instantiation with new `PlayerAction` changes.","Use `Defeated` `Rule` from `core-player`.","Use `TurnStart` `Rule`s where applicable.","Refactor `ProcessYield` approach.","Use correct type for `City` `Destroyed` and `Unit` `Destroyed` `Rule`s.","Re-work the `Unit` `DelayedAction` handling.","Move event contents into `Rule`s where possible.","Remove reliance on other `civ1-*` packages, preferring individual packages instead.","Add unit tests.","Ensure local `RuleRegistry` is passed in to `World` `Built` `Rule`s when `Unit`s are created.","Fix `ProcessYield` problem in `TurnStart` `Rule`.","Refactor out `Worker`. This probably needs to be added back in at some point...","Simplify `World` built `Rule` by breaking out into `Spawn` and `PickStartTile` `Rule`s.","Ensure `destroyed` `Unit`s are excluded from being processed."]},"civ1-world":{status:"updated",log:["Add `Rule`s to `registerRules`.","Prevent double triggering of `Built` `Rule`."]},"core-engine":{status:"updated",log:["Prevent `Start` `Rule`s from being processed directly. Might rever this later..."]},"core-player-world":{status:"updated",log:["Expose `PlayerWorld`s against the relevant `Player`.","Add missing compiled assets"]},"core-world":{status:"updated",log:["Fix a bug when `Tile` `Yield`s exist for which weights are not provided."]},"simple-world-generator":{status:"added",log:["Initial commit","Add `simpleRLELoader`","Update `BaseGenerator` to use updated `Generator` interface and utilise `Promise`s for `#generate`.","Changes to world generation to be closer to the original Civilization.","Fix `simpleRLELoader` to be async.","Ensure `TerrainFeatureRegistry` is passed in to `simpleRLELoader`.","Replace `Math.random` calls with injectable random number generator.","Remove reliance on `node` so that a browser can be used instead."]},"simple-world-path":{status:"added",log:["Initial commit","Updates to use shard `simpleRLELoader` from `simple-world-generator`"]}}},{version:"0.1.0@6a7bbcb",date:"2021-02-16T13:56:21.000Z",localChanges:["first commit"],externalChanges:{"base-city-improvement-aqueduct":{status:"added",log:["Initial commit"]},"base-city-improvement-barracks":{status:"added",log:["Initial commit"]},"base-city-improvement-citywalls":{status:"added",log:["Initial commit"]},"base-city-improvement-colosseum":{status:"added",log:["Initial commit"]},"base-city-improvement-courthouse":{status:"added",log:["Initial commit"]},"base-city-improvement-granary":{status:"added",log:["Initial commit"]},"base-city-improvement-library":{status:"added",log:["Initial commit"]},"base-city-improvement-marketplace":{status:"added",log:["Initial commit"]},"base-city-improvement-palace":{status:"added",log:["Initial commit"]},"base-city-improvement-temple":{status:"added",log:["Initial commit"]},"base-city-yield-gold":{status:"added",log:["Initial commit"]},"base-city-yield-happiness":{status:"added",log:["Initial commit"]},"base-city-yield-luxuries":{status:"added",log:["Initial commit"]},"base-city-yield-research":{status:"added",log:["Initial commit"]},"base-city-yield-unhappiness":{status:"added",log:["Initial commit","Fix package name and repo URL.","Actually fix package name and repo URL..."]},"base-civilization-american":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-aztec":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-babylonian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-chinese":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-egyptian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-english":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-french":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-german":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-greek":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-indian":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-mongol":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-roman":{status:"added",log:["Initial commit","Correct `Leader` name.","Update colours used in `Attribute`s."]},"base-civilization-russian":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-civilization-zulu":{status:"added",log:["Initial commit","Update colours used in `Attribute`s."]},"base-diplomacy-declaration-peace":{status:"added",log:["Initial commit"]},"base-diplomacy-declaration-war":{status:"added",log:["Initial commit"]},"base-diplomacy-interaction-contact":{status:"added",log:["Initial commit"]},"base-goody-hut-advance":{status:"added",log:["Initial commit"]},"base-goody-hut-city":{status:"added",log:["Initial commit"]},"base-goody-hut-gold":{status:"added",log:["Initial commit"]},"base-goody-hut-unit":{status:"added",log:["Initial commit","Use consistent references to github repos","Bump dependencies after changing naming convention to be consistent","Add `Unit` `Rule` for determining which `Unit` is provided","Remove redundant dependency.","Update naming for imports from `core-goody-hut`.","Remove `RuleRegistry` interface for `Unit` `Rule`."]},"base-government-anarchy":{status:"added",log:["Initial commit"]},"base-government-communism":{status:"added",log:["Initial commit"]},"base-government-democracy":{status:"added",log:["Initial commit"]},"base-government-despotism":{status:"added",log:["Initial commit"]},"base-government-monarchy":{status:"added",log:["Initial commit"]},"base-government-republic":{status:"added",log:["Initial commit"]},"base-leader-trait-aggression":{status:"added",log:["Initial commit"]},"base-leader-trait-development":{status:"added",log:["Initial commit"]},"base-leader-trait-militarism":{status:"added",log:["Initial commit"]},"base-player-action-active-unit":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-player-action-inactive-unit":{status:"added",log:["Initial commit","Update dependencies and add generic property for `PlayerAction`."]},"base-science-advance-alphabet":{status:"added",log:["Initial commit"]},"base-science-advance-astronomy":{status:"added",log:["Initial commit"]},"base-science-advance-bridgebuilding":{status:"added",log:["Initial commit"]},"base-science-advance-bronzeworking":{status:"added",log:["Initial commit"]},"base-science-advance-ceremonialburial":{status:"added",log:["Initial commit"]},"base-science-advance-chivalry":{status:"added",log:["Initial commit"]},"base-science-advance-codeoflaws":{status:"added",log:["Initial commit"]},"base-science-advance-construction":{status:"added",log:["Initial commit"]},"base-science-advance-currency":{status:"added",log:["Initial commit"]},"base-science-advance-engineering":{status:"added",log:["Initial commit"]},"base-science-advance-feudalism":{status:"added",log:["Initial commit"]},"base-science-advance-gunpowder":{status:"added",log:["Initial commit","Repo cleansing."]},"base-science-advance-horsebackriding":{status:"added",log:["Initial commit"]},"base-science-advance-invention":{status:"added",log:["Initial commit"]},"base-science-advance-ironworking":{status:"added",log:["Initial commit"]},"base-science-advance-literacy":{status:"added",log:["Initial commit"]},"base-science-advance-mapmaking":{status:"added",log:["Initial commit"]},"base-science-advance-masonry":{status:"added",log:["Initial commit"]},"base-science-advance-mathematics":{status:"added",log:["Initial commit"]},"base-science-advance-monarchy":{status:"added",log:["Initial commit"]},"base-science-advance-mysticism":{status:"added",log:["Initial commit"]},"base-science-advance-navigation":{status:"added",log:["Initial commit"]},"base-science-advance-pottery":{status:"added",log:["Initial commit"]},"base-science-advance-therepublic":{status:"added",log:["Initial commit"]},"base-science-advance-thewheel":{status:"added",log:["Initial commit"]},"base-science-advance-writing":{status:"added",log:["Initial commit"]},"base-terrain-arctic":{status:"added",log:["Initial commit"]},"base-terrain-desert":{status:"added",log:["Initial commit"]},"base-terrain-feature-coal":{status:"added",log:["Initial commit"]},"base-terrain-feature-fish":{status:"added",log:["Initial commit"]},"base-terrain-feature-game":{status:"added",log:["Initial commit"]},"base-terrain-feature-gems":{status:"added",log:["Initial commit"]},"base-terrain-feature-gold":{status:"added",log:["Initial commit"]},"base-terrain-feature-horse":{status:"added",log:["Initial commit"]},"base-terrain-feature-oasis":{status:"added",log:["Initial commit"]},"base-terrain-feature-oil":{status:"added",log:["Initial commit"]},"base-terrain-feature-seal":{status:"added",log:["Initial commit"]},"base-terrain-feature-shield":{status:"added",log:["Initial commit"]},"base-terrain-forest":{status:"added",log:["Initial commit"]},"base-terrain-grassland":{status:"added",log:["Initial commit"]},"base-terrain-hills":{status:"added",log:["Initial commit"]},"base-terrain-jungle":{status:"added",log:["Initial commit"]},"base-terrain-mountains":{status:"added",log:["Initial commit"]},"base-terrain-ocean":{status:"added",log:["Initial commit"]},"base-terrain-plains":{status:"added",log:["Initial commit"]},"base-terrain-river":{status:"added",log:["Initial commit"]},"base-terrain-swamp":{status:"added",log:["Initial commit"]},"base-terrain-tundra":{status:"added",log:["Initial commit"]},"base-terrain-yield-food":{status:"added",log:["Initial commit"]},"base-terrain-yield-production":{status:"added",log:["Initial commit"]},"base-terrain-yield-trade":{status:"added",log:["Initial commit"]},"base-tile-improvement-irrigation":{status:"added",log:["Initial commit"]},"base-tile-improvement-mine":{status:"added",log:["Initial commit"]},"base-tile-improvement-pollution":{status:"added",log:["Initial commit"]},"base-tile-improvement-railroad":{status:"added",log:["Initial commit"]},"base-tile-improvement-road":{status:"added",log:["Initial commit"]},"base-trade-rate-luxuries":{status:"added",log:["Initial commit"]},"base-trade-rate-research":{status:"added",log:["Initial commit"]},"base-trade-rate-tax":{status:"added",log:["Initial commit"]},"base-unit-action-attack":{status:"added",log:["Initial commit","Reduce `Attack` when `moves` is < 1.","Reduce `moves` when attacking.","Pass the `Attack` instance to the `Defeated` `Rule` so it can be determined if a `Unit` in a `City` was a defender or not.","Remove `RuleRegistry` interface usage for `Defeated` `Rule`.","Move `unitRegistry` into the `Attack` constructor.","Replace usages of `Math.random` with a testable injected dependency."]},"base-unit-action-build-irrigation":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-mine":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-build-road":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-capture-city":{status:"added",log:["Initial commit","Rework constructor to accept the target `City`."]},"base-unit-action-clear-forest":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-jungle":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-clear-swamp":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-disembark":{status:"added",log:["Initial commit","Rework constructor to accept the target `ITransport`."]},"base-unit-action-embark":{status:"added",log:["Initial commit","Update `Move` dependency","Rework constructor to accept the target `ITransport`.","Remove `RuleRegistry` interface usage for `Moved` `Rule`s."]},"base-unit-action-fortify":{status:"added",log:["Initial commit","Add `UnitImprovementRegistry` via constructor and use updated `DelayedAction` constructor.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-found-city":{status:"added",log:["Initial commit","Ensure `CityNameRegistry` is used for `City` names.","Ensure local `RuleRegistry` is passed on to `City` constructor.","Repo cleansing."]},"base-unit-action-move":{status:"added",log:["Initial commit","Extract `movementCost` and `validate` functions into members.","Remove `RuleRegistry` interface usage for `Moved`, `MovementCost` and `ValidateMove` `Rule`s."]},"base-unit-action-no-orders":{status:"added",log:["Initial commit"]},"base-unit-action-pillage":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Remove `RuleRegistry` interface usage for `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-plant-forest":{status:"added",log:["Initial commit","Update to latest version of `DelayedAction`.","Add custom `Busy` `Rule`.","Remove `RuleRegistry` interface usage for `Feature`, `Moved` and `MovementCost` `Rule`s."]},"base-unit-action-sleep":{status:"added",log:["Initial commit","Update to latest `DelayedAction` version and add wake condition to `Busy`","Ensure `Unit` `visibility` is used to check when to wake after `Sleep`ing.","Add labelled `Busy` `Rule` (`Sleeping`) to indicate the action being performed.","Repo cleansing."]},"base-unit-action-unload":{status:"added",log:["Initial commit","Ensure `cargo` is correctly reset with required number of moves when `Unload`ing."]},"base-unit-catapult":{status:"added",log:["Initial commit"]},"base-unit-chariot":{status:"added",log:["Initial commit"]},"base-unit-horseman":{status:"added",log:["Initial commit"]},"base-unit-improvement-fortified":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone"]},"base-unit-improvement-veteran":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone"]},"base-unit-knight":{status:"added",log:["Initial commit"]},"base-unit-musketman":{status:"added",log:["Initial commit","Repo cleansing."]},"base-unit-sail":{status:"added",log:["Initial commit"]},"base-unit-settlers":{status:"added",log:["Initial commit"]},"base-unit-spearman":{status:"added",log:["Initial commit"]},"base-unit-swordman":{status:"added",log:["Initial commit"]},"base-unit-trireme":{status:"added",log:["Initial commit"]},"base-unit-type-fortifiable":{status:"added",log:["Initial commit"]},"base-unit-type-land":{status:"added",log:["Initial commit"]},"base-unit-type-naval-transport":{status:"added",log:["Initial commit","Ensure type safety when using `this` to refer to `ITransport`.","Update to use latest `core-unit-transport` changes."]},"base-unit-type-naval":{status:"added",log:["Initial commit"]},"base-unit-type-worker":{status:"added",log:["Initial commit"]},"base-unit-warrior":{status:"added",log:["Initial commit"]},"base-wonder-colossus":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-copernicus-observatory":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-great-library":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-great-wall":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-hanging-gardens":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-lighthouse":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-magellans-expedition":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-oracle":{status:"added",log:["Initial commit","Use published package version for `core-wonder`"]},"base-wonder-pyramids":{status:"added",log:["Initial commit"]},"civ1-city-happiness":{status:"added",log:["Initial commit","Add `Temple` `Unhappiness` yield","Add effect for `Cololsseum` and `Cathedral`.","Add military wariness to `Republic` and `Democracy` governments.","Fix values for `Colosseum` and `Cathedral`.","Attempt to fix perpetual `CivilDisorder` and `Production` causing `Unit`s to become unsupported.","Fixed bug where `CivilDisorder` effects were active any time there was any `Unhappiness`.","Update to use new `Yield` mechanism. Actually, it was in part due to this module that the mechanism changed...","Fix a bug where `CivilDisorder` effects were applied even if the `City` wasn't in civil disorder.","Remove `CivilDisorder` `Yield` effects and move those to the respective `civ-`... modules.","Bump dependencies.","Consolidate `Cost` `Rule`s.","Remove unused `Rule` classes.","Rewrite to use customised `Yield`s for each property.","Update to latest version of `core-city-improvement`.","Bump dependencies."]},"civ1-city-improvement":{status:"added",log:["Initial commit","Use correct path to `Research` `Yield`.","Add missing `CityImprovement`s.","Update to use new `CityBuild` mechanism.","Fix tests.","Add `Yield` modifiers for `Factory` etc.","Update method of processing `Yield`s.","Add requirements for a `Factory` to be built before a `PowerPlant` can be built.","Ensure only one type of `PowerPlant` can exist within a `City`.","Add missing `Yield` and `YieldModifier` `Rule`s.","Add `Corruption` `Yield` and `Effect`s of `Palace` and `Courthouse`.","Ensure `Palace` is destroyed when a `City` is captured.","Reclassify `CityImprovementMaintenanceGold` `Yield` `Rule`s as `Cost` `Rule`s.","Ensure `Corruption` is provided as expected`.","Add some basic cleanup for when `City`s are destroyed.","Update to latest version of `core-city-improvement`.","Move `Corruption` generation to `civ1-city`, where it makes more sense to exist.","Work on test coverage.","Bump dependencies.","Destroy `CityImprovement`s when a `City` is `Captured` or `Destroyed`."]},"civ1-city":{status:"added",log:["Initial commit","If `CityGrowthRegistry` is missing expected `CityGrowth`, create and register it automatically in `setUpCity`","Bump dependencies","Add missing `Rule`s from `registerRules`.","Update `tests/lib/setUpCity` to work with updated `World`.","Fix weighting for `City#tilesWorked`.","Add `ChangeProduction` `Rule`.","Update `Capturing` `Rule` to include `capturingPlayer` as well as the previously owning `Player`.","Add `reassignWorkers` function to be called via UI.","Update `Captured` event to include both previous owner and capturing player.","Move `Captured` event to `Player` to handle `player:defeated` events.","Updates to allow setting `YieldRegistry` in `setUpCity`.","Fix bug where `Unit`s weren't destroyed when their supporting `City` was destroyed.","Rework `ProcessYield` `Rule`s to utilise new ...`Support` `Yield`s.","Remove `Rule` that empties the `FoodStorage` on shrink.","Add `Unit` `Defeated` `Rule` to handle a `City` being destroyed instead of captured.","Use updated `Yield` `Rule`s.","Slight tweak to how `Yield`s are weighted.","Update handling not adding `Production` when `City` is in `CivilDisorder`.","Process `Unit` and population support (`Food` and `Production`).","Update `CityBuild` and `ChangeProduction` instantiations with new `PlayerAction` changes.","Ensure when a `Unit` is defeated in a `City` that the population is only reduced when it's a defender.","Use `FoodExhausted` and `Unsupported` `Rule`s.","Refactor `Yield`, `Cost` and `ProcessYield` `Rule` usages.","Update `ProcessYield` usage.","Use updated `CityRegistry.getByTile` method.","Update `setUpCity` mechanism.","Ensure `Irrigation` and `Road` `TileImprovement`s are only added if they don't already exist.","Update `setUpCity` to allow bypassing of `TileImprovement` additions.","Move `Corruption` generation from `civ1-city-improvement`.","Ensure `@civ-clone/core-city-happiness` is used as a package, not a github repo.","Improve test coverage.","Track `destroyed` status rather than unregister the `City`."]},"civ1-civilization":{status:"added",log:["Initial commit","Add `Roman` `Civilization` back in.","Register all `Civilization`s.","Update registration mechanism to reduce duplication in other packages.","Repo cleansing."]},"civ1-diplomacy":{status:"added",log:["Initial commit"]},"civ1-game-year":{status:"added",log:["Initial commit","Ensure `registerRules` is called."]},"civ1-goody-hut":{status:"added",log:["Initial commit","Use published package versions","Use `Unit` `Rule` to control what `Unit`s are provided.","Add `index.ts` so that `Rule`s are registered and processed.","Fix method calls and expected returns.","Add missing dependency.","Add missing `Rule`s.","Fix `FreeCity` behaviour.","Updates to `Yield` weights.","Update to use latest `CityRegistry` changes.","Update usages of `Math.random` to be an injectable number provider.","Another attempt at the `City` type of `GoodyHut`."]},"civ1-government":{status:"added",log:["Initial commit","Prevent unhandled exception on `Changed` `Rule` when `PlayerWorld`s have not yet been initialised.","Utilise `AvailableGovernmentsRegistry` and separate `Revolution` `PlayerAction` (although TODO, change that to the request and a random delay for the `ChooseGovernment` `MandatoryAction`).","Update `GovernmentChanged` `Rule` to be compatible with `PlayerTile`s.","Update `Revolution` instantiation with new `PlayerAction` changes."]},"civ1-player":{status:"added",log:["Initial commit","Remove `Client` and `Player` creation from here, this should be handlded by the renderer.","Try to improve performance for scoring start tiles.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Reduce starting square calculation time.","Move out the calculation of start tiles to a `Worker` to help prevent locking the main thread.","Add `VisibilityChanged` `Rule`s.","Add `EndTurn` action after `Rule` updates.","Add `player:defeated` events based on a `Player` having no more `City`s.","Allow async `Client` methods (`chooseCivilization`, `chooseLeader`)","Fix `player:defeated` conditions.","Incorporate `Captured` events from `City` `Captured` events.","Add restrictions on the types of `Terrain`s that can be start squares.","Ensure `Tile` `Yield` cache is cleared each time visibility is changed.","Update to `Yield` weights.","Update `EndTurn` instantiation with new `PlayerAction` changes.","Use `Defeated` `Rule` from `core-player`.","Use `TurnStart` `Rule`s where applicable.","Refactor `ProcessYield` approach.","Use correct type for `City` `Destroyed` and `Unit` `Destroyed` `Rule`s.","Re-work the `Unit` `DelayedAction` handling.","Move event contents into `Rule`s where possible.","Remove reliance on other `civ1-*` packages, preferring individual packages instead.","Add unit tests.","Ensure local `RuleRegistry` is passed in to `World` `Built` `Rule`s when `Unit`s are created.","Fix `ProcessYield` problem in `TurnStart` `Rule`.","Refactor out `Worker`. This probably needs to be added back in at some point...","Simplify `World` built `Rule` by breaking out into `Spawn` and `PickStartTile` `Rule`s.","Ensure `destroyed` `Unit`s are excluded from being processed."]},"civ1-science":{status:"added",log:["Initial commit","Fix bug that prevented `ChooseResearch` `PlayerAction` from being provided.","Add missing `Rule`s.","Use external `Research` `Yield` to fix `PlayerResearch`.","Add remaining missing `Advance`s.","Fix incorrect prerequisites for `Railroad`.","Updates to randomly start with some `Advance`s.","Acquire `Advance`s when capturing an advance enemey `City`.","Fix a bug where if there are no `Advance`s available to research (or fewer than the number of granted `Advance`s will be) it'll grant as many are available.","Update handling not adding `Research` when `City` is in `CivilDisorder`.","Update `ChooseResearch` instantiation with new `PlayerAction` changes.","Update dependencies.","Add unit tests.","Ensure `@civ-clone/core-city-happiness` is used as a module, not a github repo.","Add `randomNumberGenerator` provider for `captured` `Rule`.","Remove unnecessary `Registry` interface."]},"civ1-trade-rate":{status:"added",log:["Initial commit","Add `AdjustTradeRates` `PlayerAction`.","Simplify `Yield` `Rule`s.","Implement `Corruption` `Effect`s.","Update `AdjustTradeRates` instantiation with new `PlayerAction` changes.","Ensure `Corruption` can never exceed the available `Trade`.","Add `Player` `turn-start` `Rule` to convert `Trade` into the component `Yield`s."]},"civ1-treasury":{status:"added",log:["Initial commit","Ensure `Rule`s are executed by `Engine`.","Add `CompleteProduction` action.","Use updated `Yield` mechanism.","Update handling not adding `Gold` when `City` is in `CivilDisorder`.","Handle running out of `Gold` in the treasury by selling the maintained `CityImprovement` that would deplete it.","Update `CompleteProduction` instantiation with new `PlayerAction` changes.","Ensure `@civ-clone/core-city-happiness` is used as a package, not a github repo.","Remove unnecessary `Registry` interface."]},"civ1-unit":{status:"added",log:["Initial commit","Update actions to pass in entities for `Disembark`, `Embark` and `CaptureCity`","Updates to `Action`s in-line with new `DelayedAction` version.","Add `CityNameRegistry` to `action` provider for `FoundCity`.","Add `Defeated` implementation to destroy `Unit`s.","Add in missing `Unit`s.","Add missing `Unit`s.","Fix `ClearX` and `PlantForest` actions and give `Ocean` `MovementCost` back to enable `Embark` again.","Correct misspelled `MechanizedInfantry`.","Update to use new `CityBuild` mechanism.","Fix tests","Add `BuildRailroad`.","Fix movement costs.","Fix bug where units could retry a failed move over and over.","Made it more likely that your `Move` would succeed (>50% of `Move`s means it'll work - in-line with Civ).","Update `ActiveUnit` and `InactiveUnit` instantiations with new `PlayerAction` changes.","Use `Unsupported` and `Stowed` `Rule`s.","Ensure `Sail` is obselete with `Magenetism`.","Simplify and clarify `Move` action constraints.","Clean up when `Unit` is `Destroyed`.","Add better test coverage.","Add missing `MovementCost`s and use named re-usable `Criterion`s for `Action` `Rule`s where possible.","Ensure `Air` `Unit`s can attack `Land` `Unit`s.","Add `Disband` `Action`.","Use `IBuildable` interface for `BuildingComplete` `Rule`s.","Ensure `Submarine`s cannot bombard `Land` `Unit`s.","Ensure only `Fighter`s can `Attack` other `Air` `Unit`s.","Annotate `Attack` `Action` `Rule`s.","Ensure all `Unit`s on a `Tile` are destroyed when the defending `Unit` is `Destroyed`, unless in a `City`.","Track `destroyed` status rather than unregister the `Unit`."]},"civ1-wonder":{status:"added",log:["Initial commit","Add `Research` requirements for `Wonder`s.","Add tests for `Wonder` costs.","Update to work with new `setUpCity` form.","Add missing `Wonder`s.","Utilise new `CityBuild` mechanism for registering.","Fix missing cost for `DarwinsVoyage`.","Add effects for `MichelangelosChapel` and `WomensSuffrage`.","Add `Obsoletion` `Rule` to notify `Wonder` owners for obsolesence.","Move `Yield` `Rule`s to `Cost` `Rule`s to enable accurate processing.","Use updated `Yield` mechanism.","Add `CureForCancer` effects.","Add obsoletion for `Lighthouse`.","Rework the tests.","Update to remove requirement for `Player` to be passed into the `Wonder` constructor.","Fix some wonder effects.","Ensure `engine` parameter of `Wonder` `obsolete` `Rule`s is optional.","Add `Wonder` `obsolete` `Rule`s.","Ensure `IBuildable` interface is used.","Add benefits for `DarwinsVoyage`."]},"civ1-world":{status:"added",log:["Initial commit","Add `Rule`s to `registerRules`.","Prevent double triggering of `Built` `Rule`.","Update distribution `Rule`s to use `Rule`s defined in `core-world-generator` instead of `core-terrain`.","Add `Event`s when `TileImprovement`s are `Built` or `Pillaged`.","Update `Engine` `Start` `Rule`s to meet changes to `simple-world-generator`.","Updating world generator values to generate maps closer to those from the original Civilization. More work still to do here.","Fix bug with incorrect `Yield`s for `Plains` with `Horse`.","Enable `Railroad` construction.","Fix bug where `Irrigation` and `Mine` could both exist on the same `Tile`.","Add `Railroad` `Yield` modifier.","Add updated `Tile` yields for other governments.","Update `Yield` mechanism.","Fix a few `Tile` `Yield`s.","Update calls to `Math.random` to be an injectable random number generator.","Ensure `Road` and `Railroad` are not applied multiple times.","Add support for `Earth` `Generator` and fixed start `Tile`s associated.","Move random start `Tile` selection to `Rule`s.","Use updated `civ1-earth-generator` package."]},"core-ai-client":{status:"added",log:["Initial commit","Add missing `instance` to `AIClientRegistry` and allow `LeaderRegistry` instance to be passed in.","Replace usages of `Math.random` with a testable injected dependency."]},"core-city-build":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Make `CityBuild`s extend `DataObject`s for exposing data to `Client`s.","Add `City` to exported fields from `DataObject#toPlainObject`.","Add `ChangeProduction` `PlayerAction` when a `City` is already building something.",'Fix path reference from relative to "absolute" via `@civ-clone`.',"Update `CityBuild#available` mechanism to show resource costs for items.","Add `Buildable` class that `Unit`s and `CityImprovement`s inherit from.","Change logic to pave the way for alternative costs associated to `Buildable` items.","Update to use `PlayerAction` generics and fix return type of `Buildable`.","Simpliy `Rule`s.","Make `AvailableCityBuildItemsRegistry` more flexible.","Re-work entities and interfaces to avoid having to forcibly cast everything."]},"core-city-growth":{status:"added",log:["Initial commit","Fix missing `CityGrowth` `AdditionalData` from `City`s.","Add `CityGrowth` object as an argument to `FoodExhasted` `Rule` instead of `City`.","Fix tests.","Update `README.md`.","Update dependencies.","Repo cleansing."]},"core-city-happiness":{status:"added",log:["Initial commit","Simpliy `Rule`s.","Repo cleansing."]},"core-city-improvement":{status:"added",log:["Initial commit","Make `CityImprovement`s extend `DataObject`.","Update to use new `Buildable` class from core-city-build.","Remove `Player` as a constructor argument since this is available (and more likely reliable) via `City` instead.","Track `destroyed` status rather than unregister the `CityImprovement`."]},"core-city":{status:"added",log:["Initial commit","Add `cities` `AdditionalData` to `Player`s.","Add `player` to data transfer information and add `city` `AdditionalData` to `Tile`s.","Add missing fields to be exported via `DataObject#toPlainObject`.","Update `Captured` `Rule` so that the previous owner and the capturing owner are explicitly provided.","Allow `YieldRegistry` to be supplied on construct or runtime (`.yields`).","Update `yields` to process `Yield` then `Cost` `Rule`s, fixing some bugs.","Rework `Yield` `Rule`s to return `Yield`s rather than expecting `Yield` constructors to be provided.","Change `CityRegistry.getByTile` to return `City` instead of `City[]`.","Repo cleansing.","Track `destroyed` status rather than unregister the `City`."]},"core-civ-client":{status:"added",log:["Initial commit"]},"core-civilization":{status:"added",log:["Initial commit","Update `Leader`s to be `DataObject`s.","Update to use `DataObject.sourceClass()` for `TraitRegistry` interactions.","Update to use injectable random number generator instead of hard-coded `Math.random`.","Add `getBySubclass` to `TraitRegistry`."]},"core-client":{status:"added",log:["Initial commit"]},"core-data-object":{status:"added",log:["Initial commit","Add `id` to `DataObject`s to allow easy referencing from within `Client`s.","Allow `AdditionalData` to be applied to child classes.","Change `DataObject`s to allow recursive data to be stored.","Include `reconstitueData` as a core lib to be used in other packages.","Add `Entity` and `EntityInstance` types for use in other packages.","Remove `ulid` and replace with simpler ID generation.","Merge pull request #1 from civ-clone/remove-ulid","Remove `ulid` and replace with simpler ID generation.","Add `toPlainObject` filter to allow masking of unknown objects (enemy `Player`s, `Unit`s etc.)","Perform `filter`ing on all objects, rather than only `DataObject`s. This also means we can return something other than a `DataObject`.","Add `sourceClass()` method to auto cast to `IConstructor`.","Bump dependencies.","Update `DataObject.sourceClass()` type annotations after usage.","Ensure `id` is included in `IDataObject` so that `keys` for both `DataObject` and `IDataObject` return the same thing.","Make `IDataObject` interface more flexible."]},"core-diplomacy":{status:"added",log:["Initial commit"]},"core-engine":{status:"added",log:["Initial commit","Add `@types/glob` as a direct dependency for dependent packages.","Prevent `Start` `Rule`s from being processed directly. Might rever this later...","Remove reliance on `node` so that a browser can be used instead."]},"core-game-year":{status:"added",log:["Initial commit","Make `Year` extend `DataObject`.","Simpliy `Rule`s."]},"core-goody-hut":{status:"added",log:["Initial commit","Add `Distribution` `Rule` for controlling placement of huts within `World`s.","Correct arguments for `Distribution` `Rule`.","Add `goodyHut` `AdditionalData` to `Tile`s.","Ensure `GoodyHut`s extend `DataObject`s.","Simpliy `Rule`s."]},"core-government":{status:"added",log:["Initial commit","Provide `available` `Government`s with the `PlayerGovernment` instance.","Remove `Revolution`. Move to its own package.","Need to call `super(Government)` in `ConstructorRegistry` constructor.","Simpliy `Rule`s."]},"core-player-world":{status:"added",log:["Initial commit","Expose `PlayerWorld`s against the relevant `Player`.","Add missing compiled assets","Bump `core-world` version","Add `VisibilityChanged` `Rule`, triggered when new `Tile`s are registered.","Refactor `PlayerWorld` to store `PlayerTile`s to allow the world changes to be hidden from players (like in the original game).","Updates to `Yield` mechanism.","Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Fix bug with `PlayerTile.update`.","Allow defined properties to remain `configurable` when (for example) a `City` is built on an already known `Tile`."]},"core-player":{status:"added",log:["Initial commit","Add `HiddenPlayerAction` and rename `PlayerAction`-related methods.","Update returned `DataObject` data.","Add `Player` as an argument to `PlayerAction`s.","Make `PlayerAction`s generic to make using `PlayerAction.value()` easier.","Add `Defeated` `Rule`.","Fix typo in filename.","Add `Spawn` `Rule` to control what happens when a `Player` is spawned into the game."]},"core-registry":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Add .deepsource.toml","Improve TypeScript bindings on `Registry.getBy` to hint at properties to search for.","Bump dependencies."]},"core-rule":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Add `enable`/`disable`/`enabled` methods to `Rule`s.","Add `Ruleset`s to enable/disable sets of `Rule`s, this will be useful when these can be managed via a UI.","Allow `RuleRegistry` cache to be cleared externally.","Using generics in a better way to provide better hints to arguments for `RuleRegistry.process`.","Refine typings further for `RuleRegistry`."]},"core-science":{status:"added",log:["Initial commit","Add `research` `AdditionalData` to `Player`s.","Make `PlayerResearch` extend `DataObject`.","Ensure `Advance` extends `DataObject` and type issue in `PlayerResearch`.","Simpliy `Rule`s."]},"core-terrain-feature":{status:"added",log:["Initial commit","Simpliy `Rule`s.","Replace `Math.random` with injectable generator.","Add a caching layer for `TerrainFeatureRegistry.getByTerrain`. This sped up the map generation and start `Tile` sorting by a considerable amount."]},"core-terrain":{status:"added",log:["Initial commit","Remove unused `Rule`s.","Simpliy `Rule`s."]},"core-tile-improvement":{status:"added",log:["Initial commit","Ensure `TileImprovement`s extend `DataObject`.","Simpliy `Rule`s."]},"core-trade-rate":{status:"added",log:["Initial commit","Make `PlayerTradeRates` extend `DataObject` and add `rates` `AdditionalData` to `Player`.","Add convenience method `PlayerTradeRates#setAll` to offload the `balance` functionality to the frontend.","Repo cleansing."]},"core-treasury":{status:"added",log:["Initial commit","Add `terasury` `AdditionalData` to `Player`s.","Simplify `Rule`s.","Change how `PlayerTreasury.cost` works with updated `Rule`s.","Ensure an empty `Yield` is passed in to the `Cost` `Rule`s in `PlayerTreasury`."]},"core-turn-based-game":{status:"added",log:["Initial commit","Add `engine:start` event handler.","Add missing events to trigger `Rule`s.","Simpliy `Rule`s.","Amend `Turn` to no longer inherit from `Yield`.","Ensure instances are able to be passed in for events and `Rule`s.","Repo cleansing.","Ensure `Turn` extends `DataObject` and includes the `value`.","Ensure return types match for TypeScript compiler."]},"core-unit-improvement":{status:"added",log:["Initial commit copied from https://github.com/dom111/civ-clone","Ensure `UnitImprovement`s are `DataObject`s."]},"core-unit-transport":{status:"added",log:["Initial commit","Update `Transport` to include a mixin mechanism for extending existing classes, reducing repetition for `Transport` `Unit`s of different types.","Add `Stowed` and `Unloaded` `Rule`s.","Add tests.","Bump dependencies.","Ensure `Base` is `typeof Unit` so that it includes the static methods required by `IBuildable`."]},"core-unit":{status:"added",log:["Initial commit","Fix bug in `Yield` `Rule` type","Update `DelayedAction` to have `Turn` passed into the constructor.","Add `units` `AdditionalData` to `Player`s.","Fix bug where `Unit`s would become active whilst still having `Fortified` applied.","Update to add `status` property to capture the current action being performed (if any) and add in `player` and `visibility` keys for data transfer.","Add `units` `AdditionalData` to `Tile`s.","Updates to call `Created` `Rule`s after setting the keys.","Add `City#units` `AdditionalData`.","Update to use new `Buildable` class from core-city-build.","Trigger `Moved` after a `DelayedAction` has completed.","Ensure `Moved` `Rule`s are triggered at the end of the `DelayedAction` too.","Allow custom `Busy` `Rule`s to be supplied to `DelayedAction`s.","Include the `Action` in `Defeated` `Rule`s so when a `Unit` in a `City` is `Destroyed` it's easy enough to work out if it was a defender.","Add `Unsupported` `Rule`.","Bump depenedencies.","Update typings.","Track `destroyed` status rather than unregister the `Unit`."]},"core-wonder":{status:"added",log:["Initial commit","Add missing `instance` to `WonderRegistry`","Add `getByCity` method to `WonderRegistry`","Add event to trigger when `Wonder`s are obsoleted.","Add `WonderRegistry.getByPlayer`.","Fix `WonderRegistry.getByPlayer`."]},"core-world-generator":{status:"added",log:["Initial commit","Ensure `Generator#generate` returns a `Promise`.","Add utilities to help when map data is used elsewhere.","Add `PickGenerator` (to choose the `Generator` to build the `World` map) and `PickStartTile` (to choose the starting `Tile`s for the `Player`) `Rule`s."]},"core-world-path":{status:"added",log:["Initial commit"]},"core-world":{status:"added",log:["Initial commit","Ensure `undefined` is never added to a `Yield`.","Fix caching issue when `Yield`s get modified after caching.","Fix a bug when `Tile` `Yield`s exist for which weights are not provided.","Convert `World` from a `Registry` to a `DataObject` to allow `height` and `width` to be passed to the `Client`.","Ensure `World#build` handles async `Generator#generate`.","Have `World#build` return `Promise<World>` to help with tests in other packages.","Update `Yield` mechanism for `Tile`s.","Fix bug where all `Tile`s were rated as `0` since the changes to `Yield`s.","Update to use more appropriately named iterator type from `core-registry`.","Simplify `Rule`s.","Ensure `RuleRegistry` is passed into `World`s constructor, instead of when used by `build`."]},"core-yield":{status:"added",log:["Initial commit","Ensure `YieldValue` extends `DataObject`.","Remove `YieldValue` value object, the high usage combined with `ulid` from `DataObject` was causing slowdowns and didn't need to be a `DataObject` at all.","Add `reduceYields` utility function.","Add `NegativeYield` as a convenience object for costs."]},"simple-ai-client":{status:"added",log:["Initial commit","Update how `PlayerAction`s are named.","Updates to use updated `GoodyHutRegistry#getByTile`.","Prevent infinite loop and output debug info.","Updates to prevent TypeScript being sad about the `catch (e)`, `reject(e)` flow.","Add `EndTurn` support.","Add methods for catching when `City`s or `Unit`s are captured or defeated.","Fix the test suite.","Fix `SimpleAIClient` to use the new `CityBuild` mechanism.","Updates to utilise updated `PlayerWorld`.","Update dependencies and fix tests.","Add hard-coded check for `Earth` map to ensure first `City` is built in the right place."]}}}];function fd(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}o(fd,"getDefaults");var qt=fd();function Fc(i){qt=i}o(Fc,"changeDefaults");var yd=/[&<>"']/,_c=new RegExp(yd.source,"g"),vd=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Dc=new RegExp(vd.source,"g"),Lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ud=o(i=>Lc[i],"getEscapeReplacement");function de(i,t){if(t){if(yd.test(i))return i.replace(_c,ud)}else if(vd.test(i))return i.replace(Dc,ud);return i}o(de,"escape");var Uc=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function bd(i){return i.replace(Uc,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}o(bd,"unescape");var Bc=/(^|[^\[])\^/g;function V(i,t){i=typeof i=="string"?i:i.source,t=t||"";let e={replace:(a,n)=>(n=n.source||n,n=n.replace(Bc,"$1"),i=i.replace(a,n),e),getRegex:()=>new RegExp(i,t)};return e}o(V,"edit");var Oc=/[^\w:]/g,zc=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cd(i,t,e){if(i){let a;try{a=decodeURIComponent(bd(e)).replace(Oc,"").toLowerCase()}catch{return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}t&&!zc.test(e)&&(e=$c(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}o(cd,"cleanUrl");var ds={},Gc=/^[^:]+:\/*[^/]*$/,Nc=/^([^:]+:)[\s\S]*$/,jc=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $c(i,t){ds[" "+i]||(Gc.test(i)?ds[" "+i]=i+"/":ds[" "+i]=us(i,"/",!0)),i=ds[" "+i];let e=i.indexOf(":")===-1;return t.substring(0,2)==="//"?e?t:i.replace(Nc,"$1")+t:t.charAt(0)==="/"?e?t:i.replace(jc,"$1")+t:i+t}o($c,"resolveUrl");var cs={exec:o(function(){},"noopTest")};function md(i,t){let e=i.replace(/\|/g,(r,s,l)=>{let d=!1,m=s;for(;--m>=0&&l[m]==="\\";)d=!d;return d?"|":" |"}),a=e.split(/ \|/),n=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;n<a.length;n++)a[n]=a[n].trim().replace(/\\\|/g,"|");return a}o(md,"splitCells");function us(i,t,e){let a=i.length;if(a===0)return"";let n=0;for(;n<a;){let r=i.charAt(a-n-1);if(r===t&&!e)n++;else if(r!==t&&e)n++;else break}return i.slice(0,a-n)}o(us,"rtrim");function Wc(i,t){if(i.indexOf(t[1])===-1)return-1;let e=i.length,a=0,n=0;for(;n<e;n++)if(i[n]==="\\")n++;else if(i[n]===t[0])a++;else if(i[n]===t[1]&&(a--,a<0))return n;return-1}o(Wc,"findClosingBracket");function Hc(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}o(Hc,"checkSanitizeDeprecation");function pd(i,t){if(t<1)return"";let e="";for(;t>1;)t&1&&(e+=i),t>>=1,i+=i;return e+i}o(pd,"repeatString");function hd(i,t,e,a){let n=t.href,r=t.title?de(t.title):null,s=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){a.state.inLink=!0;let l={type:"link",raw:e,href:n,title:r,text:s,tokens:a.inlineTokens(s)};return a.state.inLink=!1,l}return{type:"image",raw:e,href:n,title:r,text:de(s)}}o(hd,"outputLink");function Vc(i,t){let e=i.match(/^(\s+)(?:```)/);if(e===null)return t;let a=e[1];return t.split(`
`).map(n=>{let r=n.match(/^\s+/);if(r===null)return n;let[s]=r;return s.length>=a.length?n.slice(a.length):n}).join(`
`)}o(Vc,"indentCodeCompensation");var ja=class{constructor(t){this.options=t||qt}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let a=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?a:us(a,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let a=e[0],n=Vc(a,e[3]||"");return{type:"code",raw:a,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let a=e[2].trim();if(/#$/.test(a)){let n=us(a,"#");(this.options.pedantic||!n||/ $/.test(n))&&(a=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let a=e[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;let r=this.lexer.blockTokens(a);return this.lexer.state.top=n,{type:"blockquote",raw:e[0],tokens:r,text:a}}}list(t){let e=this.rules.block.list.exec(t);if(e){let a,n,r,s,l,d,m,p,c,h,f,w,C=e[1].trim(),A=C.length>1,b={type:"list",raw:"",ordered:A,start:A?+C.slice(0,-1):"",loose:!1,items:[]};C=A?`\\d{1,9}\\${C.slice(-1)}`:`\\${C}`,this.options.pedantic&&(C=A?C:"[*+-]");let x=new RegExp(`^( {0,3}${C})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(w=!1,!(!(e=x.exec(t))||this.rules.block.hr.test(t)));){if(a=e[0],t=t.substring(a.length),p=e[2].split(`
`,1)[0].replace(/^\t+/,F=>" ".repeat(3*F.length)),c=t.split(`
`,1)[0],this.options.pedantic?(s=2,f=p.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,f=p.slice(s),s+=e[1].length),d=!1,!p&&/^ *$/.test(c)&&(a+=c+`
`,t=t.substring(c.length+1),w=!0),!w){let F=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),B=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),j=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),Q=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;t&&(h=t.split(`
`,1)[0],c=h,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(j.test(c)||Q.test(c)||F.test(c)||B.test(t)));){if(c.search(/[^ ]/)>=s||!c.trim())f+=`
`+c.slice(s);else{if(d||p.search(/[^ ]/)>=4||j.test(p)||Q.test(p)||B.test(p))break;f+=`
`+c}!d&&!c.trim()&&(d=!0),a+=h+`
`,t=t.substring(h.length+1),p=c.slice(s)}}b.loose||(m?b.loose=!0:/\n *\n *$/.test(a)&&(m=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(f),n&&(r=n[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,""))),b.items.push({type:"list_item",raw:a,task:!!n,checked:r,loose:!1,text:f}),b.raw+=a}b.items[b.items.length-1].raw=a.trimRight(),b.items[b.items.length-1].text=f.trimRight(),b.raw=b.raw.trimRight();let U=b.items.length;for(l=0;l<U;l++)if(this.lexer.state.top=!1,b.items[l].tokens=this.lexer.blockTokens(b.items[l].text,[]),!b.loose){let F=b.items[l].tokens.filter(j=>j.type==="space"),B=F.length>0&&F.some(j=>/\n.*\n/.test(j.raw));b.loose=B}if(b.loose)for(l=0;l<U;l++)b.items[l].loose=!0;return b}}html(t){let e=this.rules.block.html.exec(t);if(e){let a={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};if(this.options.sanitize){let n=this.options.sanitizer?this.options.sanitizer(e[0]):de(e[0]);a.type="paragraph",a.text=n,a.tokens=this.lexer.inline(n)}return a}}def(t){let e=this.rules.block.def.exec(t);if(e){let a=e[1].toLowerCase().replace(/\s+/g," "),n=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:a,raw:e[0],href:n,title:r}}}table(t){let e=this.rules.block.table.exec(t);if(e){let a={type:"table",header:md(e[1]).map(n=>({text:n})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=e[0];let n=a.align.length,r,s,l,d;for(r=0;r<n;r++)/^ *-+: *$/.test(a.align[r])?a.align[r]="right":/^ *:-+: *$/.test(a.align[r])?a.align[r]="center":/^ *:-+ *$/.test(a.align[r])?a.align[r]="left":a.align[r]=null;for(n=a.rows.length,r=0;r<n;r++)a.rows[r]=md(a.rows[r],a.header.length).map(m=>({text:m}));for(n=a.header.length,s=0;s<n;s++)a.header[s].tokens=this.lexer.inline(a.header[s].text);for(n=a.rows.length,s=0;s<n;s++)for(d=a.rows[s],l=0;l<d.length;l++)d[l].tokens=this.lexer.inline(d[l].text);return a}}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let a=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:a,tokens:this.lexer.inline(a)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:de(e[1])}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):de(e[0]):e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let a=e[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let s=us(a.slice(0,-1),"\\");if((a.length-s.length)%2===0)return}else{let s=Wc(e[2],"()");if(s>-1){let d=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,d).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);s&&(n=s[1],r=s[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(a)?n=n.slice(1):n=n.slice(1,-1)),hd(e,{href:n&&n.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let n=(a[2]||a[1]).replace(/\s+/g," ");if(n=e[n.toLowerCase()],!n){let r=a[0].charAt(0);return{type:"text",raw:r,text:r}}return hd(a,n,a[0],this.lexer)}}emStrong(t,e,a=""){let n=this.rules.inline.emStrong.lDelim.exec(t);if(!n||n[3]&&a.match(/[\p{L}\p{N}]/u))return;let r=n[1]||n[2]||"";if(!r||r&&(a===""||this.rules.inline.punctuation.exec(a))){let s=n[0].length-1,l,d,m=s,p=0,c=n[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+s);(n=c.exec(e))!=null;){if(l=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!l)continue;if(d=l.length,n[3]||n[4]){m+=d;continue}else if((n[5]||n[6])&&s%3&&!((s+d)%3)){p+=d;continue}if(m-=d,m>0)continue;d=Math.min(d,d+m+p);let h=t.slice(0,s+n.index+(n[0].length-l.length)+d);if(Math.min(s,d)%2){let w=h.slice(1,-1);return{type:"em",raw:h,text:w,tokens:this.lexer.inlineTokens(w)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let a=e[2].replace(/\n/g," "),n=/[^ ]/.test(a),r=/^ /.test(a)&&/ $/.test(a);return n&&r&&(a=a.substring(1,a.length-1)),a=de(a,!0),{type:"codespan",raw:e[0],text:a}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){let a=this.rules.inline.autolink.exec(t);if(a){let n,r;return a[2]==="@"?(n=de(this.options.mangle?e(a[1]):a[1]),r="mailto:"+n):(n=de(a[1]),r=n),{type:"link",raw:a[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t,e){let a;if(a=this.rules.inline.url.exec(t)){let n,r;if(a[2]==="@")n=de(this.options.mangle?e(a[0]):a[0]),r="mailto:"+n;else{let s;do s=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(s!==a[0]);n=de(a[0]),a[1]==="www."?r="http://"+a[0]:r=a[0]}return{type:"link",raw:a[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t,e){let a=this.rules.inline.text.exec(t);if(a){let n;return this.lexer.state.inRawBlock?n=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):de(a[0]):a[0]:n=de(this.options.smartypants?e(a[0]):a[0]),{type:"text",raw:a[0],text:n}}}};o(ja,"Tokenizer");var T={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:cs,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};T._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;T._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;T.def=V(T.def).replace("label",T._label).replace("title",T._title).getRegex();T.bullet=/(?:[*+-]|\d{1,9}[.)])/;T.listItemStart=V(/^( *)(bull) */).replace("bull",T.bullet).getRegex();T.list=V(T.list).replace(/bull/g,T.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+T.def.source+")").getRegex();T._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";T._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;T.html=V(T.html,"i").replace("comment",T._comment).replace("tag",T._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();T.paragraph=V(T._paragraph).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex();T.blockquote=V(T.blockquote).replace("paragraph",T.paragraph).getRegex();T.normal={...T};T.gfm={...T.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};T.gfm.table=V(T.gfm.table).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex();T.gfm.paragraph=V(T._paragraph).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",T.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex();T.pedantic={...T.normal,html:V(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",T._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(T.normal._paragraph).replace("hr",T.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",T.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var R={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:cs,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:cs,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};R._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";R.punctuation=V(R.punctuation).replace(/punctuation/g,R._punctuation).getRegex();R.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;R.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;R._comment=V(T._comment).replace("(?:-->|$)","-->").getRegex();R.emStrong.lDelim=V(R.emStrong.lDelim).replace(/punct/g,R._punctuation).getRegex();R.emStrong.rDelimAst=V(R.emStrong.rDelimAst,"g").replace(/punct/g,R._punctuation).getRegex();R.emStrong.rDelimUnd=V(R.emStrong.rDelimUnd,"g").replace(/punct/g,R._punctuation).getRegex();R._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;R._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;R._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;R.autolink=V(R.autolink).replace("scheme",R._scheme).replace("email",R._email).getRegex();R._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;R.tag=V(R.tag).replace("comment",R._comment).replace("attribute",R._attribute).getRegex();R._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;R._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;R._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;R.link=V(R.link).replace("label",R._label).replace("href",R._href).replace("title",R._title).getRegex();R.reflink=V(R.reflink).replace("label",R._label).replace("ref",T._label).getRegex();R.nolink=V(R.nolink).replace("ref",T._label).getRegex();R.reflinkSearch=V(R.reflinkSearch,"g").replace("reflink",R.reflink).replace("nolink",R.nolink).getRegex();R.normal={...R};R.pedantic={...R.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",R._label).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",R._label).getRegex()};R.gfm={...R.normal,escape:V(R.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};R.gfm.url=V(R.gfm.url,"i").replace("email",R.gfm._extended_email).getRegex();R.breaks={...R.gfm,br:V(R.br).replace("{2,}","*").getRegex(),text:V(R.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Kc(i){return i.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}o(Kc,"smartypants");function gd(i){let t="",e,a,n=i.length;for(e=0;e<n;e++)a=i.charCodeAt(e),Math.random()>.5&&(a="x"+a.toString(16)),t+="&#"+a+";";return t}o(gd,"mangle");var Ee=class{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||qt,this.options.tokenizer=this.options.tokenizer||new ja,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={block:T.normal,inline:R.normal};this.options.pedantic?(e.block=T.pedantic,e.inline=R.pedantic):this.options.gfm&&(e.block=T.gfm,this.options.breaks?e.inline=R.breaks:e.inline=R.gfm),this.tokenizer.rules=e}static get rules(){return{block:T,inline:R}}static lex(t,e){return new Ee(e).lex(t)}static lexInline(t,e){return new Ee(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,d,m)=>d+"    ".repeat(m.length));let a,n,r,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(a=l.call({lexer:this},t,e))?(t=t.substring(a.raw.length),e.push(a),!0):!1))){if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length),a.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+a.raw,n.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+a.raw,n.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),e.push(a);continue}if(r=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,d=t.slice(1),m;this.options.extensions.startBlock.forEach(function(p){m=p.call({lexer:this},d),typeof m=="number"&&m>=0&&(l=Math.min(l,m))}),l<1/0&&l>=0&&(r=t.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(r))){n=e[e.length-1],s&&n.type==="paragraph"?(n.raw+=`
`+a.raw,n.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(a),s=r.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length),n=e[e.length-1],n&&n.type==="text"?(n.raw+=`
`+a.raw,n.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(a);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let a,n,r,s=t,l,d,m;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+pd("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+pd("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(d||(m=""),d=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(a=p.call({lexer:this},t,e))?(t=t.substring(a.raw.length),e.push(a),!0):!1))){if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),n=e[e.length-1],n&&a.type==="text"&&n.type==="text"?(n.raw+=a.raw,n.text+=a.text):e.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length),n=e[e.length-1],n&&a.type==="text"&&n.type==="text"?(n.raw+=a.raw,n.text+=a.text):e.push(a);continue}if(a=this.tokenizer.emStrong(t,s,m)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),e.push(a);continue}if(a=this.tokenizer.autolink(t,gd)){t=t.substring(a.raw.length),e.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t,gd))){t=t.substring(a.raw.length),e.push(a);continue}if(r=t,this.options.extensions&&this.options.extensions.startInline){let p=1/0,c=t.slice(1),h;this.options.extensions.startInline.forEach(function(f){h=f.call({lexer:this},c),typeof h=="number"&&h>=0&&(p=Math.min(p,h))}),p<1/0&&p>=0&&(r=t.substring(0,p+1))}if(a=this.tokenizer.inlineText(r,Kc)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(m=a.raw.slice(-1)),d=!0,n=e[e.length-1],n&&n.type==="text"?(n.raw+=a.raw,n.text+=a.text):e.push(a);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return e}};o(Ee,"Lexer");var $a=class{constructor(t){this.options=t||qt}code(t,e,a){let n=(e||"").match(/\S*/)[0];if(this.options.highlight){let r=this.options.highlight(t,n);r!=null&&r!==t&&(a=!0,t=r)}return t=t.replace(/\n$/,"")+`
`,n?'<pre><code class="'+this.options.langPrefix+de(n)+'">'+(a?t:de(t,!0))+`</code></pre>
`:"<pre><code>"+(a?t:de(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,e,a,n){if(this.options.headerIds){let r=this.options.headerPrefix+n.slug(a);return`<h${e} id="${r}">${t}</h${e}>
`}return`<h${e}>${t}</h${e}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,e,a){let n=e?"ol":"ul",r=e&&a!==1?' start="'+a+'"':"";return"<"+n+r+`>
`+t+"</"+n+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){let a=e.header?"th":"td";return(e.align?`<${a} align="${e.align}">`:`<${a}>`)+t+`</${a}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,a){if(t=cd(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let n='<a href="'+t+'"';return e&&(n+=' title="'+e+'"'),n+=">"+a+"</a>",n}image(t,e,a){if(t=cd(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let n=`<img src="${t}" alt="${a}"`;return e&&(n+=` title="${e}"`),n+=this.options.xhtml?"/>":">",n}text(t){return t}};o($a,"Renderer");var Jn=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,a){return""+a}image(t,e,a){return""+a}br(){return""}};o(Jn,"TextRenderer");var Xn=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let a=t,n=0;if(this.seen.hasOwnProperty(a)){n=this.seen[t];do n++,a=t+"-"+n;while(this.seen.hasOwnProperty(a))}return e||(this.seen[t]=n,this.seen[a]=0),a}slug(t,e={}){let a=this.serialize(t);return this.getNextSafeSlug(a,e.dryrun)}};o(Xn,"Slugger");var Fe=class{constructor(t){this.options=t||qt,this.options.renderer=this.options.renderer||new $a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Jn,this.slugger=new Xn}static parse(t,e){return new Fe(e).parse(t)}static parseInline(t,e){return new Fe(e).parseInline(t)}parse(t,e=!0){let a="",n,r,s,l,d,m,p,c,h,f,w,C,A,b,x,U,F,B,j,Q=t.length;for(n=0;n<Q;n++){if(f=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(j=this.options.extensions.renderers[f.type].call({parser:this},f),j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))){a+=j||"";continue}switch(f.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(f.tokens),f.depth,bd(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(f.text,f.lang,f.escaped);continue}case"table":{for(c="",p="",l=f.header.length,r=0;r<l;r++)p+=this.renderer.tablecell(this.parseInline(f.header[r].tokens),{header:!0,align:f.align[r]});for(c+=this.renderer.tablerow(p),h="",l=f.rows.length,r=0;r<l;r++){for(m=f.rows[r],p="",d=m.length,s=0;s<d;s++)p+=this.renderer.tablecell(this.parseInline(m[s].tokens),{header:!1,align:f.align[s]});h+=this.renderer.tablerow(p)}a+=this.renderer.table(c,h);continue}case"blockquote":{h=this.parse(f.tokens),a+=this.renderer.blockquote(h);continue}case"list":{for(w=f.ordered,C=f.start,A=f.loose,l=f.items.length,h="",r=0;r<l;r++)x=f.items[r],U=x.checked,F=x.task,b="",x.task&&(B=this.renderer.checkbox(U),A?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=B+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=B+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:B}):b+=B),b+=this.parse(x.tokens,A),h+=this.renderer.listitem(b,F,U);a+=this.renderer.list(h,w,C);continue}case"html":{a+=this.renderer.html(f.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{for(h=f.tokens?this.parseInline(f.tokens):f.text;n+1<Q&&t[n+1].type==="text";)f=t[++n],h+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);a+=e?this.renderer.paragraph(h):h;continue}default:{let Re='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(Re);return}else throw new Error(Re)}}}return a}parseInline(t,e){e=e||this.renderer;let a="",n,r,s,l=t.length;for(n=0;n<l;n++){if(r=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(s=this.options.extensions.renderers[r.type].call({parser:this},r),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){a+=s||"";continue}switch(r.type){case"escape":{a+=e.text(r.text);break}case"html":{a+=e.html(r.text);break}case"link":{a+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break}case"image":{a+=e.image(r.href,r.title,r.text);break}case"strong":{a+=e.strong(this.parseInline(r.tokens,e));break}case"em":{a+=e.em(this.parseInline(r.tokens,e));break}case"codespan":{a+=e.codespan(r.text);break}case"br":{a+=e.br();break}case"del":{a+=e.del(this.parseInline(r.tokens,e));break}case"text":{a+=e.text(r.text);break}default:{let d='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(d);return}else throw new Error(d)}}}return a}};o(Fe,"Parser");var Yt=class{constructor(t){this.options=t||qt}preprocess(t){return t}postprocess(t){return t}};o(Yt,"Hooks"),vo(Yt,"passThroughHooks",new Set(["preprocess","postprocess"]));function Yc(i,t,e){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let n="<p>An error occurred:</p><pre>"+de(a.message+"",!0)+"</pre>";if(t)return Promise.resolve(n);if(e){e(null,n);return}return n}if(t)return Promise.reject(a);if(e){e(a);return}throw a}}o(Yc,"onError");function wd(i,t){return(e,a,n)=>{typeof a=="function"&&(n=a,a=null);let r={...a};a={...P.defaults,...r};let s=Yc(a.silent,a.async,n);if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(Hc(a),a.hooks&&(a.hooks.options=a),n){let l=a.highlight,d;try{a.hooks&&(e=a.hooks.preprocess(e)),d=i(e,a)}catch(c){return s(c)}let m=o(function(c){let h;if(!c)try{a.walkTokens&&P.walkTokens(d,a.walkTokens),h=t(d,a),a.hooks&&(h=a.hooks.postprocess(h))}catch(f){c=f}return a.highlight=l,c?s(c):n(null,h)},"done");if(!l||l.length<3||(delete a.highlight,!d.length))return m();let p=0;P.walkTokens(d,function(c){c.type==="code"&&(p++,setTimeout(()=>{l(c.text,c.lang,function(h,f){if(h)return m(h);f!=null&&f!==c.text&&(c.text=f,c.escaped=!0),p--,p===0&&m()})},0))}),p===0&&m();return}if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(e):e).then(l=>i(l,a)).then(l=>a.walkTokens?Promise.all(P.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>t(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(s);try{a.hooks&&(e=a.hooks.preprocess(e));let l=i(e,a);a.walkTokens&&P.walkTokens(l,a.walkTokens);let d=t(l,a);return a.hooks&&(d=a.hooks.postprocess(d)),d}catch(l){return s(l)}}}o(wd,"parseMarkdown");function P(i,t,e){return wd(Ee.lex,Fe.parse)(i,t,e)}o(P,"marked");P.options=P.setOptions=function(i){return P.defaults={...P.defaults,...i},Fc(P.defaults),P};P.getDefaults=fd;P.defaults=qt;P.use=function(...i){let t=P.defaults.extensions||{renderers:{},childTokens:{}};i.forEach(e=>{let a={...e};if(a.async=P.defaults.async||a.async||!1,e.extensions&&(e.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if(n.renderer){let r=t.renderers[n.name];r?t.renderers[n.name]=function(...s){let l=n.renderer.apply(this,s);return l===!1&&(l=r.apply(this,s)),l}:t.renderers[n.name]=n.renderer}if(n.tokenizer){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[n.level]?t[n.level].unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),a.extensions=t),e.renderer){let n=P.defaults.renderer||new $a;for(let r in e.renderer){let s=n[r];n[r]=(...l)=>{let d=e.renderer[r].apply(n,l);return d===!1&&(d=s.apply(n,l)),d}}a.renderer=n}if(e.tokenizer){let n=P.defaults.tokenizer||new ja;for(let r in e.tokenizer){let s=n[r];n[r]=(...l)=>{let d=e.tokenizer[r].apply(n,l);return d===!1&&(d=s.apply(n,l)),d}}a.tokenizer=n}if(e.hooks){let n=P.defaults.hooks||new Yt;for(let r in e.hooks){let s=n[r];Yt.passThroughHooks.has(r)?n[r]=l=>{if(P.defaults.async)return Promise.resolve(e.hooks[r].call(n,l)).then(m=>s.call(n,m));let d=e.hooks[r].call(n,l);return s.call(n,d)}:n[r]=(...l)=>{let d=e.hooks[r].apply(n,l);return d===!1&&(d=s.apply(n,l)),d}}a.hooks=n}if(e.walkTokens){let n=P.defaults.walkTokens;a.walkTokens=function(r){let s=[];return s.push(e.walkTokens.call(this,r)),n&&(s=s.concat(n.call(this,r))),s}}P.setOptions(a)})};P.walkTokens=function(i,t){let e=[];for(let a of i)switch(e=e.concat(t.call(P,a)),a.type){case"table":{for(let n of a.header)e=e.concat(P.walkTokens(n.tokens,t));for(let n of a.rows)for(let r of n)e=e.concat(P.walkTokens(r.tokens,t));break}case"list":{e=e.concat(P.walkTokens(a.items,t));break}default:P.defaults.extensions&&P.defaults.extensions.childTokens&&P.defaults.extensions.childTokens[a.type]?P.defaults.extensions.childTokens[a.type].forEach(function(n){e=e.concat(P.walkTokens(a[n],t))}):a.tokens&&(e=e.concat(P.walkTokens(a.tokens,t)))}return e};P.parseInline=wd(Ee.lexInline,Fe.parseInline);P.Parser=Fe;P.parser=Fe.parse;P.Renderer=$a;P.TextRenderer=Jn;P.Lexer=Ee;P.lexer=Ee.lex;P.Tokenizer=ja;P.Slugger=Xn;P.Hooks=Yt;P.parse=P;var Cb=P.options,kb=P.setOptions,Rb=P.use,Ib=P.walkTokens,Sb=P.parseInline;var Pb=Fe.parse,Tb=Ee.lex;var xd=o((i,t)=>{for(;!(i!=null&&i.matches(t));){if(!(i instanceof HTMLElement))throw new TypeError(`Can't find a match for ${t}`);i=i.parentElement}return i},"firstParentMatching"),Ad=o((i,t)=>{if(!(i instanceof HTMLElement)||!i.matches(t))return;let e=i.getAttribute("aria-expanded")==="true";i.setAttribute("aria-expanded",e?"false":"true")},"toggleExpanded"),ps=class extends Y{constructor(){super("Releases",(0,ms.s)("<section></section>",(0,ms.s)('<div class="release-list"></div>',...dd.map((t,e)=>{let a=new Date(t.date);return(0,ms.s)(`<div class="release">
  <h2>${t.version} - <time title="${a.toLocaleString()}">${ie.timeSince(a)}</time></h2>
  
  <div aria-expanded="${e===0?"true":"false"}">
    ${t.localChanges.length>0?`
    <ul>
      ${t.localChanges.map(n=>`<li>${P(n.replace(/^\s*-\s*/,"").trim(),{sanitize:!0})}</li>`).join(`
      `)}
    </ul>
  `:""}
    
    ${Object.keys(t.externalChanges).length>0?`
    <h3>External changes</h3>
    
    <dl>
      ${Object.entries(t.externalChanges).map(([n,{status:r,log:s}])=>`<dd>${r} ${n}</dd>
      <dt aria-expanded="false">
        <ul>
          ${(s!=null?s:[]).map(l=>`<li>${P(l.replace(/^\s*-\s*/,"").trim(),{sanitize:!0})}</li>`).join(`
          `)}
        </ul>
      </dt>`).join(`
    `)}
    </dl>
  </div>
`:""}
</div>`)}))),{canMaximise:!0,canResize:!0,classes:"releases"}),this.on("click",t=>{t.target instanceof HTMLElement&&(t.target.matches("dd, dd *")&&Ad(xd(t.target,"dd").nextElementSibling,"dt"),t.target.matches(".release h2, .release h2 *")&&Ad(xd(t.target,"h2").nextElementSibling,"div"))})}};o(ps,"ReleaseWindow");var Cd=ps;var kd="0.1.0@8a11546";I();var kt,hs=class extends _e.Element{constructor(e,a){super(e);y(this,kt,void 0);v(this,kt,a),this.build(),this.addClass("active")}async build(e=!1){let a=await $.hasAllAssets();a||(console.log("Missing assets:"),console.log(await $.missingAssets())),this.append(E((0,_e.s)("<nav></nav>",E((0,_e.s)(`<button autofocus${a?"":" hidden"}>${g("MainMenu.new-game")}</button>`),{click:()=>{new ed(u(this,kt),()=>this.remove())}}),E((0,_e.s)(`<button${a?"":" hidden"}>${g("MainMenu.earth")}</button>`),{click:()=>new td(u(this,kt),()=>this.remove())}),E((0,_e.s)(`<button${a?"":" hidden"}>${g("MainMenu.customize-world")}</button>`),{click:async()=>new Xl(u(this,kt),()=>this.remove())}),E((0,_e.s)("<button>Import Assets</button>"),{click:()=>new ld}),E((0,_e.s)(`<button${e?"":" hidden"}>${g("MainMenu.quit")}</button>`),{click:()=>{this.remove(),u(this,kt).send("quit",null)}})),{keydown(n){let r=document.activeElement,s=ut(n);r===null||!r.matches("#mainmenu nav button")||(s==="ArrowDown"&&r.nextElementSibling&&r.nextElementSibling.focus(),s==="ArrowUp"&&r.previousElementSibling&&r.previousElementSibling.focus())}}),(0,_e.s)("<footer></footer>",E((0,_e.s)(`<a href="#releases">${g("MainMenu.version",{version:kd})}</a>`),{click(n){n.preventDefault(),new Cd}})))}remove(){this.queryAll("button").forEach(e=>e.setAttribute("disabled","")),this.removeClass("active"),setTimeout(()=>super.remove(),2e3)}};o(hs,"MainMenu"),kt=new WeakMap;var Rd=hs;var Id=_(D());var ke,De,Zt,Wa,Ke,gs=class{constructor(t,e,a,...n){y(this,ke,void 0);y(this,De,void 0);y(this,Zt,void 0);y(this,Wa,void 0);y(this,Ke,void 0);v(this,De,t),v(this,Ke,e),v(this,Wa,a),v(this,Zt,n),v(this,ke,u(this,De).getContext("2d")),(0,Id.on)(u(this,De),"click",r=>{let s=r.offsetX-u(this,De).offsetLeft,l=r.offsetY-u(this,De).offsetTop,d=Math.ceil(s/u(this,De).offsetWidth*u(this,Ke).width()),m=Math.ceil(l/u(this,De).offsetHeight*u(this,Ke).height());u(this,Wa).setCenter(d,m),this.update()})}update(){let t=u(this,Zt)[0].canvas().height*(190/u(this,Zt)[0].canvas().width);u(this,De).height=t,u(this,ke).clearRect(0,0,190,t),u(this,Zt).forEach(n=>u(this,ke).drawImage(n.canvas(),0,0,190,t));let[e,a]=u(this,Wa).rawVisibleRange();u(this,ke).lineWidth=1,u(this,ke).strokeStyle="#fff",u(this,ke).fillStyle="rgba(255, 255, 255, .2)",u(this,ke).rect(Math.floor(190/u(this,Ke).width()*e.x),Math.floor(t/u(this,Ke).height()*e.y),Math.floor(190/u(this,Ke).width()*(a.x-e.x)),Math.floor(t/u(this,Ke).height()*(a.y-e.y))),u(this,ke).stroke(),u(this,ke).fill()}};o(gs,"Minimap"),ke=new WeakMap,De=new WeakMap,Zt=new WeakMap,Wa=new WeakMap,Ke=new WeakMap;var Sd=gs;I();var Qn,Jt,Rt,fs=class{constructor(t=document.body){y(this,Qn,void 0);y(this,Jt,[]);y(this,Rt,null);v(this,Qn,t)}receive(t){u(this,Jt).push(t),this.check()}check(){let t=document.querySelector(".notificationWindow");if(!u(this,Jt).length||t)return;let e=u(this,Jt).shift();this.publish(e)}periodicChecker(t=!1){if(this.check(),t){if(u(this,Rt)===null)return;window.clearInterval(u(this,Rt)),v(this,Rt,null);return}u(this,Rt)!==null||u(this,Jt).length===0||v(this,Rt,window.setInterval(()=>this.check(),500))}publish(t){let e=g(`${t.key}.body`,{...t.data,ns:"notification",skipOnVariables:!1}),a=g(`${t.key}.title`,{...t.data,defaultValue:g("Notification.title"),ns:"notification",skipOnVariables:!1});new Ri(a,e,{modal:!0,parent:u(this,Qn)}).on("close",()=>this.periodicChecker())}};o(fs,"Notifications"),Qn=new WeakMap,Jt=new WeakMap,Rt=new WeakMap;var Pd=fs;var Ha=_(D());I();var ei,ys=class extends Ha.Element{constructor(e,a){super(e);y(this,ei,void 0);v(this,ei,a)}build(){var p,c;this.empty();let{civilization:e,treasuries:a,research:n,cities:r}=u(this,ei),[s]=a.filter(h=>h.yield._==="Gold"),[l,d]=r.reduce(([h,f],w)=>{let[C,A]=fn(w.yields,"Gold","Research");return[h+C,f+A]},[0,0]),m=Math.ceil((n.cost.value-n.progress.value)/d);this.append((0,Ha.s)(`<h3>${g("PlayerDetails.header",{leader:g(`Leader.${e.leader._}.name`,{defaultValue:e.leader._,ns:"civilization"}),nation:g(`${e._}.plural`,{defaultValue:e._,ns:"civilization"})})}</h3>`),(0,Ha.s)(`<p><strong>${g("PlayerDetails.Researching.title")}</strong><br/>${g("PlayerDetails.Researching.body",{progress:n.progress.value,cost:n.cost.value,perTurn:d,researching:g(`${(p=n.researching)==null?void 0:p._}.name`,{defaultValue:(c=n.researching)==null?void 0:c._,ns:"science"}),turns:Number.isFinite(m)?m:0,context:n.researching?"researching":"notresearching"})}</p>`),(0,Ha.s)(`<p><strong>${g("PlayerDetails.Treasury.title")}</strong><br/>${g("PlayerDetails.Treasury.body",{value:s.value,perTurn:l})}</p>`))}};o(ys,"PlayerDetails"),ei=new WeakMap;var Td=ys;var Ye=_(D());I();var q,vs=class extends Ye.Element{constructor(e,a){super(e);y(this,q,void 0);v(this,q,a),this.build()}build(){this.empty(),u(this,q)!==null&&this.append((0,Ye.s)(`<p>${g("UnitDetails.header",{unitName:g(`${u(this,q)._}.name`,{defaultValue:u(this,q)._,ns:"unit"}),x:u(this,q).tile.x,y:u(this,q).tile.y})}</p>`),(0,Ye.s)(`<p>${K(u(this,q).city)}</p>`),(0,Ye.s)(`<p>${g("UnitDetails.moves",{remaining:u(this,q).moves.value,total:u(this,q).movement.value})}</p>`),(0,Ye.s)(`<p>${g("UnitDetails.stats",{attack:u(this,q).attack.value,defence:u(this,q).defence.value,visibility:u(this,q).visibility.value})}</p>`),(0,Ye.s)(`<p>${g("UnitDetails.improvements",{improvements:u(this,q).improvements.map(e=>g(`Improvement.${e._}.name`,{defaultValue:e._,ns:"unit"}))})}</p>`),(0,Ye.s)(`<p>${g("UnitDetails.terrain",{terrain:g(`${u(this,q).tile.terrain._}.name`,{defaultValue:u(this,q).tile.terrain._,ns:"world"}),features:u(this,q).tile.terrain.features.map(e=>g(`Feature.${e._}.name`,{defaultValue:e._,ns:"world"})),improvements:u(this,q).tile.improvements.map(e=>g(`Improvement.${e._}.name`,{defaultValue:e._,ns:"world"}))})}</p>`),(0,Ye.s)("<p></p>",...u(this,q).tile.units.filter(e=>e!==u(this,q)).map(e=>new Pe(e))))}};o(vs,"UnitDetails"),q=new WeakMap;var Md=vs;var It,bs=class{constructor(t){y(this,It,void 0);v(this,It,t)}async init(){let t=u(this,It);if(await $.hasAllAssets()){let a=await $.getScaled("./assets/cursor/torch.png",2);document.body.style.cursor=`url('${a.toDataURL("image/png")}'), default`}S.use(mo),await S.init({ns:["default"]}),await Promise.resolve().then(()=>(Yd(),Zc)),(0,rt.on)(document,"keydown",a=>{if(a.key==="F5"||["R","r"].includes(a.key)&&(/Mac OS X/.test(navigator.userAgent)?a.metaKey:a.ctrlKey)){a.preventDefault(),new Dt("Quit","Are you sure you want to reload?",()=>window.location.reload());return}}),Ma.set("autoEndOfTurn",!0);try{let a=document.getElementById("notification"),n=document.querySelector("#mainmenu"),r=document.getElementById("actions"),s=document.getElementById("other-actions"),l=document.getElementById("game-menu"),d=document.getElementById("game"),m=document.getElementById("map"),p=m.querySelector("canvas"),c=document.getElementById("gameDetails"),h=document.getElementById("playerDetails"),f=document.getElementById("minimap"),w=document.getElementById("unitInfo"),C=document.getElementById("preload"),A=new Pd,b=new Rd(n,u(this,It)),x=o((k,O,J,ve)=>{let qe=new Md(w,k);if(j=k,qe.build(),O.setActiveUnit(k),J.setActiveUnit(k),J.render(),J.setVisible(!0),ve.setActiveUnit(k),ve.render(),ve.setVisible(!0),k===null){O.render();return}B=k,J.update([...B!=null&&B.tile?[B.tile]:[],k.tile]),O.isVisible(k.tile.x,k.tile.y)||O.setCenter(k.tile.x,k.tile.y),O.render()},"setActiveUnit");$.getAll().then(k=>k.forEach(O=>C.append(E((0,rt.s)(`<img src="${O.uri}" data-path="${O.name}">`),{error:()=>console.error(`There was a problem preloading '${O.name}', you may have some missing details.`)}))));let U=[],F,B=null,j=null;t.receive("notification",k=>{a.innerHTML=k,F&&window.clearTimeout(F),F=window.setTimeout(()=>{F=void 0,a.innerText=""},4e3)});let Q=o(k=>{if(Ne(k,"Dialogue"))return g(`${k._}.${k.key}`,{interaction:k,defaultValue:k._,ns:"diplomacy"});if(Ne(k,"Proposal"))return g(k._,{interaction:k,defaultValue:k._,ns:"diplomacy"});if(Ne(k,"Resolution")){let{proposal:O}=k;return g(`Resolution.${O._}.${k._}`,{interaction:k,defaultValue:k._,ns:"diplomacy"})}return g(`Action.${k._}`,{interaction:k,defaultValue:k._,ns:"diplomacy"})},"interactionLabel"),Re=o(k=>{let O=k.lastInteraction;return O===null?"negotiation.missing-label":Q(O)},"negotiationLabel");t.receive("chooseFromList",({choices:k,key:O,data:J})=>{let ve=g(`ChooseFromList.${O}.title`,{data:J,defaultValue:g("ChooseFromList.default.body")});if(O==="negotiation.next-step"&&k.length===1){let re=new Ii(ve,Re(J),{canClose:!1,actions:{primary:{label:Q(k[0].value),action:L=>L.close()}}});re.on("keydown",L=>{L.key==="Enter"&&(re.close(),L.preventDefault(),L.stopPropagation())}),re.once("close",()=>t.send("chooseFromList",k[0].id));return}let qe=O==="negotiation.next-step"?Re(J):g(`ChooseFromList.${O}.body`,{data:J,defaultValue:g("ChooseFromList.default.body")});new mt(ve,k.map(({id:re,value:L})=>({label:O==="negotiation.next-step"?Q(L):g(`ChooseFromList.${O}.choice`,{value:L,defaultValue:L==null?void 0:L._}),value:re})),re=>t.send("chooseFromList",re),qe,{canClose:!1,displayAll:!0})}),t.receiveOnce("gameData",(k,O={objects:{},hierarchy:{}})=>{try{new Ri("Welcome",(0,rt.s)(`<div class="welcome">
<p>${g("Welcome.you-have-risen",{leader:g(`Leader.${k.player.civilization.leader._}.name`,{defaultValue:k.player.civilization.leader._,ns:"civilization"}),nation:g(`${k.player.civilization._}.plural`,{defaultValue:k.player.civilization._,ns:"civilization"})})}</p>
<p>${g("Welcome.your-people-have-knowledge-of",{advances:["Irrigation","Mining","Roads",...k.player.research.complete.map(G=>g(`${G._}.name`,{defaultValue:G._,ns:"science"}))]})}</p>
</div>`)),d.classList.add("active"),p.width=p.parentElement.offsetWidth,p.height=p.parentElement.offsetHeight;let J=[],ve=2,qe=new cr(k.player.world),re=new Hl,L=new $l(qe,t,p,{playerId:k.player.id,scale:ve,tileSize:16},kn,Vi,nr,Wi,Gi,Wl,ji,xa,vt,An,so,ro),Pt=L.getLayer(kn),Ze=L.getLayer(xa),st=L.getLayer(vt),Tt=L.getLayer(An),ni=L.getLayer(so),we=L.getLayer(ro),Va=new Sd(f,qe,L,Pt,Tt,we),ii=new io(r,L,u(this,It)),Mt=new io(s,L,u(this,It));new Nl(l,k.player,L,t).build(),Ze.setVisible(!1),L.on("focus-changed",()=>Va.update()),L.on("activate-unit",G=>x(G,L,st,we)),re.on(()=>{we.setVisible(!we.isVisible()),U.length>0&&L.build(U.splice(0)),L.render()}),(0,rt.on)(window,"resize",()=>{p.width=p.parentElement.offsetWidth,p.height=p.parentElement.offsetHeight});let Je=o(G=>{k=zs(G),document.dispatchEvent(new CustomEvent("dataupdated",{detail:{data:k}}));let W=["ChooseResearch","CityBuild","CivilDisorder","EndTurn"],ee=["ActiveUnit","ChangeProduction","CompleteProduction","InactiveUnit"],N={EndTurn:100,ChooseResearch:80,CityBuild:60,CivilDisorder:10};ii.build(k.player.actions.filter(ae=>W.includes(ae._)).sort((ae,Za)=>{var go,fo;return((go=N[Za._])!=null?go:0)-((fo=N[ae._])!=null?fo:0)})),Mt.build(k.player.actions.filter(ae=>![...W,...ee].includes(ae._))),d.append(ii.element()),qe.setTiles(k.player.world.tiles),new Ul(c,k.turn,k.year).build(),new Td(h,k.player).build(),J=k.player.actions.filter(ae=>ae._==="ActiveUnit");let[ce]=J.sort(({value:ae},{value:Za})=>Za===B?1:ae===B?-1:(L.isVisible(Za.tile.x,Za.tile.y)?1:0)-(L.isVisible(ae.tile.x,ae.tile.y)?1:0));if(B!==(ce==null?void 0:ce.value)&&(B=null),x(B!=null&&B.active?B:ce?ce.value:null,L,st,we),L.build(U.splice(0)),L.render(),Va.update(),Ma.get("autoEndOfTurn")&&k.player.mandatoryActions.length===1&&k.player.mandatoryActions.every(ae=>ae._==="EndTurn")){t.send("action",{name:"EndTurn"});return}},"handler");Je(O),t.receive("gameData",(G,W)=>Je(W));let Xt=o(G=>G.replace(/]/g,"").split(/[.[]/),"pathToParts"),Qt=o((G,W)=>{let ee=Xt(W),N=ee.pop();return[ee.reduce((te,ce)=>!te||!(ce in te)?null:te[ce],G),N]},"getPenultimateObject"),ri=o((G,W,ee)=>{let[N,X]=Qt(G,W);if(!N||!X){console.warn(`unable to set ${W} of ${G} (${X})`);return}N[X]=ee},"setObjectPath"),Ka=o((G,W)=>{let[ee,N]=Qt(G,W);if(!ee||!N){console.warn(`unable to set ${W} of ${G} (${N})`);return}delete ee[N]},"removeObjectPath");t.receive("gameDataPatch",G=>{G.forEach(W=>Object.entries(W).forEach(([ee,{type:N,index:X,value:te}])=>{if(N==="add"||N==="update"){if(!te.hierarchy){console.error("No hierarchy"),console.error(te);return}X?ri(O.objects[ee],X,te.hierarchy):O.objects[ee]=te.hierarchy,document.dispatchEvent(new CustomEvent("patchdatareceived",{detail:{value:te}})),Object.entries(te.objects).forEach(([ce,ae])=>{O.objects[ce]=ae,ae._==="PlayerTile"&&U.push(ae)})}if(N==="remove"){if(X){Ka(O.objects[ee],X);return}delete O.objects[ee]}})),Je(O)}),t.receive("gameNotification",G=>A.receive(G));let Xe={" ":["NoOrders"],b:["FoundCity"],D:["Disband"],f:["Fortify","BuildFortress"],i:["BuildIrrigation","ClearForest","ClearSwamp","ClearJungle"],m:["BuildMine","PlantForest"],P:["Pillage"],r:["BuildRoad","BuildRailroad"],s:["Sleep"],u:["Unload"],w:["Wait"]},ea={ArrowUp:"n",PageUp:"ne",ArrowRight:"e",PageDown:"se",ArrowDown:"s",End:"sw",ArrowLeft:"w",Home:"nw"},Ya={F1:()=>new Tr(k.player,L,t),F4:()=>new Or(k.player,L,t),F5:()=>new jr(k.player,L,t),F6:()=>new Gr(k.player)},qa="";(0,rt.on)(document,"keydown",G=>{let W=ut(G);W in Ya&&(Ya[G.key](),G.preventDefault());let ee=document.querySelector("dialog.window.modal");if(document.activeElement===document.body&&ee){G.preventDefault(),(0,rt.emit)(ee,new KeyboardEvent("keydown",{key:G.key}));return}if(j){if(W in Xe){let N=[...Xe[W]];for(;N.length;){let X=N.shift(),[te]=j.actions.filter(ce=>ce._===X);if(te){t.send("action",{name:"ActiveUnit",id:j.id,unitAction:te._,target:te.to.id}),G.stopPropagation(),G.preventDefault();return}}}if(W in ea){let[N]=j.actionsForNeighbours[ea[W]],X=o(()=>{t.send("action",{name:"ActiveUnit",id:j.id,unitAction:N._,target:N.to.id}),G.stopPropagation(),G.preventDefault()},"perform");if(N){if(["SneakAttack","SneakCaptureCity"].includes(N._)){new Dt(g("SneakAttack.title"),g("SneakAttack.body",{nation:g(`${N.enemy.civilization._}.nation`,{defaultValue:N.enemy.civilization._,ns:"civilization"})}),()=>X());return}X();return}}}if(W==="Escape"&&document.activeElement!==null){document.activeElement.blur();return}if(W==="Enter"&&k.player.mandatoryActions.some(N=>N._==="EndTurn")){t.send("action",{name:"EndTurn"}),G.stopPropagation(),G.preventDefault();return}if(W==="Tab"){let N=r.querySelector("div.action:first-child button");if(N!==null){N.focus(),G.preventDefault(),G.stopPropagation();return}}if(W==="c"&&j){L.setCenter(j.tile.x,j.tile.y),L.render(),Va.update();return}if(W==="w"&&j&&J.length>1){let N=J.map(ce=>ce.value),X=N.indexOf(j),te=N[X===N.length-1?0:X+1];x(te,L,st,we)}if(W==="t"){st.setVisible(!st.isVisible()),Tt.setVisible(!Tt.isVisible()),ni.setVisible(!ni.isVisible()),L.render();return}if(W==="y"){Ze.setVisible(!Ze.isVisible()),L.render();return}if(qa==="%"&&W==="^"){t.send("cheat",{name:"RevealMap",value:null});return}qa=W})}catch(J){console.error(J)}})}catch(a){console.error(a)}}};o(bs,"Renderer"),It=new WeakMap;var qd=bs;var ws=class{async request(t){return new Promise(e=>{this.send(t.channel(),t.args()[0]),this.receiveOnce(t.channel(),a=>e(a))})}};o(ws,"AbstractTransport");var Zd=ws;var xs=class{#t;#e;#a;constructor(t,e,a){this.#t=e,this.#e=a,this.#a=t}data(...t){return this.#e(...t)}key(){return this.#t}type(){return this.#a}};o(xs,"AdditionalData");var Jd=xs;var As=class extends Ta{constructor(){super(Jd)}getByType(t){return this.filter(e=>e.type()===t||Object.prototype.isPrototypeOf.call(e.type(),t)||Object.prototype.isPrototypeOf.call(e.type().prototype,t))}};o(As,"AdditionalDataRegistry");var po=new As;var Jc=o(i=>{let t=i instanceof Cs?i.sourceClass():i,e=[];for(;t instanceof Function;)e.push(t),t=Object.getPrototypeOf(t);return e.map(a=>a.name)},"generateInheritance"),ho=Jc;var ks={},Xc=o(i=>{let t=i.sourceClass().name,e=ks[t];return e||(ks[t]=0),e>=Number.MAX_SAFE_INTEGER&&(ks[t]=BigInt(e)),t+"-"+(++ks[t]).toString(36)},"idProvider"),ti=o((i,t,e=n=>n,a=po)=>{if(i=e(i),i instanceof Fr&&(i=i.entries()),Array.isArray(i))return i.map(n=>ti(n,t,e,a));if(i instanceof ai){let n=i.id();if(!(n in t)){let r={_:i.sourceClass().name,__:ho(i)};t[n]=r,i.keys().forEach(s=>{let l=i[s]instanceof Function?i[s]():i[s];r[s]=ti(l,t,e,a)}),a.getByType(i.sourceClass()).forEach(s=>{r[s.key()]=ti(s.data(i),t,e,a)})}return{"#ref":n}}return i instanceof Function?{_:i.name,__:ho(i)}:i&&i instanceof Object?Object.entries(i).reduce((n,[r,s])=>(n[r]=ti(s,t,e,a),n),{}):i},"toPlainObject"),ai=class{#t;#e=["id"];constructor(){this.#t=Xc(this)}addKey(...t){this.#e.push(...t)}id(){return this.#t}keys(){return this.#e}sourceClass(){return this.constructor}toPlainObject(t=a=>a,e=po){let a={};return{hierarchy:ti(this,a,t,e),objects:a}}};o(ai,"DataObject");var Cs=ai;var St,Rs=class extends Zd{constructor(e){super();y(this,St,void 0);v(this,St,e)}receive(e,a){u(this,St).addEventListener("message",({data:{channel:n,data:r}})=>{let s=r!=null&&r.hierarchy?Gs(r):r;e===n&&a(s,r)})}receiveOnce(e,a){let n=o(({data:{channel:r,data:s}})=>{let l=s!=null&&s.hierarchy?Gs(s):s;e===r&&(a(l,s),u(this,St).removeEventListener("message",n))},"onceHandler");u(this,St).addEventListener("message",n)}send(e,a){a instanceof Cs&&(a=a.toPlainObject()),u(this,St).postMessage({channel:e,data:a})}};o(Rs,"WorkerTransport"),St=new WeakMap;var Xd=Rs;var Qc=new qd(new Xd(new Worker("dist/backend.js")));Qc.init();})();
//# sourceMappingURL=frontend.js.map
