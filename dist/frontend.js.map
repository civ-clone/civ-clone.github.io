{
  "version": 3,
  "sources": ["../node_modules/@dom111/element/dist/Element.js", "../node_modules/@babel/runtime/helpers/esm/typeof.js", "../node_modules/@babel/runtime/helpers/esm/classCallCheck.js", "../node_modules/@babel/runtime/helpers/esm/toPrimitive.js", "../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js", "../node_modules/@babel/runtime/helpers/esm/createClass.js", "../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js", "../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js", "../node_modules/@babel/runtime/helpers/esm/inherits.js", "../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js", "../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js", "../node_modules/@babel/runtime/helpers/esm/defineProperty.js", "../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js", "../node_modules/@babel/runtime/helpers/esm/iterableToArray.js", "../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js", "../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js", "../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js", "../node_modules/@babel/runtime/helpers/esm/toArray.js", "../node_modules/i18next/dist/esm/i18next.js", "../node_modules/@dom111/typed-event-emitter/EventEmitter.js", "../translations/civ1-city-improvement/en-GB.ts", "../translations/civ1-city-improvement/en.ts", "../translations/civ1-city/en.ts", "../translations/civ1-civilization/en.ts", "../translations/civ1-diplomacy/en-GB.ts", "../translations/civ1-diplomacy/en.ts", "../translations/civ1-government/en.ts", "../translations/civ1-science/en-GB.ts", "../translations/civ1-science/en.ts", "../translations/civ1-spaceship/en.ts", "../translations/civ1-trade-rate/en.ts", "../translations/civ1-unit/en-GB.ts", "../translations/civ1-unit/en.ts", "../translations/civ1-wonder/en.ts", "../translations/civ1-world/en.ts", "../translations/local/en-GB.ts", "../translations/local/en.ts", "../src/js/translations.ts", "../src/js/UI/Renderer.ts", "../src/js/UI/lib/reconstituteData.ts", "../src/js/UI/components/Actions.ts", "../src/js/UI/components/Actions/Action.ts", "../src/js/UI/components/LockedSlider.ts", "../src/js/UI/components/LockedSliderGroup.ts", "../src/js/UI/components/TransientElement.ts", "../src/js/UI/components/Window.ts", "../src/js/UI/lib/html.ts", "../node_modules/idb/build/wrap-idb-value.js", "../node_modules/idb/build/index.js", "../src/js/UI/Store.ts", "../src/js/UI/lib/scaleImage.ts", "../src/js/UI/AssetStore.ts", "../src/js/UI/components/Actions/AdjustTradeRates.ts", "../src/js/UI/components/NotificationWindow.ts", "../src/js/UI/components/ActionWindow.ts", "../src/js/UI/components/SelectionWindow.ts", "../src/js/UI/lib/mappedKey.ts", "../src/js/UI/components/Actions/ChooseResearch.ts", "../src/js/UI/components/lib/city.ts", "../src/js/UI/components/lib/cityBuild.ts", "../src/js/UI/components/CityBuildSelectionWindow.ts", "../src/js/UI/lib/instanceOf.ts", "../src/js/UI/lib/yieldMap.ts", "../src/js/UI/components/lib/cityYields.ts", "../src/js/UI/components/Actions/CityBuild.ts", "../src/js/UI/components/City.ts", "../src/js/UI/lib/getPreloadedImage.ts", "../src/js/UI/lib/replaceColours.ts", "../src/js/UI/components/Map.ts", "../src/js/UI/components/Map/Cities.ts", "../src/js/UI/components/ConfirmationWindow.ts", "../src/js/UI/DataObserver.ts", "../src/js/UI/components/Map/TerrainAbstract.ts", "../src/js/UI/components/Map/Feature.ts", "../src/js/UI/components/Map/Fog.ts", "../src/js/UI/components/Map/Improvements.ts", "../src/js/UI/components/Map/Irrigation.ts", "../src/js/UI/components/Map/Land.ts", "../src/js/UI/components/Portal.ts", "../src/js/UI/components/SupportedUnit.ts", "../src/js/UI/components/Unit.ts", "../src/js/UI/components/lib/entity.ts", "../src/js/UI/lib/renderUnit.ts", "../src/js/UI/components/Map/Terrain.ts", "../src/js/UI/components/UnitSelectionWindow.ts", "../src/js/UI/components/Map/Units.ts", "../src/js/UI/components/Map/Unworkable.ts", "../src/js/UI/components/World.ts", "../src/js/UI/components/Map/Yields.ts", "../src/js/UI/LocaleProvider.ts", "../src/js/UI/components/lib/showCityAction.ts", "../src/js/UI/components/lib/showCityOnMap.ts", "../src/js/UI/components/Actions/CivilDisorder.ts", "../src/js/UI/components/Actions/EndTurn.ts", "../src/js/UI/components/Actions/Revolution.ts", "../src/js/UI/components/Actions/Spaceship.ts", "../src/js/UI/components/Map/ActiveUnit.ts", "../src/js/UI/components/Map/CityNames.ts", "../src/js/UI/components/CityStatus.ts", "../src/js/UI/components/GameDetails.ts", "../src/js/UI/components/GameMenu.ts", "../node_modules/@civ-clone/core-registry/EntityRegistry.ts", "../src/js/UI/GameOption.ts", "../src/js/UI/GameOptionsRegistry.ts", "../src/js/UI/components/GameOptions.ts", "../src/js/UI/components/HappinessReport.ts", "../src/js/UI/components/PopupMenu.ts", "../src/js/UI/components/lib/playerYields.ts", "../src/js/UI/components/ScienceReport.ts", "../src/js/UI/components/TradeReport.ts", "../src/js/UI/components/UnitActionMenu.ts", "../src/js/UI/components/GamePortal.ts", "../src/js/UI/components/Map/GoodyHuts.ts", "../src/js/UI/lib/IntervalHandler.ts", "../node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js", "../src/js/UI/components/MainMenu.ts", "../src/js/Engine/Request.ts", "../src/js/Engine/Requests/Options.ts", "../src/js/UI/components/CustomiseWorldWindow.ts", "../src/js/UI/components/MandatorySelection.ts", "../src/js/UI/components/NewGameWindow.ts", "../src/js/UI/components/EarthWindow.ts", "../node_modules/@civ-clone/civ1-asset-extractor/BinFile.ts", "../node_modules/@civ-clone/civ1-asset-extractor/LZWDictionary.ts", "../node_modules/@civ-clone/civ1-asset-extractor/LZW.ts", "../node_modules/@civ-clone/civ1-asset-extractor/lib/lowerNibble.ts", "../node_modules/@civ-clone/civ1-asset-extractor/lib/upperNibble.ts", "../node_modules/@civ-clone/civ1-asset-extractor/PicImage.ts", "../node_modules/@civ-clone/civ1-asset-extractor/extractSprites.ts", "../src/js/UI/components/ImportAssetsWindow.ts", "../src/js/UI/components/ReleaseWindow.ts", "../node_modules/marked/lib/marked.esm.js", "../src/js/UI/components/Minimap.ts", "../src/js/UI/components/Notifications.ts", "../src/js/UI/components/PlayerDetails.ts", "../src/js/UI/components/UnitDetails.ts", "../src/js/Engine/AbstractTransport.ts", "../node_modules/@civ-clone/core-data-object/AdditionalData.ts", "../node_modules/@civ-clone/core-data-object/AdditionalDataRegistry.ts", "../node_modules/@civ-clone/core-data-object/lib/generateInheritance.ts", "../node_modules/@civ-clone/core-data-object/DataObject.ts", "../src/js/Engine/WorkerTransport.ts", "../src/js/frontend.ts"],
  "sourcesContent": ["\"use strict\";var e,t=this&&this.__classPrivateFieldSet||function(e,t,s,o,r){if(\"m\"===o)throw new TypeError(\"Private method is not writable\");if(\"a\"===o&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof t?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===o?r.call(e,s):r?r.value=s:t.set(e,s),s},s=this&&this.__classPrivateFieldGet||function(e,t,s,o){if(\"a\"===s&&!o)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof t?e!==t||!o:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===s?o:\"a\"===s?o.call(e):o?o.value:t.get(e)};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Element=exports.toggleClass=exports.t=exports.s=exports.removeClass=exports.once=exports.onEach=exports.on=exports.off=exports.hasClass=exports.empty=exports.emitCustom=exports.emit=exports.addClass=void 0;exports.addClass=(e,...t)=>e.classList.add(...t);exports.emit=(e,t)=>e.dispatchEvent(t);exports.emitCustom=(e,t,...s)=>(0,exports.emit)(e,new CustomEvent(t,{detail:s}));exports.empty=e=>{for(var t;e.hasChildNodes();)null===(t=e.firstChild)||void 0===t||t.remove()};exports.hasClass=(e,t)=>e.classList.contains(t);exports.off=(e,t,s,o={})=>e.removeEventListener(t,s,o);exports.on=(e,t,s,o={})=>e.addEventListener(t,s,o);exports.onEach=(e,t,s,o={})=>t.forEach((t=>(0,exports.on)(e,t,s,o)));exports.once=(e,t,s,o={})=>(0,exports.on)(e,t,s,Object.assign(Object.assign({},\"boolean\"==typeof o?{capture:o}:o),{once:!0}));exports.removeClass=(e,...t)=>e.classList.remove(...t);exports.s=(e,...t)=>{const s=document.createElement(\"div\");s.innerHTML=e;const r=s.firstElementChild;return t.forEach((e=>{e instanceof o?r.append(e.element()):e instanceof Node?r.append(e):r.append((0,exports.t)(e))})),r};exports.t=e=>document.createTextNode(e);exports.toggleClass=(e,...t)=>t.forEach((t=>e.classList.toggle(t)));class o{constructor(s){e.set(this,void 0),t(this,e,s,\"f\")}static fromString(e){return new o((0,exports.s)(e))}addClass(...e){(0,exports.addClass)(this.element(),...e)}append(...e){e.forEach((e=>{e instanceof o&&(e=e.element()),this.element().append(e)}))}element(){return s(this,e,\"f\")}emit(e){return(0,exports.emit)(this.element(),e)}emitCustom(e,...t){return(0,exports.emitCustom)(this.element(),e,...t)}empty(){(0,exports.empty)(this.element())}hasClass(e){return(0,exports.hasClass)(this.element(),e)}off(e,t,s={}){(0,exports.off)(this.element(),e,t,s)}on(e,t,s={}){(0,exports.on)(this.element(),e,t,s)}onEach(e,t,s={}){(0,exports.onEach)(this.element(),e,t,s)}once(e,t,s={}){(0,exports.once)(this.element(),e,t,s)}query(e){return this.element().querySelector(e)}queryAll(e){return this.element().querySelectorAll(e)}remove(){this.element().remove()}removeClass(...e){(0,exports.removeClass)(this.element(),...e)}toggleClass(...e){(0,exports.toggleClass)(this.element(),...e)}}exports.Element=o,e=new WeakMap,exports.default=o;", "export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}", "export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}", "import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}", "import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}", "import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}", "export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}", "export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}", "import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}", "import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}", "export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}", "import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}", "export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}", "export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}", "export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}", "import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}", "export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}", "import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}", "import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$6(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Logger);\n    this.init(concreteLogger, options);\n  }\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread$6(_objectSpread$6({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(options) {\n      options = options || this.options;\n      options.prefix = options.prefix || this.prefix;\n      return new Logger(this.logger, options);\n    }\n  }]);\n  return Logger;\n}();\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n    this.observers = {};\n  }\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath.obj,\n    k = _getLastOfPath.k;\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n    obj = _getLastOfPath2.obj,\n    k = _getLastOfPath2.k;\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n    obj = _getLastOfPath3.obj,\n    k = _getLastOfPath3.k;\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n  var _super = _createSuper$3(ResourceStore);\n  function ResourceStore(data) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    _classCallCheck(this, ResourceStore);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.data = data || {};\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n    return _this;\n  }\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$5(_objectSpread$5({}, pack), resources);\n      }\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$5(_objectSpread$5({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n  var _super = _createSuper$2(Translator);\n  function Translator(services) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Translator);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      if (key === undefined || key === null) {\n        return false;\n      }\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n        key = _this$extractFromKey.key,\n        namespaces = _this$extractFromKey.namespaces;\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          if (returnDetails) {\n            return {\n              res: \"\".concat(namespace).concat(nsSeparator).concat(key),\n              usedKey: key,\n              exactUsedKey: key,\n              usedLng: lng,\n              usedNS: namespace\n            };\n          }\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n        if (returnDetails) {\n          return {\n            res: key,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace\n          };\n        }\n        return key;\n      }\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$4(_objectSpread$4({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n          return r;\n        }\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$4(_objectSpread$4({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$4(_objectSpread$4({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$4(_objectSpread$4({}, options), {\n          interpolation: _objectSpread$4(_objectSpread$4({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$4(_objectSpread$4({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n        if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n            return null;\n          }\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$4({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n        var extracted = _this4.extractFromKey(k, options);\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n            var possibleKey;\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }]);\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n        return p.join('-');\n      }\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n        var cleanedLng = _this.formatLanguageCode(code);\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n          var lngOnly = _this.getLanguagePartFromCode(code);\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng === lngOnly) return supportedLng;\n            if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n      var addCode = function addCode(c) {\n        if (!c) return;\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, PluralResolver);\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n      if (!rule) {\n        return [];\n      }\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction deepFindWithDefaults(data, defaultData, key) {\n  var keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  var ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Interpolator);\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n    this.init(options);\n  }\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = deepFindWithDefaults(data, defaultData, key, _this.options.keySeparator, _this.options.ignoreJSONStructure);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(deepFindWithDefaults(data, defaultData, k, _this.options.keySeparator, _this.options.ignoreJSONStructure), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n          replaces++;\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n      var clonedOptions;\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        var matchedSingleQuotes = optionsString.match(/'/g);\n        var matchedDoubleQuotes = optionsString.match(/\"/g);\n        if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n          optionsString = optionsString.replace(/'/g, '\"');\n        }\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        clonedOptions = _objectSpread$3({}, options);\n        clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n        clonedOptions.applyPostProcessor = false;\n        delete clonedOptions.defaultValue;\n        var doReduce = false;\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n      return str;\n    }\n  }]);\n  return Interpolator;\n}();\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n        var _opt$split = opt.split(':'),\n          _opt$split2 = _toArray(_opt$split),\n          key = _opt$split2[0],\n          rest = _opt$split2.slice(1);\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  var cache = {};\n  return function invokeFormatter(val, lng, options) {\n    var key = lng + JSON.stringify(options);\n    var formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(lng, options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Formatter);\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      currency: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$2(_objectSpread$2({}, opt), {}, {\n          style: 'currency'\n        }));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      datetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.DateTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      relativetime: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.RelativeTimeFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val, opt.range || 'day');\n        };\n      }),\n      list: createCachedFormatter(function (lng, opt) {\n        var formatter = new Intl.ListFormat(lng, _objectSpread$2({}, opt));\n        return function (val) {\n          return formatter.format(val);\n        };\n      })\n    };\n    this.init(options);\n  }\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"addCached\",\n    value: function addCached(name, fc) {\n      this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng) {\n      var _this = this;\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var formats = _format.split(this.formatSeparator);\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n          formatName = _parseFormatStr.formatName,\n          formatOptions = _parseFormatStr.formatOptions;\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$2(_objectSpread$2(_objectSpread$2({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n  return Formatter;\n}();\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n  var _super = _createSuper$1(Connector);\n  function Connector(backend, store, services) {\n    var _this;\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    _classCallCheck(this, Connector);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n    return _this;\n  }\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (n) {\n                if (loaded[l][n] === undefined) loaded[l][n] = true;\n              });\n            }\n          });\n          q.done = true;\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n      this.readingCalls++;\n      var resolver = function resolver(err, data) {\n        _this3.readingCalls--;\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n        callback(err, data);\n      };\n      var fc = this.backend[fcName].bind(this.backend);\n      if (fc.length === 2) {\n        try {\n          var r = fc(lng, ns);\n          if (r && typeof r.then === 'function') {\n            r.then(function (data) {\n              return resolver(null, data);\n            })[\"catch\"](resolver);\n          } else {\n            resolver(null, r);\n          }\n        } catch (err) {\n          resolver(err);\n        }\n        return;\n      }\n      return fc(lng, ns, resolver);\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      var clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : function () {};\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n      if (key === undefined || key === null || key === '') return;\n      if (this.backend && this.backend.create) {\n        var opts = _objectSpread$1(_objectSpread$1({}, options), {}, {\n          isUpdate: isUpdate\n        });\n        var fc = this.backend.create.bind(this.backend);\n        if (fc.length < 6) {\n          try {\n            var r;\n            if (fc.length === 5) {\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n        } else {\n          fc(languages, namespace, key, fallbackValue, clb, opts);\n        }\n      }\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n  var _super = _createSuper(I18n);\n  function I18n() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, I18n);\n    _this = _super.call(this);\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n    return _this;\n  }\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n      var defOpts = get();\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, defOpts), this.options), transformOptions(options));\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread(_objectSpread({}, defOpts.interpolation), this.options.interpolation);\n      }\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n        var formatter;\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n        }\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n          return _this2;\n        };\n      });\n      var deferred = defer();\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n          _this2.emit('initialized', _this2.options);\n          deferred.resolve(t);\n          callback(err, t);\n        };\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n        var append = function append(lng) {\n          if (!lng) return;\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n        _this4.setResolvedLanguage(l);\n      };\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n          _this4.translator.changeLanguage(l);\n          _this4.isLanguageChangingTo = undefined;\n          _this4.emit('languageChanged', l);\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector && _this4.services.languageDetector.cacheUserLanguage) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        if (this.services.languageDetector.detect.length === 0) {\n          this.services.languageDetector.detect().then(setLng);\n        } else {\n          this.services.languageDetector.detect(setLng);\n        }\n      } else {\n        setLng(lng);\n      }\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n      var fixedT = function fixedT(key, opts) {\n        var options;\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey;\n        if (options.keyPrefix && Array.isArray(key)) {\n          resultKey = key.map(function (k) {\n            return \"\".concat(options.keyPrefix).concat(keySeparator).concat(k);\n          });\n        } else {\n          resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        }\n        return _this5.t(resultKey, options);\n      };\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n        return loadState === -1 || loadState === 2;\n      };\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n      var deferred = defer();\n      if (!this.options.ns) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      var languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n      return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var mergedOptions = _objectSpread(_objectSpread(_objectSpread({}, this.options), options), {\n        isClone: true\n      });\n      var clone = new I18n(mergedOptions);\n      if (options.debug !== undefined || options.prefix !== undefined) {\n        clone.logger = clone.logger.clone(options);\n      }\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n  return I18n;\n}(EventEmitter);\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar dir = instance.dir;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n", "\"use strict\";var t,e=this&&this.__classPrivateFieldGet||function(t,e,i,s){if(\"a\"===i&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof e?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?s:\"a\"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.EventEmitter=void 0;class i{constructor(){t.set(this,{})}on(i,s){i in e(this,t,\"f\")||(e(this,t,\"f\")[i]=[]),e(this,t,\"f\")[i].push(s)}once(t,e){const i=(...s)=>{e(...s),this.off(t,i)};this.on(t,i)}off(i,s){if(!(i in e(this,t,\"f\")))return;const r=e(this,t,\"f\")[i].indexOf(s);-1!==r&&e(this,t,\"f\")[i].splice(r,1)}emit(i,...s){i in e(this,t,\"f\")&&e(this,t,\"f\")[i].forEach((t=>t(...s)))}}exports.EventEmitter=i,t=new WeakMap,exports.default=i;", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en-GB',\n  'city',\n  {\n    'Improvement.RecyclingCenter.name': 'Recycling Centre',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'city',\n  {\n    'Improvement.Aqueduct.name': 'Aqueduct',\n    'Improvement.Bank.name': 'Bank',\n    'Improvement.Barracks.name': 'Barracks',\n    'Improvement.Cathedral.name': 'Cathedral',\n    'Improvement.CityWalls.name': 'City Walls',\n    'Improvement.Colosseum.name': 'Colosseum',\n    'Improvement.Courthouse.name': 'Courthouse',\n    'Improvement.Factory.name': 'Factory',\n    'Improvement.Granary.name': 'Granary',\n    'Improvement.HydroPlant.name': 'Hydro Plant',\n    'Improvement.Library.name': 'Library',\n    'Improvement.ManufacturingPlant.name': 'Manufacturing Plant',\n    'Improvement.Marketplace.name': 'Marketplace',\n    'Improvement.MassTransit.name': 'Mass Transit',\n    'Improvement.NuclearPlant.name': 'Nuclear Plant',\n    'Improvement.Palace.name': 'Palace',\n    'Improvement.PowerPlant.name': 'Power Plant',\n    'Improvement.RecyclingCenter.name': 'Recycling Center',\n    'Improvement.SdiDefence.name': 'SDI Defence',\n    'Improvement.Temple.name': 'Temple',\n    'Improvement.University.name': 'University',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'city',\n  {\n    'None': 'None',\n\n    // American\n    'American.Washington.name': 'Washington',\n    'American.New York.name': 'New York',\n    'American.Los Angeles.name': 'Los Angeles',\n    'American.Chicago.name': 'Chicago',\n    'American.Houston.name': 'Houston',\n    'American.Phoenix.name': 'Phoenix',\n    'American.Philadelphia.name': 'Philadelphia',\n    'American.San Antonio.name': 'San Antonio',\n    'American.San Diego.name': 'San Diego',\n    'American.Dallas.name': 'Dallas',\n    'American.San Jose.name': 'San Jose',\n    'American.Austin.name': 'Austin',\n    'American.Jacksonville.name': 'Jacksonville',\n    'American.Fort Worth.name': 'Fort Worth',\n    'American.Columbus.name': 'Columbus',\n    'American.San Francisco.name': 'San Francisco',\n    'American.Charlotte.name': 'Charlotte',\n    'American.Indianapolis.name': 'Indianapolis',\n    'American.Seattle.name': 'Seattle',\n    'American.Denver.name': 'Denver',\n    'American.Boston.name': 'Boston',\n    'American.El Paso.name': 'El Paso',\n    'American.Detroit.name': 'Detroit',\n    'American.Nashville.name': 'Nashville',\n    'American.Portland.name': 'Portland',\n    'American.Memphis.name': 'Memphis',\n    'American.Oklahoma City.name': 'Oklahoma City',\n    'American.Las Vegas.name': 'Las Vegas',\n    'American.Louisville.name': 'Louisville',\n    'American.Baltimore.name': 'Baltimore',\n    'American.Milwaukee.name': 'Milwaukee',\n    'American.Albuquerque.name': 'Albuquerque',\n    'American.Tucson.name': 'Tucson',\n    'American.Fresno.name': 'Fresno',\n    'American.Mesa.name': 'Mesa',\n    'American.Sacramento.name': 'Sacramento',\n    'American.Atlanta.name': 'Atlanta',\n    'American.Kansas City.name': 'Kansas City',\n    'American.Colorado Springs.name': 'Colorado Springs',\n    'American.Miami.name': 'Miami',\n    'American.Raleigh.name': 'Raleigh',\n    'American.Omaha.name': 'Omaha',\n    'American.Long Beach.name': 'Long Beach',\n    'American.Virginia Beach.name': 'Virginia Beach',\n    'American.Oakland.name': 'Oakland',\n    'American.Minneapolis.name': 'Minneapolis',\n    'American.Tulsa.name': 'Tulsa',\n    'American.Arlington.name': 'Arlington',\n    'American.Tampa.name': 'Tampa',\n    'American.New Orleans.name': 'New Orleans',\n    'American.Wichita.name': 'Wichita',\n    'American.Cleveland.name': 'Cleveland',\n    'American.Bakersfield.name': 'Bakersfield',\n    'American.Aurora.name': 'Aurora',\n    'American.Anaheim.name': 'Anaheim',\n    'American.Honolulu.name': 'Honolulu',\n    'American.Santa Ana.name': 'Santa Ana',\n    'American.Riverside.name': 'Riverside',\n    'American.Corpus Christi.name': 'Corpus Christi',\n    'American.Lexington.name': 'Lexington',\n    'American.Stockton.name': 'Stockton',\n    'American.Henderson.name': 'Henderson',\n    'American.Saint Paul.name': 'Saint Paul',\n    'American.St. Louis.name': 'St. Louis',\n    'American.Cincinnati.name': 'Cincinnati',\n    'American.Pittsburgh.name': 'Pittsburgh',\n    'American.Greensboro.name': 'Greensboro',\n    'American.Anchorage.name': 'Anchorage',\n    'American.Plano.name': 'Plano',\n    'American.Lincoln.name': 'Lincoln',\n    'American.Orlando.name': 'Orlando',\n    'American.Irvine.name': 'Irvine',\n    'American.Newark.name': 'Newark',\n    'American.Toledo.name': 'Toledo',\n    'American.Durham.name': 'Durham',\n    'American.Chula Vista.name': 'Chula Vista',\n    'American.Fort Wayne.name': 'Fort Wayne',\n    'American.Jersey City.name': 'Jersey City',\n    'American.St. Petersburg.name': 'St. Petersburg',\n    'American.Laredo.name': 'Laredo',\n    'American.Madison.name': 'Madison',\n    'American.Chandler.name': 'Chandler',\n    'American.Buffalo.name': 'Buffalo',\n    'American.Lubbock.name': 'Lubbock',\n    'American.Scottsdale.name': 'Scottsdale',\n    'American.Reno.name': 'Reno',\n    'American.Glendale.name': 'Glendale',\n    'American.Gilbert.name': 'Gilbert',\n    'American.Winston-Salem.name': 'Winston-Salem',\n    'American.North Las Vegas.name': 'North Las Vegas',\n    'American.Norfolk.name': 'Norfolk',\n    'American.Chesapeake.name': 'Chesapeake',\n    'American.Garland.name': 'Garland',\n    'American.Irving.name': 'Irving',\n    'American.Hialeah.name': 'Hialeah',\n    'American.Fremont.name': 'Fremont',\n    'American.Boise.name': 'Boise',\n    'American.Richmond.name': 'Richmond',\n    'American.Baton Rouge.name': 'Baton Rouge',\n    'American.Spokane.name': 'Spokane',\n    'American.Des Moines.name': 'Des Moines',\n    'American.Tacoma.name': 'Tacoma',\n    'American.San Bernardino.name': 'San Bernardino',\n    'American.Modesto.name': 'Modesto',\n    'American.Fontana.name': 'Fontana',\n    'American.Santa Clarita.name': 'Santa Clarita',\n    'American.Birmingham.name': 'Birmingham',\n    'American.Oxnard.name': 'Oxnard',\n    'American.Fayetteville.name': 'Fayetteville',\n    'American.Moreno Valley.name': 'Moreno Valley',\n    'American.Rochester.name': 'Rochester',\n    'American.Huntington Beach.name': 'Huntington Beach',\n    'American.Salt Lake City.name': 'Salt Lake City',\n    'American.Grand Rapids.name': 'Grand Rapids',\n    'American.Amarillo.name': 'Amarillo',\n    'American.Yonkers.name': 'Yonkers',\n    'American.Montgomery.name': 'Montgomery',\n    'American.Akron.name': 'Akron',\n    'American.Little Rock.name': 'Little Rock',\n    'American.Huntsville.name': 'Huntsville',\n    'American.Augusta.name': 'Augusta',\n    'American.Port St. Lucie.name': 'Port St. Lucie',\n    'American.Grand Prairie.name': 'Grand Prairie',\n    'American.Tallahassee.name': 'Tallahassee',\n    'American.Overland Park.name': 'Overland Park',\n    'American.Tempe.name': 'Tempe',\n    'American.McKinney.name': 'McKinney',\n    'American.Mobile.name': 'Mobile',\n    'American.Cape Coral.name': 'Cape Coral',\n    'American.Shreveport.name': 'Shreveport',\n    'American.Frisco.name': 'Frisco',\n    'American.Knoxville.name': 'Knoxville',\n    'American.Worcester.name': 'Worcester',\n    'American.Brownsville.name': 'Brownsville',\n    'American.Vancouver.name': 'Vancouver',\n    'American.Fort Lauderdale.name': 'Fort Lauderdale',\n    'American.Sioux Falls.name': 'Sioux Falls',\n    'American.Ontario.name': 'Ontario',\n    'American.Chattanooga.name': 'Chattanooga',\n    'American.Providence.name': 'Providence',\n    'American.Newport News.name': 'Newport News',\n    'American.Rancho Cucamonga.name': 'Rancho Cucamonga',\n    'American.Santa Rosa.name': 'Santa Rosa',\n    'American.Oceanside.name': 'Oceanside',\n    'American.Salem.name': 'Salem',\n    'American.Elk Grove.name': 'Elk Grove',\n    'American.Garden Grove.name': 'Garden Grove',\n    'American.Pembroke Pines.name': 'Pembroke Pines',\n    'American.Peoria.name': 'Peoria',\n    'American.Eugene.name': 'Eugene',\n    'American.Corona.name': 'Corona',\n    'American.Cary.name': 'Cary',\n    'American.Springfield.name': 'Springfield',\n    'American.Fort Collins.name': 'Fort Collins',\n    'American.Jackson.name': 'Jackson',\n    'American.Alexandria.name': 'Alexandria',\n    'American.Hayward.name': 'Hayward',\n    'American.Lancaster.name': 'Lancaster',\n    'American.Lakewood.name': 'Lakewood',\n    'American.Clarksville.name': 'Clarksville',\n    'American.Palmdale.name': 'Palmdale',\n    'American.Salinas.name': 'Salinas',\n    'American.Hollywood.name': 'Hollywood',\n    'American.Pasadena.name': 'Pasadena',\n    'American.Sunnyvale.name': 'Sunnyvale',\n    'American.Macon.name': 'Macon',\n    'American.Pomona.name': 'Pomona',\n    'American.Escondido.name': 'Escondido',\n    'American.Killeen.name': 'Killeen',\n    'American.Naperville.name': 'Naperville',\n    'American.Joliet.name': 'Joliet',\n    'American.Bellevue.name': 'Bellevue',\n    'American.Rockford.name': 'Rockford',\n    'American.Savannah.name': 'Savannah',\n    'American.Paterson.name': 'Paterson',\n    'American.Torrance.name': 'Torrance',\n    'American.Bridgeport.name': 'Bridgeport',\n    'American.McAllen.name': 'McAllen',\n    'American.Mesquite.name': 'Mesquite',\n    'American.Syracuse.name': 'Syracuse',\n    'American.Midland.name': 'Midland',\n    'American.Murfreesboro.name': 'Murfreesboro',\n    'American.Miramar.name': 'Miramar',\n    'American.Dayton.name': 'Dayton',\n    'American.Fullerton.name': 'Fullerton',\n    'American.Olathe.name': 'Olathe',\n    'American.Orange.name': 'Orange',\n    'American.Thornton.name': 'Thornton',\n    'American.Roseville.name': 'Roseville',\n    'American.Denton.name': 'Denton',\n    'American.Waco.name': 'Waco',\n    'American.Surprise.name': 'Surprise',\n    'American.Carrollton.name': 'Carrollton',\n    'American.West Valley City.name': 'West Valley City',\n    'American.Charleston.name': 'Charleston',\n    'American.Warren.name': 'Warren',\n    'American.Hampton.name': 'Hampton',\n    'American.Gainesville.name': 'Gainesville',\n    'American.Visalia.name': 'Visalia',\n    'American.Coral Springs.name': 'Coral Springs',\n    'American.Columbia.name': 'Columbia',\n    'American.Cedar Rapids.name': 'Cedar Rapids',\n    'American.Sterling Heights.name': 'Sterling Heights',\n    'American.New Haven.name': 'New Haven',\n    'American.Stamford.name': 'Stamford',\n    'American.Concord.name': 'Concord',\n    'American.Kent.name': 'Kent',\n    'American.Santa Clara.name': 'Santa Clara',\n    'American.Elizabeth.name': 'Elizabeth',\n    'American.Round Rock.name': 'Round Rock',\n    'American.Thousand Oaks.name': 'Thousand Oaks',\n    'American.Lafayette.name': 'Lafayette',\n    'American.Athens.name': 'Athens',\n    'American.Topeka.name': 'Topeka',\n    'American.Simi Valley.name': 'Simi Valley',\n    'American.Fargo.name': 'Fargo',\n    'American.Norman.name': 'Norman',\n    'American.Abilene.name': 'Abilene',\n    'American.Wilmington.name': 'Wilmington',\n    'American.Hartford.name': 'Hartford',\n    'American.Victorville.name': 'Victorville',\n    'American.Pearland.name': 'Pearland',\n    'American.Vallejo.name': 'Vallejo',\n    'American.Ann Arbor.name': 'Ann Arbor',\n    'American.Berkeley.name': 'Berkeley',\n    'American.Allentown.name': 'Allentown',\n    'American.Richardson.name': 'Richardson',\n    'American.Odessa.name': 'Odessa',\n    'American.Arvada.name': 'Arvada',\n    'American.Cambridge.name': 'Cambridge',\n    'American.Sugar Land.name': 'Sugar Land',\n    'American.Beaumont.name': 'Beaumont',\n    'American.Lansing.name': 'Lansing',\n    'American.Evansville.name': 'Evansville',\n    'American.Independence.name': 'Independence',\n    'American.Fairfield.name': 'Fairfield',\n    'American.Provo.name': 'Provo',\n    'American.Clearwater.name': 'Clearwater',\n    'American.College Station.name': 'College Station',\n    'American.West Jordan.name': 'West Jordan',\n    'American.Carlsbad.name': 'Carlsbad',\n    'American.El Monte.name': 'El Monte',\n    'American.Murrieta.name': 'Murrieta',\n    'American.Temecula.name': 'Temecula',\n    'American.Palm Bay.name': 'Palm Bay',\n    'American.Costa Mesa.name': 'Costa Mesa',\n    'American.Westminster.name': 'Westminster',\n    'American.North Charleston.name': 'North Charleston',\n    'American.Miami Gardens.name': 'Miami Gardens',\n    'American.Manchester.name': 'Manchester',\n    'American.High Point.name': 'High Point',\n    'American.Downey.name': 'Downey',\n    'American.Clovis.name': 'Clovis',\n    'American.Pompano Beach.name': 'Pompano Beach',\n    'American.Pueblo.name': 'Pueblo',\n    'American.Elgin.name': 'Elgin',\n    'American.Lowell.name': 'Lowell',\n    'American.Antioch.name': 'Antioch',\n    'American.West Palm Beach.name': 'West Palm Beach',\n    'American.Everett.name': 'Everett',\n    'American.Ventura.name': 'Ventura',\n    'American.Centennial.name': 'Centennial',\n    'American.Lakeland.name': 'Lakeland',\n    'American.Gresham.name': 'Gresham',\n    'American.Billings.name': 'Billings',\n    'American.Inglewood.name': 'Inglewood',\n    'American.Broken Arrow.name': 'Broken Arrow',\n    'American.Sandy Springs.name': 'Sandy Springs',\n    'American.Jurupa Valley.name': 'Jurupa Valley',\n    'American.Hillsboro.name': 'Hillsboro',\n    'American.Waterbury.name': 'Waterbury',\n    'American.Santa Maria.name': 'Santa Maria',\n    'American.Boulder.name': 'Boulder',\n    'American.Greeley.name': 'Greeley',\n    'American.Daly City.name': 'Daly City',\n    'American.Meridian.name': 'Meridian',\n    'American.Lewisville.name': 'Lewisville',\n    'American.Davie.name': 'Davie',\n    'American.West Covina.name': 'West Covina',\n    'American.League City.name': 'League City',\n    'American.Tyler.name': 'Tyler',\n    'American.Norwalk.name': 'Norwalk',\n    'American.San Mateo.name': 'San Mateo',\n    'American.Green Bay.name': 'Green Bay',\n    'American.Wichita Falls.name': 'Wichita Falls',\n    'American.Sparks.name': 'Sparks',\n    'American.Burbank.name': 'Burbank',\n    'American.Rialto.name': 'Rialto',\n    'American.Allen.name': 'Allen',\n    'American.El Cajon.name': 'El Cajon',\n    'American.Las Cruces.name': 'Las Cruces',\n    'American.Renton.name': 'Renton',\n    'American.Davenport.name': 'Davenport',\n    'American.South Bend.name': 'South Bend',\n    'American.Vista.name': 'Vista',\n    'American.Tuscaloosa.name': 'Tuscaloosa',\n    'American.Clinton.name': 'Clinton',\n    'American.Edison.name': 'Edison',\n    'American.Woodbridge.name': 'Woodbridge',\n    'American.San Angelo.name': 'San Angelo',\n    'American.Kenosha.name': 'Kenosha',\n    'American.Vacaville.name': 'Vacaville',\n\n      // Aztec\n      'Aztec.Tenochtitlan.name': 'Tenochtitlan',\n      'Aztec.Teotihuacan.name': 'Teotihuacan',\n      'Aztec.Tlatelolco.name': 'Tlatelolco',\n      'Aztec.Texcoco.name': 'Texcoco',\n      'Aztec.Tlaxcala.name': 'Tlaxcala',\n      'Aztec.Calixtlahuaca.name': 'Calixtlahuaca',\n      'Aztec.Xochicalco.name': 'Xochicalco',\n      'Aztec.Tlacopan.name': 'Tlacopan',\n      'Aztec.Atzcapotzalco.name': 'Atzcapotzalco',\n      'Aztec.Tzintzuntzan.name': 'Tzintzuntzan',\n      'Aztec.Malinalco.name': 'Malinalco',\n      'Aztec.Tula.name': 'Tula',\n      'Aztec.Tamuin.name': 'Tamuin',\n      'Aztec.Teayo.name': 'Teayo',\n      'Aztec.Cempoala.name': 'Cempoala',\n      'Aztec.Chalco.name': 'Chalco',\n      'Aztec.Tlalmanalco.name': 'Tlalmanalco',\n      'Aztec.Ixtapaluca.name': 'Ixtapaluca',\n      'Aztec.Huexotla.name': 'Huexotla',\n      'Aztec.Tepexpan.name': 'Tepexpan',\n      'Aztec.Tepetlaoxtoc.name': 'Tepetlaoxtoc',\n      'Aztec.Chiconautla.name': 'Chiconautla',\n      'Aztec.Zitlaltepec.name': 'Zitlaltepec',\n      'Aztec.Coyotepec.name': 'Coyotepec',\n      'Aztec.Tequixquiac.name': 'Tequixquiac',\n      'Aztec.Jilotzingo.name': 'Jilotzingo',\n      'Aztec.Tlapanaloya.name': 'Tlapanaloya',\n      'Aztec.Tultitan.name': 'Tultitan',\n      'Aztec.Ecatepec.name': 'Ecatepec',\n      'Aztec.Coatepec.name': 'Coatepec',\n      'Aztec.Chalchiuites.name': 'Chalchiuites',\n      'Aztec.Chiauhita.name': 'Chiauhita',\n      'Aztec.Chapultepec.name': 'Chapultepec',\n      'Aztec.Itzapalapa.name': 'Itzapalapa',\n      'Aztec.Ayotzinco.name': 'Ayotzinco',\n      'Aztec.Iztapam.name': 'Iztapam',\n\n      // Babylonian\n      'Babylonian.Babilim.name': 'Babilim',\n      'Babylonian.Eshnunna.name': 'Eshnunna',\n      'Babylonian.Diniktum.name': 'Diniktum',\n      'Babylonian.Tutub.name': 'Tutub',\n      'Babylonian.Der.name': 'Der',\n      'Babylonian.Sippar.name': 'Sippar',\n      'Babylonian.Kutha.name': 'Kutha',\n      'Babylonian.Jemdet Nasr.name': 'Jemdet Nasr',\n      'Babylonian.Kish.name': 'Kish',\n      'Babylonian.Borsippa.name': 'Borsippa',\n      'Babylonian.Mashkan-shapir.name': 'Mashkan-shapir',\n      'Babylonian.Dilbat.name': 'Dilbat',\n      'Babylonian.Nippur.name': 'Nippur',\n      'Babylonian.Marad.name': 'Marad',\n      'Babylonian.Adab.name': 'Adab',\n      'Babylonian.Isin.name': 'Isin',\n      'Babylonian.Kisurra.name': 'Kisurra',\n      'Babylonian.Shuruppak.name': 'Shuruppak',\n      'Babylonian.Bad-tibira.name': 'Bad-tibira',\n      'Babylonian.Zabalam.name': 'Zabalam',\n      'Babylonian.Umma.name': 'Umma',\n      'Babylonian.Girsu.name': 'Girsu',\n      'Babylonian.Lagash.name': 'Lagash',\n      'Babylonian.Urum.name': 'Urum',\n      'Babylonian.Uruk.name': 'Uruk',\n      'Babylonian.Larsa.name': 'Larsa',\n      'Babylonian.Ur.name': 'Ur',\n      'Babylonian.Kuara.name': 'Kuara',\n      'Babylonian.Eridu.name': 'Eridu',\n      'Babylonian.Akshak.name': 'Akshak',\n      'Babylonian.Akkad.name': 'Akkad',\n\n      // Chinese\n      'Chinese.Beijing.name': 'Beijing',\n      'Chinese.Shanghai.name': 'Shanghai',\n      'Chinese.Chongqing.name': 'Chongqing',\n      'Chinese.Tianjin.name': 'Tianjin',\n      'Chinese.Guangzhou.name': 'Guangzhou',\n      'Chinese.Shenzhen.name': 'Shenzhen',\n      'Chinese.Chengdu.name': 'Chengdu',\n      'Chinese.Nanjing.name': 'Nanjing',\n      'Chinese.Wuhan.name': 'Wuhan',\n      \"Chinese.Xi'an.name\": \"Xi'an\",\n      'Chinese.Hangzhou.name': 'Hangzhou',\n      'Chinese.Dongguan.name': 'Dongguan',\n      'Chinese.Foshan.name': 'Foshan',\n      'Chinese.Shenyang.name': 'Shenyang',\n      'Chinese.Harbin.name': 'Harbin',\n      'Chinese.Qingdao.name': 'Qingdao',\n      'Chinese.Dalian.name': 'Dalian',\n      'Chinese.Jinan.name': 'Jinan',\n      'Chinese.Zhengzhou.name': 'Zhengzhou',\n      'Chinese.Changsha.name': 'Changsha',\n      'Chinese.Kunming.name': 'Kunming',\n      'Chinese.Changchun.name': 'Changchun',\n      'Chinese.\u00DCr\u00FCmqi.name': '\u00DCr\u00FCmqi',\n      'Chinese.Shantou.name': 'Shantou',\n      'Chinese.Hefei.name': 'Hefei',\n      'Chinese.Shijiazhuang.name': 'Shijiazhuang',\n      'Chinese.Ningbo.name': 'Ningbo',\n      'Chinese.Taiyuan.name': 'Taiyuan',\n      'Chinese.Nanning.name': 'Nanning',\n      'Chinese.Xiamen.name': 'Xiamen',\n      'Chinese.Fuzhou.name': 'Fuzhou',\n      'Chinese.Changzhou.name': 'Changzhou',\n      'Chinese.Wenzhou.name': 'Wenzhou',\n      'Chinese.Nanchang.name': 'Nanchang',\n      'Chinese.Tangshan.name': 'Tangshan',\n      'Chinese.Guiyang.name': 'Guiyang',\n      'Chinese.Wuxi.name': 'Wuxi',\n      'Chinese.Lanzhou.name': 'Lanzhou',\n      'Chinese.Zhongshan.name': 'Zhongshan',\n      'Chinese.Handan.name': 'Handan',\n      \"Chinese.Huai'an.name\": \"Huai'an\",\n      'Chinese.Weifang.name': 'Weifang',\n      'Chinese.Zibo.name': 'Zibo',\n      'Chinese.Shaoxing.name': 'Shaoxing',\n      'Chinese.Yantai.name': 'Yantai',\n      'Chinese.Huizhou.name': 'Huizhou',\n      'Chinese.Luoyang.name': 'Luoyang',\n      'Chinese.Nantong.name': 'Nantong',\n      'Chinese.Baotou.name': 'Baotou',\n      'Chinese.Liuzhou.name': 'Liuzhou',\n\n    // Egyptian\n    'Egyptian.Cairo.name': 'Cairo',\n    'Egyptian.Alexandria.name': 'Alexandria', // Already exists in American list\n    'Egyptian.Gizeh.name': 'Gizeh',\n    'Egyptian.Shubra El-Kheima.name': 'Shubra El-Kheima',\n    'Egyptian.Port Said.name': 'Port Said',\n    'Egyptian.Suez.name': 'Suez',\n    'Egyptian.Luxor.name': 'Luxor',\n    'Egyptian.al-Mansura.name': 'al-Mansura',\n    'Egyptian.El-Mahalla El-Kubra.name': 'El-Mahalla El-Kubra',\n    'Egyptian.Tanta.name': 'Tanta',\n    'Egyptian.Asyut.name': 'Asyut',\n    'Egyptian.Ismailia.name': 'Ismailia',\n    'Egyptian.Fayyum.name': 'Fayyum',\n    'Egyptian.Zagazig.name': 'Zagazig',\n    'Egyptian.Aswan.name': 'Aswan',\n    'Egyptian.Damietta.name': 'Damietta',\n    'Egyptian.Damanhur.name': 'Damanhur',\n    'Egyptian.al-Minya.name': 'al-Minya',\n    'Egyptian.Beni Suef.name': 'Beni Suef',\n    'Egyptian.Qena.name': 'Qena',\n    'Egyptian.Sohag.name': 'Sohag',\n    'Egyptian.Hurghada.name': 'Hurghada',\n    'Egyptian.6th of October City.name': '6th of October City',\n    'Egyptian.Shibin El Kom.name': 'Shibin El Kom',\n    'Egyptian.Banha.name': 'Banha',\n    'Egyptian.Kafr el-Sheikh.name': 'Kafr el-Sheikh',\n    'Egyptian.Arish.name': 'Arish',\n    'Egyptian.Mallawi.name': 'Mallawi',\n    'Egyptian.10th of Ramadan City.name': '10th of Ramadan City',\n    'Egyptian.Bilbais.name': 'Bilbais',\n    'Egyptian.Marsa Matruh.name': 'Marsa Matruh',\n    'Egyptian.Idfu.name': 'Idfu',\n    'Egyptian.Mit Ghamr.name': 'Mit Ghamr',\n    'Egyptian.Al-Hamidiyya.name': 'Al-Hamidiyya',\n    'Egyptian.Desouk.name': 'Desouk',\n    'Egyptian.Qalyub.name': 'Qalyub',\n    'Egyptian.Abu Kabir.name': 'Abu Kabir',\n    'Egyptian.Kafr el-Dawwar.name': 'Kafr el-Dawwar',\n    'Egyptian.Girga.name': 'Girga',\n    'Egyptian.Akhmim.name': 'Akhmim',\n    'Egyptian.Matarey.name': 'Matarey',\n\n    // English\n    'English.London.name': 'London',\n    'English.Birmingham.name': 'Birmingham',\n    'English.Liverpool.name': 'Liverpool',\n    'English.Leeds.name': 'Leeds',\n    'English.Sheffield.name': 'Sheffield',\n    'English.Bristol.name': 'Bristol',\n    'English.Manchester.name': 'Manchester',\n    'English.Leicester.name': 'Leicester',\n    'English.Coventry.name': 'Coventry',\n    'English.Kingston upon Hull.name': 'Kingston upon Hull',\n    'English.Stoke-on-Trent.name': 'Stoke-on-Trent',\n    'English.Wolverhampton.name': 'Wolverhampton',\n    'English.Nottingham.name': 'Nottingham',\n    'English.Plymouth.name': 'Plymouth',\n    'English.Southampton.name': 'Southampton',\n    'English.Reading.name': 'Reading',\n    'English.Derby.name': 'Derby',\n    'English.Dudley.name': 'Dudley',\n    'English.Newcastle upon Tyne.name': 'Newcastle upon Tyne',\n    'English.Northampton.name': 'Northampton',\n    'English.Portsmouth.name': 'Portsmouth',\n    'English.Luton.name': 'Luton',\n    'English.Preston.name': 'Preston',\n    'English.Sunderland.name': 'Sunderland',\n    'English.Norwich.name': 'Norwich',\n    'English.Walsall.name': 'Walsall',\n    'English.Bournemouth.name': 'Bournemouth',\n    'English.Southend-on-Sea.name': 'Southend-on-Sea',\n    'English.Swindon.name': 'Swindon',\n    'English.Huddersfield.name': 'Huddersfield',\n    'English.Poole.name': 'Poole',\n    'English.Oxford.name': 'Oxford',\n    'English.Middlesbrough.name': 'Middlesbrough',\n    'English.Blackpool.name': 'Blackpool',\n    'English.Oldbury.name': 'Oldbury',\n    'English.Boldon.name': 'Boldon',\n    'English.Ipswich.name': 'Ipswich',\n    'English.York.name': 'York',\n    'English.West Bromwich.name': 'West Bromwich',\n    'English.Peterborough.name': 'Peterborough',\n    'English.Stockport.name': 'Stockport',\n    'English.Brighton.name': 'Brighton',\n    'English.Slough.name': 'Slough',\n    'English.Gloucester.name': 'Gloucester',\n    'English.Rotherham.name': 'Rotherham',\n    'English.Cambridge.name': 'Cambridge',\n    'English.Exeter.name': 'Exeter',\n    'English.Eastbourne.name': 'Eastbourne',\n    'English.Sutton Coldfield.name': 'Sutton Coldfield',\n    'English.Blackburn.name': 'Blackburn',\n    'English.Colchester.name': 'Colchester',\n    'English.Oldham.name': 'Oldham',\n    'English.St Helens.name': 'St Helens',\n    'English.Woking.name': 'Woking',\n    'English.Chesterfield.name': 'Chesterfield',\n    'English.Crawley.name': 'Crawley',\n\n    // French\n    'French.Paris.name': 'Paris',\n    'French.Marseille.name': 'Marseille',\n    'French.Lyon.name': 'Lyon',\n    'French.Toulouse.name': 'Toulouse',\n    'French.Nice.name': 'Nice',\n    'French.Nantes.name': 'Nantes',\n    'French.Strasbourg.name': 'Strasbourg',\n    'French.Montpellier.name': 'Montpellier',\n    'French.Bordeaux.name': 'Bordeaux',\n    'French.Lille.name': 'Lille',\n    'French.Rennes.name': 'Rennes',\n    'French.Reims.name': 'Reims',\n    'French.Le Havre.name': 'Le Havre',\n    'French.Saint-\u00C9tienne.name': 'Saint-\u00C9tienne',\n    'French.Toulon.name': 'Toulon',\n    'French.Grenoble.name': 'Grenoble',\n    'French.Dijon.name': 'Dijon',\n    'French.N\u00EEmes.name': 'N\u00EEmes',\n    'French.Angers.name': 'Angers',\n    'French.Villeurbanne.name': 'Villeurbanne',\n    'French.Le Mans.name': 'Le Mans',\n    'French.Saint-Denis.name': 'Saint-Denis',\n    'French.Aix-en-Provence.name': 'Aix-en-Provence',\n    'French.Clermont-Ferrand.name': 'Clermont-Ferrand',\n    'French.Brest.name': 'Brest',\n    'French.Limoges.name': 'Limoges',\n    'French.Tours.name': 'Tours',\n    'French.Amiens.name': 'Amiens',\n    'French.Perpignan.name': 'Perpignan',\n    'French.Metz.name': 'Metz',\n    'French.Besan\u00E7on.name': 'Besan\u00E7on',\n    'French.Boulogne-Billancourt.name': 'Boulogne-Billancourt',\n    'French.Orl\u00E9ans.name': 'Orl\u00E9ans',\n    'French.Mulhouse.name': 'Mulhouse',\n    'French.Rouen.name': 'Rouen',\n    'French.Caen.name': 'Caen',\n    'French.Argenteuil.name': 'Argenteuil',\n    'French.Saint-Paul.name': 'Saint-Paul',\n    'French.Montreuil.name': 'Montreuil',\n    'French.Nancy.name': 'Nancy',\n    'French.Roubaix.name': 'Roubaix',\n    'French.Tourcoing.name': 'Tourcoing',\n    'French.Nanterre.name': 'Nanterre',\n    'French.Avignon.name': 'Avignon',\n    'French.Vitry-sur-Seine.name': 'Vitry-sur-Seine',\n    'French.Cr\u00E9teil.name': 'Cr\u00E9teil',\n    'French.Dunkirk.name': 'Dunkirk',\n    'French.Poitiers.name': 'Poitiers',\n    'French.Asni\u00E8res-sur-Seine.name': 'Asni\u00E8res-sur-Seine',\n    'French.Courbevoie.name': 'Courbevoie',\n    'French.Versailles.name': 'Versailles',\n    'French.Colombes.name': 'Colombes',\n    'French.Fort-de-France.name': 'Fort-de-France',\n    'French.Aulnay-sous-Bois.name': 'Aulnay-sous-Bois',\n    'French.Saint-Pierre.name': 'Saint-Pierre',\n    'French.Rueil-Malmaison.name': 'Rueil-Malmaison',\n    'French.Pau.name': 'Pau',\n    'French.Aubervilliers.name': 'Aubervilliers',\n    'French.Le Tampon.name': 'Le Tampon',\n    'French.Champigny-sur-Marne.name': 'Champigny-sur-Marne',\n    'French.Antibes.name': 'Antibes',\n    'French.B\u00E9ziers.name': 'B\u00E9ziers',\n    'French.La Rochelle.name': 'La Rochelle',\n    'French.Saint-Maur-des-Foss\u00E9s.name': 'Saint-Maur-des-Foss\u00E9s',\n    'French.Cannes.name': 'Cannes',\n    'French.Calais.name': 'Calais',\n    'French.Saint-Nazaire.name': 'Saint-Nazaire',\n    'French.M\u00E9rignac.name': 'M\u00E9rignac',\n    'French.Drancy.name': 'Drancy',\n    'French.Colmar.name': 'Colmar',\n    'French.Ajaccio.name': 'Ajaccio',\n    'French.Bourges.name': 'Bourges',\n    'French.Issy-les-Moulineaux.name': 'Issy-les-Moulineaux',\n    'French.Levallois-Perret.name': 'Levallois-Perret',\n    'French.La Seyne-sur-Mer.name': 'La Seyne-sur-Mer',\n    'French.Quimper.name': 'Quimper',\n    'French.Noisy-le-Grand.name': 'Noisy-le-Grand',\n    \"French.Villeneuve-d'Ascq.name\": \"Villeneuve-d'Ascq\",\n    'French.Neuilly-sur-Seine.name': 'Neuilly-sur-Seine',\n    'French.Valence.name': 'Valence',\n    'French.Antony.name': 'Antony',\n    'French.Cergy.name': 'Cergy',\n    'French.V\u00E9nissieux.name': 'V\u00E9nissieux',\n    'French.Pessac.name': 'Pessac',\n    'French.Troyes.name': 'Troyes',\n    'French.Clichy.name': 'Clichy',\n    'French.Ivry-sur-Seine.name': 'Ivry-sur-Seine',\n    'French.Chamb\u00E9ry.name': 'Chamb\u00E9ry',\n    'French.Lorient.name': 'Lorient',\n    'French.Les Abymes.name': 'Les Abymes',\n    'French.Montauban.name': 'Montauban',\n    'French.Sarcelles.name': 'Sarcelles',\n    'French.Niort.name': 'Niort',\n    'French.Villejuif.name': 'Villejuif',\n    'French.Saint-Andr\u00E9.name': 'Saint-Andr\u00E9',\n    'French.Hy\u00E8res.name': 'Hy\u00E8res',\n    'French.Saint-Quentin.name': 'Saint-Quentin',\n    'French.Beauvais.name': 'Beauvais',\n    'French.\u00C9pinay-sur-Seine.name': '\u00C9pinay-sur-Seine',\n    'French.Cayenne.name': 'Cayenne',\n    'French.Maisons-Alfort.name': 'Maisons-Alfort',\n    'French.Cholet.name': 'Cholet',\n    'French.Meaux.name': 'Meaux',\n    'French.Chelles.name': 'Chelles',\n    'French.Pantin.name': 'Pantin',\n    'French.\u00C9vry.name': '\u00C9vry',\n    'French.Fontenay-sous-Bois.name': 'Fontenay-sous-Bois',\n    'French.Fr\u00E9jus.name': 'Fr\u00E9jus',\n    'French.Vannes.name': 'Vannes',\n    'French.Bondy.name': 'Bondy',\n    'French.Le Blanc-Mesnil.name': 'Le Blanc-Mesnil',\n    'French.La Roche-sur-Yon.name': 'La Roche-sur-Yon',\n    'French.Saint-Louis.name': 'Saint-Louis',\n    'French.Arles.name': 'Arles',\n    'French.Clamart.name': 'Clamart',\n    'French.Narbonne.name': 'Narbonne',\n    'French.Annecy.name': 'Annecy',\n    'French.Sartrouville.name': 'Sartrouville',\n    'French.Grasse.name': 'Grasse',\n    'French.Laval.name': 'Laval',\n    'French.Belfort.name': 'Belfort',\n    'French.Bobigny.name': 'Bobigny',\n    'French.\u00C9vreux.name': '\u00C9vreux',\n    'French.Vincennes.name': 'Vincennes',\n    'French.Montrouge.name': 'Montrouge',\n    'French.Sevran.name': 'Sevran',\n    'French.Albi.name': 'Albi',\n    'French.Charleville-M\u00E9zi\u00E8res.name': 'Charleville-M\u00E9zi\u00E8res',\n    'French.Suresnes.name': 'Suresnes',\n    'French.Martigues.name': 'Martigues',\n    'French.Corbeil-Essonnes.name': 'Corbeil-Essonnes',\n    'French.Saint-Ouen.name': 'Saint-Ouen',\n    'French.Bayonne.name': 'Bayonne',\n    'French.Cagnes-sur-Mer.name': 'Cagnes-sur-Mer',\n    'French.Brive-la-Gaillarde.name': 'Brive-la-Gaillarde',\n    'French.Carcassonne.name': 'Carcassonne',\n    'French.Massy.name': 'Massy',\n    'French.Blois.name': 'Blois',\n    'French.Aubagne.name': 'Aubagne',\n    'French.Saint-Brieuc.name': 'Saint-Brieuc',\n    'French.Ch\u00E2teauroux.name': 'Ch\u00E2teauroux',\n    'French.Chalon-sur-Sa\u00F4ne.name': 'Chalon-sur-Sa\u00F4ne',\n    'French.Mantes-la-Jolie.name': 'Mantes-la-Jolie',\n    'French.Meudon.name': 'Meudon',\n    'French.Saint-Malo.name': 'Saint-Malo',\n    'French.Ch\u00E2lons-en-Champagne.name': 'Ch\u00E2lons-en-Champagne',\n    'French.Alfortville.name': 'Alfortville',\n    'French.S\u00E8te.name': 'S\u00E8te',\n    'French.Salon-de-Provence.name': 'Salon-de-Provence',\n    'French.Vaulx-en-Velin.name': 'Vaulx-en-Velin',\n    'French.Puteaux.name': 'Puteaux',\n    'French.Rosny-sous-Bois.name': 'Rosny-sous-Bois',\n    'French.Saint-Herblain.name': 'Saint-Herblain',\n    'French.Gennevilliers.name': 'Gennevilliers',\n    'French.Le Cannet.name': 'Le Cannet',\n    'French.Livry-Gargan.name': 'Livry-Gargan',\n    'French.Saint-Priest.name': 'Saint-Priest',\n    'French.Istres.name': 'Istres',\n    'French.Valenciennes.name': 'Valenciennes',\n    'French.Choisy-le-Roi.name': 'Choisy-le-Roi',\n    'French.Caluire-et-Cuire.name': 'Caluire-et-Cuire',\n    'French.Boulogne-sur-Mer.name': 'Boulogne-sur-Mer',\n    'French.Bastia.name': 'Bastia',\n    'French.Angoul\u00EAme.name': 'Angoul\u00EAme',\n    'French.Garges-l\u00E8s-Gonesse.name': 'Garges-l\u00E8s-Gonesse',\n    'French.Castres.name': 'Castres',\n    'French.Thionville.name': 'Thionville',\n    'French.Wattrelos.name': 'Wattrelos',\n    'French.Talence.name': 'Talence',\n    'French.Saint-Laurent-du-Maroni.name': 'Saint-Laurent-du-Maroni',\n    'French.Douai.name': 'Douai',\n    'French.Noisy-le-Sec.name': 'Noisy-le-Sec',\n    'French.Tarbes.name': 'Tarbes',\n    'French.Arras.name': 'Arras',\n    'French.Al\u00E8s.name': 'Al\u00E8s',\n    'French.La Courneuve.name': 'La Courneuve',\n    'French.Bourg-en-Bresse.name': 'Bourg-en-Bresse',\n    'French.Compi\u00E8gne.name': 'Compi\u00E8gne',\n    'French.Gap.name': 'Gap',\n    'French.Melun.name': 'Melun',\n    'French.Le Lamentin.name': 'Le Lamentin',\n    'French.Rez\u00E9.name': 'Rez\u00E9',\n    'French.Saint-Germain-en-Laye.name': 'Saint-Germain-en-Laye',\n    'French.Marcq-en-Bar\u0153ul.name': 'Marcq-en-Bar\u0153ul',\n    'French.Gagny.name': 'Gagny',\n    'French.Anglet.name': 'Anglet',\n    'French.Draguignan.name': 'Draguignan',\n    'French.Chartres.name': 'Chartres',\n    'French.Bron.name': 'Bron',\n    'French.Bagneux.name': 'Bagneux',\n    'French.Colomiers.name': 'Colomiers',\n    \"French.Saint-Martin-d'H\u00E8res.name\": \"Saint-Martin-d'H\u00E8res\",\n    'French.Pontault-Combault.name': 'Pontault-Combault',\n    'French.Montlu\u00E7on.name': 'Montlu\u00E7on',\n    'French.Jou\u00E9-l\u00E8s-Tours.name': 'Jou\u00E9-l\u00E8s-Tours',\n    'French.Saint-Joseph.name': 'Saint-Joseph',\n    'French.Poissy.name': 'Poissy',\n    'French.Savigny-sur-Orge.name': 'Savigny-sur-Orge',\n    'French.Cherbourg-Octeville.name': 'Cherbourg-Octeville',\n    'French.Mont\u00E9limar.name': 'Mont\u00E9limar',\n    'French.Villefranche-sur-Sa\u00F4ne.name': 'Villefranche-sur-Sa\u00F4ne',\n    'French.Stains.name': 'Stains',\n    'French.Saint-Beno\u00EEt.name': 'Saint-Beno\u00EEt',\n    'French.Bagnolet.name': 'Bagnolet',\n    'French.Ch\u00E2tillon.name': 'Ch\u00E2tillon',\n    'French.Le Port.name': 'Le Port',\n    'French.Sainte-Genevi\u00E8ve-des-Bois.name': 'Sainte-Genevi\u00E8ve-des-Bois',\n    'French.\u00C9chirolles.name': '\u00C9chirolles',\n    'French.Roanne.name': 'Roanne',\n    'French.Villepinte.name': 'Villepinte',\n    'French.Saint-Chamond.name': 'Saint-Chamond',\n    'French.Conflans-Sainte-Honorine.name': 'Conflans-Sainte-Honorine',\n    'French.Auxerre.name': 'Auxerre',\n    'French.Nevers.name': 'Nevers',\n    'French.Neuilly-sur-Marne.name': 'Neuilly-sur-Marne',\n    'French.La Ciotat.name': 'La Ciotat',\n    'French.Tremblay-en-France.name': 'Tremblay-en-France',\n    'French.Thonon-les-Bains.name': 'Thonon-les-Bains',\n    'French.Vitrolles.name': 'Vitrolles',\n    'French.Haguenau.name': 'Haguenau',\n    'French.Six-Fours-les-Plages.name': 'Six-Fours-les-Plages',\n    'French.Agen.name': 'Agen',\n    'French.Creil.name': 'Creil',\n    'French.Annemasse.name': 'Annemasse',\n    'French.Saint-Rapha\u00EBl.name': 'Saint-Rapha\u00EBl',\n    'French.Marignane.name': 'Marignane',\n    'French.Romans-sur-Is\u00E8re.name': 'Romans-sur-Is\u00E8re',\n    'French.Montigny-le-Bretonneux.name': 'Montigny-le-Bretonneux',\n    'French.Le Perreux-sur-Marne.name': 'Le Perreux-sur-Marne',\n    'French.Franconville.name': 'Franconville',\n    'French.M\u00E2con.name': 'M\u00E2con',\n    'French.Saint-Leu.name': 'Saint-Leu',\n    'French.Cambrai.name': 'Cambrai',\n    'French.Ch\u00E2tenay-Malabry.name': 'Ch\u00E2tenay-Malabry',\n    'French.Sainte-Marie.name': 'Sainte-Marie',\n    'French.Villeneuve-Saint-Georges.name': 'Villeneuve-Saint-Georges',\n    'French.Houilles.name': 'Houilles',\n    'French.\u00C9pinal.name': '\u00C9pinal',\n    'French.Lens.name': 'Lens',\n    'French.Li\u00E9vin.name': 'Li\u00E9vin',\n    'French.Les Mureaux.name': 'Les Mureaux',\n    'French.Schiltigheim.name': 'Schiltigheim',\n    'French.La Possession.name': 'La Possession',\n    'French.Meyzieu.name': 'Meyzieu',\n    'French.Dreux.name': 'Dreux',\n    'French.Nogent-sur-Marne.name': 'Nogent-sur-Marne',\n    'French.Plaisir.name': 'Plaisir',\n    'French.Mont-de-Marsan.name': 'Mont-de-Marsan',\n    'French.Palaiseau.name': 'Palaiseau',\n    'French.Ch\u00E2tellerault.name': 'Ch\u00E2tellerault',\n    'French.Goussainville.name': 'Goussainville',\n    \"French.L'Ha\u00FF-les-Roses.name\": \"L'Ha\u00FF-les-Roses\",\n    'French.Viry-Ch\u00E2tillon.name': 'Viry-Ch\u00E2tillon',\n    'French.Vigneux-sur-Seine.name': 'Vigneux-sur-Seine',\n    'French.Chatou.name': 'Chatou',\n    'French.Trappes.name': 'Trappes',\n    'French.Clichy-sous-Bois.name': 'Clichy-sous-Bois',\n    'French.Rillieux-la-Pape.name': 'Rillieux-la-Pape',\n    \"French.Villenave-'Ornon.name\": \"Villenave-'Ornon\",\n    'French.Maubeuge.name': 'Maubeuge',\n    'French.Charenton-le-Pont.name': 'Charenton-le-Pont',\n    'French.Malakoff.name': 'Malakoff',\n    'French.Matoury.name': 'Matoury',\n    'French.Dieppe.name': 'Dieppe',\n    'French.Athis-Mons.name': 'Athis-Mons',\n    'French.Savigny-le-Temple.name': 'Savigny-le-Temple',\n    'French.P\u00E9rigueux.name': 'P\u00E9rigueux',\n    'French.Baie-Mahault.name': 'Baie-Mahault',\n    'French.Vandoeuvre-l\u00E8s-Nancy.name': 'Vandoeuvre-l\u00E8s-Nancy',\n    'French.Pontoise.name': 'Pontoise',\n    'French.Aix-les-Bains.name': 'Aix-les-Bains',\n    'French.Cachan.name': 'Cachan',\n    'French.Vienne.name': 'Vienne',\n    'French.Thiais.name': 'Thiais',\n    'French.Orange.name': 'Orange',\n    'French.Saint-M\u00E9dard-en-Jalles.name': 'Saint-M\u00E9dard-en-Jalles',\n    'French.Villemomble.name': 'Villemomble',\n    'French.Saint-Cloud.name': 'Saint-Cloud',\n    'French.Saint-Laurent-du-Var.name': 'Saint-Laurent-du-Var',\n    'French.Yerres.name': 'Yerres',\n    'French.Saint-\u00C9tienne-du-Rouvray.name': 'Saint-\u00C9tienne-du-Rouvray',\n    'French.Sotteville-l\u00E8s-Rouen.name': 'Sotteville-l\u00E8s-Rouen',\n    'French.Draveil.name': 'Draveil',\n    'French.Le Chesnay.name': 'Le Chesnay',\n    'French.Bois-Colombes.name': 'Bois-Colombes',\n    'French.Le Plessis-Robinson.name': 'Le Plessis-Robinson',\n    'French.La Garenne-Colombes.name': 'La Garenne-Colombes',\n    'French.Lambersart.name': 'Lambersart',\n    'French.Soissons.name': 'Soissons',\n    'French.Pierrefitte-sur-Seine.name': 'Pierrefitte-sur-Seine',\n    'French.Carpentras.name': 'Carpentras',\n    'French.Villiers-sur-Marne.name': 'Villiers-sur-Marne',\n    'French.Vanves.name': 'Vanves',\n    'French.Menton.name': 'Menton',\n    'French.Bergerac.name': 'Bergerac',\n    'French.Ermont.name': 'Ermont',\n    'French.Bezons.name': 'Bezons',\n    'French.Grigny.name': 'Grigny',\n    'French.Guyancourt.name': 'Guyancourt',\n    'French.Saumur.name': 'Saumur',\n    'French.Herblay.name': 'Herblay',\n    'French.Ris-Orangis.name': 'Ris-Orangis',\n    'French.Villiers-le-Bel.name': 'Villiers-le-Bel',\n    'French.Bourgoin-Jallieu.name': 'Bourgoin-Jallieu',\n    'French.Vierzon.name': 'Vierzon',\n    'French.Le Gosier.name': 'Le Gosier',\n    'French.D\u00E9cines-Charpieu.name': 'D\u00E9cines-Charpieu',\n    'French.H\u00E9nin-Beaumont.name': 'H\u00E9nin-Beaumont',\n    'French.Fresnes.name': 'Fresnes',\n    'French.Aurillac.name': 'Aurillac',\n    'French.Sannois.name': 'Sannois',\n    'French.Vallauris.name': 'Vallauris',\n    'French.Illkirch-Graffenstaden.name': 'Illkirch-Graffenstaden',\n    'French.Alen\u00E7on.name': 'Alen\u00E7on',\n    'French.\u00C9lancourt.name': '\u00C9lancourt',\n    'French.Tournefeuille.name': 'Tournefeuille',\n    'French.B\u00E8gles.name': 'B\u00E8gles',\n    'French.Gonesse.name': 'Gonesse',\n    'French.Oullins.name': 'Oullins',\n    'French.Brunoy.name': 'Brunoy',\n    'French.Taverny.name': 'Taverny',\n    'French.Armenti\u00E8res.name': 'Armenti\u00E8res',\n    'French.Montfermeil.name': 'Montfermeil',\n    'French.Rambouillet.name': 'Rambouillet',\n    'French.Villeparisis.name': 'Villeparisis',\n    'French.Le Kremlin-Bic\u00EAtre.name': 'Le Kremlin-Bic\u00EAtre',\n    'French.Sucy-en-Brie.name': 'Sucy-en-Brie',\n    'French.Kourou.name': 'Kourou',\n    'French.Montb\u00E9liard.name': 'Montb\u00E9liard',\n    'French.Romainville.name': 'Romainville',\n    'French.Cavaillon.name': 'Cavaillon',\n    'French.Saint-Dizier.name': 'Saint-Dizier',\n    'French.Br\u00E9tigny-sur-Orge.name': 'Br\u00E9tigny-sur-Orge',\n    'French.Saint-S\u00E9bastien-sur-Loire.name': 'Saint-S\u00E9bastien-sur-Loire',\n    'French.Saintes.name': 'Saintes',\n    'French.La Teste-de-Buch.name': 'La Teste-de-Buch',\n    'French.Villeneuve-la-Garenne.name': 'Villeneuve-la-Garenne',\n    'French.B\u00E9thune.name': 'B\u00E9thune',\n    'French.Bussy-Saint-Georges.name': 'Bussy-Saint-Georges',\n    'French.Vichy.name': 'Vichy',\n    'French.La Garde.name': 'La Garde',\n    'French.Agde.name': 'Agde',\n    'French.Laon.name': 'Laon',\n    'French.Sens.name': 'Sens',\n    'French.Lunel.name': 'Lunel',\n    'French.Miramas.name': 'Miramas',\n    'French.Biarritz.name': 'Biarritz',\n    'French.Le Grand-Quevilly.name': 'Le Grand-Quevilly',\n    'French.Orvault.name': 'Orvault',\n    'French.Les Ulis.name': 'Les Ulis',\n    'French.Champs-sur-Marne.name': 'Champs-sur-Marne',\n    'French.Rochefort.name': 'Rochefort',\n    'French.Muret.name': 'Muret',\n    'French.Sainte-Anne.name': 'Sainte-Anne',\n    'French.Eaubonne.name': 'Eaubonne',\n    'French.\u00C9tampes.name': '\u00C9tampes',\n    'French.Gradignan.name': 'Gradignan',\n    'French.Vernon.name': 'Vernon',\n    'French.Petit-Bourg.name': 'Petit-Bourg',\n    'French.Libourne.name': 'Libourne',\n    'French.Abbeville.name': 'Abbeville',\n    'French.Rodez.name': 'Rodez',\n    \"French.Saint-Ouen-l'Aum\u00F4ne.name\": \"Saint-Ouen-l'Aum\u00F4ne\",\n    'French.Torcy.name': 'Torcy',\n    'French.Maisons-Laffitte.name': 'Maisons-Laffitte',\n    'French.Montgeron.name': 'Montgeron',\n    'French.Villeneuve-sur-Lot.name': 'Villeneuve-sur-Lot',\n    'French.Cormeilles-en-Parisis.name': 'Cormeilles-en-Parisis',\n    'French.\u00C9pernay.name': '\u00C9pernay',\n    'French.S\u00E8vres.name': 'S\u00E8vres',\n    'French.Dole.name': 'Dole',\n    'French.Le Robert.name': 'Le Robert',\n    'French.Le Bouscat.name': 'Le Bouscat',\n    'French.Blagnac.name': 'Blagnac',\n    'French.Frontignan.name': 'Frontignan',\n    'French.Cenon.name': 'Cenon',\n    'French.Mandelieu-la-Napoule.name': 'Mandelieu-la-Napoule',\n    'French.Vertou.name': 'Vertou',\n    'French.Les Lilas.name': 'Les Lilas',\n    'French.Bruay-la-Buissi\u00E8re.name': 'Bruay-la-Buissi\u00E8re',\n    'French.Les Pavillons-sous-Bois.name': 'Les Pavillons-sous-Bois',\n    'French.Chaumont.name': 'Chaumont',\n    'French.Roissy-en-Brie.name': 'Roissy-en-Brie',\n    'French.Le Moule.name': 'Le Moule',\n    'French.Le Petit-Quevilly.name': 'Le Petit-Quevilly',\n    'French.Manosque.name': 'Manosque',\n    'French.Saint-Mand\u00E9.name': 'Saint-Mand\u00E9',\n    'French.Fontenay-aux-Roses.name': 'Fontenay-aux-Roses',\n    'French.Orly.name': 'Orly',\n    'French.Le Creusot.name': 'Le Creusot',\n    'French.Oyonnax.name': 'Oyonnax',\n    'French.La Madeleine.name': 'La Madeleine',\n    'French.Sainte-Suzanne.name': 'Sainte-Suzanne',\n    'French.Millau.name': 'Millau',\n    'French.Combs-la-Ville.name': 'Combs-la-Ville',\n    'French.Fontaine.name': 'Fontaine',\n    'French.Deuil-la-Barre.name': 'Deuil-la-Barre',\n    'French.Coudekerque-Branche.name': 'Coudekerque-Branche',\n    'French.Auch.name': 'Auch',\n    'French.Lanester.name': 'Lanester',\n    'French.Beaune.name': 'Beaune',\n    'French.Montigny-l\u00E8s-Metz.name': 'Montigny-l\u00E8s-Metz',\n    'French.Hazebrouck.name': 'Hazebrouck',\n    'French.Longjumeau.name': 'Longjumeau',\n    'French.Sainte-Foy-l\u00E8s-Lyon.name': 'Sainte-Foy-l\u00E8s-Lyon',\n    'French.Forbach.name': 'Forbach',\n    'French.Sarreguemines.name': 'Sarreguemines',\n    'French.Mons-en-Bar\u0153ul.name': 'Mons-en-Bar\u0153ul',\n    'French.La Valette-du-Var.name': 'La Valette-du-Var',\n    'French.H\u00E9rouville-Saint-Clair.name': 'H\u00E9rouville-Saint-Clair',\n    'French.Morsang-sur-Orge.name': 'Morsang-sur-Orge',\n    'French.Grande-Synthe.name': 'Grande-Synthe',\n    'French.La Celle-Saint-Cloud.name': 'La Celle-Saint-Cloud',\n    'French.Lisieux.name': 'Lisieux',\n    'French.Croix.name': 'Croix',\n    'French.Dammarie-les-Lys.name': 'Dammarie-les-Lys',\n    'French.V\u00E9lizy-Villacoublay.name': 'V\u00E9lizy-Villacoublay',\n    'French.Wasquehal.name': 'Wasquehal',\n    'French.Saint-Gratien.name': 'Saint-Gratien',\n    'French.Halluin.name': 'Halluin',\n    'French.Neuilly-Plaisance.name': 'Neuilly-Plaisance',\n    'French.Montmorency.name': 'Montmorency',\n    'French.Dax.name': 'Dax',\n    'French.Lagny-sur-Marne.name': 'Lagny-sur-Marne',\n    'French.Le M\u00E9e-sur-Seine.name': 'Le M\u00E9e-sur-Seine',\n    'French.Saint-Genis-Laval.name': 'Saint-Genis-Laval',\n    'French.Fleury-les-Aubrais.name': 'Fleury-les-Aubrais',\n    'French.Loos.name': 'Loos',\n    'French.Gif-sur-Yvette.name': 'Gif-sur-Yvette',\n    'French.Denain.name': 'Denain',\n    'French.Saint-Di\u00E9-des-Vosges.name': 'Saint-Di\u00E9-des-Vosges',\n    'French.Sainte-Rose.name': 'Sainte-Rose',\n    'French.Saint-Michel-sur-Orge.name': 'Saint-Michel-sur-Orge',\n\n    // German\n    'German.Berlin.name': 'Berlin',\n    'German.Hamburg.name': 'Hamburg',\n    'German.Munich.name': 'Munich',\n    'German.Cologne.name': 'Cologne',\n    'German.Frankfurt.name': 'Frankfurt',\n    'German.Stuttgart.name': 'Stuttgart',\n    'German.D\u00FCsseldorf.name': 'D\u00FCsseldorf',\n    'German.Dortmund.name': 'Dortmund',\n    'German.Essen.name': 'Essen',\n    'German.Leipzig.name': 'Leipzig',\n    'German.Bremen.name': 'Bremen',\n    'German.Dresden.name': 'Dresden',\n    'German.Hanover.name': 'Hanover',\n    'German.Nuremberg.name': 'Nuremberg',\n    'German.Duisburg.name': 'Duisburg',\n    'German.Bochum.name': 'Bochum',\n    'German.Wuppertal.name': 'Wuppertal',\n    'German.Bielefeld.name': 'Bielefeld',\n    'German.Bonn.name': 'Bonn',\n    'German.M\u00FCnster.name': 'M\u00FCnster',\n    'German.Karlsruhe.name': 'Karlsruhe',\n    'German.Mannheim.name': 'Mannheim',\n    'German.Augsburg.name': 'Augsburg',\n    'German.Wiesbaden.name': 'Wiesbaden',\n    'German.Gelsenkirchen.name': 'Gelsenkirchen',\n    'German.M\u00F6nchengladbach.name': 'M\u00F6nchengladbach',\n    'German.Braunschweig.name': 'Braunschweig',\n    'German.Chemnitz.name': 'Chemnitz',\n    'German.Kiel.name': 'Kiel',\n    'German.Aachen.name': 'Aachen',\n    'German.Halle.name': 'Halle',\n    'German.Magdeburg.name': 'Magdeburg',\n    'German.Freiburg.name': 'Freiburg',\n    'German.Krefeld.name': 'Krefeld',\n    'German.L\u00FCbeck.name': 'L\u00FCbeck',\n    'German.Oberhausen.name': 'Oberhausen',\n    'German.Erfurt.name': 'Erfurt',\n    'German.Mainz.name': 'Mainz',\n    'German.Rostock.name': 'Rostock',\n    'German.Kassel.name': 'Kassel',\n    'German.Hagen.name': 'Hagen',\n    'German.Hamm.name': 'Hamm',\n    'German.Saarbr\u00FCcken.name': 'Saarbr\u00FCcken',\n    'German.M\u00FClheim an der Ruhr.name': 'M\u00FClheim an der Ruhr',\n    'German.Potsdam.name': 'Potsdam',\n    'German.Ludwigshafen am Rhein.name': 'Ludwigshafen am Rhein',\n    'German.Oldenburg.name': 'Oldenburg',\n    'German.Leverkusen.name': 'Leverkusen',\n    'German.Osnabr\u00FCck.name': 'Osnabr\u00FCck',\n    'German.Solingen.name': 'Solingen',\n\n    // Greek\n    'Greek.Athens.name': 'Athens',\n    'Greek.Thessaloniki.name': 'Thessaloniki',\n    'Greek.Patras.name': 'Patras',\n    'Greek.Piraeus.name': 'Piraeus',\n    'Greek.Larissa.name': 'Larissa',\n    'Greek.Heraklion.name': 'Heraklion',\n    'Greek.Peristeri.name': 'Peristeri',\n    'Greek.Kallithea.name': 'Kallithea',\n    'Greek.Acharnes.name': 'Acharnes',\n    'Greek.Kalamaria.name': 'Kalamaria',\n    'Greek.Nikaia.name': 'Nikaia',\n    'Greek.Glyfada.name': 'Glyfada',\n    'Greek.Volos.name': 'Volos',\n    'Greek.Ilio.name': 'Ilio',\n    'Greek.Ilioupoli.name': 'Ilioupoli',\n    'Greek.Keratsini.name': 'Keratsini',\n    'Greek.Evosmos.name': 'Evosmos',\n    'Greek.Chalandri.name': 'Chalandri',\n    'Greek.Nea Smyrni.name': 'Nea Smyrni',\n    'Greek.Marousi.name': 'Marousi',\n    'Greek.Agios Dimitrios.name': 'Agios Dimitrios',\n    'Greek.Zografou.name': 'Zografou',\n    'Greek.Egaleo.name': 'Egaleo',\n    'Greek.Nea Ionia.name': 'Nea Ionia',\n    'Greek.Ioannina.name': 'Ioannina',\n    'Greek.Palaio Faliro.name': 'Palaio Faliro',\n    'Greek.Korydallos.name': 'Korydallos',\n    'Greek.Trikala.name': 'Trikala',\n    'Greek.Vyronas.name': 'Vyronas',\n    'Greek.Agia Paraskevi.name': 'Agia Paraskevi',\n    'Greek.Galatsi.name': 'Galatsi',\n    'Greek.Agrinio.name': 'Agrinio',\n    'Greek.Chalcis.name': 'Chalcis',\n    'Greek.Petroupoli.name': 'Petroupoli',\n    'Greek.Serres.name': 'Serres',\n    'Greek.Alexandroupoli.name': 'Alexandroupoli',\n    'Greek.Xanthi.name': 'Xanthi',\n    'Greek.Katerini.name': 'Katerini',\n    'Greek.Kalamata.name': 'Kalamata',\n    'Greek.Kavala.name': 'Kavala',\n    'Greek.Chania.name': 'Chania',\n    'Greek.Lamia.name': 'Lamia',\n    'Greek.Komotini.name': 'Komotini',\n    'Greek.Irakleio.name': 'Irakleio',\n    'Greek.Rhodes.name': 'Rhodes',\n    'Greek.Kifissia.name': 'Kifissia',\n    'Greek.Stavroupoli.name': 'Stavroupoli',\n    'Greek.Chaidari.name': 'Chaidari',\n    'Greek.Drama.name': 'Drama',\n    'Greek.Veria.name': 'Veria',\n    'Greek.Alimos.name': 'Alimos',\n    'Greek.Kozani.name': 'Kozani',\n    'Greek.Polichni.name': 'Polichni',\n    'Greek.Karditsa.name': 'Karditsa',\n    'Greek.Sykies.name': 'Sykies',\n    'Greek.Ampelokipoi.name': 'Ampelokipoi',\n    'Greek.Pylaia.name': 'Pylaia',\n    'Greek.Agioi Anargyroi.name': 'Agioi Anargyroi',\n    'Greek.Argyroupoli.name': 'Argyroupoli',\n    'Greek.Ano Liosia.name': 'Ano Liosia',\n    'Greek.Rethymno.name': 'Rethymno',\n    'Greek.Ptolemaida.name': 'Ptolemaida',\n    'Greek.Tripoli.name': 'Tripoli',\n    'Greek.Cholargos.name': 'Cholargos',\n    'Greek.Vrilissia.name': 'Vrilissia',\n    'Greek.Aspropyrgos.name': 'Aspropyrgos',\n    'Greek.Corinth.name': 'Corinth',\n    'Greek.Gerakas.name': 'Gerakas',\n    'Greek.Metamorfosi.name': 'Metamorfosi',\n    'Greek.Giannitsa.name': 'Giannitsa',\n    'Greek.Voula.name': 'Voula',\n    'Greek.Kamatero.name': 'Kamatero',\n    'Greek.Mytilene.name': 'Mytilene',\n    'Greek.Neapoli.name': 'Neapoli',\n    'Greek.Eleftherio-Kordelio.name': 'Eleftherio-Kordelio',\n    'Greek.Chios.name': 'Chios',\n    'Greek.Agia Varvara.name': 'Agia Varvara',\n    'Greek.Kaisariani.name': 'Kaisariani',\n    'Greek.Nea Filadelfeia.name': 'Nea Filadelfeia',\n    'Greek.Moschato.name': 'Moschato',\n    'Greek.Perama.name': 'Perama',\n    'Greek.Salamina.name': 'Salamina',\n    'Greek.Eleusis.name': 'Eleusis',\n    'Greek.Corfu.name': 'Corfu',\n    'Greek.Pyrgos.name': 'Pyrgos',\n    'Greek.Megara.name': 'Megara',\n    'Greek.Kilkis.name': 'Kilkis',\n    'Greek.Dafni.name': 'Dafni',\n    'Greek.Thebes.name': 'Thebes',\n    'Greek.Melissia.name': 'Melissia',\n    'Greek.Argos.name': 'Argos',\n    'Greek.Arta.name': 'Arta',\n    'Greek.Artemida.name': 'Artemida',\n    'Greek.Livadeia.name': 'Livadeia',\n    'Greek.Pefki.name': 'Pefki',\n    'Greek.Oraiokastro.name': 'Oraiokastro',\n    'Greek.Aigio.name': 'Aigio',\n    'Greek.Kos.name': 'Kos',\n    'Greek.Koropi.name': 'Koropi',\n    'Greek.Preveza.name': 'Preveza',\n    'Greek.Naousa.name': 'Naousa',\n    'Greek.Orestiada.name': 'Orestiada',\n    'Greek.Peraia.name': 'Peraia',\n    'Greek.Edessa.name': 'Edessa',\n    'Greek.Florina.name': 'Florina',\n    'Greek.Panorama.name': 'Panorama',\n    'Greek.Nea Erythraia1.name': 'Nea Erythraia1',\n    'Greek.Elliniko1.name': 'Elliniko1',\n    'Greek.Amaliada.name': 'Amaliada',\n    'Greek.Pallini.name': 'Pallini',\n    'Greek.Sparta.name': 'Sparta',\n    'Greek.Agios Ioannis Rentis.name': 'Agios Ioannis Rentis',\n    'Greek.Thermi.name': 'Thermi',\n    'Greek.Vari.name': 'Vari',\n    'Greek.Nea Makri.name': 'Nea Makri',\n    'Greek.Tavros.name': 'Tavros',\n    'Greek.Alexandreia.name': 'Alexandreia',\n    'Greek.Menemeni.name': 'Menemeni',\n    'Greek.Paiania.name': 'Paiania',\n    'Greek.Kalyvia Thorikou.name': 'Kalyvia Thorikou',\n    'Greek.Nafplio.name': 'Nafplio',\n    'Greek.Drapetsona.name': 'Drapetsona',\n    'Greek.Efkarpia.name': 'Efkarpia',\n    'Greek.Papagou.name': 'Papagou',\n    'Greek.Nafpaktos.name': 'Nafpaktos',\n    'Greek.Kastoria.name': 'Kastoria',\n    'Greek.Grevena.name': 'Grevena',\n    'Greek.Pefka.name': 'Pefka',\n    'Greek.Nea Alikarnassos.name': 'Nea Alikarnassos',\n    'Greek.Missolonghi.name': 'Missolonghi',\n    'Greek.Gazi.name': 'Gazi',\n    'Greek.Ierapetra.name': 'Ierapetra',\n    'Greek.Kalymnos.name': 'Kalymnos',\n    'Greek.Rafina.name': 'Rafina',\n    'Greek.Loutraki.name': 'Loutraki',\n    'Greek.Agios Nikolaos.name': 'Agios Nikolaos',\n    'Greek.Ermoupoli.name': 'Ermoupoli',\n    'Greek.Ialysos.name': 'Ialysos',\n    'Greek.Mandra.name': 'Mandra',\n    'Greek.Tyrnavos.name': 'Tyrnavos',\n    'Greek.Glyka Nera.name': 'Glyka Nera',\n    'Greek.Ymittos.name': 'Ymittos',\n    'Greek.Neo Psychiko.name': 'Neo Psychiko',\n\n    // Indian\n    'Indian.Delhi.name': 'Delhi',\n    'Indian.Mumbai.name': 'Mumbai',\n    'Indian.Bangalore.name': 'Bangalore',\n    'Indian.Hyderabad.name': 'Hyderabad',\n    'Indian.Ahmedabad.name': 'Ahmedabad',\n    'Indian.Chennai.name': 'Chennai',\n    'Indian.Kolkata.name': 'Kolkata',\n    'Indian.Surat.name': 'Surat',\n    'Indian.Pune.name': 'Pune',\n    'Indian.Jaipur.name': 'Jaipur',\n    'Indian.Lucknow.name': 'Lucknow',\n    'Indian.Kanpur.name': 'Kanpur',\n    'Indian.Nagpur.name': 'Nagpur',\n    'Indian.Indore.name': 'Indore',\n    'Indian.Thane.name': 'Thane',\n    'Indian.Bhopal.name': 'Bhopal',\n    'Indian.Visakhapatnam.name': 'Visakhapatnam',\n    'Indian.Pimpri-Chinchwad.name': 'Pimpri-Chinchwad',\n    'Indian.Patna.name': 'Patna',\n    'Indian.Vadodara.name': 'Vadodara',\n    'Indian.Ghaziabad.name': 'Ghaziabad',\n    'Indian.Ludhiana.name': 'Ludhiana',\n    'Indian.Agra.name': 'Agra',\n    'Indian.Nashik.name': 'Nashik',\n    'Indian.Faridabad.name': 'Faridabad',\n    'Indian.Meerut.name': 'Meerut',\n    'Indian.Rajkot.name': 'Rajkot',\n    'Indian.Kalyan-Dombivli.name': 'Kalyan-Dombivli',\n    'Indian.Vasai-Virar.name': 'Vasai-Virar',\n    'Indian.Varanasi.name': 'Varanasi',\n    'Indian.Srinagar.name': 'Srinagar',\n    'Indian.Aurangabad.name': 'Aurangabad',\n    'Indian.Dhanbad.name': 'Dhanbad',\n    'Indian.Amritsar.name': 'Amritsar',\n    'Indian.Navi Mumbai.name': 'Navi Mumbai',\n    'Indian.Allahabad.name': 'Allahabad',\n    'Indian.Howrah.name': 'Howrah',\n    'Indian.Ranchi.name': 'Ranchi',\n    'Indian.Gwalior.name': 'Gwalior',\n    'Indian.Jabalpur.name': 'Jabalpur',\n    'Indian.Coimbatore.name': 'Coimbatore',\n    'Indian.Vijayawada.name': 'Vijayawada',\n    'Indian.Jodhpur.name': 'Jodhpur',\n    'Indian.Madurai.name': 'Madurai',\n    'Indian.Raipur.name': 'Raipur',\n    'Indian.Kota.name': 'Kota',\n    'Indian.Chandigarh.name': 'Chandigarh',\n    'Indian.Guwahati.name': 'Guwahati',\n    'Indian.Solapur.name': 'Solapur',\n    'Indian.Hubli\u2013Dharwad.name': 'Hubli\u2013Dharwad',\n    'Indian.Tiruchirappalli.name': 'Tiruchirappalli',\n    'Indian.Bareilly.name': 'Bareilly',\n    'Indian.Moradabad.name': 'Moradabad',\n    'Indian.Mysore.name': 'Mysore',\n    'Indian.Tiruppur.name': 'Tiruppur',\n    'Indian.Gurgaon.name': 'Gurgaon',\n    'Indian.Aligarh.name': 'Aligarh',\n    'Indian.Jalandhar.name': 'Jalandhar',\n    'Indian.Bhubaneswar.name': 'Bhubaneswar',\n    'Indian.Salem.name': 'Salem',\n    'Indian.Mira-Bhayandar.name': 'Mira-Bhayandar',\n    'Indian.Warangal.name': 'Warangal',\n    'Indian.Jalgaon.name': 'Jalgaon',\n    'Indian.Guntur.name': 'Guntur',\n    'Indian.Bhiwandi.name': 'Bhiwandi',\n    'Indian.Saharanpur.name': 'Saharanpur',\n    'Indian.Gorakhpur.name': 'Gorakhpur',\n    'Indian.Bikaner.name': 'Bikaner',\n    'Indian.Amravati.name': 'Amravati',\n    'Indian.Noida.name': 'Noida',\n    'Indian.Jamshedpur.name': 'Jamshedpur',\n    'Indian.Bhilai.name': 'Bhilai',\n    'Indian.Cuttack.name': 'Cuttack',\n    'Indian.Firozabad.name': 'Firozabad',\n    'Indian.Kochi.name': 'Kochi',\n    'Indian.Nellore.name': 'Nellore',\n    'Indian.Bhavnagar.name': 'Bhavnagar',\n    'Indian.Dehradun.name': 'Dehradun',\n    'Indian.Durgapur.name': 'Durgapur',\n    'Indian.Asansol.name': 'Asansol',\n    'Indian.Rourkela.name': 'Rourkela',\n    'Indian.Nanded.name': 'Nanded',\n    'Indian.Kolhapur.name': 'Kolhapur',\n    'Indian.Ajmer.name': 'Ajmer',\n    'Indian.Akola.name': 'Akola',\n    'Indian.Gulbarga.name': 'Gulbarga',\n    'Indian.Jamnagar.name': 'Jamnagar',\n    'Indian.Ujjain.name': 'Ujjain',\n    'Indian.Loni.name': 'Loni',\n    'Indian.Siliguri.name': 'Siliguri',\n    'Indian.Jhansi.name': 'Jhansi',\n    'Indian.Ulhasnagar.name': 'Ulhasnagar',\n    'Indian.Jammu.name': 'Jammu',\n    'Indian.Sangli-Miraj & Kupwad.name': 'Sangli-Miraj & Kupwad',\n    'Indian.Mangalore.name': 'Mangalore',\n    'Indian.Erode.name': 'Erode',\n    'Indian.Belgaum.name': 'Belgaum',\n    'Indian.Ambattur.name': 'Ambattur',\n    'Indian.Tirunelveli.name': 'Tirunelveli',\n    'Indian.Malegaon.name': 'Malegaon',\n    'Indian.Gaya.name': 'Gaya',\n    'Indian.Thiruvananthapuram.name': 'Thiruvananthapuram',\n    'Indian.Udaipur.name': 'Udaipur',\n    'Indian.Maheshtala.name': 'Maheshtala',\n    'Indian.Davanagere.name': 'Davanagere',\n    'Indian.Kozhikode.name': 'Kozhikode',\n    'Indian.Kurnool.name': 'Kurnool',\n    'Indian.Rajpur Sonarpur.name': 'Rajpur Sonarpur',\n    'Indian.Rajahmundry.name': 'Rajahmundry',\n    'Indian.Bokaro.name': 'Bokaro',\n    'Indian.South Dumdum.name': 'South Dumdum',\n    'Indian.Bellary.name': 'Bellary',\n    'Indian.Patiala.name': 'Patiala',\n    'Indian.Gopalpur.name': 'Gopalpur',\n    'Indian.Agartala.name': 'Agartala',\n    'Indian.Bhagalpur.name': 'Bhagalpur',\n    'Indian.Muzaffarnagar.name': 'Muzaffarnagar',\n    'Indian.Bhatpara.name': 'Bhatpara',\n    'Indian.Panihati.name': 'Panihati',\n    'Indian.Latur.name': 'Latur',\n    'Indian.Dhule.name': 'Dhule',\n    'Indian.Tirupati.name': 'Tirupati',\n    'Indian.Rohtak.name': 'Rohtak',\n    'Indian.Korba.name': 'Korba',\n    'Indian.Bhilwara.name': 'Bhilwara',\n    'Indian.Berhampur.name': 'Berhampur',\n    'Indian.Muzaffarpur.name': 'Muzaffarpur',\n    'Indian.Ahmednagar.name': 'Ahmednagar',\n    'Indian.Mathura.name': 'Mathura',\n    'Indian.Kollam.name': 'Kollam',\n    'Indian.Avadi.name': 'Avadi',\n    'Indian.Kadapa.name': 'Kadapa',\n    'Indian.Kamarhati.name': 'Kamarhati',\n    'Indian.Sambalpur.name': 'Sambalpur',\n    'Indian.Bilaspur.name': 'Bilaspur',\n    'Indian.Shahjahanpur.name': 'Shahjahanpur',\n    'Indian.Satara.name': 'Satara',\n    'Indian.Bijapur.name': 'Bijapur',\n    'Indian.Kakinada.name': 'Kakinada',\n    'Indian.Rampur.name': 'Rampur',\n    'Indian.Shimoga.name': 'Shimoga',\n    'Indian.Chandrapur.name': 'Chandrapur',\n    'Indian.Junagadh.name': 'Junagadh',\n    'Indian.Thrissur.name': 'Thrissur',\n    'Indian.Alwar.name': 'Alwar',\n    'Indian.Bardhaman.name': 'Bardhaman',\n    'Indian.Kulti.name': 'Kulti',\n    'Indian.Nizamabad.name': 'Nizamabad',\n    'Indian.Parbhani.name': 'Parbhani',\n    'Indian.Tumkur.name': 'Tumkur',\n    'Indian.Khammam.name': 'Khammam',\n    'Indian.Ozhukarai.name': 'Ozhukarai',\n    'Indian.Bihar Sharif.name': 'Bihar Sharif',\n    'Indian.Panipat.name': 'Panipat',\n    'Indian.Darbhanga.name': 'Darbhanga',\n    'Indian.Bally.name': 'Bally',\n    'Indian.Aizawl.name': 'Aizawl',\n    'Indian.Dewas.name': 'Dewas',\n    'Indian.Ichalkaranji.name': 'Ichalkaranji',\n    'Indian.Karnal.name': 'Karnal',\n    'Indian.Bathinda.name': 'Bathinda',\n    'Indian.Jalna.name': 'Jalna',\n    'Indian.Eluru.name': 'Eluru',\n    'Indian.Barasat.name': 'Barasat',\n    'Indian.Kirari Suleman Nagar.name': 'Kirari Suleman Nagar',\n    'Indian.Purnia.name': 'Purnia',\n    'Indian.Satna.name': 'Satna',\n    'Indian.Mau.name': 'Mau',\n    'Indian.Sonipat.name': 'Sonipat',\n    'Indian.Farrukhabad.name': 'Farrukhabad',\n    'Indian.Sagar.name': 'Sagar',\n    'Indian.Durg.name': 'Durg',\n    'Indian.Imphal.name': 'Imphal',\n    'Indian.Ratlam.name': 'Ratlam',\n    'Indian.Hapur.name': 'Hapur',\n    'Indian.Arrah.name': 'Arrah',\n    'Indian.Anantapur.name': 'Anantapur',\n    'Indian.Karimnagar.name': 'Karimnagar',\n    'Indian.Etawah.name': 'Etawah',\n    'Indian.Ambarnath.name': 'Ambarnath',\n    'Indian.North Dumdum.name': 'North Dumdum',\n    'Indian.Bharatpur.name': 'Bharatpur',\n    'Indian.Begusarai.name': 'Begusarai',\n    'Indian.New Delhi.name': 'New Delhi',\n    'Indian.Gandhidham.name': 'Gandhidham',\n    'Indian.Baranagar.name': 'Baranagar',\n    'Indian.Tiruvottiyur.name': 'Tiruvottiyur',\n    'Indian.Pondicherry.name': 'Pondicherry',\n    'Indian.Sikar.name': 'Sikar',\n    'Indian.Thoothukudi.name': 'Thoothukudi',\n    'Indian.Rewa.name': 'Rewa',\n    'Indian.Mirzapur.name': 'Mirzapur',\n    'Indian.Raichur.name': 'Raichur',\n    'Indian.Pali.name': 'Pali',\n    'Indian.Ramagundam.name': 'Ramagundam',\n    'Indian.Haridwar.name': 'Haridwar',\n    'Indian.Vijayanagaram.name': 'Vijayanagaram',\n    'Indian.Katihar.name': 'Katihar',\n    'Indian.Nagercoil.name': 'Nagercoil',\n    'Indian.Sri Ganganagar.name': 'Sri Ganganagar',\n    'Indian.Karawal Nagar.name': 'Karawal Nagar',\n    'Indian.Mango.name': 'Mango',\n    'Indian.Thanjavur.name': 'Thanjavur',\n    'Indian.Bulandshahr.name': 'Bulandshahr',\n    'Indian.Uluberia.name': 'Uluberia',\n    'Indian.Katni.name': 'Katni',\n    'Indian.Sambhal.name': 'Sambhal',\n    'Indian.Singrauli.name': 'Singrauli',\n    'Indian.Nadiad.name': 'Nadiad',\n    'Indian.Secunderabad.name': 'Secunderabad',\n    'Indian.Naihati.name': 'Naihati',\n    'Indian.Yamunanagar.name': 'Yamunanagar',\n    'Indian.Bidhannagar.name': 'Bidhannagar',\n    'Indian.Pallavaram.name': 'Pallavaram',\n    'Indian.Bidar.name': 'Bidar',\n    'Indian.Munger.name': 'Munger',\n    'Indian.Panchkula.name': 'Panchkula',\n    'Indian.Burhanpur.name': 'Burhanpur',\n    'Indian.Raurkela Industrial Township.name': 'Raurkela Industrial Township',\n    'Indian.Kharagpur.name': 'Kharagpur',\n    'Indian.Dindigul.name': 'Dindigul',\n    'Indian.Gandhinagar.name': 'Gandhinagar',\n    'Indian.Hospet.name': 'Hospet',\n    'Indian.Nangloi Jat.name': 'Nangloi Jat',\n    'Indian.Malda.name': 'Malda',\n    'Indian.Ongole.name': 'Ongole',\n    'Indian.Deoghar.name': 'Deoghar',\n    'Indian.Chapra.name': 'Chapra',\n    'Indian.Haldia.name': 'Haldia',\n    'Indian.Khandwa.name': 'Khandwa',\n    'Indian.Nandyal.name': 'Nandyal',\n    'Indian.Morena.name': 'Morena',\n    'Indian.Amroha.name': 'Amroha',\n    'Indian.Anand.name': 'Anand',\n    'Indian.Bhind.name': 'Bhind',\n    'Indian.Bhalswa Jahangir Pur.name': 'Bhalswa Jahangir Pur',\n    'Indian.Madhyamgram.name': 'Madhyamgram',\n    'Indian.Bhiwani.name': 'Bhiwani',\n    'Indian.Berhampore.name': 'Berhampore',\n    'Indian.Ambala.name': 'Ambala',\n    'Indian.Morbi.name': 'Morbi',\n    'Indian.Fatehpur.name': 'Fatehpur',\n    'Indian.Raebareli.name': 'Raebareli',\n    'Indian.Mahaboobnagar.name': 'Mahaboobnagar',\n    'Indian.Chittoor.name': 'Chittoor',\n    'Indian.Bhusawal.name': 'Bhusawal',\n    'Indian.Orai.name': 'Orai',\n    'Indian.Bahraich.name': 'Bahraich',\n    'Indian.Vellore.name': 'Vellore',\n    'Indian.Mehsana.name': 'Mehsana',\n    'Indian.Raiganj.name': 'Raiganj',\n    'Indian.Sirsa.name': 'Sirsa',\n    'Indian.Danapur.name': 'Danapur',\n    'Indian.Serampore.name': 'Serampore',\n    'Indian.Sultan Pur Majra.name': 'Sultan Pur Majra',\n    'Indian.Guna.name': 'Guna',\n    'Indian.Jaunpur.name': 'Jaunpur',\n    'Indian.Panvel.name': 'Panvel',\n    'Indian.Shivpuri.name': 'Shivpuri',\n    'Indian.Surendranagar Dudhrej.name': 'Surendranagar Dudhrej',\n    'Indian.Unnao.name': 'Unnao',\n    'Indian.Chinsurah.name': 'Chinsurah',\n    'Indian.Alappuzha.name': 'Alappuzha',\n    'Indian.Kottayam.name': 'Kottayam',\n    'Indian.Machilipatnam.name': 'Machilipatnam',\n    'Indian.Shimla.name': 'Shimla',\n    'Indian.Adoni.name': 'Adoni',\n    'Indian.Udupi.name': 'Udupi',\n    'Indian.Tenali.name': 'Tenali',\n    'Indian.Proddatur.name': 'Proddatur',\n    'Indian.Saharsa.name': 'Saharsa',\n    'Indian.Hindupur.name': 'Hindupur',\n    'Indian.Sasaram.name': 'Sasaram',\n    'Indian.Hajipur.name': 'Hajipur',\n    'Indian.Bhimavaram.name': 'Bhimavaram',\n    'Indian.Kumbakonam.name': 'Kumbakonam',\n    'Indian.Dehri.name': 'Dehri',\n    'Indian.Madanapalle.name': 'Madanapalle',\n    'Indian.Siwan.name': 'Siwan',\n    'Indian.Bettiah.name': 'Bettiah',\n    'Indian.Guntakal.name': 'Guntakal',\n    'Indian.Srikakulam.name': 'Srikakulam',\n    'Indian.Motihari.name': 'Motihari',\n    'Indian.Dharmavaram.name': 'Dharmavaram',\n    'Indian.Gudivada.name': 'Gudivada',\n    'Indian.Phagwara.name': 'Phagwara',\n    'Indian.Narasaraopet.name': 'Narasaraopet',\n    'Indian.Suryapet.name': 'Suryapet',\n    'Indian.Miryalaguda.name': 'Miryalaguda',\n    'Indian.Tadipatri.name': 'Tadipatri',\n    'Indian.Karaikudi.name': 'Karaikudi',\n    'Indian.Kishanganj.name': 'Kishanganj',\n    'Indian.Jamalpur.name': 'Jamalpur',\n    'Indian.Ballia.name': 'Ballia',\n    'Indian.Kavali.name': 'Kavali',\n    'Indian.Tadepalligudem.name': 'Tadepalligudem',\n    'Indian.Amaravati.name': 'Amaravati',\n    'Indian.Buxar.name': 'Buxar',\n    'Indian.Jehanabad.name': 'Jehanabad',\n    'Indian.Gangtok.name': 'Gangtok',\n\n    // Mongol\n    'Mongol.Ulaanbaatar.name': 'Ulaanbaatar',\n    'Mongol.Erdenet.name': 'Erdenet',\n    'Mongol.Darkhan.name': 'Darkhan',\n    'Mongol.Choibalsan.name': 'Choibalsan',\n    'Mongol.M\u00F6r\u00F6n.name': 'M\u00F6r\u00F6n',\n    'Mongol.Nalaikh.name': 'Nalaikh',\n    'Mongol.Bayankhongor.name': 'Bayankhongor',\n    'Mongol.\u00D6lgii.name': '\u00D6lgii',\n    'Mongol.Khovd.name': 'Khovd',\n    'Mongol.Arvaikheer.name': 'Arvaikheer',\n    'Mongol.Ulaangom.name': 'Ulaangom',\n    'Mongol.Baganuur.name': 'Baganuur',\n    'Mongol.Sainshand.name': 'Sainshand',\n    'Mongol.Tsetserleg.name': 'Tsetserleg',\n    'Mongol.S\u00FCkhbaatar.name': 'S\u00FCkhbaatar',\n    'Mongol.\u00D6nd\u00F6rkhaan.name': '\u00D6nd\u00F6rkhaan',\n    'Mongol.Dalanzadgad.name': 'Dalanzadgad',\n    'Mongol.Z\u00FC\u00FCnkharaa.name': 'Z\u00FC\u00FCnkharaa',\n    'Mongol.Uliastai.name': 'Uliastai',\n    'Mongol.Altai.name': 'Altai',\n    'Mongol.Baruun-Urt.name': 'Baruun-Urt',\n    'Mongol.Mandalgovi.name': 'Mandalgovi',\n    'Mongol.Zuunmod.name': 'Zuunmod',\n    'Mongol.Zamyn-\u00DC\u00FCd.name': 'Zamyn-\u00DC\u00FCd',\n    'Mongol.Bulgan.name': 'Bulgan',\n    'Mongol.Kharkhorin.name': 'Kharkhorin',\n    'Mongol.Choir.name': 'Choir',\n    'Mongol.Bor-\u00D6nd\u00F6r.name': 'Bor-\u00D6nd\u00F6r',\n    'Mongol.Sharyngo.name': 'Sharyngo',\n\n    // Roman\n    'Roman.Roma.name': 'Roma',\n    'Roman.Ariminum.name': 'Ariminum',\n    'Roman.Belum.name': 'Belum',\n    'Roman.Placentia.name': 'Placentia',\n    'Roman.Tarraco.name': 'Tarraco',\n    'Roman.Italica.name': 'Italica',\n    'Roman.Mod.name': 'Mod',\n    'Roman.Salernum.name': 'Salernum',\n    'Roman.Bononia.name': 'Bononia',\n    'Roman.Forum Livii.name': 'Forum Livii',\n    'Roman.Regium Lepidi.name': 'Regium Lepidi',\n    'Roman.Aquileia.name': 'Aquileia',\n    'Roman.Ascrivium.name': 'Ascrivium',\n    'Roman.Valentia Edetanorum.name': 'Valentia Edetanorum',\n    'Roman.Scalabis.name': 'Scalabis',\n    'Roman.Villa Euracini.name': 'Villa Euracini',\n    'Roman.Palma.name': 'Palma',\n    'Roman.Colonia Narbo Martius.name': 'Colonia Narbo Martius',\n    'Roman.Massa.name': 'Massa',\n    'Roman.Pistoria.name': 'Pistoria',\n    'Roman.Segovia.name': 'Segovia',\n    'Roman.Gerunda.name': 'Gerunda',\n    'Roman.Pompaelo.name': 'Pompaelo',\n    'Roman.Naissus.name': 'Naissus',\n    'Roman.Brigantium.name': 'Brigantium',\n    'Roman.Florentia.name': 'Florentia',\n    'Roman.Vesontio.name': 'Vesontio',\n    'Roman.Lutetia Parisiorum.name': 'Lutetia Parisiorum',\n    'Roman.Atuatuca Tungrorum.name': 'Atuatuca Tungrorum',\n    'Roman.Iulia Romula Hispalis.name': 'Iulia Romula Hispalis',\n    'Roman.Augusta Raurica.name': 'Augusta Raurica',\n    'Roman.Noviodunum.name': 'Noviodunum',\n    'Roman.Lugdunum.name': 'Lugdunum',\n    'Roman.Siscia.name': 'Siscia',\n    'Roman.Marsonia.name': 'Marsonia',\n    'Roman.Augusta Treverorum.name': 'Augusta Treverorum',\n    'Roman.Castra Legionis.name': 'Castra Legionis',\n    'Roman.Augusta Taurinorum.name': 'Augusta Taurinorum',\n    'Roman.Augusta Praetoria Salassorum.name': 'Augusta Praetoria Salassorum',\n    'Roman.Emerita Augusta.name': 'Emerita Augusta',\n    'Roman.Norba Caesarina.name': 'Norba Caesarina',\n    'Roman.Lucus Augusta.name': 'Lucus Augusta',\n    'Roman.Caesarea.name': 'Caesarea',\n    'Roman.Bracara Augusta.name': 'Bracara Augusta',\n    'Roman.Novaesium.name': 'Novaesium',\n    'Roman.Castra Vetera.name': 'Castra Vetera',\n    'Roman.Pons Drusi.name': 'Pons Drusi',\n    'Roman.Ovilava.name': 'Ovilava',\n    'Roman.Iuvavum.name': 'Iuvavum',\n    'Roman.Augusta Vindelicorum.name': 'Augusta Vindelicorum',\n    'Roman.Turicum.name': 'Turicum',\n    'Roman.Asturica Augusta.name': 'Asturica Augusta',\n    'Roman.Borbetomagus.name': 'Borbetomagus',\n    'Roman.Caesaraugusta.name': 'Caesaraugusta',\n    'Roman.Sirmium.name': 'Sirmium',\n    'Roman.Sorviodurum.name': 'Sorviodurum',\n    'Roman.Mogontiacum.name': 'Mogontiacum',\n    'Roman.Argentoratum.name': 'Argentoratum',\n    'Roman.Bonna.name': 'Bonna',\n    'Roman.Noviomagus.name': 'Noviomagus',\n    'Roman.Castellum apud Confluentes.name': 'Castellum apud Confluentes',\n    'Roman.Divodurum.name': 'Divodurum',\n    'Roman.Caesaromagus.name': 'Caesaromagus',\n    'Roman.Ambianum.name': 'Ambianum',\n    'Roman.Faventia Paterna Barcino.name': 'Faventia Paterna Barcino',\n    'Roman.Abila.name': 'Abila',\n    'Roman.Lousonna.name': 'Lousonna',\n    'Roman.Ulpia Noviomagus Batavorum.name': 'Ulpia Noviomagus Batavorum',\n    'Roman.Rigomagus.name': 'Rigomagus',\n    'Roman.Aquae Mattiacorum.name': 'Aquae Mattiacorum',\n    'Roman.Mursa.name': 'Mursa',\n    'Roman.Emona.name': 'Emona',\n    'Roman.Vindonissa.name': 'Vindonissa',\n    'Roman.Aventicum.name': 'Aventicum',\n    'Roman.Praetorium Agrippinae.name': 'Praetorium Agrippinae',\n    'Roman.Lugdunum Batavorum.name': 'Lugdunum Batavorum',\n    'Roman.Aequum.name': 'Aequum',\n    'Roman.Londinium.name': 'Londinium',\n    'Roman.Albanianis.name': 'Albanianis',\n    'Roman.Lauri.name': 'Lauri',\n    'Roman.Durovernum Cantiacorum.name': 'Durovernum Cantiacorum',\n    'Roman.Regulbium.name': 'Regulbium',\n    'Roman.Rutupiae.name': 'Rutupiae',\n    'Roman.Viminacium.name': 'Viminacium',\n    'Roman.Camulodunum.name': 'Camulodunum',\n    'Roman.Traiectum.name': 'Traiectum',\n    'Roman.Matilo.name': 'Matilo',\n    'Roman.Forum Hadriani.name': 'Forum Hadriani',\n    'Roman.Nigrum Pullum.name': 'Nigrum Pullum',\n    'Roman.Lindum Colonia.name': 'Lindum Colonia',\n    'Roman.Ratae Corieltauvorum.name': 'Ratae Corieltauvorum',\n    'Roman.Durocobrivis.name': 'Durocobrivis',\n    'Roman.Colonia Agrippina.name': 'Colonia Agrippina',\n    'Roman.Durocornovium.name': 'Durocornovium',\n    'Roman.Verulamium.name': 'Verulamium',\n    'Roman.Letocetum.name': 'Letocetum',\n    'Roman.Dubris.name': 'Dubris',\n    'Roman.Danum.name': 'Danum',\n    'Roman.Mediolanum.name': 'Mediolanum',\n    'Roman.Isca Dumnoniorum.name': 'Isca Dumnoniorum',\n    'Roman.Blestium.name': 'Blestium',\n    'Roman.Viroconium Cornoviorum.name': 'Viroconium Cornoviorum',\n    'Roman.Aquae Sulis.name': 'Aquae Sulis',\n    'Roman.Durnovaria.name': 'Durnovaria',\n    'Roman.Lindinis.name': 'Lindinis',\n    'Roman.Ad Flexum.name': 'Ad Flexum',\n    'Roman.Clausentum.name': 'Clausentum',\n    'Roman.Venta Belgarum.name': 'Venta Belgarum',\n    'Roman.Calleva Atrebatum.name': 'Calleva Atrebatum',\n    'Roman.Duroliponte.name': 'Duroliponte',\n    'Roman.Concangis.name': 'Concangis',\n    'Roman.Condate.name': 'Condate',\n    'Roman.Corinium Dobunnorum.name': 'Corinium Dobunnorum',\n    'Roman.Eboracum.name': 'Eboracum',\n    'Roman.Luguvalium.name': 'Luguvalium',\n    'Roman.Arae Flaviae.name': 'Arae Flaviae',\n    'Roman.Isca Augusta.name': 'Isca Augusta',\n    'Roman.Lagentium.name': 'Lagentium',\n    'Roman.Lopodunum.name': 'Lopodunum',\n    'Roman.Moridunum.name': 'Moridunum',\n    'Roman.Venta Silurum.name': 'Venta Silurum',\n    'Roman.Deva Victrix.name': 'Deva Victrix',\n    'Roman.Mamucium.name': 'Mamucium',\n    'Roman.Olicana.name': 'Olicana',\n    'Roman.Vinovia.name': 'Vinovia',\n    'Roman.Bonames.name': 'Bonames',\n    'Roman.Coria.name': 'Coria',\n    'Roman.Gerulata.name': 'Gerulata',\n    'Roman.Vindobona.name': 'Vindobona',\n    'Roman.Biriciana.name': 'Biriciana',\n    'Roman.Cannstatt Castrum.name': 'Cannstatt Castrum',\n    'Roman.Colonia Nervia Glevensium.name': 'Colonia Nervia Glevensium',\n    'Roman.Sumelocenna.name': 'Sumelocenna',\n    'Roman.Traiectum ad Nicrem.name': 'Traiectum ad Nicrem',\n    'Roman.Castra Batavar.name': 'Castra Batavar',\n    'Roman.Nida.name': 'Nida',\n    'Roman.Lactodurum.name': 'Lactodurum',\n    'Roman.Bovium.name': 'Bovium',\n    'Roman.Burgodunum.name': 'Burgodunum',\n    'Roman.Lentia.name': 'Lentia',\n    'Roman.Aquae Granni.name': 'Aquae Granni',\n    'Roman.Complutum.name': 'Complutum',\n    'Roman.Aeminium.name': 'Aeminium',\n    'Roman.Traiectum ad Mosam.name': 'Traiectum ad Mosam',\n    'Roman.Coriovallum.name': 'Coriovallum',\n    'Roman.Portus Lemanis.name': 'Portus Lemanis',\n    'Roman.Andautonia.name': 'Andautonia',\n    'Roman.Salona.name': 'Salona',\n    'Roman.Cibalae.name': 'Cibalae',\n    'Roman.Aquae Helveticae.name': 'Aquae Helveticae',\n    'Roman.Aquincum.name': 'Aquincum',\n    'Roman.Apulum.name': 'Apulum',\n    'Roman.Pons Aelius.name': 'Pons Aelius',\n    'Roman.Durovigutum.name': 'Durovigutum',\n    'Roman.Aelia Capitolina.name': 'Aelia Capitolina',\n    'Roman.Ala.name': 'Ala',\n    'Roman.Castra Regina.name': 'Castra Regina',\n    'Roman.Theranda.name': 'Theranda',\n    'Roman.Pomaria.name': 'Pomaria',\n    'Roman.Partiscum.name': 'Partiscum',\n    'Roman.Gesoriacum.name': 'Gesoriacum',\n    'Roman.Aurelia Aquensis.name': 'Aurelia Aquensis',\n    'Roman.Urbs Aurelianorum.name': 'Urbs Aurelianorum',\n    'Roman.Venetiae.name': 'Venetiae',\n    'Roman.Ragusium.name': 'Ragusium',\n\n    // Russian\n    'Russian.Moscow.name': 'Moscow',\n    'Russian.Saint Petersburg.name': 'Saint Petersburg',\n    'Russian.Novosibirsk.name': 'Novosibirsk',\n    'Russian.Yekaterinburg.name': 'Yekaterinburg',\n    'Russian.Nizhny Novgorod.name': 'Nizhny Novgorod',\n    'Russian.Kazan.name': 'Kazan',\n    'Russian.Chelyabinsk.name': 'Chelyabinsk',\n    'Russian.Omsk.name': 'Omsk',\n    'Russian.Samara.name': 'Samara',\n    'Russian.Ufa.name': 'Ufa',\n    'Russian.Rostov-on-Don.name': 'Rostov-on-Don',\n    'Russian.Krasnoyarsk.name': 'Krasnoyarsk',\n    'Russian.Voronezh.name': 'Voronezh',\n    'Russian.Perm.name': 'Perm',\n    'Russian.Volgograd.name': 'Volgograd',\n    'Russian.Krasnodar.name': 'Krasnodar',\n    'Russian.Saratov.name': 'Saratov',\n    'Russian.Tyumen.name': 'Tyumen',\n    'Russian.Makhachkala.name': 'Makhachkala',\n    'Russian.Tolyatti.name': 'Tolyatti',\n    'Russian.Barnaul.name': 'Barnaul',\n    'Russian.Ulyanovsk.name': 'Ulyanovsk',\n    'Russian.Izhevsk.name': 'Izhevsk',\n    'Russian.Vladivostok.name': 'Vladivostok',\n    'Russian.Irkutsk.name': 'Irkutsk',\n    'Russian.Khabarovsk.name': 'Khabarovsk',\n    'Russian.Yaroslavl.name': 'Yaroslavl',\n    'Russian.Tomsk.name': 'Tomsk',\n    'Russian.Orenburg.name': 'Orenburg',\n    'Russian.Kemerovo.name': 'Kemerovo',\n    'Russian.Novokuznetsk.name': 'Novokuznetsk',\n    'Russian.Tula.name': 'Tula',\n    'Russian.Ryazan.name': 'Ryazan',\n    'Russian.Kirov.name': 'Kirov',\n    'Russian.Astrakhan.name': 'Astrakhan',\n    'Russian.Naberezhnye Chelny.name': 'Naberezhnye Chelny',\n    'Russian.Sochi.name': 'Sochi',\n    'Russian.Penza.name': 'Penza',\n    'Russian.Lipetsk.name': 'Lipetsk',\n    'Russian.Cheboksary.name': 'Cheboksary',\n    'Russian.Balashikha.name': 'Balashikha',\n    'Russian.Kaliningrad.name': 'Kaliningrad',\n    'Russian.Kursk.name': 'Kursk',\n    'Russian.Stavropol.name': 'Stavropol',\n    'Russian.Ulan-Ude.name': 'Ulan-Ude',\n    'Russian.Bryansk.name': 'Bryansk',\n    'Russian.Tver.name': 'Tver',\n    'Russian.Magnitogorsk.name': 'Magnitogorsk',\n    'Russian.Ivanovo.name': 'Ivanovo',\n    'Russian.Belgorod.name': 'Belgorod',\n    'Russian.Surgut.name': 'Surgut',\n    'Russian.Vladimir.name': 'Vladimir',\n    'Russian.Arkhangelsk.name': 'Arkhangelsk',\n    'Russian.Nizhny Tagil.name': 'Nizhny Tagil',\n    'Russian.Kaluga.name': 'Kaluga',\n    'Russian.Chita.name': 'Chita',\n    'Russian.Saransk.name': 'Saransk',\n    'Russian.Yakutsk.name': 'Yakutsk',\n    'Russian.Smolensk.name': 'Smolensk',\n    'Russian.Podolsk.name': 'Podolsk',\n    'Russian.Volzhsky.name': 'Volzhsky',\n    'Russian.Vladikavkaz.name': 'Vladikavkaz',\n    'Russian.Vologda.name': 'Vologda',\n    'Russian.Cherepovets.name': 'Cherepovets',\n    'Russian.Kurgan.name': 'Kurgan',\n    'Russian.Oryol.name': 'Oryol',\n    'Russian.Grozny.name': 'Grozny',\n    'Russian.Murmansk.name': 'Murmansk',\n    'Russian.Tambov.name': 'Tambov',\n    'Russian.Petrozavodsk.name': 'Petrozavodsk',\n    'Russian.Sterlitamak.name': 'Sterlitamak',\n    'Russian.Kostroma.name': 'Kostroma',\n    'Russian.Nizhnevartovsk.name': 'Nizhnevartovsk',\n    'Russian.Novorossiysk.name': 'Novorossiysk',\n    'Russian.Yoshkar-Ola.name': 'Yoshkar-Ola',\n    'Russian.Taganrog.name': 'Taganrog',\n    'Russian.Komsomolsk-on-Amur.name': 'Komsomolsk-on-Amur',\n    'Russian.Khimki.name': 'Khimki',\n    'Russian.Syktyvkar.name': 'Syktyvkar',\n    'Russian.Nalchik.name': 'Nalchik',\n    'Russian.Nizhnekamsk.name': 'Nizhnekamsk',\n    'Russian.Shakhty.name': 'Shakhty',\n    'Russian.Dzerzhinsk.name': 'Dzerzhinsk',\n    'Russian.Bratsk.name': 'Bratsk',\n    'Russian.Orsk.name': 'Orsk',\n    'Russian.Angarsk.name': 'Angarsk',\n    'Russian.Engels.name': 'Engels',\n    'Russian.Blagoveshchensk.name': 'Blagoveshchensk',\n    'Russian.Stary Oskol.name': 'Stary Oskol',\n    'Russian.Veliky Novgorod.name': 'Veliky Novgorod',\n    'Russian.Korolyov.name': 'Korolyov',\n    'Russian.Pskov.name': 'Pskov',\n    'Russian.Mytishchi.name': 'Mytishchi',\n    'Russian.Biysk.name': 'Biysk',\n    'Russian.Lyubertsy.name': 'Lyubertsy',\n    'Russian.Prokopyevsk.name': 'Prokopyevsk',\n    'Russian.Yuzhno-Sakhalinsk.name': 'Yuzhno-Sakhalinsk',\n    'Russian.Balakovo.name': 'Balakovo',\n    'Russian.Armavir.name': 'Armavir',\n    'Russian.Rybinsk.name': 'Rybinsk',\n    'Russian.Severodvinsk.name': 'Severodvinsk',\n    'Russian.Abakan.name': 'Abakan',\n    'Russian.Petropavlovsk-Kamchatsky.name': 'Petropavlovsk-Kamchatsky',\n    'Russian.Norilsk.name': 'Norilsk',\n    'Russian.Syzran.name': 'Syzran',\n    'Russian.Volgodonsk.name': 'Volgodonsk',\n    'Russian.Ussuriysk.name': 'Ussuriysk',\n    'Russian.Kamensk-Uralsky.name': 'Kamensk-Uralsky',\n    'Russian.Novocherkassk.name': 'Novocherkassk',\n    'Russian.Zlatoust.name': 'Zlatoust',\n    'Russian.Elektrostal.name': 'Elektrostal',\n    'Russian.Almetyevsk.name': 'Almetyevsk',\n    'Russian.Krasnogorsk.name': 'Krasnogorsk',\n    'Russian.Salavat.name': 'Salavat',\n    'Russian.Miass.name': 'Miass',\n    'Russian.Nakhodka.name': 'Nakhodka',\n    'Russian.Kopeysk.name': 'Kopeysk',\n    'Russian.Pyatigorsk.name': 'Pyatigorsk',\n    'Russian.Rubtsovsk.name': 'Rubtsovsk',\n    'Russian.Berezniki.name': 'Berezniki',\n    'Russian.Kolomna.name': 'Kolomna',\n    'Russian.Maykop.name': 'Maykop',\n    'Russian.Odintsovo.name': 'Odintsovo',\n    'Russian.Khasavyurt.name': 'Khasavyurt',\n    'Russian.Kovrov.name': 'Kovrov',\n    'Russian.Kislovodsk.name': 'Kislovodsk',\n    'Russian.Neftekamsk.name': 'Neftekamsk',\n    'Russian.Nefteyugansk.name': 'Nefteyugansk',\n    'Russian.Novocheboksarsk.name': 'Novocheboksarsk',\n    'Russian.Serpukhov.name': 'Serpukhov',\n    'Russian.Shchyolkovo.name': 'Shchyolkovo',\n    'Russian.Novomoskovsk.name': 'Novomoskovsk',\n    'Russian.Bataysk.name': 'Bataysk',\n    'Russian.Pervouralsk.name': 'Pervouralsk',\n    'Russian.Domodedovo.name': 'Domodedovo',\n    'Russian.Derbent.name': 'Derbent',\n    'Russian.Cherkessk.name': 'Cherkessk',\n    'Russian.Orekhovo-Zuyevo.name': 'Orekhovo-Zuyevo',\n    'Russian.Nevinnomyssk.name': 'Nevinnomyssk',\n    'Russian.Dimitrovgrad.name': 'Dimitrovgrad',\n    'Russian.Nazran.name': 'Nazran',\n    'Russian.Kyzyl.name': 'Kyzyl',\n    'Russian.Oktyabrsky.name': 'Oktyabrsky',\n    'Russian.Obninsk.name': 'Obninsk',\n    'Russian.Kaspiysk.name': 'Kaspiysk',\n    'Russian.Novy Urengoy.name': 'Novy Urengoy',\n    'Russian.Ramenskoye.name': 'Ramenskoye',\n    'Russian.Kamyshin.name': 'Kamyshin',\n    'Russian.Murom.name': 'Murom',\n    'Russian.Zhukovsky.name': 'Zhukovsky',\n\n    // Zulu\n    'Zulu.uMgungundlovu.name': 'uMgungundlovu',\n    'Zulu.Nobamba.name': 'Nobamba',\n    'Zulu.Bulawayo.name': 'Bulawayo',\n    'Zulu.KwaDukuza.name': 'KwaDukuza',\n    'Zulu.Nongoma.name': 'Nongoma',\n    'Zulu.oNdini.name': 'oNdini',\n    'Zulu.Nodwengu.name': 'Nodwengu',\n    'Zulu.Ndondakusuka.name': 'Ndondakusuka',\n    'Zulu.Babanango.name': 'Babanango',\n    'Zulu.Khangela.name': 'Khangela',\n    'Zulu.Kwahlomendlini.name': 'Kwahlomendlini',\n    'Zulu.Hlobane.name': 'Hlobane',\n    'Zulu.eThekwini.name': 'eThekwini',\n    'Zulu.Mlambongwenya.name': 'Mlambongwenya',\n    'Zulu.Eziqwaqweni.name': 'Eziqwaqweni',\n    'Zulu.Isiphezi.name': 'Isiphezi',\n    'Zulu.Masotsheni.name': 'Masotsheni',\n    'Zulu.Mtunzini.name': 'Mtunzini',\n    'Zulu.Nyakamubi.name': 'Nyakamubi',\n    'Zulu.Hlatikulu.name': 'Hlatikulu',\n    'Zulu.Mthonjaneni.name': 'Mthonjaneni',\n    'Zulu.Empangeni.name': 'Empangeni',\n    'Zulu.Pongola.name': 'Pongola',\n    'Zulu.Tungela.name': 'Tungela',\n    'Zulu.Kwamashu.name': 'Kwamashu',\n    'Zulu.Ingwavuma.name': 'Ingwavuma',\n    'Zulu.Hluhluwe.name': 'Hluhluwe',\n    'Zulu.Mtubatuba.name': 'Mtubatuba',\n    'Zulu.Mhlahlandlela.name': 'Mhlahlandlela',\n    'Zulu.Mthatha.name': 'Mthatha',\n    'Zulu.Maseru.name': 'Maseru',\n    'Zulu.Lobamba.name': 'Lobamba',\n    'Zulu.Qunu.name': 'Qunu',\n  }\n);\n\ni18next.addResources(\n  'en',\n  'yield',\n  {\n    'Gold.name': 'Gold',\n    'Luxuries.name': 'Luxuries',\n    'Research.name': 'Research',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'civilization',\n  {\n    'American.name': 'American',\n    'American.nation': 'America',\n    'American.plural': 'Americans',\n    'Aztec.name': 'Aztec',\n    'Aztec.nation': 'the Aztec Empire',\n    'Aztec.plural': 'Aztecs',\n    'Babylonian.name': 'Babylonian',\n    'Babylonian.nation': 'Babylon',\n    'Babylonian.plural': 'Babylonians',\n    'Chinese.name': 'Chinese',\n    'Chinese.nation': 'China',\n    'Chinese.plural': 'Chinese',\n    'Egyptian.name': 'Egyptian',\n    'Egyptian.nation': 'Egypt',\n    'Egyptian.plural': 'Egyptians',\n    'English.name': 'English',\n    'English.nation': 'England',\n    'English.plural': 'English',\n    'French.name': 'French',\n    'French.nation': 'France',\n    'French.plural': 'French',\n    'German.name': 'German',\n    'German.nation': 'Germany',\n    'German.plural': 'Germans',\n    'Greek.name': 'Greek',\n    'Greek.nation': 'Greece',\n    'Greek.plural': 'Greeks',\n    'Indian.name': 'Indian',\n    'Indian.nation': 'India',\n    'Indian.plural': 'Indians',\n    'Mongol.name': 'Mongol',\n    'Mongol.nation': 'Mongolia',\n    'Mongol.plural': 'Mongols',\n    'Roman.name': 'Roman',\n    'Roman.nation': 'Rome',\n    'Roman.plural': 'Romans',\n    'Russian.name': 'Russian',\n    'Russian.nation': 'Russia',\n    'Russian.plural': 'Russians',\n    'Zulu.name': 'Zulu',\n    'Zulu.nation': 'Zululand',\n    'Zulu.plural': 'Zulus',\n\n    // Leaders\n    'Leader.AbrahamLincoln.name': 'Abraham Lincoln',\n    'Leader.MoctezumaII.name': 'Moctezuma II',\n    'Leader.Hammurabi.name': 'Hammurabi',\n    'Leader.MaoZedong.name': 'Mao Zedong',\n    'Leader.RamessesII.name': 'Ramesses II',\n    'Leader.ElizabethI.name': 'Elizabeth I',\n    'Leader.NapoleonI.name': 'Napoleon I',\n    'Leader.FrederickTheGreat.name': 'Frederick the Great',\n    'Leader.AlexanderTheGreat.name': 'Alexander the Great',\n    'Leader.MahatmaGandhi.name': 'Mahatma Gandhi',\n    'Leader.GenghisKhan.name': 'Genghis Khan',\n    'Leader.JuliusCaesar.name': 'Julius Caesar',\n    'Leader.JosephStalin.name': 'Joseph Stalin',\n    'Leader.Shaka.name': 'Shaka',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en-GB',\n  'diplomacy',\n  {\n    'Dialogue.accept-peace.neutral': 'We affirm this treaty of eternal friendship and goodwill between the people of the $t({{interaction.by.civilization._}}.name, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }) and $t({{interaction.for.0.civilization._}}.name, { \"defaultValue\": \"{{interaction.for.0.civilization._}}\", \"ns\": \"civilization\" }) civilisations.',\n    'Dialogue.decline-peace.neutral': 'Very well, we will mobilise our armies for WAR! You will pay for your foolish pride!',\n    'ExchangeKnowledge': 'We notice that your primitive civilisation has not even discovered $t({{interaction.advances.0._}}.name, { \"defaultValue\": \"{{interaction.advances.0._}}\", \"ns\": \"science\" }). Do you care to exchange knowledge with us?',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'diplomacy',\n  {\n    'Action.Terminate': 'Good bye!',\n\n    'Dialogue.accept-peace.neutral': 'We affirm this treaty of eternal friendship and goodwill between the people of the $t({{interaction.by.civilization._}}.name, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }) and $t({{interaction.for.0.civilization._}}.name, { \"defaultValue\": \"{{interaction.for.0.civilization._}}\", \"ns\": \"civilization\" }) civilizations.',\n    'Dialogue.decline-demand.neutral': 'In spite of your disrespectful attitude, we will spare you from the wrath of our mighty armies.',\n    'Dialogue.decline-peace.neutral': 'Very well, we will mobilize our armies for WAR! You will pay for your foolish pride!',\n    'Dialogue.handover': 'You respond...',\n    'Dialogue.welcome.no-peace': 'Greetings from $t(Leader.{{interaction.by.civilization.leader._}}.name, { \"defaultValue\": \"{{interaction.by.civilization.leader._}}\", \"ns\": \"civilization\" }), leader of the powerful $t({{interaction.by.civilization._}}.nation, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }).',\n    'Dialogue.welcome.peace': 'Greetings from $t(Leader.{{interaction.by.civilization.leader._}}.name, { \"defaultValue\": \"{{interaction.by.civilization.leader._}}\", \"ns\": \"civilization\" }), leader of the powerful $t({{interaction.by.civilization._}}.nation, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }). We always enjoy spending time with our good friends $t({{interaction.for.0.civilization._}}.nation, { \"defaultValue\": \"{{interaction.for.0.civilization._}}\", \"ns\": \"civilization\" }).',\n    'Dialogue.welcome-peace': 'We welcome peace with the $t({{interaction.for.0.civilization._}}.plural, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }).',\n\n    'DemandTribute': 'We demand tribute for our patience.',\n\n    'ExchangeKnowledge': 'We notice that your primitive civilization has not even discovered $t({{interaction.advances.0._}}.name, { \"defaultValue\": \"{{interaction.advances.0._}}\", \"ns\": \"science\" }). Do you care to exchange knowledge with us?',\n\n    'Initiate': 'An emissary from $t({{interaction.by.civilization._}}.nation, { \"defaultValue\": \"{{interaction.by.civilization._}}\", \"ns\": \"civilization\" }) wishes to speak with you. Will you receive them?',\n\n    'OfferPeace': 'You may be worthy to make peace with us. We have prepared a treaty for your signature.',\n\n    'Resolution.Initiate.Accept': 'Yes',\n    'Resolution.Initiate.Decline': 'No',\n    'Resolution.OfferPeace.Accept': \"Accept\",\n    'Resolution.OfferPeace.Decline': 'Reject',\n    'Resolution.ExchangeKnowledge.Accept': \"OK, let's exchange knowledge.\",\n    'Resolution.ExchangeKnowledge.Decline': 'No, we do not need $t({{interaction.proposal.advances.0._}}.name, { \"defaultValue\": \"{{interaction.proposal.advances.0._}}\", \"ns\": \"science\" }).',\n    'Resolution.Dialogue.Acknowledge': 'OK',\n    'Resolution.DemandTribute.Accept': 'We present you with a gift of {{interaction.proposal.tribute.value, number}} $t({{interaction.proposal.tribute._}}.name, { \"defaultValue\": \"{{interaction.proposal.tribute._}}\", \"ns\": \"yield\" }) in tribute to your peaceful nature.',\n    'Resolution.DemandTribute.Decline': 'We ignore your feeble threats.',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'government',\n  {\n    'Anarchy.name': 'Anarchy',\n    'Communism.name': 'Communism',\n    'Democracy.name': 'Democracy',\n    'Despotism.name': 'Despotism',\n    'Monarchy.name': 'Monarchy',\n    'Republic.name': 'Republic',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en-GB',\n  'science',\n  {\n    'Industrialization.name': 'Industrialisation',\n    'LaborUnion.name': 'Labour Union',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'science',\n  {\n    'AdvancedFlight.name': 'Advanced Flight',\n    'Alphabet.name': 'Alphabet',\n    'Astronomy.name': 'Astronomy',\n    'AtomicTheory.name': 'Atomic Theory',\n    'Automobile.name': 'Automobile',\n    'Banking.name': 'Banking',\n    'BridgeBuilding.name': 'Bridge Building',\n    'BronzeWorking.name': 'Bronze Working',\n    'CeremonialBurial.name': 'Ceremonial Burial',\n    'Chemistry.name': 'Chemistry',\n    'Chivalry.name': 'Chivalry',\n    'CodeOfLaws.name': 'Code of Laws',\n    'Combustion.name': 'Combustion',\n    'Communism.name': 'Communism',\n    'Computers.name': 'Computers',\n    'Conscription.name': 'Conscription',\n    'Construction.name': 'Construction',\n    'Corporation.name': 'Corporation',\n    'Currency.name': 'Currency',\n    'Democracy.name': 'Democracy',\n    'Electricity.name': 'Electricity',\n    'Electronics.name': 'Electronics',\n    'Engineering.name': 'Engineering',\n    'Explosives.name': 'Explosives',\n    'Feudalism.name': 'Feudalism',\n    'Flight.name': 'Flight',\n    'FusionPower.name': 'Fusion Power',\n    'GeneticEngineering.name': 'Genetic Engineering',\n    'Gunpowder.name': 'Gunpowder',\n    'HorsebackRiding.name': 'Horseback Riding',\n    'Industrialization.name': 'Industrialization',\n    'Invention.name': 'Invention',\n    'IronWorking.name': 'Iron Working',\n    'LaborUnion.name': 'Labor Union',\n    'Literacy.name': 'Literacy',\n    'Magnetism.name': 'Magnetism',\n    'MapMaking.name': 'Map Making',\n    'Masonry.name': 'Masonry',\n    'MassProduction.name': 'Mass Production',\n    'Mathematics.name': 'Mathematics',\n    'Medicine.name': 'Medicine',\n    'Metallurgy.name': 'Metallurgy',\n    'Monarchy.name': 'Monarchy',\n    'Mysticism.name': 'Mysticism',\n    'Navigation.name': 'Navigation',\n    'NuclearFission.name': 'Nuclear Fission',\n    'NuclearPower.name': 'Nuclear Power',\n    'Philosophy.name': 'Philosophy',\n    'Physics.name': 'Physics',\n    'Plastics.name': 'Plastics',\n    'Pottery.name': 'Pottery',\n    'Railroad.name': 'Railroad',\n    'Recycling.name': 'Recycling',\n    'Refining.name': 'Refining',\n    'Religion.name': 'Religion',\n    'Robotics.name': 'Robotics',\n    'Rocketry.name': 'Rocketry',\n    'SpaceFlight.name': 'Space Flight',\n    'SteamEngine.name': 'Steam Engine',\n    'Steel.name': 'Steel',\n    'Superconductor.name': 'Superconductor',\n    'TheRepublic.name': 'The Republic',\n    'TheWheel.name': 'The Wheel',\n    'TheoryOfGravity.name': 'Theory of Gravity',\n    'Trade.name': 'Trade',\n    'University.name': 'University',\n    'Writing.name': 'Writing',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'spaceship',\n  {\n    'Fuel.name': 'Fuel',\n    'Habitation.name': 'Habitation',\n    'LifeSupport.name': 'LifeSupport',\n    'Power.name': 'Power',\n    'Propulsion.name': 'Propulsion',\n    'Structural.name': 'Structural',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'trade',\n  {\n    'Luxuries.name': 'Luxuries',\n    'Research.name': 'Research',\n    'Tax.name': 'Tax',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en-GB',\n  'unit',\n  {\n    'MechanizedInfantry.name': 'Mechanised Infantry',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'unit',\n  {\n    // Units\n    'Artillery.name': 'Artillery',\n    'Battleship.name': 'Battleship',\n    'Bomber.name': 'Bomber',\n    'Cannon.name': 'Cannon',\n    'Caravan.name': 'Caravan',\n    'Carrier.name': 'Carrier',\n    'Catapult.name': 'Catapult',\n    'Chariot.name': 'Chariot',\n    'Cruiser.name': 'Cruiser',\n    'Diplomat.name': 'Diplomat',\n    'Fighter.name': 'Fighter',\n    'Frigate.name': 'Frigate',\n    'Horseman.name': 'Horseman',\n    'Ironclad.name': 'Ironclad',\n    'Knight.name': 'Knight',\n    'MechanizedInfantry.name': 'Mechanized Infantry',\n    'Musketman.name': 'Musketman',\n    'Nuclear.name': 'Nuclear',\n    'Rifleman.name': 'Rifleman',\n    'Sail.name': 'Sail',\n    'Settlers.name': 'Settlers',\n    'Spearman.name': 'Spearman',\n    'Submarine.name': 'Submarine',\n    'Swordman.name': 'Swordman',\n    'Tank.name': 'Tank',\n    'Transport.name': 'Transport',\n    'Trireme.name': 'Trireme',\n    'Warrior.name': 'Warrior',\n\n    // Improvements\n    'Improvement.Fortified.name': 'Fortified',\n    'Improvement.Veteran.name': 'Veteran',\n\n    // Yields\n    'Yield.Attack.name': 'Attack',\n    'Yield.Defence.name': 'Defence',\n    'Yield.Movement.name': 'Movement',\n    'Yield.Moves.name': 'Moves',\n    'Yield.Visibility.name': 'Visibility',\n\n    // Actions\n    'Action.Attack.name': 'Attack',\n    'Action.BuildIrrigation.name': 'Build irrigation',\n    'Action.BuildMine.name': 'Build mine',\n    'Action.BuildRailroad.name': 'Build railroad',\n    'Action.BuildRoad.name': 'Build road',\n    'Action.CaptureCity.name': 'Capture city',\n    'Action.ClearForest.name': 'Clear forest',\n    'Action.ClearJungle.name': 'Clear jungle',\n    'Action.ClearSwamp.name': 'Clear swamp',\n    'Action.Disband.name': 'Disband',\n    'Action.Disembark.name': 'Disembark',\n    'Action.Embark.name': 'Embark',\n    'Action.Fortify.name': 'Fortify',\n    'Action.FoundCity.name': 'Found a new city',\n    'Action.Move.name': 'Move',\n    'Action.NoOrders.name': 'No orders',\n    'Action.Pillage.name': 'Pillage',\n    'Action.PlantForest.name': 'Plant forest',\n    'Action.Sleep.name': 'Sleep',\n    'Action.SneakAttack.name': 'Sneak attack',\n    'Action.SneakCaptureCity.name': 'Sneak attack',\n    'Action.Unload.name': 'Unload',\n\n    'Busy.BuildingIrrigation.name': 'Building irrigation',\n    'Busy.BuildingMine.name': 'Building mine',\n    'Busy.BuildingRoad.name': 'Building road',\n    'Busy.BuildingRailroad.name': 'Building railroad',\n    'Busy.ClearingForest.name': 'Clearing forest',\n    'Busy.ClearingJungle.name': 'Clearing jungle',\n    'Busy.ClearingSwamp.name': 'Clearing swamp',\n    'Busy.Fortifying.name': 'Fortifying',\n    'Busy.Sleeping.name': 'Sleeping',\n    'Busy.PlantingForest.name': 'Planting forest',\n\n    'Busy.BuildingIrrigation.icon': 'I',\n    'Busy.BuildingMine.icon': 'M',\n    'Busy.BuildingRoad.icon': 'R',\n    'Busy.BuildingRailroad.icon': 'RR',\n    'Busy.ClearingForest.icon': 'CF',\n    'Busy.ClearingJungle.icon': 'CJ',\n    'Busy.ClearingSwamp.icon': 'CS',\n    'Busy.Fortifying.icon': 'F',\n    'Busy.Sleeping.icon': 'S',\n    'Busy.PlantingForest.icon': 'PF',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'wonder',\n  {\n    'ApolloProgram.name': 'Apollo Program',\n    'Colossus.name': 'Colossus',\n    'CopernicusObservatory.name': 'Copernicus Observatory',\n    'CureForCancer.name': 'Cure for Cancer',\n    'DarwinsVoyage.name': \"Darwin's Voyage\",\n    'GreatLibrary.name': 'Great Library',\n    'GreatWall.name': 'Great Wall',\n    'HangingGardens.name': 'Hanging Gardens',\n    'HooverDam.name': 'Hoover Dam',\n    'IsaacNewtonsCollege.name': \"Isaac Newton's College\",\n    'JsBachsCathedral.name': \"J. S. Bach's Cathedral\",\n    'Lighthouse.name': 'Lighthouse',\n    'MagellansExpedition.name': \"Magellan's Expedition\",\n    'ManhattanProject.name': 'Manhattan Project',\n    'MichelangelosChapel.name': \"Michelangelo's Chapel\",\n    'Oracle.name': 'Oracle',\n    'Pyramids.name': 'Pyramids',\n    'SetiProgram.name': 'SETI Program',\n    'ShakespearesTheatre.name': \"Shakespeare's Theatre\",\n    'UnitedNations.name': 'United Nations',\n    'WomensSuffrage.name': \"Women's Suffrage\",\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en',\n  'world',\n  {\n    // Terrains\n    'Arctic.name': 'Arctic',\n    'Desert.name': 'Desert',\n    'Forest.name': 'Forest',\n    'Grassland.name': 'Grassland',\n    'Hills.name': 'Hills',\n    'Jungle.name': 'Jungle',\n    'Mountains.name': 'Mountains',\n    'Ocean.name': 'Ocean',\n    'Plains.name': 'Plains',\n    'River.name': 'River',\n    'Swamp.name': 'Swamp',\n    'Tundra.name': 'Tundra',\n\n    // Terrain Features\n    'Feature.Coal.name': 'Coal',\n    'Feature.Fish.name': 'Fish',\n    'Feature.Game.name': 'Game',\n    'Feature.Gems.name': 'Gems',\n    'Feature.Gold.name': 'Gold',\n    'Feature.Horse.name': 'Horse',\n    'Feature.Oasis.name': 'Oasis',\n    'Feature.Oil.name': 'Oil',\n    'Feature.Seal.name': 'Seal',\n    'Feature.Shield.name': 'Shield',\n\n    // Improvements\n    'Improvement.Irrigation.name': 'Irrigation',\n    'Improvement.Mine.name': 'Mine',\n    'Improvement.Pollution.name': 'Pollution',\n    'Improvement.Road.name': 'Road',\n    'Improvement.Railroad.name': 'Railroad',\n  }\n);\n\ni18next.addResources(\n  'en',\n  'yield',\n  {\n    'Food.name': 'Food',\n    'Production.name': 'Production',\n    'Trade.name': 'Trade',\n  }\n);\n", "import i18next from \"i18next\";\n\ni18next.addResources(\n  'en-GB',\n  'default',\n  {\n    'ChooseFromList.choose-civilization.title': 'Choose your civilisation',\n\n    'CustomizeWorld.title': 'Customise world',\n\n    'NewGameWindow.civilizations_one': '1 civilisation',\n    'NewGameWindow.civilizations_other': '{{count}} civilisations',\n\n    'Window.maximize': 'Maximise',\n    'Window.minimize': 'Minimise',\n  }\n);\n", "import i18next from \"i18next\";\nimport {Advance as FreeAdvance, City as FreeCity, Gold as FreeGold} from \"@civ-clone/civ1-goody-hut/GoodyHuts\";\n\ni18next.addResources(\n  'en',\n  'default',\n  {\n    'Actions.AdjustTradeRates.title': 'Adjust trade rates',\n\n    'Actions.ChooseResearch.body': 'Which advance would you like to research next?',\n    'Actions.ChooseResearch.title': 'Choose research',\n\n    'Actions.CityBuildSelectionWindow.title': 'What would you like to build in {{cityName}}?',\n\n    'Actions.CivilDisorder.body': 'Civil disorder in {{cityName}}, mayor flees in panic!',\n    'Actions.CivilDisorder.title': 'Civil disorder in {{cityName}}!',\n\n    'Actions.EndTurn.title': 'End turn',\n\n    'Actions.Revolution.body': 'Which government would you like to convert to?',\n    'Actions.Revolution.title': 'Choose government',\n\n    'Actions.ShowCity.label': '$t(Generic.view-city, { \"city\": \"{{cityName}}\" })',\n\n    'Actions.ShowOnMap.label': 'Show on map',\n\n    'Actions.Spaceship.chance-of-success': 'Chance of success',\n    'Actions.Spaceship.energy': 'Energy',\n    'Actions.Spaceship.flight-time': 'Flight time',\n    'Actions.Spaceship.has-launched': 'Launched?',\n    'Actions.Spaceship.inactive-part': '({{inactiveParts}} inactive)',\n    'Actions.Spaceship.launch': 'Launch',\n    'Actions.Spaceship.launched': 'Launched',\n    'Actions.Spaceship.life-support': 'Life Support',\n    'Actions.Spaceship.mass': 'Mass',\n    'Actions.Spaceship.population': 'Population',\n    'Actions.Spaceship.spaceship-name': '{{nation}} spaceship',\n    'Actions.Spaceship.title': 'View spaceship',\n\n    'Buildable.label-empty': `Nothing`,\n\n    'ChooseFromList.choose-civilization.body': '',\n    'ChooseFromList.choose-civilization.choice': '$t({{value._}}.name, { \"defaultValue\": \"{{value._}}\", \"ns\": \"civilization\" })',\n    'ChooseFromList.choose-civilization.title': 'Choose your civilization',\n    'ChooseFromList.choose-leader.body': '',\n    'ChooseFromList.choose-leader.choice': '$t(Leader.{{value._}}.name, { \"defaultValue\": \"{{value._}}\", \"ns\": \"civilization\" })',\n    'ChooseFromList.choose-leader.title': 'Choose your leader',\n    'ChooseFromList.default.body': 'Please choose from the following options:',\n    'ChooseFromList.default.title': 'Choose an option',\n    'ChooseFromList.diplomacy.exchange-knowledge.body': 'Please choose from the advances that $t({{data.proposal.by.civilization._}}.nation, { \"defaultValue\": \"{{data.proposal.by.civilization._}}\", \"ns\": \"civilization\" }) have discovered:',\n    'ChooseFromList.diplomacy.exchange-knowledge.choice': '$t({{value._}}.name, { \"defaultValue\": \"{{value._}}\", \"ns\": \"science\" })',\n    'ChooseFromList.diplomacy.exchange-knowledge.title': 'Exchanging Knowledge',\n    'ChooseFromList.negotiation.next-step.title': 'Negotiation between $t({{data.players.0.civilization._}}.nation, { \"defaultValue\": \"{{data.players.0.civilization._}}\", \"ns\": \"civilization\" }) and $t({{data.players.1.civilization._}}.nation, { \"defaultValue\": \"{{data.players.1.civilization._}}\", \"ns\": \"civilization\" })',\n\n    'City.Build.build-item': '{{item}} (Cost: {{cost}} / $t(Progress.turns, {\"count\": {{turns}} }))',\n    'City.Build.buy': 'Buy',\n    // This can include the resource being using to buy with via {{spendCost}} which allows support for `Faith`, etc used in later games.\n    // 'City.Build.buy-with': 'Buy with $t({{spendCost.resource._}}.name, { \"defaultValue\": \"{{spendCost.resource._}}\", \"ns\": \"yield\" })',\n    'City.Build.buy-with': 'Buy',\n    'City.Build.change': 'Change',\n    'City.Build.choose': 'Choose',\n    'City.Build.nothing': 'Nothing',\n    'City.Build.title': '{{item}}',\n\n    'City.CompleteProduction.body': 'Do you want to rush building of {{item}} for {{spendCost.value, number}} $t({{spendCost.resource._}}.name, { \"defaultValue\": \"{{spendCost.resource._}}\", \"ns\": \"yield\" })? You currently have {{treasury.value, number}} $t({{treasury.yield._}}.name, { \"defaultValue\": \"{{treasury.yield._}}\", \"ns\": \"yield\" }) available.',\n\n    'City.GarrisonedUnits.title': 'Garrisoned units',\n    'City.Growth.size': 'Size {{size, number}}',\n\n    'City.Growth.title': 'Growth',\n\n    'City.size': '{{size, number}}',\n\n    'City.SupportedUnits.title': 'Supported units',\n\n    'CityStatus.build_empty': '$t(CityStatus.totals, { \"free\": {{free}}, \"total\": {{total}}, \"context\": \"{{totals_context}}\" }) $t(Buildable.label-empty)',\n    'CityStatus.build_nonempty': '$t(CityStatus.totals, { \"free\": {{free}}, \"total\": {{total}}, \"context\": \"{{totals_context}}\" }) {{buildable}} ($t(Progress.turns, { \"count\": {{turns}} }))',\n    'CityStatus.growth': '$t(CityStatus.totals, { \"free\": {{free}}, \"total\": {{total}}, \"context\": \"{{totals_context}}\" }) ($t(Progress.turns, {\"count\": {{turns}} }))',\n    'CityStatus.title': 'City details',\n    'CityStatus.totals_equal': '{{free, number}}',\n    'CityStatus.totals_unequal': '{{free, number}} [{{total, number}}]',\n\n    'ConfirmationWindow.Generic.title': 'Are you sure?',\n\n    'CustomizeWorld.build': 'Build',\n    'CustomizeWorld.height': '$t(Generic.height)',\n    'CustomizeWorld.land-coverage': 'Land coverage',\n    'CustomizeWorld.land-size': 'Land size',\n    'CustomizeWorld.max-coverage': 'Max coverage',\n    'CustomizeWorld.players': 'Players',\n    'CustomizeWorld.title': 'Customize world',\n    'CustomizeWorld.width': '$t(Generic.width)',\n\n    'GameDetails.turn': '{{turn, number}}',\n    'GameDetails.year_bce': '{{year, number(useGrouping: false)}} BCE',\n    'GameDetails.year_ce': '{{year, number(useGrouping: false)}} CE',\n\n    'GameMenu.city-status': 'City Status',\n    'GameMenu.happiness-report': 'Happiness Report',\n    'GameMenu.options': 'Options',\n    'GameMenu.science-report': 'Science Report',\n    'GameMenu.trade-report': 'Trade Report',\n\n    'GameOptions.auto-end-turn': 'Auto End of Turn?',\n\n    'HappinessReport.breakdown': 'Breakdown',\n    'HappinessReport.view-city': '$t(Generic.view-city, { \"city\": \"{{cityName}}\" })',\n\n    'ImportAssetsWindow.brave': '<p>It looks like you\\'re using Brave and due to the use of <code>HTMLCanvasElement</code>\\'s <code>getImageData</code> and <code>toDataURL</code> functions, please put Shields down while importing, and playing, otherwise any colour-replaced icons won\\'t look correct. <strong>Remember to put them back up after!</strong></p><p><a href=\"https://brave.com/privacy-updates/4-fingerprinting-defenses-2.0/#2-fingerprinting-protections-20-farbling-for-great-good\" target=\"_blank\">Read more about \"farbling\".</a></p>',\n    'ImportAssetsWindow.done': 'Done! Please reload the page to utilise the fresh assets.',\n    'ImportAssetsWindow.instructions': 'Upload {{files, list}} from the original Civilization files to extract assets (these will be stored locally). This process can take at least a few minutes.',\n    'ImportAssetsWindow.missing-files': `Please provide all files to generate assets: {{files, list}}.`,\n    'ImportAssetsWindow.missing-data': 'Not all expected data was written. Might need to try again... Missing: {{files, list}}.',\n    'ImportAssetsWindow.progress-building': 'Building image assets...',\n    'ImportAssetsWindow.progress-writing': 'Writing to database...',\n    'ImportAssetsWindow.title': 'Import assets',\n\n    'LockedSlider.lock': 'Lock',\n\n    'MainMenu.customize-world': '$t(CustomizeWorld.title)',\n    'MainMenu.earth': 'Earth',\n    'MainMenu.import-assets': '$t(ImportAssetsWindow.title)',\n    'MainMenu.new-game': 'Start a New Game',\n    'MainMenu.quit': 'Quit',\n    'MainMenu.version': 'version: {{version}}',\n\n    'MandatorySelection.default-body': '$t(SelectionWindow.default-body)',\n\n    'NewGameWindow.number-of-players': 'How many players?',\n    'NewGameWindow.civilizations_one': '1 civilization',\n    'NewGameWindow.civilizations_other': '{{count}} civilizations',\n\n    'Notification.title': 'Notification',\n\n    'PlayerDetails.header': '{{leader}} of the {{nation}}',\n    'PlayerDetails.Researching.body_notresearching': 'Nothing ($t(Progress.per-turn, { \"count\": {{perTurn}} }))',\n    'PlayerDetails.Researching.body_researching': `{{researching}} $t(Progress.data, { \"progress\": {{progress}}, \"total\": {{cost}} }) ($t(Progress.per-turn, { \"count\": {{perTurn}} }) - $t(Progress.turns, { \"count\": {{turns}} }))`,\n    'PlayerDetails.Researching.title': 'Researching',\n    'PlayerDetails.Treasury.body': `{{value}} ($t(Progress.per-turn, { \"count\": {{perTurn}} }))`,\n    'PlayerDetails.Treasury.title': 'Treasury',\n\n    'Progress.body': 'Progress $t(Progress.data, { \"progress\": {{progress}}, \"total\": {{total}} }) ($t(Progress.turns, {\"count\": {{turns}} }))',\n    'Progress.data': '{{progress, number}} / {{total, number}}',\n    'Progress.per-turn': '{{count, number}} / turn',\n    'Progress.turns_one': '{{count, number}} turn',\n    'Progress.turns_other': '{{count, number}} turns',\n    'Progress.turns_zero': 'Never',\n\n    'ScienceReport.progress_notresearching': '',\n    'ScienceReport.progress_researching': '$t(Progress.body, { \"progress\": {{progress}}, \"total\": {{total}}, \"turns\": {{turns }} })',\n    'ScienceReport.researching_notresearching': 'Researching nothing',\n    'ScienceReport.researching_researching': 'Researching {{researching}}',\n    'ScienceReport.title': 'Player research',\n\n    'SelectionWindow.default-body': 'Please choose one of the following:',\n\n    'SneakAttack.title': 'Sneak attack?',\n    'SneakAttack.body': `Are you sure you want to attack {{nation}}? (This will terminate your current peace treaty)`,\n\n    'TradeReport.title': 'Trade report',\n    'TradeReport.ImprovementList.cost': '{{- icon}} {{total, number}}',\n    'TradeReport.ImprovementList.item': '{{count, number}} &times; {{name}}',\n    'TradeReport.ImprovementList.income-title': 'Total income',\n    'TradeReport.ImprovementList.income-value': '{{- icon}} $t(Progress.per-turn, { \"count\": {{count}} })',\n    'TradeReport.ImprovementList.cost-title': 'Total cost',\n    'TradeReport.ImprovementList.cost-value': '{{- icon}} $t(Progress.per-turn, { \"count\": {{count}} })',\n    'TradeReport.ImprovementList.surplus-title': 'Total surplus',\n    'TradeReport.ImprovementList.surplus-value': '{{- icon}} $t(Progress.per-turn, { \"count\": {{count}} })',\n\n    'UnitDetails.header': '{{unitName}} ($t(Generic.coordinates, { \"x\": {{x}}, \"y\": {{y}} }))',\n    'UnitDetails.improvements': '{{improvements, list}}',\n    'UnitDetails.moves': '{{remaining, number(minimumFractionDigits: 0; maximumFractionDigits: 2)}} / {{total, number}} moves',\n    'UnitDetails.stats': 'A: {{attack, number}} / D: {{defence, number}} / V: {{visibility, number}}',\n    'UnitDetails.terrain': `{{terrain}} {{features, list}} {{improvements, list}}`,\n\n    'UnitSelectionWindow.status_busy': '{{unit}} [{{city}}] ({{busy}})',\n    'UnitSelectionWindow.status_notbusy': '{{unit}} [{{city}}]',\n    'UnitSelectionWindow.title': 'Activate unit',\n\n    'Welcome.you-have-risen': '{{leader}}, you have risen to become leader of the {{nation}}.',\n    'Welcome.your-people-have-knowledge-of': 'Your people have knowledge of {{advances, list}}.',\n\n    'Window.maximize': 'Maximize',\n    'Window.minimize': 'Minimize',\n    'Window.close': '$t(Generic.close)',\n\n    'Generic.cancel': 'Cancel',\n    'Generic.close': 'Close',\n    'Generic.coordinates': '{{x, number}}, {{y, number}}',\n    'Generic.height': 'Height',\n    'Generic.no': 'No',\n    'Generic.ok': 'OK',\n    'Generic.view-city': 'View {{city}}',\n    'Generic.width': 'Width',\n    'Generic.yes': 'Yes',\n  }\n);\n\ni18next.addResources('en', 'notification', {\n    'Title': '$t(Notification.title, { \"ns\": \"default\" })',\n    'City.building-complete.unit.body': '$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { \"defaultValue\": \"{{cityBuild.city.name}}\", \"ns\": \"city\" }) has completed work on $t({{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"unit\" })!',\n    'City.building-complete.unit.title': 'Building complete!',\n    'City.building-complete.city-improvement.body': '$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { \"defaultValue\": \"{{cityBuild.city.name}}\", \"ns\": \"city\" }) has completed work on $t(Improvement.{{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"city\" })!',\n    'City.building-complete.city-improvement.title': 'Building complete!',\n    'City.building-complete.wonder.body': '$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { \"defaultValue\": \"{{cityBuild.city.name}}\", \"ns\": \"city\" }) has completed work on $t({{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"wonder\" })!',\n    'City.building-complete.wonder.title': 'Building complete!',\n    'City.building-complete.spaceship-part.body': '$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { \"defaultValue\": \"{{cityBuild.city.name}}\", \"ns\": \"city\" }) has completed work on $t({{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"spaceship\" })!',\n    'City.building-complete.spaceship-part.title': 'Building complete!',\n    'City.building-complete.other.body': '$t({{cityBuild.city.originalPlayer.civilization._}}.{{cityBuild.city.name}}.name, { \"defaultValue\": \"{{cityBuild.city.name}}\", \"ns\": \"city\" }) has completed work on its build project!',\n    'City.building-complete.other.title': 'Building complete!',\n    'City.captured-by-us.body': 'We have captured $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }) from $t({{originalPlayer.civilization._}}.nation, { \"defaultValue\": \"{{originalPlayer.civilization._}}\", \"ns\": \"civilization\" })',\n    'City.captured-by-us.title': 'City captured!',\n    'City.captured-from-us.body': '$t({{capturingPlayer.civilization._}}.nation, { \"defaultValue\": \"{{capturingPlayer.civilization._}}\", \"ns\": \"civilization\" }) have captured our city $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" })!',\n    'City.captured-from-us.title': 'City captured!',\n    'City.civil-disorder.body': `Civil disorder in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }). Mayor flees in panic!`,\n    'City.civil-disorder.title': 'Civil disorder',\n    'City.leader-celebration.body': `Leader celebration in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" })!`,\n    'City.leader-celebration.title': 'Leader celebration',\n    'City.leader-celebration-ended.body': `Leader celebration cancelled in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" })!`,\n    'City.leader-celebration-ended.title': 'Leader celebration',\n    'City.order-restored.body': `Order restored in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }).`,\n    'City.order-restored.title': 'Order restored!',\n    'City.shrink.body': `Population decrease in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }).`,\n    'City.shrink.title': 'Population decrease!',\n    'City.unit-unsupported.body': `$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }) cannot support $t({{unit._}}.name, { \"defaultValue\": \"{{unit._}}\", \"ns\": \"unit\" }).`,\n    'City.unit-unsupported.title': 'Unit not supported!',\n    'City.improvement-unsupported.body': `$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }) cannot support $t(Improvement.{{cityImprovement._}}.name, { \"defaultValue\": \"{{cityImprovement._}}\", \"ns\": \"city\" }).`,\n    'City.improvement-unsupported.title': 'Improvement not supported!',\n    'City.food-storage-exhausted.body': `Food storage exhausted in $t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }).`,\n    'City.food-storage-exhausted.title': 'Food storage exhausted!',\n\n    'GoodyHut.action-performed.Advance.body': 'You have discovered scrolls of ancient wisdom...',\n    'GoodyHut.action-performed.Advance.title': 'Exploration',\n    'GoodyHut.action-performed.City.body': 'You have discovered an advanced tribe...',\n    'GoodyHut.action-performed.City.title': 'Exploration',\n    'GoodyHut.action-performed.Gold.body': 'You have discovered valuable treasure worth 50 Gold.',\n    'GoodyHut.action-performed.Gold.title': 'Exploration',\n    'GoodyHut.action-performed.Unit.body': 'You have discovered a friendly tribe of skilled mercenaries...',\n    'GoodyHut.action-performed.Unit.title': 'Exploration',\n\n    'Player.defeated.by.body': '$t({{player.civilization._}}.nation, { \"defaultValue\": \"{{player.civilization._}}\", \"ns\": \"civilization\" }) has defeated $t({{defeatedPlayer.civilization._}}.nation, { \"defaultValue\": \"{{defeatedPlayer.civilization._}}\", \"ns\": \"civilization\" })!',\n    'Player.defeated.by.title': 'Defeated!',\n    'Player.defeated.local.body': 'You have been defeated by $t({{player.civilization._}}.nation, { \"defaultValue\": \"{{player.civilization._}}\", \"ns\": \"civilization\" })!',\n    'Player.defeated.local.title': 'Defeated!',\n    'Player.defeated.unknown.body': '$t({{defeatedPlayer.civilization._}}.nation, { \"defaultValue\": \"{{defeatedPlayer.civilization._}}\", \"ns\": \"civilization\" }) defeated!',\n    'Player.defeated.unknown.title': 'Defeated!',\n    'Player.research-complete.body': 'You have discovered the secrets of $t({{advance._}}.name, { \"defaultValue\": \"{{advance._}}\", \"ns\": \"science\" })!',\n    'Player.research-complete.title': 'Advance discovered!',\n    'Player.spaceship-landed.body': 'Our spaceship has landed on Alpha Centauri!',\n    'Player.spaceship-landed.title': 'Spaceship landed',\n    'Player.spaceship-lost.body': 'Our spaceship was lost in space.',\n    'Player.spaceship-lost.title': 'Spaceship lost',\n\n    'Spaceship.part-built.body': 'Component added to $t({{player.civilization._}}.name, { \"defaultValue\": \"{{player.civilization._}}\", \"ns\": \"civilization\" }) spaceship.',\n    'Spaceship.part-built.title': 'Spaceship built',\n\n    'Wonder.building-complete.other-player.known.body': '$t({{city.originalPlayer.civilization._}}.{{city.name}}.name, { \"defaultValue\": \"{{city.name}}\", \"ns\": \"city\" }) has completed work on $t({{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"wonder\" })!',\n    'Wonder.building-complete.other-player.known.title': 'Wonder completed',\n    'Wonder.building-complete.other-player.unknown.body': 'A far away city has completed work on $t({{build._}}.name, { \"defaultValue\": \"{{build._}}\", \"ns\": \"wonder\" })!',\n    'Wonder.building-complete.other-player.unknown.title': 'Wonder completed',\n});\n", "import '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-city-improvement/en-GB.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-city-improvement/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-city/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-civilization/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-diplomacy/en-GB.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-diplomacy/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-government/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-science/en-GB.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-science/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-spaceship/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-trade-rate/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-unit/en-GB.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-unit/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-wonder/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/civ1-world/en.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/local/en-GB.ts';\nimport '/Users/dominik.hastings/Code/civ-clone/web-renderer/translations/local/en.ts';\n", "import {\n  DataPatch,\n  DataPatchContents,\n  Dialogue,\n  GameData,\n  Interactions,\n  Negotiation,\n  NeighbourDirection,\n  PlainObject,\n  PlayerAction,\n  Resolution,\n  SneakAttack,\n  Tile,\n  Unit,\n} from './types';\nimport { emit, on, s } from '@dom111/element';\nimport i18next, { t } from 'i18next';\nimport { reconstituteData, ObjectMap } from './lib/reconstituteData';\nimport Actions from './components/Actions';\nimport ActiveUnit from './components/Map/ActiveUnit';\nimport Cities from './components/Map/Cities';\nimport CityNames from './components/Map/CityNames';\nimport CityStatus from './components/CityStatus';\nimport ConfirmationWindow from './components/ConfirmationWindow';\nimport Feature from './components/Map/Feature';\nimport Fog from './components/Map/Fog';\nimport GameDetails from './components/GameDetails';\nimport GameMenu from './components/GameMenu';\nimport GamePortal from './components/GamePortal';\nimport GoodyHuts from './components/Map/GoodyHuts';\nimport HappinessReport from './components/HappinessReport';\nimport Improvements from './components/Map/Improvements';\nimport IntervalHandler from './lib/IntervalHandler';\nimport Irrigation from './components/Map/Irrigation';\nimport Land from './components/Map/Land';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport MainMenu from './components/MainMenu';\nimport Minimap from './components/Minimap';\nimport NotificationWindow from './components/NotificationWindow';\nimport Notifications from './components/Notifications';\nimport PlayerDetails from './components/PlayerDetails';\nimport ScienceReport from './components/ScienceReport';\nimport SelectionWindow from './components/SelectionWindow';\nimport Terrain from './components/Map/Terrain';\nimport TradeReport from './components/TradeReport';\nimport Transport from './Transport';\nimport UnitDetails from './components/UnitDetails';\nimport Units from './components/Map/Units';\nimport Window from './components/Window';\nimport World from './components/World';\nimport Yields from './components/Map/Yields';\nimport { assetStore } from './AssetStore';\nimport { h } from './lib/html';\nimport { instance as options } from './GameOptionsRegistry';\nimport { mappedKeyFromEvent } from './lib/mappedKey';\nimport instanceOf from './lib/instanceOf';\nimport ActionWindow from './components/ActionWindow';\n\n// TODO: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n//  ! Break this down and use a front-end framework? !\n//  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\nexport class Renderer {\n  #transport: Transport;\n\n  constructor(transport: Transport) {\n    this.#transport = transport;\n  }\n\n  async init() {\n    const transport = this.#transport;\n\n    const hasAllAssets = await assetStore.hasAllAssets();\n    if (!hasAllAssets) {\n      return;\n    }\n\n    const scaledCursor = await assetStore.getScaled(\n      './assets/cursor/torch.png',\n      2\n    );\n\n    document.body.style.cursor = `url('${scaledCursor.toDataURL(\n      'image/png'\n    )}'), default`;\n\n    // Load translations\n    i18next.use(LanguageDetector);\n\n    await i18next.init({\n      ns: ['default'],\n    });\n    await import('../translations');\n\n    on(document, 'keydown', (event) => {\n      if (\n        event.key === 'F5' ||\n        (['R', 'r'].includes(event.key) &&\n          (/Mac OS X/.test(navigator.userAgent)\n            ? event.metaKey\n            : event.ctrlKey))\n      ) {\n        event.preventDefault();\n\n        new ConfirmationWindow('Quit', 'Are you sure you want to reload?', () =>\n          window.location.reload()\n        );\n\n        return;\n      }\n    });\n\n    options.set('autoEndOfTurn', true);\n\n    try {\n      const notificationArea = document.getElementById(\n          'notification'\n        ) as HTMLElement,\n        mainMenuElement = document.querySelector('#mainmenu') as HTMLElement,\n        actionArea = document.getElementById('actions') as HTMLElement,\n        secondaryActionArea = document.getElementById(\n          'other-actions'\n        ) as HTMLElement,\n        gameMenu = document.getElementById('game-menu') as HTMLElement,\n        gameArea = document.getElementById('game') as HTMLElement,\n        mapWrapper = document.getElementById('map') as HTMLElement,\n        mapPortal = mapWrapper.querySelector('canvas') as HTMLCanvasElement,\n        gameInfo = document.getElementById('gameDetails') as HTMLElement,\n        playerInfo = document.getElementById('playerDetails') as HTMLElement,\n        minimapCanvas = document.getElementById('minimap') as HTMLCanvasElement,\n        unitInfo = document.getElementById('unitInfo') as HTMLCanvasElement,\n        preloadContainer = document.getElementById('preload') as HTMLDivElement,\n        notifications = new Notifications(),\n        mainMenu = new MainMenu(mainMenuElement, this.#transport),\n        setActiveUnit = (\n          unit: Unit | null,\n          portal: GamePortal,\n          unitsMap: Units,\n          activeUnitsMap: ActiveUnit\n        ) => {\n          const unitDetails = new UnitDetails(unitInfo, unit);\n\n          activeUnit = unit;\n\n          unitDetails.build();\n\n          portal.setActiveUnit(unit);\n          unitsMap.setActiveUnit(unit);\n          unitsMap.render();\n          unitsMap.setVisible(true);\n          activeUnitsMap.setActiveUnit(unit);\n          activeUnitsMap.render();\n          activeUnitsMap.setVisible(true);\n\n          if (unit === null) {\n            portal.render();\n\n            return;\n          }\n\n          lastUnit = unit;\n\n          unitsMap.update([\n            ...(lastUnit?.tile ? [lastUnit.tile] : []),\n            unit.tile,\n          ]);\n\n          if (!portal.isVisible(unit.tile.x, unit.tile.y)) {\n            portal.setCenter(unit.tile.x, unit.tile.y);\n          }\n\n          portal.render();\n        };\n\n      // preloaded the images as they could be remote\n      assetStore.getAll().then((records) =>\n        records.forEach((record) =>\n          preloadContainer.append(\n            h(\n              s<HTMLImageElement>(\n                `<img src=\"${record.uri}\" data-path=\"${record.name}\">`\n              ),\n              {\n                error: () =>\n                  console.error(\n                    `There was a problem preloading '${record.name}', you may have some missing details.`\n                  ),\n              }\n            )\n          )\n        )\n      );\n\n      const tilesToRender: Tile[] = [];\n\n      let globalNotificationTimer: number | undefined,\n        lastUnit: Unit | null = null,\n        activeUnit: Unit | null = null;\n\n      transport.receive('notification', (data: string): void => {\n        notificationArea.innerHTML = data;\n\n        if (globalNotificationTimer) {\n          window.clearTimeout(globalNotificationTimer);\n        }\n\n        globalNotificationTimer = window.setTimeout((): void => {\n          globalNotificationTimer = undefined;\n\n          notificationArea.innerText = '';\n        }, 4000);\n      });\n\n      const interactionLabel = (interaction: Interactions) => {\n          if (instanceOf(interaction, 'Dialogue')) {\n            return t(`${interaction._}.${(interaction as Dialogue).key}`, {\n              interaction,\n              defaultValue: interaction._,\n              ns: 'diplomacy',\n            });\n          }\n\n          if (instanceOf(interaction, 'Proposal')) {\n            return t(interaction._, {\n              interaction,\n              defaultValue: interaction._,\n              ns: 'diplomacy',\n            });\n          }\n\n          if (instanceOf(interaction, 'Resolution')) {\n            const { proposal } = interaction as Resolution;\n\n            return t(`Resolution.${proposal._}.${interaction._}`, {\n              interaction,\n              defaultValue: interaction._,\n              ns: 'diplomacy',\n            });\n          }\n\n          return t(`Action.${interaction._}`, {\n            interaction,\n            defaultValue: interaction._,\n            ns: 'diplomacy',\n          });\n        },\n        negotiationLabel = (negotiation: Negotiation) => {\n          const currentInteraction = negotiation.lastInteraction;\n\n          if (currentInteraction === null) {\n            return 'negotiation.missing-label';\n          }\n\n          return interactionLabel(currentInteraction);\n        };\n\n      transport.receive('chooseFromList', ({ choices, key, data }) => {\n        const title = t(`ChooseFromList.${key}.title`, {\n          data,\n          defaultValue: t('ChooseFromList.default.body'),\n        });\n\n        if (key === 'negotiation.next-step' && choices.length === 1) {\n          const window = new ActionWindow(\n            title,\n            negotiationLabel(data as Negotiation),\n            {\n              canClose: false,\n              actions: {\n                primary: {\n                  label: interactionLabel(choices[0].value as Interactions),\n                  action: (actionWindow) => actionWindow.close(),\n                },\n              },\n            }\n          );\n\n          window.on('keydown', (event) => {\n            if (event.key !== 'Enter') {\n              return;\n            }\n\n            window.close();\n\n            event.preventDefault();\n            event.stopPropagation();\n          });\n\n          window.once('close', () =>\n            transport.send('chooseFromList', choices[0].id)\n          );\n\n          return;\n        }\n\n        const body =\n          key === 'negotiation.next-step'\n            ? negotiationLabel(data as Negotiation)\n            : t(`ChooseFromList.${key}.body`, {\n                data,\n                defaultValue: t('ChooseFromList.default.body'),\n              });\n\n        new SelectionWindow(\n          title,\n          choices.map(({ id, value }) => {\n            const label =\n              key === 'negotiation.next-step'\n                ? interactionLabel(value as Interactions)\n                : t(`ChooseFromList.${key}.choice`, {\n                    value,\n                    defaultValue: value?._,\n                  });\n\n            return {\n              label,\n              value: id,\n            };\n          }),\n          (choice) => transport.send('chooseFromList', choice),\n          body,\n          {\n            canClose: false,\n            displayAll: true,\n          }\n        );\n      });\n\n      transport.receiveOnce(\n        'gameData',\n        (\n          data: GameData,\n          objectMap: ObjectMap = { objects: {}, hierarchy: {} }\n        ) => {\n          try {\n            new NotificationWindow(\n              'Welcome',\n              s(\n                `<div class=\"welcome\">\n<p>${t('Welcome.you-have-risen', {\n                  leader: t(\n                    `Leader.${data.player.civilization.leader._}.name`,\n                    {\n                      defaultValue: data.player.civilization.leader._,\n                      ns: 'civilization',\n                    }\n                  ),\n                  nation: t(`${data.player.civilization._}.plural`, {\n                    defaultValue: data.player.civilization._,\n                    ns: 'civilization',\n                  }),\n                })}</p>\n<p>${t('Welcome.your-people-have-knowledge-of', {\n                  advances: [\n                    'Irrigation',\n                    'Mining',\n                    'Roads',\n                    ...data.player.research.complete.map((advance) =>\n                      t(`${advance._}.name`, {\n                        defaultValue: advance._,\n                        ns: 'science',\n                      })\n                    ),\n                  ],\n                })}</p>\n</div>`\n              )\n            );\n\n            gameArea.classList.add('active');\n\n            mapPortal.width = (\n              mapPortal.parentElement as HTMLElement\n            ).offsetWidth;\n            mapPortal.height = (\n              mapPortal.parentElement as HTMLElement\n            ).offsetHeight;\n\n            let activeUnits: PlayerAction[] = [];\n\n            const scale = 2,\n              world = new World(data.player.world),\n              intervalHandler = new IntervalHandler(),\n              portal = new GamePortal(\n                world,\n                transport,\n                mapPortal,\n                {\n                  playerId: data.player.id,\n                  // TODO: this needs to be a user-controllable item\n                  scale,\n                  // TODO: this needs to come from the theme\n                  tileSize: 16,\n                },\n                Land,\n                Irrigation,\n                Terrain,\n                Improvements,\n                Feature,\n                GoodyHuts,\n                Fog,\n                Yields,\n                Units,\n                Cities,\n                CityNames,\n                ActiveUnit\n              ),\n              landMap = portal.getLayer(Land) as Land,\n              yieldsMap = portal.getLayer(Yields) as Yields,\n              unitsMap = portal.getLayer(Units) as Units,\n              citiesMap = portal.getLayer(Cities) as Cities,\n              cityNamesMap = portal.getLayer(CityNames) as CityNames,\n              activeUnitsMap = portal.getLayer(ActiveUnit) as ActiveUnit,\n              minimap = new Minimap(\n                minimapCanvas,\n                world,\n                portal,\n                landMap,\n                citiesMap,\n                activeUnitsMap\n              ),\n              primaryActions = new Actions(actionArea, portal, this.#transport),\n              secondaryActions = new Actions(\n                secondaryActionArea,\n                portal,\n                this.#transport\n              ),\n              gameMenuItem = new GameMenu(\n                gameMenu,\n                data.player,\n                portal,\n                transport\n              );\n\n            gameMenuItem.build();\n\n            yieldsMap.setVisible(false);\n\n            portal.on('focus-changed', () => minimap.update());\n            portal.on('activate-unit', (unit) =>\n              setActiveUnit(unit, portal, unitsMap, activeUnitsMap)\n            );\n\n            intervalHandler.on(() => {\n              activeUnitsMap.setVisible(!activeUnitsMap.isVisible());\n\n              if (tilesToRender.length > 0) {\n                portal.build(tilesToRender.splice(0));\n              }\n\n              portal.render();\n            });\n\n            on(window, 'resize', () => {\n              mapPortal.width = (\n                mapPortal.parentElement as HTMLElement\n              ).offsetWidth;\n              mapPortal.height = (\n                mapPortal.parentElement as HTMLElement\n              ).offsetHeight;\n            });\n\n            // This needs wrapping.\n            // let lastTurn = 1,\n            //   clearNextTurn = false;\n\n            const handler = (objectMap: ObjectMap): void => {\n              // TODO: this causes a massive slowdown when its processed. Maybe we just leak for now...\n              // let orphanIds: string[] | null = clearNextTurn ? [] : null;\n              // let orphanIds: string[] | null = null;\n\n              // TODO: look into if it's possible to have data reconstituted in a worker thread\n              data = reconstituteData(\n                objectMap\n                // orphanIds\n              ) as GameData;\n\n              // A bit crude, I'd like to run this as as background job too\n              // if (orphanIds) {\n              //   // clean up orphan data - late game there can be tens of thousands of these to clean up\n              //   ((orphanIds) => {\n              //     const maxCount = 1000,\n              //       delay = 200;\n              //\n              //     for (\n              //       let i = 0, max = Math.ceil(orphanIds.length / maxCount);\n              //       i < max;\n              //       i++\n              //     ) {\n              //       setTimeout(\n              //         () =>\n              //           orphanIds\n              //             .slice(i * maxCount, (i + 1) * maxCount - 1)\n              //             .forEach((id) => delete objectMap.objects[id]),\n              //         (i + 1) * delay\n              //       );\n              //     }\n              //   })(orphanIds);\n              //\n              //   clearNextTurn = false;\n              // }\n\n              document.dispatchEvent(\n                new CustomEvent('dataupdated', {\n                  detail: {\n                    data,\n                  },\n                })\n              );\n\n              // if (lastTurn !== data.turn.value) {\n              //   clearNextTurn = true;\n              //   lastTurn = data.turn.value;\n              // }\n\n              const primaryActionList = [\n                  'ChooseResearch',\n                  'CityBuild',\n                  'CivilDisorder',\n                  'EndTurn',\n                ],\n                ignoredActionList = [\n                  'ActiveUnit',\n                  'ChangeProduction',\n                  'CompleteProduction',\n                  'InactiveUnit',\n                ],\n                primaryActionPriority: {\n                  [key: string]: number;\n                } = {\n                  EndTurn: 100,\n                  ChooseResearch: 80,\n                  CityBuild: 60,\n                  CivilDisorder: 10,\n                };\n\n              primaryActions.build(\n                data.player.actions\n                  .filter((action) => primaryActionList.includes(action._))\n                  .sort(\n                    (a, b) =>\n                      (primaryActionPriority[b._] ?? 0) -\n                      (primaryActionPriority[a._] ?? 0)\n                  )\n              );\n\n              secondaryActions.build(\n                data.player.actions.filter(\n                  (action) =>\n                    ![...primaryActionList, ...ignoredActionList].includes(\n                      action._\n                    )\n                )\n              );\n\n              gameArea.append(primaryActions.element());\n\n              world.setTiles(data.player.world.tiles);\n\n              const gameDetails = new GameDetails(\n                gameInfo,\n                data.turn,\n                data.year\n              );\n\n              gameDetails.build();\n\n              const playerDetails = new PlayerDetails(playerInfo, data.player);\n\n              playerDetails.build();\n\n              activeUnits = data.player.actions.filter(\n                (action: PlayerAction): boolean => action._ === 'ActiveUnit'\n              );\n\n              // This prioritises units that are already on screen\n              const [activeUnitAction] = activeUnits.sort(\n                ({ value: unitA }, { value: unitB }): number =>\n                  unitB === lastUnit\n                    ? 1\n                    : unitA === lastUnit\n                    ? -1\n                    : (portal.isVisible(\n                        (unitB as Unit).tile.x,\n                        (unitB as Unit).tile.y\n                      )\n                        ? 1\n                        : 0) -\n                      (portal.isVisible(\n                        (unitA as Unit).tile.x,\n                        (unitA as Unit).tile.y\n                      )\n                        ? 1\n                        : 0)\n              );\n\n              if (lastUnit !== activeUnitAction?.value) {\n                lastUnit = null;\n              }\n\n              setActiveUnit(\n                lastUnit?.active\n                  ? lastUnit\n                  : activeUnitAction\n                  ? (activeUnitAction.value as Unit)\n                  : null,\n                portal,\n                unitsMap,\n                activeUnitsMap\n              );\n\n              // ensure UI looks responsive\n              portal.build(tilesToRender.splice(0));\n              portal.render();\n\n              minimap.update();\n\n              if (\n                options.get('autoEndOfTurn') &&\n                data.player.mandatoryActions.length === 1 &&\n                data.player.mandatoryActions.every(\n                  (action) => action._ === 'EndTurn'\n                )\n              ) {\n                transport.send('action', {\n                  name: 'EndTurn',\n                });\n\n                return;\n              }\n            };\n\n            handler(objectMap);\n\n            transport.receive('gameData', (data, rawData) =>\n              handler(rawData as ObjectMap)\n            );\n\n            const pathToParts = (path: string) =>\n                path.replace(/]/g, '').split(/[.[]/),\n              getPenultimateObject = (\n                object: PlainObject,\n                path: string\n              ): [PlainObject, string | undefined] => {\n                const parts = pathToParts(path),\n                  lastPart = parts.pop();\n\n                const tmpObj = parts.reduce((tmpObj, part) => {\n                  if (!tmpObj || !(part in tmpObj)) {\n                    return null;\n                  }\n\n                  return tmpObj[part];\n                }, object);\n\n                return [tmpObj, lastPart];\n              },\n              setObjectPath = (\n                object: PlainObject,\n                path: string,\n                value: any\n              ): void => {\n                const [tmpObj, lastPart] = getPenultimateObject(object, path);\n\n                if (!tmpObj || !lastPart) {\n                  console.warn(\n                    `unable to set ${path} of ${object} (${lastPart})`\n                  );\n                  return;\n                }\n\n                tmpObj[lastPart] = value;\n              },\n              removeObjectPath = (object: PlainObject, path: string): void => {\n                const [tmpObj, lastPart] = getPenultimateObject(object, path);\n\n                if (!tmpObj || !lastPart) {\n                  console.warn(\n                    `unable to set ${path} of ${object} (${lastPart})`\n                  );\n                  return;\n                }\n\n                delete tmpObj[lastPart];\n              };\n\n            transport.receive('gameDataPatch', (data: DataPatch[]) => {\n              data.forEach((patch) =>\n                Object.entries(patch).forEach(\n                  ([key, { type, index, value }]: [\n                    string,\n                    DataPatchContents\n                  ]) => {\n                    if (type === 'add' || type === 'update') {\n                      if (!value!.hierarchy) {\n                        console.error('No hierarchy');\n                        console.error(value);\n\n                        return;\n                      }\n\n                      if (index) {\n                        setObjectPath(\n                          objectMap.objects[key],\n                          index,\n                          value!.hierarchy\n                        );\n                      } else {\n                        objectMap.objects[key] = value!.hierarchy;\n                      }\n\n                      document.dispatchEvent(\n                        new CustomEvent('patchdatareceived', {\n                          detail: {\n                            value,\n                          },\n                        })\n                      );\n\n                      Object.entries(value!.objects as PlainObject).forEach(\n                        ([key, value]) => {\n                          objectMap.objects[key] = value;\n\n                          if (value._ === 'PlayerTile') {\n                            // Since we only use tilesToRender for x and y this should be fine...\n                            tilesToRender.push(value);\n                          }\n                        }\n                      );\n                    }\n\n                    if (type === 'remove') {\n                      if (index) {\n                        removeObjectPath(objectMap.objects[key], index);\n\n                        return;\n                      }\n\n                      delete objectMap.objects[key];\n                    }\n                  }\n                )\n              );\n\n              handler(objectMap);\n            });\n\n            transport.receive('gameNotification', (data): void =>\n              notifications.receive(data)\n            );\n\n            const keyToActionsMap: {\n                [key: string]: string[];\n              } = {\n                ' ': ['NoOrders'],\n                b: ['FoundCity'],\n                D: ['Disband'],\n                f: ['Fortify', 'BuildFortress'],\n                i: [\n                  'BuildIrrigation',\n                  'ClearForest',\n                  'ClearSwamp',\n                  'ClearJungle',\n                ],\n                m: ['BuildMine', 'PlantForest'],\n                P: ['Pillage'],\n                r: ['BuildRoad', 'BuildRailroad'],\n                s: ['Sleep'],\n                u: ['Unload'],\n                w: ['Wait'],\n              },\n              directionKeyMap: { [key: string]: NeighbourDirection } = {\n                ArrowUp: 'n',\n                PageUp: 'ne',\n                ArrowRight: 'e',\n                PageDown: 'se',\n                ArrowDown: 's',\n                End: 'sw',\n                ArrowLeft: 'w',\n                Home: 'nw',\n              },\n              leaderScreensMap: { [key: string]: () => any } = {\n                F1: () => new CityStatus(data.player, portal, transport),\n                F4: () => new HappinessReport(data.player, portal, transport),\n                F5: () => new TradeReport(data.player, portal, transport),\n                F6: () => new ScienceReport(data.player),\n              };\n\n            let lastKey = '';\n\n            on(document, 'keydown', (event) => {\n              const key = mappedKeyFromEvent(event);\n\n              if (key in leaderScreensMap) {\n                leaderScreensMap[event.key]();\n\n                event.preventDefault();\n              }\n\n              const modalWindow = document.querySelector('dialog.window.modal');\n\n              if (document.activeElement === document.body && modalWindow) {\n                event.preventDefault();\n\n                emit(\n                  modalWindow,\n                  new KeyboardEvent('keydown', {\n                    key: event.key,\n                  })\n                );\n\n                return;\n              }\n\n              if (activeUnit) {\n                if (key in keyToActionsMap) {\n                  const actions = [...keyToActionsMap[key]];\n\n                  while (actions.length) {\n                    const actionName = actions.shift(),\n                      [unitAction] = activeUnit.actions.filter(\n                        (action): boolean => action._ === actionName\n                      );\n\n                    if (unitAction) {\n                      transport.send('action', {\n                        name: 'ActiveUnit',\n                        id: activeUnit.id,\n                        unitAction: unitAction._,\n                        target: unitAction.to.id,\n                      });\n\n                      event.stopPropagation();\n                      event.preventDefault();\n\n                      return;\n                    }\n                  }\n                }\n\n                if (key in directionKeyMap) {\n                  const [unitAction] =\n                      activeUnit.actionsForNeighbours[directionKeyMap[key]],\n                    perform = () => {\n                      transport.send('action', {\n                        name: 'ActiveUnit',\n                        id: activeUnit!.id,\n                        unitAction: unitAction._,\n                        target: unitAction.to.id,\n                      });\n\n                      event.stopPropagation();\n                      event.preventDefault();\n                    };\n\n                  if (unitAction) {\n                    if (\n                      ['SneakAttack', 'SneakCaptureCity'].includes(unitAction._)\n                    ) {\n                      new ConfirmationWindow(\n                        t('SneakAttack.title'),\n                        t('SneakAttack.body', {\n                          nation: t(\n                            `${\n                              (unitAction as SneakAttack).enemy.civilization._\n                            }.nation`,\n                            {\n                              defaultValue: (unitAction as SneakAttack).enemy\n                                .civilization._,\n                              ns: 'civilization',\n                            }\n                          ),\n                        }),\n                        () => perform()\n                      );\n\n                      return;\n                    }\n\n                    perform();\n\n                    return;\n                  }\n                }\n              }\n\n              if (key === 'Escape' && document.activeElement !== null) {\n                (document.activeElement as HTMLElement).blur();\n\n                return;\n              }\n\n              if (\n                key === 'Enter' &&\n                data.player.mandatoryActions.some(\n                  (action) => action._ === 'EndTurn'\n                )\n              ) {\n                transport.send('action', {\n                  name: 'EndTurn',\n                });\n\n                event.stopPropagation();\n                event.preventDefault();\n\n                return;\n              }\n\n              if (key === 'Tab') {\n                const topAction = actionArea.querySelector(\n                  'div.action:first-child button'\n                ) as HTMLButtonElement | null;\n\n                if (topAction !== null) {\n                  topAction.focus();\n\n                  event.preventDefault();\n                  event.stopPropagation();\n\n                  return;\n                }\n              }\n\n              if (key === 'c' && activeUnit) {\n                portal.setCenter(activeUnit.tile.x, activeUnit.tile.y);\n\n                portal.render();\n                minimap.update();\n\n                return;\n              }\n\n              if (key === 'w' && activeUnit && activeUnits.length > 1) {\n                const units = activeUnits.map(\n                    (unitAction) => unitAction.value as Unit\n                  ),\n                  current = units.indexOf(activeUnit),\n                  unit = units[current === units.length - 1 ? 0 : current + 1];\n\n                setActiveUnit(unit, portal, unitsMap, activeUnitsMap);\n              }\n\n              if (key === 't') {\n                unitsMap.setVisible(!unitsMap.isVisible());\n                citiesMap.setVisible(!citiesMap.isVisible());\n                cityNamesMap.setVisible(!cityNamesMap.isVisible());\n\n                portal.render();\n\n                return;\n              }\n\n              if (key === 'y') {\n                yieldsMap.setVisible(!yieldsMap.isVisible());\n\n                portal.render();\n\n                return;\n              }\n\n              if (lastKey === '%' && key === '^') {\n                transport.send('cheat', { name: 'RevealMap', value: null });\n\n                return;\n              }\n\n              lastKey = key;\n            });\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      );\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n\nexport default Renderer;\n", "export type PlainObject = {\n  [key: string]: any;\n};\n\nexport type ObjectStore = {\n  [key: string]: PlainObject;\n};\n\nexport type ObjectMap = {\n  hierarchy: PlainObject;\n  objects: ObjectStore;\n};\n\nexport const reconstituteData = (\n  { hierarchy, objects }: ObjectMap,\n  orphanIds: string[] | null = null\n): PlainObject => {\n  const seenObjects: Map<PlainObject, PlainObject> = new Map();\n\n  if (orphanIds) {\n    Object.keys(objects).forEach((id) => orphanIds.push(id));\n  }\n\n  const getReferences = (value: any): PlainObject => {\n    if (seenObjects.has(value)) {\n      return seenObjects.get(value)!;\n    }\n\n    if (Array.isArray(value)) {\n      const updated: any[] = [];\n\n      seenObjects.set(value, updated);\n\n      value.forEach((value) => updated.push(getReferences(value)));\n\n      return updated;\n    }\n\n    if (value && value['#ref']) {\n      if (orphanIds) {\n        orphanIds.splice(orphanIds.indexOf(value['#ref']), 1);\n      }\n\n      if (!(value['#ref'] in objects)) {\n        throw new TypeError(`missing ${value['#ref']}`);\n      }\n\n      const updated = getReferences(objects[value['#ref']]);\n\n      seenObjects.set(value, updated);\n\n      return updated;\n    }\n\n    if (value instanceof Object) {\n      const updated: PlainObject = {};\n\n      seenObjects.set(value, updated);\n\n      Object.entries(value).forEach(([key, childValue]) => {\n        updated[key] = getReferences(childValue);\n      });\n\n      return updated;\n    }\n\n    return value;\n  };\n\n  return getReferences(hierarchy);\n};\n\nexport default reconstituteData;\n", "import { Element, s } from '@dom111/element';\nimport Action from './Actions/Action';\nimport AdjustTradeRates from './Actions/AdjustTradeRates';\nimport ChooseResearch from './Actions/ChooseResearch';\nimport CityBuild from './Actions/CityBuild';\nimport CivilDisorder from './Actions/CivilDisorder';\nimport EndTurn from './Actions/EndTurn';\nimport { PlayerAction } from '../types';\nimport Portal from './Portal';\nimport Revolution from './Actions/Revolution';\nimport Spaceship from './Actions/Spaceship';\nimport Transport from '../Transport';\nimport { h } from '../lib/html';\nimport { mappedKeyFromEvent } from '../lib/mappedKey';\n\ndeclare global {\n  interface GlobalEventHandlersEventMap {\n    actioned: CustomEvent<Action>;\n  }\n}\n\nexport interface IActions {\n  build(mandatoryActions: PlayerAction[], actions: PlayerAction[]): void;\n}\n\nexport class Actions extends Element implements IActions {\n  #portal: Portal;\n  #transport: Transport;\n\n  constructor(\n    container: HTMLElement = s('<div class=\"actions\"></div>'),\n    portal: Portal,\n    transport: Transport\n  ) {\n    super(container);\n\n    this.#portal = portal;\n    this.#transport = transport;\n\n    this.on('actioned', (event) => event.detail.remove());\n\n    this.on(\n      'keydown',\n      (event) => {\n        const currentChild = document.activeElement;\n\n        if (!this.element().contains(currentChild)) {\n          return;\n        }\n\n        const key = mappedKeyFromEvent(event),\n          children = Array.from(this.element().children) as HTMLElement[];\n\n        if (\n          !['ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowUp'].includes(key) ||\n          children.length === 0\n        ) {\n          return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        let currentAction =\n          currentChild === this.element()\n            ? ['ArrowLeft', 'ArrowUp'].includes(key)\n              ? (currentChild.firstElementChild as HTMLElement)\n              : (currentChild.lastElementChild as HTMLElement)\n            : (currentChild as HTMLElement);\n\n        while (currentAction.parentElement !== this.element()) {\n          currentAction = currentAction.parentElement as HTMLElement;\n        }\n\n        const currentIndex = children.indexOf(currentAction);\n\n        if (['ArrowUp', 'ArrowLeft'].includes(key)) {\n          if (currentIndex > 0) {\n            children[currentIndex - 1].querySelector('button')?.focus();\n\n            return;\n          }\n\n          children.pop()!.querySelector('button')!.focus();\n\n          return;\n        }\n\n        if (['ArrowDown', 'ArrowRight'].includes(key)) {\n          if (currentIndex < children.length - 1) {\n            children[currentIndex + 1]!.querySelector('button')!.focus();\n\n            return;\n          }\n\n          children.shift()!.querySelector('button')!.focus();\n\n          return;\n        }\n      },\n      true\n    );\n  }\n\n  build(actions: PlayerAction[]): void {\n    this.empty();\n\n    actions.forEach((playerAction) => {\n      let action: Action;\n\n      switch (playerAction._) {\n        // This is handled separately so no need to worry.\n        case 'ActiveUnit':\n          return;\n\n        case 'AdjustTradeRates':\n          action = new AdjustTradeRates(playerAction, this.#transport);\n\n          break;\n\n        case 'ChooseResearch':\n          action = new ChooseResearch(playerAction, this.#transport);\n\n          break;\n\n        case 'CityBuild':\n          action = new CityBuild(playerAction, this.#portal, this.#transport);\n\n          break;\n\n        case 'CivilDisorder':\n          action = new CivilDisorder(\n            playerAction,\n            this.#portal,\n            this.#transport\n          );\n\n          break;\n\n        case 'EndTurn':\n          action = new EndTurn(playerAction, this.#transport);\n\n          break;\n\n        case 'LaunchSpaceship':\n          action = new Spaceship(playerAction, this.#transport);\n\n          break;\n\n        case 'Revolution':\n          action = new Revolution(playerAction, this.#transport);\n\n          break;\n\n        case 'ChangeProduction':\n        case 'CompleteProduction':\n        case 'InactiveUnit':\n          return;\n\n        default:\n          console.log('need to handle ' + playerAction._);\n          return;\n        // throw new TypeError(`Unknown action type '${action._}'.`);\n      }\n\n      this.element().prepend(\n        h(action.element(), {\n          click: () => action.activate(),\n          keydown: ({ key }) => {\n            if (key === ' ' || key === 'Enter') {\n              action.activate();\n            }\n          },\n        })\n      );\n    });\n  }\n}\n\nexport default Actions;\n", "import {\n  City,\n  CityBuild,\n  PlayerAction,\n  PlayerGovernment,\n  PlayerResearch,\n  PlayerTradeRates,\n  Spaceship,\n  Unit,\n} from '../../types';\nimport { Element, s } from '@dom111/element';\nimport Transport from '../../Transport';\n\ndeclare global {\n  interface GlobalEventHandlersEventMap {\n    actioned: CustomEvent<Action>;\n  }\n}\n\nexport interface IAction {\n  activate(): void;\n  build(): void;\n  complete(): void;\n  element(): HTMLElement;\n  value():\n    | City\n    | CityBuild\n    | PlayerResearch\n    | Unit\n    | PlayerGovernment\n    | PlayerTradeRates\n    | Spaceship;\n}\n\nexport class Action extends Element implements IAction {\n  #action: PlayerAction;\n  #transport: Transport;\n\n  constructor(action: PlayerAction, transport: Transport) {\n    super(s('<div class=\"action\"></div>'));\n\n    this.#action = action;\n    this.#transport = transport;\n\n    this.on('keydown', (event) => {\n      if (event.key === 'Escape') {\n        return;\n      }\n\n      event.stopPropagation();\n    });\n\n    this.build();\n  }\n\n  activate(): void {}\n\n  build(): void {}\n\n  complete(): void {\n    this.emit(\n      new CustomEvent('actioned', {\n        bubbles: true,\n        detail: this,\n      })\n    );\n  }\n\n  transport(): Transport {\n    return this.#transport;\n  }\n\n  value():\n    | City\n    | CityBuild\n    | PlayerResearch\n    | Unit\n    | PlayerGovernment\n    | PlayerTradeRates\n    | Spaceship {\n    return this.#action.value;\n  }\n}\n\nexport default Action;\n", "import { Element, s } from '@dom111/element';\nimport { t } from 'i18next';\n\nconst template: (label: string, value: number) => HTMLFieldSetElement = (\n  label: string,\n  value: number\n) =>\n  s(\n    `<fieldset><legend>${label}</legend><input type=\"range\" max=\"100\" min=\"0\" step=\"1\" value=\"${value}\"><input type=\"number\"><label><input type=\"checkbox\">${t(\n      'LockedSlider.lock'\n    )}</label></fieldset>`\n  ) as HTMLFieldSetElement;\n\nexport type onInputHandler = () => void;\n\nexport class LockedSlider extends Element {\n  #key: string;\n  #label: string;\n  #range: HTMLInputElement;\n  #number: HTMLInputElement;\n  #lock: HTMLInputElement;\n  #listeners: onInputHandler[] = [];\n\n  constructor(key: string, currentValue: number, label: string) {\n    super(template(label, currentValue));\n\n    this.#key = key;\n    this.#label = label;\n    this.#range = this.element().querySelector(\n      'input[type=\"range\"]'\n    ) as HTMLInputElement;\n    this.#number = this.element().querySelector(\n      'input[type=\"number\"]'\n    ) as HTMLInputElement;\n    this.#lock = this.element().querySelector(\n      'input[type=\"checkbox\"]'\n    ) as HTMLInputElement;\n\n    this.build();\n  }\n\n  build(): void {\n    this.set(this.#range.value);\n\n    this.#range.addEventListener('input', () => this.set(this.#range.value));\n\n    this.#number.addEventListener('input', () => this.set(this.#number.value));\n\n    this.#lock.addEventListener('input', () => this.lock());\n\n    this.lock();\n  }\n\n  key(): string {\n    return this.#key;\n  }\n\n  label(): string {\n    return this.#label;\n  }\n\n  private lock(): void {\n    if (this.isLocked()) {\n      this.#range.setAttribute('disabled', '');\n      this.#number.setAttribute('disabled', '');\n\n      return;\n    }\n\n    this.#range.removeAttribute('disabled');\n    this.#number.removeAttribute('disabled');\n  }\n\n  onInput(handler: onInputHandler): void {\n    this.#listeners.push(handler);\n  }\n\n  isLocked(): boolean {\n    return this.#lock.checked;\n  }\n\n  set(value: string): void {\n    value = Math.max(parseInt(value, 10), 0).toString();\n\n    if (this.#range.value !== value) {\n      this.#range.value = value;\n    }\n\n    if (this.#number.value !== value) {\n      this.#number.value = value;\n    }\n\n    this.#listeners.forEach((listener) => listener());\n  }\n\n  value(): number {\n    return parseInt(this.#range.value, 10);\n  }\n}\n\nexport default LockedSlider;\n", "import LockedSlider from './LockedSlider';\n\nexport class LockedSliderGroup {\n  #sliders;\n\n  constructor(...sliders: LockedSlider[]) {\n    this.#sliders = sliders;\n\n    this.#sliders.forEach((slider) =>\n      slider.onInput(() => {\n        if (this.total() === 100) {\n          return;\n        }\n\n        const otherSliders = this.#sliders.filter(\n            (otherSlider) => otherSlider !== slider\n          ),\n          otherActiveSliders = otherSliders.filter(\n            (slider) => !slider.isLocked()\n          );\n\n        if (this.total() !== 100 && otherActiveSliders.length === 0) {\n          slider.set((100 - this.total(otherSliders)).toString());\n\n          return;\n        }\n\n        if (this.total() > 100) {\n          let overage = this.total() - 100,\n            chunk = Math.ceil(overage / otherActiveSliders.length);\n\n          otherActiveSliders.forEach((otherSlider) => {\n            otherSlider.set(\n              (otherSlider.value() - Math.min(chunk, overage)).toString()\n            );\n\n            overage -= chunk;\n          });\n\n          if (this.total() > 100) {\n            slider.set((100 - this.total(otherSliders)).toString());\n          }\n        }\n\n        if (this.total() < 100) {\n          let remaining = 100 - this.total(),\n            chunk = Math.ceil(remaining / otherActiveSliders.length);\n\n          otherActiveSliders.forEach((otherSlider) => {\n            otherSlider.set(\n              (otherSlider.value() + Math.min(chunk, remaining)).toString()\n            );\n\n            remaining -= chunk;\n          });\n\n          if (this.total() < 100) {\n            slider.set((100 - this.total(otherSliders)).toString());\n          }\n        }\n      })\n    );\n  }\n\n  sliders(): LockedSlider[] {\n    return this.#sliders;\n  }\n\n  private total(sliders = this.#sliders): number {\n    return sliders.reduce((total, slider) => total + slider.value(), 0);\n  }\n}\n\nexport default LockedSliderGroup;\n", "import { CustomEventMap, Element, s } from '@dom111/element';\n\nexport interface ITransientElement {\n  display(): void;\n  parent(): HTMLElement;\n}\n\nexport class TransientElement<\n    T extends HTMLElement = HTMLElement,\n    M extends CustomEventMap = CustomEventMap\n  >\n  extends Element<T, M>\n  implements ITransientElement\n{\n  #parent: HTMLElement;\n\n  constructor(parent: HTMLElement, element: T = s('<div></div>')) {\n    super(element);\n\n    // capture keys in the notification window\n    this.on('keydown', (event: KeyboardEvent) => {\n      event.stopPropagation();\n    });\n\n    this.element().setAttribute('tabindex', '0');\n\n    this.#parent = parent;\n  }\n\n  build(): void {}\n\n  display(): void {\n    this.build();\n\n    this.#parent.append(this.element());\n  }\n\n  parent(): HTMLElement {\n    return this.#parent;\n  }\n}\n\nexport default TransientElement;\n", "import { TransientElement, ITransientElement } from './TransientElement';\nimport { off, on, s } from '@dom111/element';\nimport { Coordinate } from '../types';\nimport { h } from '../lib/html';\nimport { t } from 'i18next';\n\nexport interface IWindow extends ITransientElement {\n  close(): void;\n  maximise(): void;\n}\n\ntype WindowSize = {\n  height: number | string;\n  width: number | string;\n};\n\ntype WindowPosition = {\n  x: number;\n  y: number;\n};\n\nexport type WindowSettings = {\n  autoDisplay: boolean;\n  autofocus: boolean;\n  canClose: boolean;\n  canMaximise: boolean;\n  canResize: boolean;\n  classes: string | string[];\n  modal: boolean;\n  parent: HTMLElement;\n  position: WindowPosition | 'auto';\n  size: WindowSize | 'auto' | 'maximised';\n};\n\nexport type WindowOptions = { [K in keyof WindowSettings]?: WindowSettings[K] };\n\nconst defaultOptions: WindowSettings = {\n  autoDisplay: true,\n  autofocus: true,\n  canClose: true,\n  canMaximise: false,\n  canResize: false,\n  classes: '',\n  modal: false,\n  parent: document.body,\n  position: 'auto',\n  size: 'auto',\n};\n\nexport class Window\n  extends TransientElement<\n    HTMLDialogElement,\n    {\n      close: [];\n    }\n  >\n  implements IWindow\n{\n  private options: WindowSettings;\n  #body: string | Node;\n  #title: string;\n\n  constructor(title: string, body: string | Node, options: WindowOptions = {}) {\n    super(\n      options.parent ?? defaultOptions.parent,\n      s<HTMLDialogElement>(\n        `<dialog class=\"window\"${\n          options.autofocus ? ' autofocus' : ''\n        }></dialog>`\n      )\n    );\n\n    this.on('cancel', (event) => event.preventDefault());\n\n    this.options = {\n      ...defaultOptions,\n      ...options,\n    };\n\n    this.#body = body;\n    this.#title = title;\n\n    if (this.options.modal) {\n      this.addClass('modal');\n    }\n\n    if (this.options.size === 'auto') {\n      this.addClass('size-auto');\n    }\n\n    if (this.options.size === 'maximised') {\n      this.addClass('maximised');\n    }\n\n    if (this.options.size !== 'auto') {\n      (['height', 'width'] as ('height' | 'width')[]).forEach((dimension) => {\n        const value = (this.options.size as WindowSize)[dimension];\n\n        if (typeof value === 'number') {\n          this.element().style[dimension] = value + 'px';\n\n          return;\n        }\n\n        this.element().style[dimension] = value;\n      });\n    }\n\n    if (this.options.position === 'auto') {\n      this.addClass('position-auto');\n    }\n\n    if (this.options.position !== 'auto') {\n      (\n        [\n          ['x', 'left'],\n          ['y', 'top'],\n        ] as ['x' | 'y', 'left' | 'top'][]\n      ).forEach(([axis, property]) => {\n        this.element().style[property] =\n          Math.min(\n            0,\n            Math.max(\n              document.body.clientHeight - 20,\n              (this.options.position as WindowPosition)[axis]\n            )\n          ) + 'px';\n      });\n    }\n\n    if (this.options.classes) {\n      this.addClass(\n        ...(Array.isArray(this.options.classes)\n          ? this.options.classes\n          : [this.options.classes])\n      );\n    }\n\n    if (this.options.autoDisplay) {\n      this.display();\n\n      return;\n    }\n\n    this.build();\n  }\n\n  build(): void {\n    this.empty();\n\n    const headerActions: HTMLElement[] = (\n      [\n        [\n          this.options.canMaximise,\n          h(\n            s(\n              `<button class=\"maximise\" aria-label=\"${t(\n                'Window.maximize'\n              )}\">${t('Window.maximize')}</button>`\n            ),\n            {\n              click: () => this.maximise(),\n            }\n          ),\n        ],\n        [\n          this.options.canClose,\n          h(\n            s(\n              `<button class=\"close\" aria-label=\"${t('Window.close')}\">${t(\n                'Window.close'\n              )}</button>`\n            ),\n            {\n              click: () => this.close(),\n            }\n          ),\n        ],\n      ] as [boolean, HTMLElement][]\n    )\n      .filter(([show]: [boolean, HTMLElement]) => show)\n      .map(([, element]) => element);\n\n    let isDragging = false;\n\n    this.append(\n      h(s(`<header><h3>${this.#title}</h3></header>`, ...headerActions), {\n        dblclick: () => this.maximise(),\n        mousedown: (event) => {\n          if (event.target.matches('button, button img')) {\n            return;\n          }\n\n          isDragging = true;\n\n          const moveHandler = (event: MouseEvent) => {\n            if (!isDragging) {\n              return;\n            }\n\n            this.move({\n              x: event.movementX,\n              y: event.movementY,\n            });\n          };\n\n          on(document, 'mousemove', moveHandler);\n\n          on(\n            document,\n            'mouseup',\n            () => {\n              off(document, 'mousemove', moveHandler);\n\n              isDragging = false;\n            },\n            {\n              once: true,\n            }\n          );\n        },\n      }),\n      s(\n        '<div class=\"body\"></div>',\n        this.#body instanceof Node ? this.#body : s(`<p>${this.#body}</p>`)\n      )\n    );\n  }\n\n  bindClose(): void {\n    this.on('keydown', (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && this.options.canClose) {\n        this.close();\n      }\n\n      // Capture all keypresses whilst this is focused\n      event.stopPropagation();\n    });\n  }\n\n  close(): void {\n    this.element().close();\n    this.remove();\n\n    this.emit(new CustomEvent('close'));\n\n    const windows = document.querySelectorAll('dialog.window');\n\n    if (!windows.length) {\n      return;\n    }\n\n    (windows[windows.length - 1] as HTMLDialogElement).focus();\n  }\n\n  display(focus = this.options.autofocus): void {\n    super.display();\n\n    this.bindClose();\n\n    if (this.options.modal) {\n      this.element().showModal();\n    } else {\n      this.element().show();\n    }\n\n    if (!focus) {\n      return;\n    }\n\n    this.element().focus();\n  }\n\n  maximise(): void {\n    if (!this.options.canMaximise) {\n      return;\n    }\n\n    this.element().classList.toggle('maximised');\n\n    this.emit(\n      new CustomEvent('resize', {\n        bubbles: false,\n      })\n    );\n  }\n\n  move({ x, y }: Coordinate): void {\n    if (this.hasClass('position-auto')) {\n      // Ensure the auto position is accounted for\n      x += this.element().offsetLeft;\n      y += this.element().offsetTop;\n\n      this.removeClass('position-auto');\n\n      this.element().style.setProperty('top', y + 'px');\n      this.element().style.setProperty('left', x + 'px');\n\n      return;\n    }\n\n    const elementComputedStyle = getComputedStyle(this.element()),\n      currentTop = parseInt(elementComputedStyle.getPropertyValue('top'), 10),\n      currentLeft = parseInt(elementComputedStyle.getPropertyValue('left'), 10);\n\n    this.element().style.setProperty('top', currentTop + y + 'px');\n    this.element().style.setProperty('left', currentLeft + x + 'px');\n  }\n\n  update(content: string | Node): void {\n    this.element().lastElementChild!.remove();\n\n    this.append(content instanceof Node ? content : s(`<p>${content}</p>`));\n  }\n}\n\nexport default Window;\n", "export const h = <T extends HTMLElement>(\n  element: T,\n  handlers: { [key: string]: (event: any) => void }\n): T => {\n  Object.entries(handlers).forEach(([eventName, handler]): void =>\n    element.addEventListener(eventName, handler)\n  );\n\n  return element;\n};\n", "const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n", "import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n", "import {\n  DBSchema,\n  IDBPDatabase,\n  StoreKey,\n  StoreNames,\n  StoreValue,\n} from 'idb/build/entry';\nimport { openDB } from 'idb';\n\nexport interface Record {\n  [key: string]: any;\n}\n\nexport class Store<Types extends DBSchema> {\n  #connection: Promise<IDBPDatabase<Types>>;\n  #store: StoreNames<Types>;\n\n  constructor(\n    db: string,\n    store: StoreNames<Types>,\n    options?: IDBObjectStoreParameters\n  ) {\n    this.#store = store;\n\n    this.#connection = openDB(db, 1, {\n      upgrade: (db) => db.createObjectStore(this.#store, options),\n    });\n  }\n\n  async get(key: StoreKey<Types, StoreNames<Types>>) {\n    return (await this.#connection).get(this.#store, key);\n  }\n\n  async getAll(\n    query?: StoreKey<Types, StoreNames<Types>> | IDBKeyRange | null,\n    count?: number\n  ) {\n    return (await this.#connection).getAll(this.#store, query, count);\n  }\n\n  async set(\n    record: StoreValue<Types, StoreNames<Types>>,\n    key?: StoreKey<Types, StoreNames<Types>>\n  ) {\n    return (await this.#connection).put(this.#store, record, key);\n  }\n\n  async clear() {\n    return (await this.#connection).clear(this.#store);\n  }\n\n  async keys() {\n    return (await this.#connection).getAllKeys(this.#store);\n  }\n}\n", "type ScalingOptions = {\n  smoothing?: boolean;\n};\n\nexport const scaleImage = (\n  image: CanvasImageSource,\n  scale: number,\n  options?: ScalingOptions\n): HTMLCanvasElement => {\n  const newCanvas = document.createElement('canvas')!,\n    context = newCanvas.getContext('2d')!;\n\n  newCanvas.width = (image.width as number) * scale;\n  newCanvas.height = (image.height as number) * scale;\n\n  if (!options?.smoothing) {\n    context.imageSmoothingEnabled = false;\n  }\n\n  context.drawImage(image, 0, 0, newCanvas.width, newCanvas.height);\n\n  return newCanvas;\n};\n\nexport default scaleImage;\n", "import { Record, Store } from './Store';\nimport scaleImage from './lib/scaleImage';\n\ninterface Asset extends Record {\n  name: string;\n  uri: string;\n}\n\nexport class AssetStore extends Store<{\n  assets: {\n    key: string;\n    value: Asset;\n  };\n}> {\n  #cachedAssets = new Map<string, Asset>();\n  #cachedImages = new Map<string, HTMLImageElement>();\n  #cachedScaledImages = new Map<string, HTMLCanvasElement>();\n  #requiredAssets: string[] = [\n    './assets/city/bulb.png',\n    './assets/city/food.png',\n    './assets/city/gold.png',\n    './assets/city/luxury.png',\n    './assets/city/people_content_f.png',\n    './assets/city/people_content_m.png',\n    './assets/city/people_happy_f.png',\n    './assets/city/people_happy_m.png',\n    './assets/city/people_luxury.png',\n    './assets/city/people_science.png',\n    './assets/city/people_tax.png',\n    './assets/city/people_unhappy_f.png',\n    './assets/city/people_unhappy_m.png',\n    './assets/city/pollution.png',\n    './assets/city/sad.png',\n    './assets/city/production.png',\n    './assets/city/trade.png',\n    './assets/cursor/go.png',\n    './assets/cursor/torch.png',\n    './assets/general/texture_1.png',\n    './assets/general/texture_2.png',\n    './assets/improvements/irrigation.png',\n    './assets/improvements/mine.png',\n    './assets/improvements/pollution.png',\n    './assets/improvements/railroad_e.png',\n    './assets/improvements/railroad_se.png',\n    './assets/improvements/railroad_n.png',\n    './assets/improvements/railroad_ne.png',\n    './assets/improvements/railroad_nw.png',\n    './assets/improvements/railroad_s.png',\n    './assets/improvements/railroad_sw.png',\n    './assets/improvements/railroad_w.png',\n    './assets/improvements/road_e.png',\n    './assets/improvements/road_n.png',\n    './assets/improvements/road_ne.png',\n    './assets/improvements/road_nw.png',\n    './assets/improvements/road_s.png',\n    './assets/improvements/road_se.png',\n    './assets/improvements/road_sw.png',\n    './assets/improvements/road_w.png',\n    './assets/map/city.png',\n    './assets/map/fog_e.png',\n    './assets/map/fog_n.png',\n    './assets/map/fog_s.png',\n    './assets/map/fog_w.png',\n    './assets/map/fort.png',\n    './assets/map/fortify.png',\n    './assets/map/hut.png',\n    './assets/status/pollution_0.png',\n    './assets/status/pollution_25.png',\n    './assets/status/pollution_50.png',\n    './assets/status/pollution_75.png',\n    './assets/status/science_0.png',\n    './assets/status/science_25.png',\n    './assets/status/science_50.png',\n    './assets/status/science_75.png',\n    './assets/terrain/arctic.png',\n    './assets/terrain/arctic_e.png',\n    './assets/terrain/arctic_es.png',\n    './assets/terrain/arctic_esw.png',\n    './assets/terrain/arctic_ew.png',\n    './assets/terrain/arctic_n.png',\n    './assets/terrain/arctic_ne.png',\n    './assets/terrain/arctic_nes.png',\n    './assets/terrain/arctic_nesw.png',\n    './assets/terrain/arctic_new.png',\n    './assets/terrain/arctic_ns.png',\n    './assets/terrain/arctic_nsw.png',\n    './assets/terrain/arctic_nw.png',\n    './assets/terrain/arctic_s.png',\n    './assets/terrain/arctic_sw.png',\n    './assets/terrain/arctic_w.png',\n    './assets/terrain/coal.png',\n    './assets/terrain/coast_sprite.png',\n    './assets/terrain/desert.png',\n    './assets/terrain/desert_e.png',\n    './assets/terrain/desert_es.png',\n    './assets/terrain/desert_esw.png',\n    './assets/terrain/desert_ew.png',\n    './assets/terrain/desert_n.png',\n    './assets/terrain/desert_ne.png',\n    './assets/terrain/desert_nes.png',\n    './assets/terrain/desert_nesw.png',\n    './assets/terrain/desert_new.png',\n    './assets/terrain/desert_ns.png',\n    './assets/terrain/desert_nsw.png',\n    './assets/terrain/desert_nw.png',\n    './assets/terrain/desert_s.png',\n    './assets/terrain/desert_sw.png',\n    './assets/terrain/desert_w.png',\n    './assets/terrain/doe.png',\n    './assets/terrain/fish.png',\n    './assets/terrain/forest.png',\n    './assets/terrain/forest_e.png',\n    './assets/terrain/forest_es.png',\n    './assets/terrain/forest_esw.png',\n    './assets/terrain/forest_ew.png',\n    './assets/terrain/forest_n.png',\n    './assets/terrain/forest_ne.png',\n    './assets/terrain/forest_nes.png',\n    './assets/terrain/forest_nesw.png',\n    './assets/terrain/forest_new.png',\n    './assets/terrain/forest_ns.png',\n    './assets/terrain/forest_nsw.png',\n    './assets/terrain/forest_nw.png',\n    './assets/terrain/forest_s.png',\n    './assets/terrain/forest_sw.png',\n    './assets/terrain/forest_w.png',\n    './assets/terrain/gems.png',\n    './assets/terrain/gold.png',\n    './assets/terrain/grassland.png',\n    './assets/terrain/grassland_e.png',\n    './assets/terrain/grassland_es.png',\n    './assets/terrain/grassland_esw.png',\n    './assets/terrain/grassland_ew.png',\n    './assets/terrain/grassland_n.png',\n    './assets/terrain/grassland_ne.png',\n    './assets/terrain/grassland_nes.png',\n    './assets/terrain/grassland_nesw.png',\n    './assets/terrain/grassland_new.png',\n    './assets/terrain/grassland_ns.png',\n    './assets/terrain/grassland_nsw.png',\n    './assets/terrain/grassland_nw.png',\n    './assets/terrain/grassland_s.png',\n    './assets/terrain/grassland_sw.png',\n    './assets/terrain/grassland_w.png',\n    './assets/terrain/hills.png',\n    './assets/terrain/hills_e.png',\n    './assets/terrain/hills_es.png',\n    './assets/terrain/hills_esw.png',\n    './assets/terrain/hills_ew.png',\n    './assets/terrain/hills_n.png',\n    './assets/terrain/hills_ne.png',\n    './assets/terrain/hills_nes.png',\n    './assets/terrain/hills_nesw.png',\n    './assets/terrain/hills_new.png',\n    './assets/terrain/hills_ns.png',\n    './assets/terrain/hills_nsw.png',\n    './assets/terrain/hills_nw.png',\n    './assets/terrain/hills_s.png',\n    './assets/terrain/hills_sw.png',\n    './assets/terrain/hills_w.png',\n    './assets/terrain/horse.png',\n    './assets/terrain/jungle.png',\n    './assets/terrain/jungle_e.png',\n    './assets/terrain/jungle_es.png',\n    './assets/terrain/jungle_esw.png',\n    './assets/terrain/jungle_ew.png',\n    './assets/terrain/jungle_n.png',\n    './assets/terrain/jungle_ne.png',\n    './assets/terrain/jungle_nes.png',\n    './assets/terrain/jungle_nesw.png',\n    './assets/terrain/jungle_new.png',\n    './assets/terrain/jungle_ns.png',\n    './assets/terrain/jungle_nsw.png',\n    './assets/terrain/jungle_nw.png',\n    './assets/terrain/jungle_s.png',\n    './assets/terrain/jungle_sw.png',\n    './assets/terrain/jungle_w.png',\n    './assets/terrain/land.png',\n    './assets/terrain/mountains.png',\n    './assets/terrain/mountains_e.png',\n    './assets/terrain/mountains_es.png',\n    './assets/terrain/mountains_esw.png',\n    './assets/terrain/mountains_ew.png',\n    './assets/terrain/mountains_n.png',\n    './assets/terrain/mountains_ne.png',\n    './assets/terrain/mountains_nes.png',\n    './assets/terrain/mountains_nesw.png',\n    './assets/terrain/mountains_new.png',\n    './assets/terrain/mountains_ns.png',\n    './assets/terrain/mountains_nsw.png',\n    './assets/terrain/mountains_nw.png',\n    './assets/terrain/mountains_s.png',\n    './assets/terrain/mountains_sw.png',\n    './assets/terrain/mountains_w.png',\n    './assets/terrain/oasis.png',\n    './assets/terrain/ocean.png',\n    './assets/terrain/oil.png',\n    './assets/terrain/plains.png',\n    './assets/terrain/plains_e.png',\n    './assets/terrain/plains_es.png',\n    './assets/terrain/plains_esw.png',\n    './assets/terrain/plains_ew.png',\n    './assets/terrain/plains_n.png',\n    './assets/terrain/plains_ne.png',\n    './assets/terrain/plains_nes.png',\n    './assets/terrain/plains_nesw.png',\n    './assets/terrain/plains_new.png',\n    './assets/terrain/plains_ns.png',\n    './assets/terrain/plains_nsw.png',\n    './assets/terrain/plains_nw.png',\n    './assets/terrain/plains_s.png',\n    './assets/terrain/plains_sw.png',\n    './assets/terrain/plains_w.png',\n    './assets/terrain/river_e.png',\n    './assets/terrain/river_es.png',\n    './assets/terrain/river_esw.png',\n    './assets/terrain/river_ew.png',\n    './assets/terrain/river_mouth_e.png',\n    './assets/terrain/river_mouth_n.png',\n    './assets/terrain/river_mouth_s.png',\n    './assets/terrain/river_mouth_w.png',\n    './assets/terrain/river.png',\n    './assets/terrain/river_n.png',\n    './assets/terrain/river_ne.png',\n    './assets/terrain/river_nes.png',\n    './assets/terrain/river_nesw.png',\n    './assets/terrain/river_new.png',\n    './assets/terrain/river_ns.png',\n    './assets/terrain/river_nsw.png',\n    './assets/terrain/river_nw.png',\n    './assets/terrain/river_s.png',\n    './assets/terrain/river_sw.png',\n    './assets/terrain/river_w.png',\n    './assets/terrain/seal.png',\n    './assets/terrain/shield.png',\n    './assets/terrain/game.png',\n    './assets/terrain/swamp.png',\n    './assets/terrain/swamp_e.png',\n    './assets/terrain/swamp_es.png',\n    './assets/terrain/swamp_esw.png',\n    './assets/terrain/swamp_ew.png',\n    './assets/terrain/swamp_n.png',\n    './assets/terrain/swamp_ne.png',\n    './assets/terrain/swamp_nes.png',\n    './assets/terrain/swamp_nesw.png',\n    './assets/terrain/swamp_new.png',\n    './assets/terrain/swamp_ns.png',\n    './assets/terrain/swamp_nsw.png',\n    './assets/terrain/swamp_nw.png',\n    './assets/terrain/swamp_s.png',\n    './assets/terrain/swamp_sw.png',\n    './assets/terrain/swamp_w.png',\n    './assets/terrain/tundra.png',\n    './assets/terrain/tundra_e.png',\n    './assets/terrain/tundra_es.png',\n    './assets/terrain/tundra_esw.png',\n    './assets/terrain/tundra_ew.png',\n    './assets/terrain/tundra_n.png',\n    './assets/terrain/tundra_ne.png',\n    './assets/terrain/tundra_nes.png',\n    './assets/terrain/tundra_nesw.png',\n    './assets/terrain/tundra_new.png',\n    './assets/terrain/tundra_ns.png',\n    './assets/terrain/tundra_nsw.png',\n    './assets/terrain/tundra_nw.png',\n    './assets/terrain/tundra_s.png',\n    './assets/terrain/tundra_sw.png',\n    './assets/terrain/tundra_w.png',\n    './assets/units/tank.png',\n    './assets/units/artillery.png',\n    './assets/units/battleship.png',\n    './assets/units/bomber.png',\n    './assets/units/cannon.png',\n    './assets/units/caravan.png',\n    './assets/units/carrier.png',\n    './assets/units/catapult.png',\n    './assets/units/horseman.png',\n    './assets/units/chariot.png',\n    './assets/units/combat_1.png',\n    './assets/units/combat_2.png',\n    './assets/units/combat_3.png',\n    './assets/units/combat_4.png',\n    './assets/units/combat_5.png',\n    './assets/units/combat_6.png',\n    './assets/units/combat_7.png',\n    './assets/units/combat_8.png',\n    './assets/units/cruiser.png',\n    './assets/units/diplomat.png',\n    './assets/units/fighter.png',\n    './assets/units/frigate.png',\n    './assets/units/ironclad.png',\n    './assets/units/knight.png',\n    './assets/units/swordman.png',\n    './assets/units/mechanizedinfantry.png',\n    './assets/units/warrior.png',\n    './assets/units/musketman.png',\n    './assets/units/nuclear.png',\n    './assets/units/spearman.png',\n    './assets/units/rifleman.png',\n    './assets/units/sail.png',\n    './assets/units/settlers.png',\n    './assets/units/submarine.png',\n    './assets/units/transport.png',\n    './assets/units/trireme.png',\n  ];\n\n  constructor() {\n    super('civ-clone-assets', 'assets', {\n      keyPath: 'name',\n    });\n  }\n\n  async get(path: string): Promise<Asset> {\n    if (!this.#cachedAssets.has(path)) {\n      this.#cachedAssets.set(path, (await super.get(path))!);\n    }\n\n    return this.#cachedAssets.get(path)!;\n  }\n\n  async getImage(path: string): Promise<HTMLImageElement> {\n    if (!this.#cachedImages.has(path)) {\n      const asset = await this.get(path),\n        image = document.createElement('img')!;\n\n      image.src = asset.uri;\n\n      this.#cachedImages.set(path, image);\n    }\n\n    return this.#cachedImages.get(path)!;\n  }\n\n  async getScaled(path: string, scale: number): Promise<HTMLCanvasElement> {\n    if (!this.#cachedScaledImages.has(path)) {\n      this.#cachedScaledImages.set(\n        path,\n        scaleImage(await this.getImage(path), scale)\n      );\n    }\n\n    return this.#cachedScaledImages.get(path)!;\n  }\n\n  async hasAllAssets(): Promise<boolean> {\n    return (await this.missingAssets()).length === 0;\n  }\n\n  async missingAssets(): Promise<string[]> {\n    const dbAssets = await this.keys();\n\n    return this.#requiredAssets.filter(\n      (requiredAsset) => !dbAssets.includes(requiredAsset)\n    );\n  }\n}\n\nexport const assetStore = new AssetStore();\n", "import Action from './Action';\nimport LockedSlider from '../LockedSlider';\nimport LockedSliderGroup from '../LockedSliderGroup';\nimport { PlayerTradeRates } from '../../types';\nimport Window from '../Window';\nimport { assetStore } from '../../AssetStore';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class AdjustTradeRates extends Action {\n  #sliderGroup: LockedSliderGroup | undefined;\n\n  activate(): void {\n    const sliders: LockedSlider[] = [];\n\n    const window = new Window(\n      t('Actions.AdjustTradeRates.title'),\n      s(\n        '<div></div>',\n        ...this.value().all.map((tradeRate) => {\n          const slider = new LockedSlider(\n            tradeRate._,\n            tradeRate.value,\n            t(`${tradeRate._}.name`, {\n              defaultValue: tradeRate._,\n              ns: 'trade',\n            })\n          );\n\n          sliders.push(slider);\n\n          return slider;\n        })\n      )\n    );\n\n    window.on('close', () => {\n      const value = this.#sliderGroup!.sliders().map(\n        (slider): [string, number] => [slider.key(), slider.value()]\n      );\n\n      this.transport().send('action', {\n        name: 'AdjustTradeRates',\n        id: this.value().id,\n        value,\n      });\n    });\n\n    this.#sliderGroup = new LockedSliderGroup(...sliders);\n  }\n\n  build(): void {\n    assetStore\n      .get('./assets/city/trade.png')\n      .then((asset) =>\n        this.append(\n          s(\n            `<button class=\"adjustTradeRates small\" title=\"${t(\n              'Actions.AdjustTradeRates.title'\n            )}\"><img src=\"${asset!.uri}\"></button>`\n          )\n        )\n      );\n  }\n\n  value(): PlayerTradeRates {\n    return super.value() as PlayerTradeRates;\n  }\n}\n\nexport default AdjustTradeRates;\n", "import { Window, IWindow, WindowOptions } from './Window';\n\nexport interface INotificationWindow extends IWindow {}\n\nconst notificationQueue: [\n  NotificationWindow,\n  boolean,\n  (...args: any[]) => void\n][] = [];\n\nconst hasOpenWindow = (): boolean =>\n  !!document.querySelector('div.notificationWindow');\n\nexport interface NotificationWindowOptions extends WindowOptions {\n  queue?: boolean;\n}\n\nexport class NotificationWindow extends Window implements INotificationWindow {\n  #options: NotificationWindowOptions = {};\n\n  constructor(\n    title: string,\n    body: string | Node,\n    passedOptions: NotificationWindowOptions = {}\n  ) {\n    const options = {\n      autofocus: true,\n      canClose: true,\n      canMaximise: false,\n      classes: 'notificationWindow',\n      queue: true,\n      ...passedOptions,\n    };\n\n    super(title, body, options);\n\n    this.#options = options;\n  }\n\n  bindClose(): void {\n    this.on('keydown', (event) => {\n      if (['Enter', 'Escape'].includes(event.key) && this.#options.canClose) {\n        this.close();\n\n        event.stopPropagation();\n      }\n    });\n  }\n\n  close(): void {\n    super.close();\n\n    if (notificationQueue.length && hasOpenWindow()) {\n      const [notification, focus, resolve] = notificationQueue.shift()!;\n\n      notification.display(focus);\n\n      resolve();\n    }\n  }\n\n  display(focus = true): Promise<void> {\n    return new Promise((resolve) => {\n      if (hasOpenWindow()) {\n        notificationQueue.push([this, focus, resolve]);\n\n        return;\n      }\n\n      super.display();\n\n      if (!focus) {\n        resolve();\n\n        return;\n      }\n\n      this.element().focus();\n\n      resolve();\n    });\n  }\n}\n\nexport default NotificationWindow;\n", "import {\n  INotificationWindow,\n  NotificationWindow,\n  NotificationWindowOptions,\n} from './NotificationWindow';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\n\nexport interface ActionWindowAction {\n  label: string;\n  action: (window: INotificationWindow) => void;\n}\n\nexport interface ActionWindowActions {\n  [key: string]: ActionWindowAction;\n}\n\nexport interface ActionWindowOptions extends NotificationWindowOptions {\n  actions?: ActionWindowActions;\n}\n\nexport class ActionWindow extends NotificationWindow {\n  constructor(\n    title: string,\n    body: string | Node,\n    options: ActionWindowOptions = {}\n  ) {\n    options = {\n      classes: 'actionWindow',\n      ...options,\n      actions: {\n        primary: {\n          label: 'OK',\n          action: (actionWindow) => actionWindow.close(),\n          ...(options.actions?.primary ?? {}),\n        },\n        ...options.actions,\n      },\n    };\n\n    super(\n      title,\n      s(\n        '<div></div>',\n        ...(body instanceof Node\n          ? [body]\n          : body === null\n          ? []\n          : [s(`<p>${body}</p>`)]),\n        s(\n          '<footer></footer>',\n          ...Object.entries(options.actions!).map(([, { label, action }]) =>\n            h(s(`<button>${label}</button>`), {\n              click: () => action(this),\n              keydown: (event) => {\n                if (event.key === 'Enter') {\n                  action(this);\n                }\n              },\n            })\n          )\n        )\n      ),\n      options\n    );\n  }\n}\n\nexport default ActionWindow;\n", "import { ActionWindow, ActionWindowOptions } from './ActionWindow';\nimport { off, on, s } from '@dom111/element';\nimport { INotificationWindow } from './NotificationWindow';\nimport { h } from '../lib/html';\nimport { mappedKeyFromEvent } from '../lib/mappedKey';\nimport { t } from 'i18next';\n\nexport interface ISelectionWindow extends INotificationWindow {\n  resize(): void;\n  selectionList(): HTMLSelectElement;\n}\n\nexport interface SelectionWindowOption {\n  label?: string;\n  value: any;\n}\n\nexport interface SelectionWindowOptions extends ActionWindowOptions {\n  autoFocus?: boolean;\n  displayAll?: boolean;\n}\n\nexport class SelectionWindow extends ActionWindow implements ISelectionWindow {\n  #resizeHandler = () => this.resize();\n  #selectionList: HTMLSelectElement;\n\n  constructor(\n    title: string,\n    optionList: SelectionWindowOption[],\n    onChoose: (selection: string) => void,\n    body: string | Node | null = t('SelectionWindow.default-body'),\n    options: SelectionWindowOptions = {}\n  ) {\n    options = {\n      autoFocus: true,\n      displayAll: false,\n      ...options,\n      actions: {\n        primary: {\n          label: t('Generic.ok'),\n          action: () => chooseHandler(this.selectionList().value),\n          ...(options.actions?.primary ?? {}),\n        },\n        ...options.actions,\n      },\n    };\n\n    const chooseHandler = (selection: string): void => {\n        this.emit(\n          new CustomEvent<string>('selection', {\n            detail: selection,\n          })\n        );\n\n        this.close();\n\n        onChoose(selection);\n      },\n      selectionList: HTMLSelectElement = h(\n        s(\n          `<select>${optionList\n            .map(\n              (option) =>\n                `<option value=\"${option.value}\">${t(\n                  option.label || option.value\n                )}</option>`\n            )\n            .join('')}</select>`\n        ),\n        {\n          keydown: (event: KeyboardEvent) => {\n            const key = mappedKeyFromEvent(event);\n\n            if (key === 'Enter') {\n              chooseHandler(selectionList.value);\n\n              event.preventDefault();\n            }\n\n            if (\n              [\n                'ArrowDown',\n                'ArrowUp',\n                'End',\n                'Home',\n                'PageDown',\n                'PageUp',\n              ].includes(key) &&\n              ![\n                'ArrowDown',\n                'ArrowUp',\n                'End',\n                'Home',\n                'PageDown',\n                'PageUp',\n              ].includes(event.key)\n            ) {\n              const currentIndex = selectionList.selectedIndex,\n                targetIndex = ['Home', 'PageUp'].includes(key)\n                  ? 0\n                  : ['End', 'PageDown'].includes(key)\n                  ? selectionList.length - 1\n                  : currentIndex + (key === 'ArrowUp' ? -1 : 1);\n\n              if (targetIndex > -1 && targetIndex < selectionList.length) {\n                selectionList.selectedIndex = targetIndex;\n              }\n\n              event.preventDefault();\n            }\n          },\n          dblclick: () => chooseHandler(selectionList.value),\n        }\n      );\n\n    if (options.displayAll && optionList.length > 1) {\n      selectionList.setAttribute('size', optionList.length.toString());\n    }\n\n    if (options.autoFocus && optionList.length > 1) {\n      selectionList.setAttribute('autofocus', '');\n    }\n\n    if (options.autoFocus && optionList.length === 1) {\n      selectionList.setAttribute('autofocus', '');\n    }\n\n    super(\n      title,\n      s(\n        '<div></div>',\n        ...(body instanceof Node\n          ? [body]\n          : body === null\n          ? []\n          : [s(`<p>${body}</p>`)]),\n        selectionList\n      ),\n      options\n    );\n\n    this.addClass('selectionWindow');\n    this.#selectionList = selectionList;\n\n    this.resize();\n\n    on(window, 'resize', this.#resizeHandler);\n\n    this.on('focus', () => this.selectionList().focus());\n  }\n\n  close() {\n    off(window, 'resize', this.#resizeHandler);\n\n    super.close();\n  }\n\n  display(): Promise<any> {\n    return super.display().then(() => {\n      const select = this.query('select');\n\n      if (select && select.hasAttribute('autofocus')) {\n        select.focus();\n      }\n    });\n  }\n\n  resize(): void {\n    // TODO: I'd like to have this height scaled automatically.\n    //  Feels like it should be possible using CSS flexbox, but can't get it to work...\n    try {\n      this.selectionList().style.maxHeight = 'none';\n      this.selectionList().style.maxHeight = `calc(${\n        this.element().offsetHeight -\n        (this.element().firstElementChild! as HTMLElement).offsetHeight -\n        ((this.selectionList().previousElementSibling as HTMLElement)\n          ?.offsetHeight ?? 0) -\n        ((this.selectionList().parentElement?.nextElementSibling as HTMLElement)\n          ?.offsetHeight ?? 0)\n      }px - 2.1em)`;\n    } catch (e) {\n      console.warn(e);\n    }\n  }\n\n  selectionList(): HTMLSelectElement {\n    return this.#selectionList;\n  }\n}\n\nexport default SelectionWindow;\n", "const numpadMap: { [key: string]: string } = {\n  '0': 'Insert',\n  '1': 'End',\n  '2': 'ArrowDown',\n  '3': 'PageDown',\n  '4': 'ArrowLeft',\n  '6': 'ArrowRight',\n  '7': 'Home',\n  '8': 'ArrowUp',\n  '9': 'PageUp',\n  '.': 'Delete',\n};\n\nexport const mappedKeyFromEvent = (\n  event: KeyboardEvent,\n  numpadAsArrows: boolean = true\n): string => {\n  if (\n    numpadAsArrows &&\n    event.location === KeyboardEvent.DOM_KEY_LOCATION_NUMPAD &&\n    event.key in numpadMap\n  ) {\n    return numpadMap[event.key];\n  }\n\n  return event.key;\n};\n", "import Action from './Action';\nimport { PlayerResearch } from '../../types';\nimport SelectionWindow from '../SelectionWindow';\nimport { assetStore } from '../../AssetStore';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class ChooseResearch extends Action {\n  activate(): void {\n    const chooseWindow = new SelectionWindow(\n      t('Actions.ChooseResearch.title'),\n      this.value().available.map((advance) => ({\n        label: `${t(`${advance._}.name`, {\n          defaultValue: advance._,\n          ns: 'science',\n        })}`,\n        value: advance._,\n      })),\n      (selection) => {\n        if (!selection) {\n          return;\n        }\n\n        this.transport().send('action', {\n          name: 'ChooseResearch',\n          id: this.value().id,\n          chosen: selection ? selection : '@',\n        });\n\n        this.complete();\n\n        chooseWindow.close();\n      },\n      t('Actions.ChooseResearch.body'),\n      {\n        displayAll: true,\n      }\n    );\n  }\n\n  build(): void {\n    assetStore\n      .get('./assets/city/bulb.png')\n      .then((asset) =>\n        this.append(\n          s(\n            `<button class=\"large chooseResearch\" title=\"${t(\n              'Actions.ChooseResearch.title'\n            )}\"><img src=\"${asset!.uri}\"></button>`\n          )\n        )\n      );\n  }\n\n  value(): PlayerResearch {\n    return super.value() as PlayerResearch;\n  }\n}\n\nexport default ChooseResearch;\n", "import { City } from '../../types';\nimport { t } from 'i18next';\n\nexport const cityName = (city: City | null): string =>\n  city === null\n    ? t('None', {\n        ns: 'city',\n      })\n    : t(`${city.name}.name`, {\n        defaultValue: city.name,\n        ns: 'city',\n      });\n", "import { t } from 'i18next';\nimport { BuildItem, Entity } from '../../types';\n\nexport const getLabelForBuildable = (buildable: BuildItem | null): string =>\n  buildable?.item\n    ? getLabelForBuildableEntity(buildable.item)\n    : t('City.Build.nothing');\n\nexport const getLabelForBuildableEntity = (buildable: Entity): string =>\n  t(\n    [\n      `city:Improvement.${buildable._}.name`,\n      `spaceship:${buildable._}.name`,\n      `unit:${buildable._}.name`,\n      `wonder:${buildable._}.name`,\n    ],\n    {\n      defaultValue: buildable._,\n    }\n  );\n", "import { BuildItem, CityBuild } from '../types';\nimport { ActionWindowActions } from './ActionWindow';\nimport SelectionWindow from './SelectionWindow';\nimport Transport from '../Transport';\nimport { cityName } from './lib/city';\nimport { getLabelForBuildable } from './lib/cityBuild';\nimport { reduceKnownYield } from '../lib/yieldMap';\nimport { t } from 'i18next';\nimport { turnsLeft } from './lib/cityYields';\n\ntype onCompleteHandler = (hasSelected: boolean, ...args: any[]) => void;\n\nexport class CityBuildSelectionWindow extends SelectionWindow {\n  #onComplete: onCompleteHandler;\n  #transport: Transport;\n\n  constructor(\n    cityBuild: CityBuild,\n    transport: Transport,\n    onComplete: onCompleteHandler = () => {},\n    additionalActions: ActionWindowActions = {}\n  ) {\n    super(\n      t('Actions.CityBuildSelectionWindow.title', {\n        cityName: cityName(cityBuild.city),\n      }),\n      cityBuild.available.map((buildItem) => ({\n        label: t('City.Build.build-item', {\n          item: getLabelForBuildable(buildItem),\n          cost: buildItem.cost.value,\n          turns: turnsLeft(\n            { ...cityBuild, ...buildItem } as unknown as CityBuild,\n            cityBuild.city.yields,\n            'Production'\n          ),\n        }) as string,\n        value: buildItem.item._,\n      })),\n      (selection) => {\n        if (!selection) {\n          return;\n        }\n\n        transport.send('action', {\n          name: cityBuild.building === null ? 'CityBuild' : 'ChangeProduction',\n          id: cityBuild.id,\n          chosen: selection ? selection : '@',\n        });\n\n        this.close(true);\n      },\n      null,\n      {\n        actions: additionalActions,\n        displayAll: true,\n      }\n    );\n\n    this.#onComplete = onComplete;\n    this.#transport = transport;\n  }\n\n  close(hasSelected: boolean = false): void {\n    super.close();\n\n    if (hasSelected) {\n      this.#onComplete(hasSelected);\n    }\n  }\n}\n\nexport default CityBuildSelectionWindow;\n", "import { Entity, EntityInstance } from '../types';\n\ntype ClassNameStatus = {\n  [key: string]: boolean;\n};\n\n/**\n * Ensures the `__` property contains at least one of the passed in  `classNames`.\n */\nexport const instanceOf = (\n  object: Entity | EntityInstance | null,\n  ...classNames: string[]\n): boolean =>\n  object?.__.some((entityClassName: string) =>\n    classNames.includes(entityClassName)\n  ) ?? false;\n\n/**\n * Ensures the `__` property contains each of the passed in `classNames`.\n */\nexport const instanceOfAll = (\n  object: Entity | EntityInstance,\n  ...classNames: string[]\n) =>\n  Object.values(\n    object.__.reduce(\n      (classNameStatus: ClassNameStatus, className) => {\n        if (Object.prototype.hasOwnProperty.call(classNameStatus, className)) {\n          classNameStatus[className] = true;\n        }\n\n        return classNameStatus;\n      },\n      classNames.reduce((classNameStatus: ClassNameStatus, className) => {\n        classNameStatus[className] = false;\n\n        return classNameStatus;\n      }, {})\n    )\n  ).every((value) => value);\n\nexport default instanceOf;\n", "import { City, Yield } from '../types';\nimport instanceOf from './instanceOf';\n\nexport const knownGroupParents: string[] = [\n  'Food',\n  'Production',\n  'Trade',\n  'Gold',\n  'Research',\n  'Happiness',\n  'Unhappiness',\n];\nexport const knownGroups: { [key: string]: string } = {\n  Food: 'Food',\n  UnitSupportFood: 'Food',\n  PopulationSupportFood: 'Food',\n  Production: 'Production',\n  UnitSupportProduction: 'Production',\n  Trade: 'Trade',\n  Corruption: 'Trade',\n  Happiness: 'Happiness',\n  LuxuryHappiness: 'Happiness',\n  Unhappiness: 'Unhappiness',\n  MartialLaw: 'Unhappiness',\n  MilitaryUnhappiness: 'Unhappiness',\n  PopulationUnhappiness: 'Unhappiness',\n  CityImprovementContent: 'Unhappiness',\n  Research: 'Research',\n  Luxuries: 'Luxuries',\n  Gold: 'Gold',\n  CityImprovementMaintenanceGold: 'Gold',\n};\n\nexport const knownGroupLookup = Object.entries(knownGroups).reduce(\n  (object, [yieldName, group]) => {\n    if (!Object.prototype.hasOwnProperty.call(object, group)) {\n      object[group] = [];\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(object, yieldName)) {\n      object[yieldName] = [];\n    }\n\n    object[group].push(yieldName);\n    object[yieldName].push(yieldName);\n\n    return object;\n  },\n  {} as { [key: string]: string[] }\n);\n\nexport const reduceKnownYields = (\n  yields: Yield[],\n  ...yieldNames: string[]\n): number[] =>\n  yields.reduce(\n    (yields, cityYield) => {\n      yieldNames.forEach((yieldName, index) => {\n        if (instanceOf(cityYield, yieldName)) {\n          yields[index] += cityYield.value;\n        }\n      });\n\n      return yields;\n    },\n    yieldNames.map(() => 0)\n  );\n\nexport const reduceKnownYield = (yields: Yield[], yieldName: string): number =>\n  reduceKnownYields(yields, yieldName)[0];\n\nexport const knownIcons: { [key: string]: string } = {\n  Food: 'city/food.png',\n  Production: 'city/production.png',\n  Trade: 'city/trade.png',\n  Gold: 'city/gold.png',\n  Luxuries: 'city/luxury.png',\n  Pollution: 'city/pollution.png',\n  Research: 'city/bulb.png',\n  Unhappiness: 'city/sad.png',\n};\n", "import {\n  City as CityData,\n  City,\n  CityBuild,\n  CityGrowth,\n  PlayerResearch,\n  Yield,\n} from '../../types';\nimport {\n  knownGroupLookup,\n  knownGroups,\n  knownIcons,\n  reduceKnownYield,\n  reduceKnownYields,\n} from '../../lib/yieldMap';\nimport { assetStore } from '../../AssetStore';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport const buildTurns = (city: City) =>\n  turnsLeft(city.build, city.yields, 'Production');\n\nexport const growthTurns = (city: City) =>\n  turnsLeft(city.growth, city.yields, 'Food');\n\nexport const renderPopulation = (\n  city: CityData,\n  yields: Yield[] = city.yields\n): Node => {\n  const growth = city.growth,\n    mask = parseInt(city.name.replace(/[^a-z]/gi, ''), 36).toString(2),\n    state = new Array(growth.size).fill(1),\n    population = s('<div class=\"population\"></div>');\n\n  let [happiness, unhappiness] = reduceKnownYields(\n      yields,\n      'Happiness',\n      'Unhappiness'\n    ),\n    currentIndex = state.length - 1;\n\n  while (unhappiness > 0 && currentIndex > -1) {\n    state[currentIndex--] = 0;\n    unhappiness--;\n  }\n\n  currentIndex = 0;\n\n  while (happiness > 0 && currentIndex < state.length) {\n    if (state[currentIndex] === 0) {\n      state[currentIndex]++;\n      happiness--;\n    }\n\n    if (state[currentIndex] === 1) {\n      state[currentIndex++]++;\n      happiness--;\n    }\n\n    if (state[currentIndex] === 2) {\n      currentIndex++;\n    }\n  }\n\n  state.forEach((status, index) =>\n    assetStore\n      .getScaled(\n        `./assets/city/people_${['unhappy', 'content', 'happy'][status]}_${\n          ['f', 'm'][parseInt(mask[index % mask.length], 10)]\n        }.png`,\n        2\n      )\n      .then((image) =>\n        population.append(\n          s(\n            '<span class=\"citizen\"></span>',\n            s(`<img src=\"${image.toDataURL('image/png')}\">`)\n          )\n        )\n      )\n  );\n\n  return population;\n};\n\nexport const renderProgress = (\n  cityData: CityGrowth | CityBuild | PlayerResearch,\n  yields: Yield[],\n  yieldName: string\n) =>\n  t('Progress.body', {\n    progress: cityData.progress.value,\n    total: cityData.cost.value,\n    turns: turnsLeft(cityData, yields, yieldName),\n  });\n\nexport const turnsLeft = (\n  data: CityGrowth | CityBuild | PlayerResearch,\n  yields: Yield[],\n  yieldName: string\n) => {\n  const remainingTurns = Math.max(\n    1,\n    Math.ceil(\n      (data.cost.value - data.progress.value) /\n        Math.abs(reduceKnownYield(yields, yieldName))\n    )\n  );\n\n  // Return 0 so that it can be handled as a plural in the translations as `Never`, rather than `Infinity turns`.\n  return Number.isFinite(remainingTurns) ? remainingTurns : 0;\n};\nexport const turnsText = (turns: number) =>\n  t('Progress.turns', { count: turns });\n\nexport const yieldData = (city: CityData, yieldName: string) =>\n  city.yields.reduce(\n    ([total, used, free], cityYield) => {\n      const isKnown = knownGroupLookup[yieldName]?.includes(cityYield._);\n\n      if (isKnown && cityYield.value > 0) {\n        total += cityYield.value;\n      }\n\n      if (isKnown && cityYield.value < 0) {\n        used += cityYield.value;\n      }\n\n      if (isKnown) {\n        free += cityYield.value;\n      }\n\n      return [total, used, free];\n    },\n    [0, 0, 0]\n  );\n\nexport const yieldImages = (cityYield: { _: string; value: number }): Node[] =>\n  new Array(Math.trunc(Math.abs(cityYield.value))).fill(0).map(() => {\n    const icon = s('<span class=\"yield-icon\"></span>');\n\n    assetStore\n      .getScaled(`./assets/${knownIcons[knownGroups[cityYield._]]}`, 2)\n      .then((image) =>\n        icon.append(s(`<img src=\"${image.toDataURL('image/png')}\">`))\n      );\n\n    return icon;\n  });\n\nexport const yieldLabel = (cityYield: Yield) =>\n  t(`${cityYield._}.name`, {\n    defaultValue: cityYield._,\n    ns: 'yield',\n  });\n", "import { CityBuild as CityBuildObject, PlayerAction } from '../../types';\nimport Action from './Action';\nimport CityBuildSelectionWindow from '../CityBuildSelectionWindow';\nimport Portal from '../Portal';\nimport Transport from '../../Transport';\nimport { assetStore } from '../../AssetStore';\nimport { cityName } from '../lib/city';\nimport { s } from '@dom111/element';\nimport showCityAction from '../lib/showCityAction';\nimport showCityOnMapAction from '../lib/showCityOnMap';\nimport { t } from 'i18next';\n\nexport class CityBuild extends Action {\n  #portal: Portal;\n\n  constructor(action: PlayerAction, portal: Portal, transport: Transport) {\n    super(action, transport);\n\n    this.#portal = portal;\n  }\n\n  activate(): void {\n    new CityBuildSelectionWindow(\n      this.value(),\n      this.transport(),\n      () => this.complete(),\n      {\n        showCity: showCityAction(\n          this.value().city,\n          this.#portal,\n          this.transport()\n        ),\n        showCityOnMap: showCityOnMapAction(this.value().city, this.#portal),\n      }\n    );\n  }\n\n  build(): void {\n    const cityBuild = this.value();\n\n    assetStore.get('./assets/city/production.png').then((asset) =>\n      this.append(\n        s(\n          `<button class=\"large cityBuild\" title=\"${t(\n            'Actions.CityBuildSelectionWindow.title',\n            {\n              cityName: cityName(cityBuild.city),\n            }\n          )}\"><img src=\"${asset!.uri}\"></button>`\n        )\n      )\n    );\n  }\n\n  value(): CityBuildObject {\n    return super.value() as CityBuildObject;\n  }\n}\n\nexport default CityBuild;\n", "import {\n  City as CityData,\n  CityImprovementMaintenanceGold,\n  PlainObject,\n  Player,\n  PlayerTreasury,\n  SpendCost,\n  Unit as UnitData,\n  Yield,\n} from '../types';\nimport { emit, s } from '@dom111/element';\nimport {\n  getLabelForBuildable,\n  getLabelForBuildableEntity,\n} from './lib/cityBuild';\nimport { knownGroupLookup, knownGroups } from '../lib/yieldMap';\nimport {\n  renderPopulation,\n  renderProgress,\n  yieldImages,\n} from './lib/cityYields';\nimport Cities from './Map/Cities';\nimport CityBuildSelectionWindow from './CityBuildSelectionWindow';\nimport ConfirmationWindow from './ConfirmationWindow';\nimport DataObserver from '../DataObserver';\nimport Feature from './Map/Feature';\nimport Fog from './Map/Fog';\nimport Improvements from './Map/Improvements';\nimport Irrigation from './Map/Irrigation';\nimport Land from './Map/Land';\nimport Portal from './Portal';\nimport SupportedUnit from './SupportedUnit';\nimport Terrain from './Map/Terrain';\nimport Transport from '../Transport';\nimport Unit from './Unit';\nimport UnitSelectionWindow from './UnitSelectionWindow';\nimport Units from './Map/Units';\nimport Unworkable from './Map/Unworkable';\nimport Window from './Window';\nimport World from './World';\nimport Yields from './Map/Yields';\nimport { cityName } from './lib/city';\nimport { h } from '../lib/html';\nimport { instance as localeProvider } from '../LocaleProvider';\nimport instanceOf from '../lib/instanceOf';\nimport { t } from 'i18next';\n\nconst reduceYield = (type: string, cityYields: Yield[]): [number, number] =>\n    cityYields\n      .filter((cityYield) => knownGroupLookup[type].includes(cityYield._))\n      .reduce(\n        ([used, free], cityYield) => [\n          used + (cityYield.value < 0 ? -cityYield.value : 0),\n          free + cityYield.value,\n        ],\n        [0, 0]\n      ),\n  renderYields = (city: CityData): Node => {\n    return s(\n      '<div class=\"yields-detail\"></div>',\n      ...[\n        ['Food'],\n        ['Production'],\n        ['Trade'],\n        ['Luxuries', 'Gold', 'Research'],\n      ].map((cityYieldNames) =>\n        s(\n          `<div class=\"yields\" data-yields=\"${cityYieldNames.join(\n            ' '\n          )}\"></div>`,\n          ...cityYieldNames.map((cityYieldName) =>\n            s(\n              `<span class=\"yield\" data-yield=\"${cityYieldName}\"></span>`,\n              ...reduceYield(cityYieldName, city.yields).map((n, i) =>\n                s(\n                  `<span class=\"${['used', 'free'][i]}\"></span>`,\n                  ...yieldImages({\n                    _: cityYieldName,\n                    value: n,\n                  })\n                )\n              )\n            )\n          )\n        )\n      ),\n      // Other, unknown yields\n      ...Object.entries(\n        city.yields\n          .filter(\n            (cityYield) => !Object.keys(knownGroups).includes(cityYield._)\n          )\n          .reduce((yieldObject, cityYield) => {\n            if (!(cityYield._ in yieldObject)) {\n              yieldObject[cityYield._] = 0;\n            }\n\n            yieldObject[cityYield._] += cityYield.value;\n\n            return yieldObject;\n          }, {} as PlainObject)\n      ).map(([key, value]) =>\n        s(\n          `<div><div>${t(`${key}.name`, {\n            defaultValue: key,\n            ns: 'yield',\n          })}</div><div>${value}</div></div>`\n        )\n      )\n    );\n  },\n  resizeYields = (element: HTMLElement) => {\n    const yieldWrappers = element.querySelectorAll('.yields-detail .yield')!;\n\n    Array.from(yieldWrappers).forEach((container) => {\n      const [used, free] = Array.from(container.children);\n\n      while (used.scrollWidth + free.scrollWidth > container.clientWidth) {\n        const currentMaxWidth = parseInt(\n          container.getAttribute('data-max-width') || '14',\n          10\n        );\n\n        if (currentMaxWidth === 0) {\n          break;\n        }\n\n        container.setAttribute(\n          'data-max-width',\n          (currentMaxWidth - 1).toString()\n        );\n      }\n    });\n  },\n  renderMap = (portal: Portal, city: CityData, transport: Transport): Node => {\n    const portalCanvas = s<HTMLCanvasElement>('<canvas></canvas>'),\n      cityPortal = new Portal(\n        new World({\n          ...city.player.world,\n          tiles: city.tiles,\n        }),\n        transport,\n        portalCanvas,\n        {\n          playerId: city.player.id,\n          scale: portal.scale(),\n          tileSize: portal.tileSize() / portal.scale(),\n        },\n        Land,\n        Irrigation,\n        Terrain,\n        Improvements,\n        Feature,\n        Fog,\n        Cities,\n        Units,\n        Yields,\n        Unworkable\n      );\n\n    portalCanvas.height = portal.tileSize() * 5;\n    portalCanvas.width = portal.tileSize() * 5;\n\n    cityPortal.setCenter(city.tile.x, city.tile.y);\n    cityPortal.build(city.tiles);\n\n    const unitMap = cityPortal.getLayer(Units)!;\n    unitMap.render(\n      city.tiles.filter((tile) =>\n        tile.units.some((unit) => unit.player.id !== city.player.id)\n      )\n    );\n\n    const yieldMap = cityPortal.getLayer(Yields)!;\n    yieldMap.render(city.tilesWorked);\n\n    const unworkable = cityPortal.getLayer(Unworkable)!;\n    unworkable.setCity(city);\n    unworkable.render(city.tiles);\n\n    cityPortal.render();\n\n    return h(s('<div class=\"city-map\"></div>', portalCanvas), {\n      click: () =>\n        transport.send('action', {\n          name: 'ReassignWorkers',\n          city: city.id,\n        }),\n    });\n  },\n  renderBuild = (\n    city: CityData,\n    chooseProduction: () => void,\n    completeProduction: (spendCost: SpendCost) => void\n  ): HTMLElement =>\n    s(\n      `<div class=\"build\"></div>`,\n      s(\n        `<header></header>`,\n        city.build.building && instanceOf(city.build.building.item, 'Unit')\n          ? new Unit({\n              ...city.build.building.item,\n              player: city.player,\n              improvements: [],\n              busy: null,\n            })\n          : (t('City.Build.title', {\n              item: getLabelForBuildable(city.build.building),\n            }) as string)\n      ),\n      h(\n        s(\n          `<button>${t(\n            city.build.building ? 'City.Build.change' : 'City.Build.choose'\n          )}</button>`\n        ),\n        {\n          click() {\n            chooseProduction();\n          },\n        }\n      ),\n      ...city.build.spendCost.map((spendCost) =>\n        h(\n          s(\n            `<button class=\"buy\" data-resource=\"${spendCost.resource._}\">${t(\n              'City.Build.buy-with',\n              {\n                spendCost,\n              }\n            )}</button>`\n          ),\n          {\n            click() {\n              completeProduction(spendCost);\n            },\n          }\n        )\n      ),\n      city.build.building\n        ? s(`<p>${renderProgress(city.build, city.yields, 'Production')}</p>`)\n        : ''\n    ),\n  renderGrowth = (city: CityData): Node =>\n    s(\n      `<div class=\"growth\"><header>${t('City.Growth.title')}</header><p>${t(\n        'City.Growth.size',\n        {\n          size: localeProvider.number(city.growth.size),\n        }\n      )}</p><p>${renderProgress(city.growth, city.yields, 'Food')}</p></div>`\n    ),\n  renderImprovements = (city: CityData): Node => {\n    return s(\n      `<div class=\"improvements\"></div>`,\n      s(\n        `<div></div>`,\n        ...city.improvements.map((improvement) =>\n          s(\n            `<div>${t(`Improvement.${improvement._}.name`, {\n              defaultValue: improvement._,\n              ns: 'city',\n            })}</div>`,\n            ...city.yields\n              .filter(\n                (\n                  cityYield: Yield | CityImprovementMaintenanceGold\n                ): cityYield is CityImprovementMaintenanceGold =>\n                  cityYield._ === 'CityImprovementMaintenanceGold' &&\n                  cityYield.cityImprovement.id === improvement.id\n              )\n              .flatMap((cityYield) => yieldImages(cityYield))\n          )\n        )\n      )\n    );\n  },\n  renderGarrisonedUnits = (city: CityData, transport: Transport): Node => {\n    return h(\n      s(\n        `<div class=\"garrisoned-units\"><header>${t(\n          'City.GarrisonedUnits.title'\n        )}</header></div>`,\n        s(\n          '<div class=\"units\"></div>',\n          ...city.tile.units.map((unit) => new Unit(unit).element())\n        )\n      ),\n      {\n        click() {\n          const cityPlayerUnits = city.tile.units.filter(\n            (unit: UnitData) => unit.player.id === city.player.id\n          );\n\n          if (cityPlayerUnits.length === 0) {\n            return;\n          }\n\n          new UnitSelectionWindow(cityPlayerUnits, transport);\n        },\n      }\n    );\n  },\n  renderSupportedUnits = (city: CityData): Node => {\n    return s(\n      `<div class=\"supported-units\"><header>${t(\n        'City.SupportedUnits.title'\n      )}</header></div>`,\n      s(\n        '<div class=\"units\"></div>',\n        ...city.units.map((unit) => new SupportedUnit(city, unit))\n      )\n    );\n  },\n  cityDetails = (\n    city: CityData,\n    portal: Portal,\n    transport: Transport,\n    chooseProduction: () => void,\n    completeProduction: (spendCost: SpendCost) => void\n  ) => {\n    return s(\n      '<div class=\"city-screen\"></div>',\n      s(\n        '<div class=\"top-row\"></div>',\n        s(\n          '<div class=\"yield-details\"></div>',\n          renderPopulation(city),\n          renderYields(city),\n          renderSupportedUnits(city)\n        ),\n        renderMap(portal, city, transport),\n        renderImprovements(city)\n      ),\n      s(\n        '<div class=\"bottom-row\"></div>',\n        renderGrowth(city),\n        s(\n          '<div class=\"tabbed-details\"></div>',\n          // TODO: add a tab bar\n          s('<div class=\"info\"></div>', renderGarrisonedUnits(city, transport))\n        ),\n        renderBuild(city, chooseProduction, completeProduction)\n      )\n    );\n  },\n  getTreasuryForYield = (player: Player, yieldName: string) =>\n    player.treasuries.filter((treasury) => treasury.yield._ === yieldName)[0];\n\nexport class City extends Window {\n  #city: CityData;\n  #dataObserver: DataObserver;\n  #portal: Portal;\n  #transport: Transport;\n  #treasury: PlayerTreasury;\n\n  constructor(city: CityData, portal: Portal, transport: Transport) {\n    super(\n      cityName(city),\n      cityDetails(\n        city,\n        portal,\n        transport,\n        () => this.changeProduction(),\n        (spendCost: SpendCost) => this.completeProduction(spendCost)\n      ),\n      {\n        canResize: true,\n        canMaximise: true,\n        classes: 'city-screen-window',\n        size: 'maximised',\n      }\n    );\n\n    setTimeout(() => resizeYields(this.element()), 200);\n\n    this.#city = city;\n    this.#portal = portal;\n    this.#transport = transport;\n    this.#treasury = getTreasuryForYield(city.player, 'Gold');\n    this.#dataObserver = new DataObserver(\n      [\n        city.id,\n        city.build.id,\n        city.growth.id,\n        ...city.units.map((unit) => unit.id),\n        getTreasuryForYield(city.player, 'Gold').id,\n      ],\n      (data: PlainObject) => {\n        const [updatedCity] = (\n          (data.player?.cities ?? []) as CityData[]\n        ).filter((cityData: CityData) => city.id === cityData.id);\n\n        this.#treasury = getTreasuryForYield(data.player, 'Gold');\n\n        // City must have been captured or destroyed\n        if (!updatedCity) {\n          this.close();\n\n          return;\n        }\n\n        this.#city = updatedCity;\n\n        this.#dataObserver.setIds([\n          updatedCity.id,\n          updatedCity.build.id,\n          updatedCity.growth.id,\n          ...updatedCity.units.map((unit) => unit.id),\n        ]);\n\n        this.update(\n          cityDetails(\n            updatedCity,\n            this.#portal,\n            transport,\n            () => this.changeProduction(),\n            (spendCost: SpendCost) => this.completeProduction(spendCost)\n          )\n        );\n\n        this.element().focus();\n\n        setTimeout(() => resizeYields(this.element()), 200);\n      }\n    );\n\n    this.on('keydown', (event) => {\n      if (['c', 'C'].includes(event.key)) {\n        this.changeProduction();\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if (['b', 'B'].includes(event.key)) {\n        const buyButtons = this.queryAll('button.buy');\n\n        // TODO: handle this scenario properly\n        // if (buyButtons.length > 1) {\n        //\n        // }\n\n        emit(buyButtons[0], new MouseEvent('click'));\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if (['Enter', 'x', 'X'].includes(event.key)) {\n        this.close();\n      }\n    });\n\n    const resizeHandler = () =>\n      setTimeout(() => resizeYields(this.element()), 200);\n\n    this.on('close', () => window.removeEventListener('resize', resizeHandler));\n\n    window.addEventListener('resize', resizeHandler);\n\n    this.on('close', () => this.off('resize', resizeHandler));\n\n    this.on('resize', resizeHandler);\n  }\n\n  changeProduction(): void {\n    new CityBuildSelectionWindow(this.#city.build, this.#transport, () =>\n      this.element().focus()\n    );\n  }\n\n  close(): void {\n    this.#dataObserver.dispose();\n\n    super.close();\n  }\n\n  completeProduction(spendCost: SpendCost): void {\n    const cityBuild = this.#city.build;\n\n    if (!cityBuild.building) {\n      return;\n    }\n\n    const treasury = getTreasuryForYield(\n      this.#city.player,\n      spendCost.resource._\n    );\n\n    new ConfirmationWindow(\n      t('ConfirmationWindow.Generic.title'),\n      t('City.CompleteProduction.body', {\n        item: getLabelForBuildableEntity(cityBuild.building.item),\n        spendCost,\n        treasury,\n      }),\n      () =>\n        this.#transport.send('action', {\n          name: 'CompleteProduction',\n          id: this.#city.build.id,\n          treasury: treasury.id,\n        })\n    );\n  }\n}\n\nexport default City;\n", "import { s } from '@dom111/element';\n\nexport let preloadContainer: HTMLElement;\n\nexport const setPreloadContainer = (preloadContainerElement: HTMLElement) =>\n  (preloadContainer = preloadContainerElement);\n\nexport const getPreloadedImage = (path: string): CanvasImageSource => {\n  const image = preloadContainer.querySelector(`[data-path$=\"${path}.png\"]`);\n\n  if (image === null) {\n    console.error(`Missing image: ${path}.`);\n\n    return s<HTMLCanvasElement>('<canvas></canvas>');\n  }\n\n  return image as HTMLImageElement;\n};\n\nexport default getPreloadedImage;\n", "import { s } from '@dom111/element';\n\nconst recolouredImageCache = new Map<string, HTMLCanvasElement>();\n\nexport const replaceColours = (\n  image: CanvasImageSource,\n  source: string[],\n  replacement: string[]\n) => {\n  const key =\n    (image instanceof HTMLImageElement ? image.src : Math.random()) +\n    replacement.toString();\n\n  if (recolouredImageCache.has(key)) {\n    const canvas = recolouredImageCache.get(key)!,\n      clone = s<HTMLCanvasElement>('<canvas></canvas>'),\n      context = clone.getContext('2d')!;\n\n    clone.height = canvas.height;\n    clone.width = canvas.width;\n\n    context.drawImage(canvas, 0, 0);\n\n    return clone;\n  }\n\n  const canvas = s<HTMLCanvasElement>('<canvas></canvas>'),\n    context = canvas.getContext('2d')!;\n\n  canvas.width = image.width as number;\n  canvas.height = image.height as number;\n\n  context.drawImage(image, 0, 0, image.width as number, image.height as number);\n\n  const imageData = context.getImageData(0, 0, canvas.width, canvas.height),\n    getColor = (input: string | number[]) => {\n      let match: RegExpMatchArray | null = null,\n        color: { r: number; g: number; b: number; a: number } = {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 0,\n        };\n\n      if (typeof input === 'string') {\n        if (\n          (match = input.match(\n            /^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i\n          )) !== null\n        ) {\n          color = {\n            r: parseInt(match[1], 16),\n            g: parseInt(match[2], 16),\n            b: parseInt(match[3], 16),\n            a: 1,\n          };\n        } else if (\n          (match = input.match(\n            /^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/\n          )) !== null\n        ) {\n          color = {\n            r: parseInt(match[1] + match[1], 16),\n            g: parseInt(match[2] + match[2], 16),\n            b: parseInt(match[3] + match[3], 16),\n            a: 1,\n          };\n        } else if (\n          (match = input.match(\n            /^rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/\n          )) !== null\n        ) {\n          color = {\n            r: parseInt(match[1]),\n            g: parseInt(match[2]),\n            b: parseInt(match[3]),\n            a: 1,\n          };\n        } else if (\n          (match = input.match(\n            /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+|\\d+\\.|\\.\\d+|\\d+\\.\\d+)\\s*\\)\\s*$/\n          )) !== null\n        ) {\n          color = {\n            r: parseInt(match[1]),\n            g: parseInt(match[2]),\n            b: parseInt(match[3]),\n            a: parseFloat(match[4] ?? 1),\n          };\n        }\n      } else if ('length' in input) {\n        color = {\n          r: input[0] || 0,\n          g: input[1] || 0,\n          b: input[2] || 0,\n          a: input[3] || 1,\n        };\n      }\n\n      return color;\n    };\n\n  let sourceColors = source.map(getColor),\n    replaceColors = replacement.map(getColor);\n\n  for (let i = 0; i < imageData.data.length; i += 4) {\n    sourceColors.forEach((color, n) => {\n      if (\n        imageData.data[i] === color.r &&\n        imageData.data[i + 1] === color.g &&\n        imageData.data[i + 2] === color.b &&\n        imageData.data[i + 3] === color.a * 255\n      ) {\n        imageData.data[i] = (replaceColors[n] || replaceColors[0]).r;\n        imageData.data[i + 1] = (replaceColors[n] || replaceColors[0]).g;\n        imageData.data[i + 2] = (replaceColors[n] || replaceColors[0]).b;\n        imageData.data[i + 3] = Math.trunc(\n          (replaceColors[n] || replaceColors[0]).a * 255\n        );\n      }\n    });\n  }\n\n  context.putImageData(imageData, 0, 0);\n\n  recolouredImageCache.set(key, canvas);\n\n  return canvas;\n};\n\nexport default replaceColours;\n", "import { NeighbourDirection, Tile } from '../types';\nimport {\n  getPreloadedImage,\n  setPreloadContainer,\n} from '../lib/getPreloadedImage';\nimport World from './World';\nimport replaceColours from '../lib/replaceColours';\nimport { s } from '@dom111/element';\n\nexport interface IMap {\n  context(): CanvasRenderingContext2D;\n  render(...args: any[]): void;\n  scale(): number;\n  tileSize(): number;\n  world(): World;\n}\n\ninterface DrawImageOptions {\n  augment?: (image: CanvasImageSource) => CanvasImageSource;\n  offsetX?: number;\n  offsetY?: number;\n}\n\nexport class Map implements IMap {\n  #canvas: HTMLCanvasElement;\n  #context: CanvasRenderingContext2D;\n  #visible: boolean = true;\n  #scale: number;\n  #tileSize: number;\n  #world: World;\n\n  constructor(\n    world: World,\n    scale: number = 2,\n    tileSize: number = 16,\n    canvas: HTMLCanvasElement = s<HTMLCanvasElement>('<canvas></canvas>')\n  ) {\n    this.#canvas = canvas;\n    this.#world = world;\n    this.#tileSize = tileSize;\n    this.#scale = scale;\n\n    this.setCanvasSize();\n\n    this.#context = this.#canvas.getContext('2d') as CanvasRenderingContext2D;\n    setPreloadContainer(document.querySelector('#preload')!);\n  }\n\n  canvas(): HTMLCanvasElement {\n    return this.#canvas;\n  }\n\n  clear(): void {\n    this.context().clearRect(0, 0, this.canvas().width, this.canvas().height);\n  }\n\n  context(): CanvasRenderingContext2D {\n    return this.#context;\n  }\n\n  render(tiles: Tile[] = this.world().tiles()): void {\n    this.clear();\n\n    tiles.forEach(({ x, y }: Tile) => this.renderTile(this.world().get(x, y)));\n  }\n\n  renderTile({ x, y }: Tile): void {\n    const size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size;\n\n    this.context().clearRect(offsetX, offsetY, size, size);\n  }\n\n  scale(): number {\n    return this.#scale;\n  }\n\n  tileSize(): number {\n    return this.#tileSize * this.#scale;\n  }\n\n  update(tilesToUpdate: Tile[]): void {\n    tilesToUpdate.forEach(({ x, y }: Tile) =>\n      this.renderTile(this.world().get(x, y))\n    );\n  }\n\n  world(): World {\n    return this.#world;\n  }\n\n  protected drawImage(\n    path: string,\n    x: number,\n    y: number,\n    options: DrawImageOptions = {}\n  ): void {\n    const size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size,\n      image = this.getPreloadedImage(path);\n\n    this.putImage(\n      options.augment ? options.augment(image) : image,\n      offsetX + (options.offsetX ?? 0),\n      offsetY + (options.offsetY ?? 0)\n    );\n  }\n\n  protected filterNeighbours(\n    tile: Tile,\n    filter: (tile: Tile) => boolean,\n    directions: NeighbourDirection[] = ['n', 'e', 's', 'w']\n  ): NeighbourDirection[] {\n    return directions.filter((direction: NeighbourDirection): boolean =>\n      filter(this.#world.getNeighbour(tile, direction))\n    );\n  }\n\n  protected getPreloadedImage(path: string): CanvasImageSource {\n    return getPreloadedImage(path);\n  }\n\n  protected putImage(\n    image: CanvasImageSource,\n    offsetX: number,\n    offsetY: number\n  ): void {\n    this.#context.imageSmoothingEnabled = false;\n\n    this.#context.drawImage(\n      image,\n      offsetX,\n      offsetY,\n      (image.width as number) * this.#scale,\n      (image.height as number) * this.#scale\n    );\n  }\n\n  protected replaceColours(\n    image: CanvasImageSource,\n    source: string[],\n    replacement: string[]\n  ) {\n    return replaceColours(image, source, replacement);\n  }\n\n  protected setCanvasSize(): void {\n    this.#canvas.height = this.#world.height() * this.tileSize();\n    this.#canvas.width = this.#world.width() * this.tileSize();\n  }\n\n  isVisible(): boolean {\n    return this.#visible;\n  }\n\n  setVisible(visible: boolean): void {\n    this.#visible = visible;\n  }\n}\n\nexport default Map;\n", "import { Map } from '../Map';\nimport { Tile } from '../../types';\n\nexport class Cities extends Map {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size;\n\n    if (tile.city) {\n      const city = tile.city,\n        player = city.player,\n        civilization = player.civilization,\n        [colors] = civilization.attributes.filter(\n          (attribute) => attribute.name === 'colors'\n        );\n\n      if (tile.units.length > 0) {\n        this.context().fillStyle = '#000';\n        this.context().fillRect(offsetX, offsetY, size, size);\n      }\n\n      this.context().fillStyle = colors.value[0];\n      this.context().fillRect(\n        offsetX + this.scale(),\n        offsetY + this.scale(),\n        size - this.scale() * 2,\n        size - this.scale() * 2\n      );\n\n      this.drawImage(`map/city`, x, y, {\n        augment: (image) =>\n          this.replaceColours(\n            image,\n            // To come from theme manifest\n            ['#000'],\n            [colors.value[1]]\n          ),\n        offsetX: this.scale(),\n        offsetY: this.scale(),\n      });\n    }\n  }\n}\n\nexport default Cities;\n", "import {\n  NotificationWindow,\n  NotificationWindowOptions,\n} from './NotificationWindow';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport interface ConfirmationWindowOptions extends NotificationWindowOptions {\n  okLabel?: string;\n  cancelLabel?: string;\n}\n\nexport class ConfirmationWindow extends NotificationWindow {\n  constructor(\n    title: string,\n    details: string,\n    onOK: () => void,\n    options: ConfirmationWindowOptions = {}\n  ) {\n    const confirmationButton = h(\n      s(`<button>${t(options.okLabel ?? 'Generic.ok')}</button>`),\n      {\n        click: () => {\n          onOK();\n\n          this.close();\n        },\n        keydown: (event) => {\n          if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            event.stopPropagation();\n\n            onOK();\n\n            this.close();\n          }\n        },\n      }\n    );\n\n    super(\n      title,\n      s(\n        `<div class=\"content\"><p>${details}</p></div>`,\n        s(\n          '<footer></footer>',\n          confirmationButton,\n          h(\n            s(`<button>${t(options.cancelLabel ?? 'Generic.cancel')}</button>`),\n            {\n              click: () => this.close(),\n              keydown: (event) => {\n                if (event.key === 'Enter' || event.key === ' ') {\n                  event.preventDefault();\n                  event.stopPropagation();\n\n                  this.close();\n                }\n              },\n            }\n          )\n        )\n      ),\n      {\n        classes: 'confirmationWindow',\n        ...options,\n        queue: false,\n      }\n    );\n\n    confirmationButton.focus();\n  }\n}\n\nexport default ConfirmationWindow;\n", "import { GameData, PlainObject } from './types';\nimport { ObjectMap } from './lib/reconstituteData';\n\nexport type dataUpdatedEvent = CustomEvent<{ data: PlainObject }>;\nexport type dataUpdatedHandler = (data: GameData) => void;\nexport type patchDataReceivedEvent = CustomEvent<{ value: ObjectMap }>;\n\ndeclare global {\n  interface GlobalEventHandlersEventMap {\n    dataupdated: dataUpdatedEvent;\n    patchdatareceived: patchDataReceivedEvent;\n  }\n}\n\nexport class DataObserver {\n  #handler: (event: patchDataReceivedEvent) => void;\n  #ids: string[] = [];\n\n  constructor(ids: string[], handler: dataUpdatedHandler) {\n    this.setIds(ids);\n\n    this.#handler = (event) => {\n      const { detail } = event,\n        objects = detail.value.objects;\n\n      if (!objects) {\n        return;\n      }\n\n      if (this.#ids.some((id) => id in objects)) {\n        document.addEventListener(\n          'dataupdated',\n          (event) => handler(event.detail.data as GameData),\n          {\n            once: true,\n          }\n        );\n      }\n    };\n\n    document.addEventListener('patchdatareceived', this.#handler);\n  }\n\n  dispose(): void {\n    document.removeEventListener('patchdatareceived', this.#handler);\n  }\n\n  setIds(ids: string[]): void {\n    this.#ids.splice(0, this.#ids.length, ...ids);\n  }\n}\n\nexport default DataObserver;\n", "import { NeighbourDirection, Tile } from '../../types';\nimport { Map, IMap } from '../Map';\n\nexport class TerrainAbstract extends Map implements IMap {\n  update(tilesToUpdate: Tile[]): void {\n    // we need to redraw the surrounding tiles to prevent the hidden terrain showing up incorrectly.\n    const extendedTilesToUpdate = [...tilesToUpdate];\n\n    tilesToUpdate.forEach((tile) => {\n      (\n        ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'] as NeighbourDirection[]\n      ).forEach((direction) => {\n        const target = this.world().getNeighbour(tile, direction);\n\n        if (extendedTilesToUpdate.includes(target)) {\n          return;\n        }\n\n        extendedTilesToUpdate.push(target);\n      });\n    });\n\n    return super.update(extendedTilesToUpdate);\n  }\n}\n\nexport default TerrainAbstract;\n", "import TerrainAbstract from './TerrainAbstract';\nimport { Tile } from '../../types';\n\nexport class Feature extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile;\n\n    if (tile.terrain.features.length) {\n      tile.terrain.features.forEach((feature) =>\n        feature._ === 'Shield'\n          ? this.drawImage(`terrain/${feature._.toLowerCase()}`, x, y, {\n              offsetX: 4 * this.scale(),\n              offsetY: 4 * this.scale(),\n            })\n          : this.drawImage(`terrain/${feature._.toLowerCase()}`, x, y)\n      );\n    }\n  }\n}\n\nexport default Feature;\n", "import TerrainAbstract from './TerrainAbstract';\nimport { Tile } from '../../types';\n\nexport class Fog extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile;\n\n    this.filterNeighbours(tile, (tile) => tile.terrain._ === 'Unknown').forEach(\n      (direction) => this.drawImage(`map/fog_${direction}`, x, y)\n    );\n  }\n}\n\nexport default Fog;\n", "import { EntityInstance, NeighbourDirection, Tile } from '../../types';\nimport TerrainAbstract from './TerrainAbstract';\n\ntype Improvement = 'Mine' | 'Pollution' | 'Railroad' | 'Road';\n\ntype ImprovementLookup = {\n  [key in Improvement]: boolean;\n};\n\nexport class Terrain extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile;\n\n    const improvements = tile.improvements.reduce(\n      (\n        state: ImprovementLookup,\n        improvement: EntityInstance\n      ): ImprovementLookup => {\n        const improvementType = improvement._ as Improvement;\n\n        if (!(improvementType in state)) {\n          return state;\n        }\n\n        state[improvementType] = true;\n\n        return state;\n      },\n      {\n        Mine: false,\n        Road: false,\n        Railroad: false,\n        Pollution: false,\n      }\n    );\n\n    (['Mine', 'Pollution'] as (keyof ImprovementLookup)[]).forEach(\n      (improvementName: keyof ImprovementLookup) => {\n        if (improvements[improvementName]) {\n          this.drawImage(`improvements/${improvementName.toLowerCase()}`, x, y);\n        }\n      }\n    );\n\n    // Can't have Railroad without Road!\n    if (improvements.Road) {\n      const neighbouringRoad = this.filterNeighbours(\n          tile,\n          (adjoiningTile: Tile): boolean =>\n            adjoiningTile.improvements.some(\n              (improvement: EntityInstance): boolean => improvement._ === 'Road'\n            ),\n          ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw']\n        ),\n        neighbouringRailroad = this.filterNeighbours(\n          tile,\n          (adjoiningTile: Tile): boolean =>\n            !!adjoiningTile.city ||\n            adjoiningTile.improvements.some(\n              (improvement: EntityInstance): boolean =>\n                improvement._ === 'Railroad'\n            ),\n          ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw']\n        );\n\n      neighbouringRoad.forEach((direction: NeighbourDirection): void => {\n        if (\n          !improvements.Railroad ||\n          !neighbouringRailroad.includes(direction)\n        ) {\n          this.drawImage(`improvements/road_${direction}`, x, y);\n        }\n      });\n\n      if (improvements.Railroad) {\n        neighbouringRailroad.forEach((direction: NeighbourDirection): void =>\n          this.drawImage(`improvements/railroad_${direction}`, x, y)\n        );\n      }\n\n      if (neighbouringRoad.length === 0 && neighbouringRailroad.length === 0) {\n        const size = this.tileSize(),\n          offsetX = x * size,\n          offsetY = y * size,\n          center = Math.floor(this.tileSize() / 2) - this.scale();\n\n        this.context().fillStyle = improvements.Railroad ? '#000' : '#8c5828';\n        this.context().rect(\n          offsetX + center,\n          offsetY + center,\n          this.scale() * 2,\n          this.scale() * 2\n        );\n        this.context().fill();\n      }\n    }\n  }\n}\n\nexport default Terrain;\n", "import { EntityInstance, NeighbourDirection, Tile } from '../../types';\nimport TerrainAbstract from './TerrainAbstract';\n\nexport class Terrain extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile,\n      hasIrrigation = tile.improvements.some(\n        (improvement: EntityInstance): boolean => improvement._ === 'Irrigation'\n      );\n\n    if (!hasIrrigation) {\n      return;\n    }\n\n    this.drawImage(`improvements/irrigation`, x, y);\n  }\n}\n\nexport default Terrain;\n", "import TerrainAbstract from './TerrainAbstract';\nimport { Tile } from '../../types';\nimport { s } from '@dom111/element';\n\nexport class Land extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size;\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    if (tile.isLand) {\n      this.drawImage('terrain/land', x, y);\n    } else if (tile.isWater) {\n      this.drawImage('terrain/ocean', x, y);\n\n      if (tile.isCoast) {\n        const sprite = this.getPreloadedImage(\n            'terrain/coast_sprite'\n          ) as HTMLImageElement,\n          // formula from: http://forums.civfanatics.com/showpost.php?p=13507808&postcount=40\n          // Build a bit mask of all 8 surrounding tiles, setting the bit if the tile is not an\n          // ocean tile. Starting with the tile to the left as the least significant bit and\n          // going clockwise\n          bitmask =\n            (this.world().getNeighbour(tile, 'w').isLand ? 1 : 0) |\n            (this.world().getNeighbour(tile, 'nw').isLand ? 2 : 0) |\n            (this.world().getNeighbour(tile, 'n').isLand ? 4 : 0) |\n            (this.world().getNeighbour(tile, 'ne').isLand ? 8 : 0) |\n            (this.world().getNeighbour(tile, 'e').isLand ? 16 : 0) |\n            (this.world().getNeighbour(tile, 'se').isLand ? 32 : 0) |\n            (this.world().getNeighbour(tile, 's').isLand ? 64 : 0) |\n            (this.world().getNeighbour(tile, 'sw').isLand ? 128 : 0);\n\n        if (bitmask > 0) {\n          // There are at least one surrounding tile that is not ocean, so we need to render\n          // coast. We divide the tile into four 8x8 subtiles and for each of these we want\n          // a 3 bit bitmask of the surrounding tiles. We do this by looking at the 3 least\n          // significant bits for the top left subtile and shift the mask to the right as we\n          // are going around the tile. This way we are \"rotating\" our bitmask. The result\n          // are our x offsets into ter257.pic\n          let topLeftSubtileOffset = bitmask & 7,\n            topRightSubtileOffset = (bitmask >> 2) & 7,\n            bottomRightSubtileOffset = (bitmask >> 4) & 7,\n            bottomLeftSubtileOffset =\n              ((bitmask >> 6) & 7) | ((bitmask & 1) << 2);\n\n          const image = s<HTMLCanvasElement>(\n              '<canvas height=\"16\" width=\"16\"></canvas>'\n            ),\n            imageContext = image.getContext('2d') as CanvasRenderingContext2D;\n\n          imageContext.drawImage(\n            sprite,\n            topLeftSubtileOffset << 4,\n            0,\n            8,\n            8,\n            0,\n            0,\n            8,\n            8\n          );\n          imageContext.drawImage(\n            sprite,\n            (topRightSubtileOffset << 4) + 8,\n            0,\n            8,\n            8,\n            8,\n            0,\n            8,\n            8\n          );\n          imageContext.drawImage(\n            sprite,\n            (bottomRightSubtileOffset << 4) + 8,\n            8,\n            8,\n            8,\n            8,\n            8,\n            8,\n            8\n          );\n          imageContext.drawImage(\n            sprite,\n            bottomLeftSubtileOffset << 4,\n            8,\n            8,\n            8,\n            0,\n            8,\n            8,\n            8\n          );\n\n          this.putImage(image, offsetX, offsetY);\n        }\n\n        this.filterNeighbours(\n          tile,\n          (tile: Tile): boolean => tile.terrain._ === 'River'\n        ).forEach((direction) =>\n          this.drawImage(`terrain/river_mouth_${direction}`, x, y)\n        );\n      }\n    }\n  }\n}\n\nexport default Land;\n", "import { Coordinate, Tile, Unit } from '../types';\nimport { EventEmitter } from '@dom111/typed-event-emitter';\nimport Map from './Map';\nimport Transport from '../Transport';\nimport World from './World';\nimport { s } from '@dom111/element';\nimport { IConstructor } from '@civ-clone/core-registry/Registry';\n\nexport interface IPortal {\n  build(updatedTiles: Tile[]): void;\n  canvas(): HTMLCanvasElement;\n  center(): Coordinate;\n  getLayer(LayerType: typeof Map): Map | null;\n  getLayers(LayerType: typeof Map): Map[];\n  isVisible(x: number, y: number): boolean;\n  playerId(): string | null;\n  render(): void;\n  scale(): number;\n  setCenter(x: number, y: number): void;\n  tileSize(): number;\n  transport(): Transport;\n  visibleBounds(): [number, number, number, number];\n  visibleRange(): [Coordinate, Coordinate];\n  world(): World;\n}\n\nexport interface PortalSettings {\n  playerId: string | null;\n  scale: number;\n  tileSize: number;\n}\n\ntype PortalOptions = {\n  [K in keyof PortalSettings]?: PortalSettings[K];\n};\n\nconst defaultPortalOptions: PortalSettings = {\n  playerId: null,\n  scale: 2,\n  tileSize: 16,\n};\n\nexport class Portal\n  extends EventEmitter<{\n    ['activate-unit']: [Unit];\n    ['focus-changed']: [number, number];\n  }>\n  implements IPortal\n{\n  #canvas: HTMLCanvasElement;\n  #center: Coordinate = { x: 0, y: 0 };\n  #context: CanvasRenderingContext2D;\n  #layers: Map[] = [];\n  #playerId: string | null = null;\n  #scale: number;\n  #tileSize: number;\n  #transport: Transport;\n  #world: World;\n\n  constructor(\n    world: World,\n    transport: Transport,\n    canvas: HTMLCanvasElement = s<HTMLCanvasElement>('<canvas></canvas>'),\n    options: PortalOptions = {\n      playerId: null,\n      scale: 2,\n    },\n    ...layers: (typeof Map)[]\n  ) {\n    const settings: PortalSettings = {\n      ...defaultPortalOptions,\n      ...options,\n    };\n\n    super();\n\n    this.#world = world;\n    this.#canvas = canvas;\n    this.#playerId = settings.playerId;\n    this.#tileSize = settings.tileSize;\n    this.#scale = settings.scale;\n    this.#transport = transport;\n\n    layers.forEach((MapType) =>\n      this.#layers.push(new MapType(this.#world, this.scale(), this.#tileSize))\n    );\n\n    this.#context = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n    this.bindEvents();\n  }\n\n  protected bindEvents(): void {}\n\n  build(updatedTiles: Tile[]): void {\n    this.#layers.forEach((layer: Map) => layer.update(updatedTiles));\n  }\n\n  canvas(): HTMLCanvasElement {\n    return this.#canvas;\n  }\n\n  center(): Coordinate {\n    return this.#center;\n  }\n\n  getLayer<T extends Map>(LayerType: IConstructor<T>): T | null {\n    return (this.getLayers(LayerType).shift() as T) ?? null;\n  }\n\n  getLayers(LayerType: typeof Map): Map[] {\n    return this.#layers.filter((layer) => layer instanceof LayerType);\n  }\n\n  isVisible(x: number, y: number): boolean {\n    const visibleHorizontal = Math.floor(this.#canvas.width / this.tileSize()),\n      visibleVertical = Math.floor(this.#canvas.height / this.tileSize());\n\n    if (\n      visibleHorizontal >= this.#world.width() &&\n      visibleVertical >= this.#world.height()\n    ) {\n      return true;\n    }\n\n    const [xLowerBound, xUpperBound, yLowerBound, yUpperBound] =\n      this.visibleBounds();\n\n    // I _think_ this logic is correct now...\n    return (\n      (visibleHorizontal >= this.#world.width() ||\n        (xLowerBound > xUpperBound\n          ? x < xUpperBound || x > xLowerBound\n          : x < xUpperBound && x > xLowerBound)) &&\n      (visibleVertical >= this.#world.height() ||\n        (yLowerBound > yUpperBound\n          ? y < yUpperBound || y > yLowerBound\n          : y < yUpperBound && y > yLowerBound))\n    );\n  }\n\n  playerId(): string | null {\n    return this.#playerId;\n  }\n\n  render(): void {\n    const tileSize = this.tileSize(),\n      layerWidth = this.#world.width() * tileSize,\n      centerX = this.#center.x * tileSize + Math.trunc(tileSize / this.scale()),\n      portalCenterX = Math.trunc(this.#canvas.width / 2),\n      layerHeight = this.#world.height() * tileSize,\n      centerY = this.#center.y * tileSize + Math.trunc(tileSize / this.scale()),\n      portalCenterY = Math.trunc(this.#canvas.height / 2);\n\n    let startX = portalCenterX - centerX,\n      endX = portalCenterX + layerWidth,\n      startY = portalCenterY - centerY,\n      endY = portalCenterY + layerHeight;\n\n    while (startX > 0) {\n      startX -= layerWidth;\n    }\n\n    while (startY > 0) {\n      startY -= layerHeight;\n    }\n\n    while (endX < this.#canvas.width) {\n      endX += layerWidth;\n    }\n\n    while (endY < this.#canvas.height) {\n      endY += layerHeight;\n    }\n\n    this.#context.fillStyle = '#000';\n    this.#context.fillRect(\n      0,\n      0,\n      Math.max(this.#world.width() * tileSize, this.#canvas.width),\n      Math.max(this.#world.height() * tileSize, this.#canvas.height)\n    );\n\n    for (let x = startX; x < endX; x += layerWidth) {\n      for (let y = startY; y < endY; y += layerHeight) {\n        this.#layers.forEach((layer) => {\n          if (!layer.isVisible()) {\n            return;\n          }\n\n          const canvas = layer.canvas();\n\n          this.#context.drawImage(canvas, x, y, canvas.width, canvas.height);\n        });\n      }\n    }\n  }\n\n  scale(): number {\n    return this.#scale;\n  }\n\n  setCenter(x: number, y: number): void {\n    this.#center.x = x;\n    this.#center.y = y;\n\n    this.render();\n\n    this.emit('focus-changed', x, y);\n  }\n\n  tileSize(): number {\n    return this.#tileSize * this.#scale;\n  }\n\n  transport(): Transport {\n    return this.#transport;\n  }\n\n  visibleBounds(): [number, number, number, number] {\n    const [\n      { x: xLowerBound, y: yLowerBound },\n      { x: xUpperBound, y: yUpperBound },\n    ] = this.visibleRange();\n\n    return [xLowerBound, xUpperBound, yLowerBound, yUpperBound];\n  }\n\n  visibleRange(): [Coordinate, Coordinate] {\n    const tileRangeX = Math.floor(\n        Math.floor(this.#canvas.width / this.tileSize()) / 2\n      ),\n      tileRangeY = Math.floor(\n        Math.floor(this.#canvas.height / this.tileSize()) / 2\n      );\n\n    return [\n      {\n        x:\n          (this.#center.x - tileRangeX + this.#world.width()) %\n          this.#world.width(),\n        y:\n          (this.#center.y - tileRangeY + this.#world.height()) %\n          this.#world.height(),\n      },\n      {\n        x: (this.#center.x + tileRangeX) % this.#world.width(),\n        y: (this.#center.y + tileRangeY) % this.#world.height(),\n      },\n    ];\n  }\n\n  rawVisibleRange(): [Coordinate, Coordinate] {\n    const tileRangeX = Math.floor(\n        Math.floor(this.#canvas.width / this.tileSize()) / 2\n      ),\n      tileRangeY = Math.floor(\n        Math.floor(this.#canvas.height / this.tileSize()) / 2\n      );\n\n    return [\n      {\n        x: this.#center.x - tileRangeX,\n        y: this.#center.y - tileRangeY,\n      },\n      {\n        x: this.#center.x + tileRangeX,\n        y: this.#center.y + tileRangeY,\n      },\n    ];\n  }\n\n  world(): World {\n    return this.#world;\n  }\n}\n\nexport default Portal;\n", "import {\n  City,\n  MilitaryUnhappiness,\n  Unit as UnitData,\n  UnitSupportFood,\n  UnitSupportProduction,\n  Yield,\n} from '../types';\nimport { Element, s } from '@dom111/element';\nimport Unit from './Unit';\nimport { yieldImages } from './lib/cityYields';\n\ntype YieldWithUnit = Yield & { unit: UnitData };\n\nexport class SupportedUnit extends Element {\n  constructor(\n    city: City,\n    unit: UnitData,\n    yieldsToInclude: string[] = [\n      'UnitSupportFood',\n      'UnitSupportProduction',\n      'MilitaryUnhappiness',\n    ]\n  ) {\n    super(\n      s(\n        '<span class=\"supported-unit\"></span>',\n        new Unit(unit),\n        ...city.yields\n          .filter((cityYield): cityYield is YieldWithUnit =>\n            yieldsToInclude.includes(cityYield._)\n          )\n          .filter((cityYield) => cityYield.unit.id === unit.id)\n          .flatMap((cityYield) => yieldImages(cityYield))\n      )\n    );\n  }\n}\n\nexport default SupportedUnit;\n", "import { Element, s } from '@dom111/element';\nimport { Unit as UnitData } from '../types';\nimport renderUnit from '../lib/renderUnit';\n\nexport class Unit extends Element {\n  #scale: number = 2;\n\n  constructor(\n    unit: Pick<UnitData, '_' | 'player' | 'improvements' | 'busy'>,\n    scale: number = 2\n  ) {\n    // TODO: use scale here for the <canvas/> size\n    super(s<HTMLCanvasElement>('<canvas width=\"32\" height=\"32\"></canvas>'));\n\n    this.#scale = scale;\n\n    this.build(unit);\n  }\n\n  build(unit: Pick<UnitData, '_' | 'player' | 'improvements' | 'busy'>) {\n    const unitCanvas = renderUnit(unit),\n      context = this.element().getContext('2d')!,\n      sizeX = this.size(unitCanvas.width as number),\n      sizeY = this.size(unitCanvas.height as number),\n      offsetX = Math.floor((this.size(16) - sizeX) / 2),\n      offsetY = Math.floor((this.size(16) - sizeY) / 2);\n\n    context.imageSmoothingEnabled = false;\n\n    context.drawImage(unitCanvas, offsetX, offsetY, sizeX, sizeY);\n  }\n\n  element(): HTMLCanvasElement {\n    return super.element() as HTMLCanvasElement;\n  }\n\n  size(size: number): number {\n    return size * this.#scale;\n  }\n}\n\nexport default Unit;\n", "import { Entity } from '../../types';\nimport { t } from 'i18next';\n\nexport const entityName = (\n  entity: Entity | null,\n  namespace?: string,\n  prefix?: string,\n  key: string = 'name',\n  fallback: string | undefined = entity?._\n): string =>\n  entity\n    ? t(\n        (namespace ? namespace + ':' : '') +\n          (prefix ? prefix + '.' : '') +\n          entity._ +\n          '.' +\n          key,\n        {\n          defaultValue: fallback ?? entity._,\n        }\n      )\n    : '';\n", "import { Unit as UnitData } from '../types';\nimport getPreloadedImage from './getPreloadedImage';\nimport replaceColours from './replaceColours';\nimport { entityName } from '../components/lib/entity';\n\nexport const renderUnit = (\n  unit: Pick<UnitData, '_' | 'player' | 'improvements' | 'busy'>,\n  // scale: number = 2,\n  tileSize: number = 16\n): CanvasImageSource => {\n  const player = unit.player,\n    civilization = player.civilization,\n    [colors] = civilization.attributes.filter(\n      (attribute) => attribute.name === 'colors'\n    ),\n    unitCanvas = replaceColours(\n      getPreloadedImage(`units/${unit._.toLowerCase()}`),\n      // To come from theme manifest\n      ['#60E064', '#2C7800'],\n      colors.value\n    ),\n    context = unitCanvas.getContext('2d')!;\n\n  context.imageSmoothingEnabled = false;\n\n  if (unit.improvements?.some((improvement) => improvement._ === 'Fortified')) {\n    context.drawImage(getPreloadedImage('map/fortify'), 0, 0);\n  }\n\n  if (unit.busy) {\n    // if (unit.busy._ === 'Sleeping') {} // TODO: fade the unit like in Civ 1\n    const sizeOffsetX = tileSize / 2,\n      sizeOffsetY = tileSize * 0.75,\n      identifier = entityName(\n        unit.busy,\n        'unit',\n        'Busy',\n        'icon',\n        entityName(unit.busy, 'unit', 'Busy').replace(/[a-z]+/g, '')\n      );\n\n    context.font = `bold 8px sans-serif`;\n    context.fillStyle = 'black';\n    context.textAlign = 'center';\n    context.fillText(identifier, sizeOffsetX, sizeOffsetY);\n    context.fillStyle = 'white';\n    context.fillText(identifier, sizeOffsetX, sizeOffsetY);\n  }\n\n  return unitCanvas;\n};\n\nexport default renderUnit;\n", "import TerrainAbstract from './TerrainAbstract';\nimport { Tile } from '../../types';\n\nexport class Terrain extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile;\n\n    const adjoining = this.filterNeighbours(\n      tile,\n      (adjoiningTile: Tile): boolean =>\n        (tile.terrain._ === 'River' && adjoiningTile.isWater) ||\n        tile.terrain._ === adjoiningTile.terrain._\n    ).join('');\n\n    // Ocean is covered with the land/ocean stuff above and if we re-do here, we lose the coastline\n    if (tile.terrain._ !== 'Ocean') {\n      if (adjoining) {\n        this.drawImage(\n          `terrain/${tile.terrain._.toLowerCase()}_${adjoining}`,\n          x,\n          y\n        );\n      } else {\n        this.drawImage(`terrain/${tile.terrain._.toLowerCase()}`, x, y);\n      }\n    }\n  }\n}\n\nexport default Terrain;\n", "import Transport from '../Transport';\nimport Unit from './Unit';\nimport { City as CityData, PlainObject, Unit as UnitData } from '../types';\nimport Window from './Window';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\nimport DataObserver from '../DataObserver';\n\ntype OnComplete = (unit: UnitData) => void;\n\nconst build = (\n  units: UnitData[],\n  transport: Transport,\n  onComplete: OnComplete\n): HTMLDivElement =>\n  s(\n    '<div></div>',\n    ...units.map((unit: UnitData) => {\n      const icon = new Unit(unit);\n\n      h(icon.element(), {\n        click: () => {\n          if (!unit.active) {\n            transport.send('action', {\n              name: 'InactiveUnit',\n              id: unit.id,\n            });\n\n            onComplete(unit);\n          }\n        },\n      });\n\n      return icon;\n    })\n  );\n\nexport class UnitSelectionWindow extends Window {\n  #dataObserver: DataObserver;\n\n  constructor(\n    units: UnitData[],\n    transport: Transport,\n    onComplete: OnComplete = () => {}\n  ) {\n    super(t('UnitSelectionWindow.title'), s('<div></div>'));\n\n    const unitIds = units.map((unit) => unit.id);\n\n    this.#dataObserver = new DataObserver(unitIds, (data: PlainObject) => {\n      const updatedUnits = ((data.player?.units ?? []) as UnitData[]).filter(\n        (unit: UnitData) => unitIds.includes(unit.id)\n      );\n\n      if (!updatedUnits.length) {\n        this.close();\n\n        return;\n      }\n\n      this.update(build(updatedUnits, transport, onComplete));\n    });\n\n    this.update(build(units, transport, onComplete));\n  }\n}\n\nexport default UnitSelectionWindow;\n", "import { Tile, Unit } from '../../types';\nimport { Map, IMap } from '../Map';\nimport renderUnit from '../../lib/renderUnit';\n\nexport class Units extends Map implements IMap {\n  #activeUnit: Unit | null = null;\n\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size;\n\n    if (\n      tile.units.length > 0 &&\n      (this.#activeUnit !== null ? this.#activeUnit.tile.id !== tile.id : true)\n    ) {\n      const [unit] = tile.units.sort(\n          (a: Unit, b: Unit): number => b.defence?.value - a.defence?.value\n        ),\n        image = this.renderUnit(unit);\n\n      if (tile.units.length > 1) {\n        this.putImage(image, offsetX - this.scale(), offsetY - this.scale());\n      }\n\n      this.putImage(image, offsetX, offsetY);\n    }\n  }\n\n  protected renderUnit(unit: Unit): CanvasImageSource {\n    return renderUnit(unit);\n  }\n\n  setActiveUnit(unit: Unit | null): void {\n    this.#activeUnit = unit;\n  }\n\n  protected activeUnit(): Unit | null {\n    return this.#activeUnit;\n  }\n}\n\nexport default Units;\n", "import { City, Tile } from '../../types';\nimport Map from '../Map';\n\nexport class Unworkable extends Map {\n  #city: City | null = null;\n\n  setCity(city: City): void {\n    this.#city = city;\n  }\n\n  renderTile(tile: Tile): void {\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size;\n\n    if (\n      tile.workedBy !== null &&\n      this.#city !== null &&\n      tile.workedBy.id !== this.#city.id\n    ) {\n      this.context().fillStyle = 'rgba(200, 64, 64, 0.5)';\n      this.context().fillRect(offsetX, offsetY, size, size);\n    }\n  }\n}\n\nexport default Unworkable;\n", "import { NeighbourDirection, Tile, World as WorldData } from '../types';\n\nexport class World {\n  #unknown = (x: number, y: number): Tile => ({\n    _: 'Tile',\n    __: ['Tile', 'DataObject'],\n    id: `Tile-${x}--${y}`,\n    city: null,\n    goodyHut: null,\n    improvements: [],\n    isCoast: false,\n    isLand: false,\n    isWater: false,\n    terrain: {\n      _: 'Unknown',\n      __: ['Unknown', 'Terrain', 'DataObject'],\n      id: `UnknownTerrain-${x}--${y}`,\n      features: [],\n    },\n    units: [],\n    workedBy: null,\n    x,\n    y,\n    yields: [],\n  });\n  #lookupCache: { [key: string]: number } = {};\n  #tiles: Tile[];\n  #height: number;\n  #width: number;\n\n  constructor(world: WorldData) {\n    this.#height = world.height;\n    this.#width = world.width;\n    this.#tiles = world.tiles || [];\n  }\n\n  get(x: number, y: number): Tile {\n    while (x < 0) {\n      x += this.#width;\n    }\n\n    while (y < 0) {\n      y += this.#height;\n    }\n\n    while (x >= this.#width) {\n      x -= this.#width;\n    }\n\n    while (y >= this.#height) {\n      y -= this.#height;\n    }\n\n    const key = [x, y].toString();\n\n    if (!(key in this.#lookupCache)) {\n      const index = this.#tiles.findIndex(\n        (tile) => tile.x === x && tile.y === y\n      );\n\n      if (index === -1) {\n        return this.#unknown(x, y);\n      }\n\n      this.#lookupCache[key] = index;\n    }\n\n    return this.#tiles[this.#lookupCache[key]];\n  }\n\n  getNeighbour(tile: Tile, direction: NeighbourDirection): Tile {\n    if (direction === 'n') {\n      return this.get(tile.x, tile.y - 1);\n    }\n\n    if (direction === 'ne') {\n      return this.get(tile.x + 1, tile.y - 1);\n    }\n\n    if (direction === 'e') {\n      return this.get(tile.x + 1, tile.y);\n    }\n\n    if (direction === 'se') {\n      return this.get(tile.x + 1, tile.y + 1);\n    }\n\n    if (direction === 's') {\n      return this.get(tile.x, tile.y + 1);\n    }\n\n    if (direction === 'sw') {\n      return this.get(tile.x - 1, tile.y + 1);\n    }\n\n    if (direction === 'w') {\n      return this.get(tile.x - 1, tile.y);\n    }\n\n    if (direction === 'nw') {\n      return this.get(tile.x - 1, tile.y - 1);\n    }\n\n    throw new TypeError('Invalid direction.');\n  }\n\n  height(): number {\n    return this.#height;\n  }\n\n  tiles(): Tile[] {\n    return this.#tiles;\n  }\n\n  width(): number {\n    return this.#width;\n  }\n\n  setTiles(tiles: Tile[]): void {\n    this.#tiles = tiles;\n  }\n}\n\nexport default World;\n", "import Map from '../Map';\nimport { Tile } from '../../types';\n\nexport class Yields extends Map {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size,\n      total = tile.yields.reduce(\n        (total, tileYield) => total + tileYield.value,\n        0\n      ),\n      // TODO: use a more effective sort than this, this only works by luck (Food -> Production -> Trade)\n      yields = tile.yields.sort(\n        (a, b) => a._.charCodeAt(0) - b._.charCodeAt(0)\n      );\n\n    let i = 0;\n\n    if (total < 5) {\n      const offsets: [number, number][] = [\n        [offsetX, offsetY],\n        [offsetX + size / 2, offsetY],\n        [offsetX, offsetY + size / 2],\n        [offsetX + size / 2, offsetY + size / 2],\n      ];\n\n      yields.forEach((tileYield) => {\n        for (let n = 0; n < tileYield.value; n++) {\n          this.putImage(\n            this.getPreloadedImage(`city/${tileYield._.toLowerCase()}`),\n            ...offsets[i++]\n          );\n        }\n      });\n\n      return;\n    }\n\n    if (total < 7) {\n      const offsets: [number, number][] = [\n        [offsetX, offsetY],\n        [offsetX + size / 3, offsetY],\n        [offsetX + (size / 3) * 2, offsetY],\n        [offsetX, offsetY + size / 2],\n        [offsetX + size / 3, offsetY + size / 2],\n        [offsetX + (size / 3) * 2, offsetY + size / 2],\n      ];\n\n      yields.forEach((tileYield) => {\n        for (let n = 0; n < tileYield.value; n++) {\n          this.putImage(\n            this.getPreloadedImage(`city/${tileYield._.toLowerCase()}`),\n            offsets[i][0],\n            offsets[i++][1]\n          );\n        }\n      });\n\n      return;\n    }\n\n    if (total < 9) {\n      const offsets: [number, number][] = [\n        [offsetX, offsetY],\n        [offsetX + size / 4, offsetY],\n        [offsetX + (size / 4) * 2, offsetY],\n        [offsetX + (size / 4) * 3, offsetY],\n        [offsetX, offsetY + size / 2],\n        [offsetX + size / 4, offsetY + size / 2],\n        [offsetX + (size / 4) * 2, offsetY + size / 2],\n        [offsetX + (size / 4) * 3, offsetY + size / 2],\n      ];\n\n      yields.forEach((tileYield) => {\n        for (let n = 0; n < tileYield.value; n++) {\n          this.putImage(\n            this.getPreloadedImage(`city/${tileYield._.toLowerCase()}`),\n            ...offsets[i++]\n          );\n        }\n      });\n\n      return;\n    }\n\n    if (total < 11) {\n      const offsets: [number, number][] = [\n        [offsetX, offsetY],\n        [offsetX + size / 5, offsetY],\n        [offsetX + (size / 5) * 2, offsetY],\n        [offsetX + (size / 5) * 3, offsetY],\n        [offsetX + (size / 5) * 4, offsetY],\n        [offsetX, offsetY + size / 2],\n        [offsetX + size / 5, offsetY + size / 2],\n        [offsetX + (size / 5) * 2, offsetY + size / 2],\n        [offsetX + (size / 5) * 3, offsetY + size / 2],\n        [offsetX + (size / 5) * 4, offsetY + size / 2],\n      ];\n\n      yields.forEach((tileYield) => {\n        for (let n = 0; n < tileYield.value; n++) {\n          this.putImage(\n            this.getPreloadedImage(`city/${tileYield._.toLowerCase()}`),\n            ...offsets[i++]\n          );\n        }\n      });\n\n      return;\n    }\n\n    const offsets: [number, number][] = [\n      [offsetX, offsetY],\n      [offsetX + size / 6, offsetY],\n      [offsetX + (size / 6) * 2, offsetY],\n      [offsetX + (size / 6) * 3, offsetY],\n      [offsetX + (size / 6) * 4, offsetY],\n      [offsetX + (size / 6) * 5, offsetY],\n      [offsetX, offsetY + size / 2],\n      [offsetX + size / 6, offsetY + size / 2],\n      [offsetX + (size / 6) * 2, offsetY + size / 2],\n      [offsetX + (size / 6) * 3, offsetY + size / 2],\n      [offsetX + (size / 6) * 4, offsetY + size / 2],\n      [offsetX + (size / 6) * 5, offsetY + size / 2],\n    ];\n\n    yields.forEach((tileYield) => {\n      for (let n = 0; n < tileYield.value; n++) {\n        this.putImage(\n          this.getPreloadedImage(`city/${tileYield._.toLowerCase()}`),\n          ...offsets[i++]\n        );\n      }\n    });\n  }\n}\nexport default Yields;\n", "export class LocaleProvider {\n  #defaultLocale: string;\n  #locale: string;\n  #locales: string[];\n\n  constructor(\n    locale: string = navigator.language,\n    locales: string[] = [...navigator.languages],\n    defaultLocale = 'en'\n  ) {\n    this.#locale = locale || defaultLocale;\n    this.#locales =\n      locales.length > 0\n        ? locales.includes(defaultLocale)\n          ? locales\n          : [...locales, defaultLocale]\n        : locale\n        ? [locale, defaultLocale]\n        : [defaultLocale];\n    this.#defaultLocale = defaultLocale;\n  }\n\n  locale(): string {\n    return this.#locale;\n  }\n\n  locales(): string[] {\n    return this.#locales;\n  }\n\n  list(list: Iterable<string>, options?: Intl.ListFormatOptions): string {\n    const formatter = new Intl.ListFormat(this.locales(), {\n      style: 'long',\n      type: 'conjunction',\n      ...options,\n    });\n\n    return formatter.format(list);\n  }\n\n  number(number: number, options?: Intl.NumberFormatOptions): string {\n    const formatter = new Intl.NumberFormat(this.locales(), {\n      maximumFractionDigits: 0,\n      ...options,\n    });\n\n    return formatter.format(number);\n  }\n\n  percent(number: number, options?: Intl.NumberFormatOptions): string {\n    return this.number(number, {\n      style: 'percent',\n      maximumFractionDigits: 0,\n      ...options,\n    });\n  }\n\n  setLocale(locale: string): void {\n    this.#locale = locale;\n  }\n\n  timeSince(date: Date, options?: Intl.RelativeTimeFormatOptions): string {\n    const timeFormatter = new Intl.RelativeTimeFormat(this.locales(), options),\n      secondsDifference = Math.trunc((date.getTime() - Date.now()) / 1000);\n\n    if (Math.abs(secondsDifference) < 10) {\n      return 'just now';\n    }\n\n    const [value, unit] = (\n      [\n        [60, 'seconds'],\n        [60, 'minutes'],\n        [24, 'hours'],\n        [28, 'days'],\n        [12, 'months'],\n        [Infinity, 'years'],\n      ] as [number, Intl.RelativeTimeFormatUnit][]\n    ).reduce(\n      ([value, unit, resolved], [limit, currentUnit]) => {\n        if (resolved) {\n          return [value, unit, resolved];\n        }\n\n        if (Math.abs(value) <= limit) {\n          return [value, currentUnit, true];\n        }\n\n        return [Math.trunc(value / limit), currentUnit, false];\n      },\n      [secondsDifference, 'seconds' as Intl.RelativeTimeFormatUnit, false]\n    );\n\n    return timeFormatter.format(value, unit);\n  }\n}\n\nexport const instance = new LocaleProvider();\n\nexport default LocaleProvider;\n", "import City from '../City';\nimport { City as CityData } from '../../types';\nimport { INotificationWindow } from '../NotificationWindow';\nimport Portal from '../Portal';\nimport Transport from '../../Transport';\nimport { cityName } from './city';\nimport { t } from 'i18next';\n\nexport const showCityAction = (\n  city: CityData,\n  portal: Portal,\n  transport: Transport\n) => ({\n  label: t('Actions.ShowCity.label', {\n    cityName: cityName(city),\n  }),\n  action(selectionWindow: INotificationWindow) {\n    selectionWindow.close();\n\n    new City(city, portal, transport);\n  },\n});\n\nexport default showCityAction;\n", "import { City as CityData } from '../../types';\nimport { INotificationWindow } from '../NotificationWindow';\nimport Portal from '../Portal';\nimport { cityName } from './city';\nimport { t } from 'i18next';\n\nexport const showCityOnMapAction = (city: CityData, portal: Portal) => ({\n  label: t('Actions.ShowOnMap.label', {\n    cityName: cityName(city),\n  }),\n  action(selectionWindow: INotificationWindow) {\n    selectionWindow.close();\n\n    portal.setCenter(city.tile.x, city.tile.y);\n  },\n});\n\nexport default showCityOnMapAction;\n", "import { City, PlayerAction } from '../../types';\nimport Action from './Action';\nimport ActionWindow from '../ActionWindow';\nimport Portal from '../Portal';\nimport Transport from '../../Transport';\nimport { assetStore } from '../../AssetStore';\nimport { cityName } from '../lib/city';\nimport { s } from '@dom111/element';\nimport showCityAction from '../lib/showCityAction';\nimport showCityOnMapAction from '../lib/showCityOnMap';\nimport { t } from 'i18next';\n\nexport class CivilDisorder extends Action {\n  #portal: Portal;\n\n  constructor(action: PlayerAction, portal: Portal, transport: Transport) {\n    super(action, transport);\n\n    this.#portal = portal;\n  }\n\n  activate() {\n    const city = this.value() as City;\n\n    new ActionWindow(\n      t('Actions.CivilDisorder.title', {\n        cityName: cityName(city),\n      }),\n      t('Actions.CivilDisorder.body', {\n        cityName: cityName(city),\n      })!,\n      {\n        actions: {\n          showCity: showCityAction(city, this.#portal, this.transport()),\n          showCityOnMap: showCityOnMapAction(city, this.#portal),\n        },\n      }\n    );\n  }\n\n  build() {\n    const city = this.value() as City;\n\n    assetStore.get('./assets/city/people_unhappy_m.png').then((asset) =>\n      this.append(\n        s(\n          `<button class=\"civilDisorder\" title=\"${t(\n            'Actions.CivilDisorder.title',\n            {\n              cityName: cityName(city),\n            }\n          )}\"><img src=\"${asset!.uri}\"></button>`\n        )\n      )\n    );\n  }\n}\n\nexport default CivilDisorder;\n", "import Action from './Action';\nimport checkIcon from 'feather-icons/dist/icons/check-circle.svg';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class EndTurn extends Action {\n  activate(): void {\n    this.element().setAttribute('disabled', '');\n\n    this.transport().send('action', {\n      name: 'EndTurn',\n    });\n  }\n\n  build(): void {\n    this.append(\n      s(\n        `<button class=\"large gradient endTurn\" title=\"${t(\n          'Actions.EndTurn.title'\n        )}\"><img src=\"${checkIcon}\"</button>`\n      )\n    );\n  }\n}\n\nexport default EndTurn;\n", "import Action from './Action';\nimport { PlayerGovernment } from '../../types';\nimport SelectionWindow from '../SelectionWindow';\nimport { assetStore } from '../../AssetStore';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class Revolution extends Action {\n  activate(): void {\n    const chooseWindow = new SelectionWindow(\n      t('Actions.Revolution.title'),\n      this.value().available.map((government) => ({\n        value: government._,\n      })),\n      (selection) => {\n        if (!selection) {\n          return;\n        }\n\n        this.transport().send('action', {\n          name: 'Revolution',\n          id: this.value().id,\n          chosen: selection ? selection : '@',\n        });\n\n        this.complete();\n\n        chooseWindow.close();\n      },\n      t('Actions.Revolution.body'),\n      {\n        displayAll: true,\n      }\n    );\n  }\n\n  build(): void {\n    assetStore\n      .get('./assets/city/sad.png')\n      .then((asset) =>\n        this.append(\n          s(\n            `<button class=\"chooseGovernment small\" title=\"${t(\n              'Actions.Revolution.title'\n            )}\"><img src=\"${asset!.uri}\"></button>`\n          )\n        )\n      );\n  }\n\n  value(): PlayerGovernment {\n    return super.value() as PlayerGovernment;\n  }\n}\n\nexport default Revolution;\n", "import Action from './Action';\nimport { Spaceship as SpaceshipData } from '../../types';\nimport Window from '../Window';\nimport civilizationAttribute from '../lib/civilizationAttribute';\nimport globeIcon from 'feather-icons/dist/icons/globe.svg';\nimport { h } from '../../lib/html';\nimport { instance as localeProviderInstance } from '../../LocaleProvider';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\ntype SpaceshipYieldMap = {\n  [key: string]: [number, number];\n};\n\nexport class Spaceship extends Action {\n  activate(): void {\n    const spaceship = this.value(),\n      yields = spaceship.yields.reduce(\n        (yieldMap: SpaceshipYieldMap, spaceshipYield) => {\n          if (!(spaceshipYield._ in yieldMap)) {\n            return yieldMap;\n          }\n\n          if (spaceshipYield.value < 0) {\n            yieldMap[spaceshipYield._][1] += Math.abs(spaceshipYield.value);\n\n            return yieldMap;\n          }\n\n          yieldMap[spaceshipYield._][0] += spaceshipYield.value;\n\n          return yieldMap;\n        },\n        {\n          Energy: [0, 0],\n          LifeSupport: [0, 0],\n          Mass: [0, 0],\n          Population: [0, 0],\n        } as SpaceshipYieldMap\n      ),\n      activeParts = spaceship.activeParts.reduce(\n        (partMap: { [key: string]: number }, part) => {\n          if (!(part._ in partMap)) {\n            return partMap;\n          }\n\n          partMap[part._]++;\n\n          return partMap;\n        },\n        {\n          Structural: 0,\n          Fuel: 0,\n          Propulsion: 0,\n          Habitation: 0,\n          LifeSupport: 0,\n          Power: 0,\n        }\n      ),\n      inactiveParts = spaceship.inactiveParts.reduce(\n        (partMap: { [key: string]: number }, part) => {\n          if (!(part._ in partMap)) {\n            return partMap;\n          }\n\n          partMap[part._]++;\n\n          return partMap;\n        },\n        {\n          Structural: 0,\n          Fuel: 0,\n          Propulsion: 0,\n          Habitation: 0,\n          LifeSupport: 0,\n          Power: 0,\n        }\n      ),\n      values = [\n        [\n          t('Actions.Spaceship.chance-of-success'),\n          localeProviderInstance.percent(spaceship.chanceOfSuccess),\n        ],\n        [\n          t('Actions.Spaceship.flight-time'),\n          localeProviderInstance.number(spaceship.flightTime, {\n            style: 'unit',\n            unit: 'year',\n            unitDisplay: 'long',\n          }),\n        ],\n        [\n          t('Actions.Spaceship.has-launched'),\n          t(spaceship.launched ? 'Generic.yes' : 'Generic.no'),\n        ],\n        [\n          t('Actions.Spaceship.mass'),\n          localeProviderInstance.number(yields.Mass[0] * 1000, {\n            style: 'unit',\n            unit: 'kilogram',\n          }),\n        ],\n        [\n          t('Actions.Spaceship.population'),\n          localeProviderInstance.number(yields.Population[0]),\n        ],\n        [\n          t('Actions.Spaceship.energy'),\n          localeProviderInstance.percent(\n            yields.Energy[1] > 0 ? yields.Energy[0] / yields.Energy[1] : 0\n          ),\n        ],\n        [\n          t('Actions.Spaceship.life-support'),\n          localeProviderInstance.percent(\n            yields.LifeSupport[1] > 0\n              ? yields.LifeSupport[0] / yields.LifeSupport[1]\n              : 0\n          ),\n        ],\n      ],\n      launch = () => {\n        // TODO: could highlight the button? Red for < 50%, Yellow for < 80%, otherwise Green?\n        this.transport().send('action', {\n          name: 'LaunchSpaceship',\n          id: spaceship.id,\n        });\n\n        window.close();\n      },\n      window = new Window(\n        t('Actions.Spaceship.spaceship-name', {\n          nation: t(`${spaceship.player.civilization._}.name`, {\n            defaultValue: spaceship.player.civilization._,\n            ns: 'civilization',\n          }),\n        }),\n        s(\n          '<div></div>',\n          s(\n            `<dl>${Object.entries(activeParts)\n              .map(\n                ([key, value]) =>\n                  `<dd>${t(`${key}.name`, {\n                    defaultValue: key,\n                    ns: 'spaceship',\n                  })}</dd><dt>${localeProviderInstance.number(value)}${\n                    inactiveParts[key] === 0\n                      ? ''\n                      : ` <span class=\"inactive\">${t(\n                          'Actions.Spaceship.inactive-part',\n                          {\n                            inactiveParts: inactiveParts[key],\n                          }\n                        )}</span>`\n                  }</dt>`\n              )\n              .join('')}</dl>`\n          ),\n          s(\n            `<dl>${values\n              .map(([label, value]) => `<dd>${label}</dd><dt>${value}</dt>`)\n              .join('')}</dl>`\n          ),\n          s(\n            '<footer></footer>',\n            h(\n              s<HTMLButtonElement>(\n                `<button${\n                  spaceship.launched || spaceship.chanceOfSuccess === 0\n                    ? ' disabled'\n                    : ''\n                }>${t(\n                  spaceship.launched\n                    ? 'Actions.Spaceship.launched'\n                    : 'Actions.Spaceship.launch'\n                )}</button>`\n              ),\n              {\n                keydown(event: KeyboardEvent) {\n                  if (['Enter', ' '].includes(event.key)) {\n                    launch();\n                  }\n                },\n                click() {\n                  launch();\n                },\n              }\n            )\n          )\n        )\n      );\n\n    window.addClass('spaceship');\n  }\n\n  build(): void {\n    this.append(\n      s(\n        `<button class=\"spaceship\" title=\"${t(\n          'Actions.Spaceship.title'\n        )}\"><img src=\"${globeIcon}\"/></button>`\n      )\n    );\n  }\n\n  value(): SpaceshipData {\n    return super.value() as SpaceshipData;\n  }\n}\n\nexport default Spaceship;\n", "import { IMap } from '../Map';\nimport Units from './Units';\n\nexport class ActiveUnit extends Units implements IMap {\n  render(): void {\n    this.clear();\n\n    const activeUnit = this.activeUnit();\n\n    if (activeUnit === null) {\n      return;\n    }\n\n    const { x, y } = activeUnit.tile,\n      tile = this.world().get(x, y),\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size,\n      image = this.renderUnit(activeUnit);\n\n    if (tile.units.length > 1) {\n      this.putImage(image, offsetX - this.scale(), offsetY - this.scale());\n    }\n\n    this.putImage(image, offsetX, offsetY);\n  }\n\n  update(): void {\n    this.render();\n  }\n}\n\nexport default ActiveUnit;\n", "import { Tile } from '../../types';\nimport { Map } from '../Map';\nimport { instance as localeProvider } from '../../LocaleProvider';\nimport { t } from 'i18next';\nimport { cityName } from '../lib/city';\n\nexport class CityNames extends Map {\n  renderTile(tile: Tile): void {\n    if (!tile.city) {\n      return;\n    }\n\n    super.renderTile(tile);\n\n    const { x, y } = tile,\n      size = this.tileSize(),\n      offsetX = x * size,\n      offsetY = y * size,\n      city = tile.city,\n      sizeOffsetX = this.tileSize() / 2,\n      sizeOffsetY = this.tileSize() * 0.75,\n      textOffsetX = this.tileSize() / 2,\n      textOffsetY = this.tileSize() * 1.6;\n\n    this.context().font = `bold ${8 * this.scale()}px sans-serif`;\n    this.context().fillStyle = 'black';\n    this.context().textAlign = 'center';\n    this.context().fillText(\n      localeProvider.number(city.growth.size),\n      offsetX + sizeOffsetX + this.scale(),\n      offsetY + sizeOffsetY\n    );\n    this.context().fillText(\n      cityName(city),\n      offsetX + textOffsetX + this.scale(),\n      offsetY + textOffsetY\n    );\n    this.context().fillStyle = 'white';\n    this.context().fillText(\n      localeProvider.number(city.growth.size),\n      offsetX + sizeOffsetX,\n      offsetY + sizeOffsetY - this.scale()\n    );\n    this.context().fillText(\n      cityName(city),\n      offsetX + textOffsetX,\n      offsetY + textOffsetY - this.scale()\n    );\n  }\n\n  update(): void {\n    this.clear();\n\n    // TODO: Could be a little smarter about this...\n    this.world()\n      .tiles()\n      .filter((tile) => !!tile.city)\n      .forEach((tile) => this.renderTile(tile));\n  }\n}\n\nexport default CityNames;\n", "import { City as CityData, GameData, PlainObject, Player } from '../types';\nimport { knownIcons } from '../lib/yieldMap';\nimport { turnsLeft, turnsText, yieldData } from './lib/cityYields';\nimport City from './City';\nimport DataObserver from '../DataObserver';\nimport Portal from './Portal';\nimport Transport from '../Transport';\nimport Window from './Window';\nimport { assetStore } from '../AssetStore';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\nimport { getLabelForBuildable } from './lib/cityBuild';\nimport { cityName } from './lib/city';\n\nconst buildCityRow = async (city: CityData): Promise<HTMLElement[]> => {\n  const [food, production, trade, research, gold, luxuries] = [\n      'Food',\n      'Production',\n      'Trade',\n      'Research',\n      'Gold',\n      'Luxuries',\n    ].map((yieldName) => yieldData(city, yieldName)),\n    [\n      foodIcon,\n      productionIcon,\n      tradeIcon,\n      researchIcon,\n      goldIcon,\n      luxuriesIcon,\n    ] = await Promise.all(\n      ['Food', 'Production', 'Trade', 'Research', 'Gold', 'Luxuries'].map(\n        (yieldName) =>\n          assetStore\n            .getScaled(`./assets/${knownIcons[yieldName]}`, 2)\n            .then((image) => `<img src=\"${image.toDataURL('image/png')}\">`)\n      )\n    );\n\n  return [\n    s(`<header>${cityName(city)}</header>`),\n    s(\n      `<div class=\"growth\"><strong>${t(\n        'City.size',\n        city.growth\n      )}</strong> ${foodIcon} ${t('CityStatus.growth', {\n        free: food[2],\n        total: food[0],\n        totals_context: food[0] === food[2] ? 'equal' : 'unequal',\n        turns: turnsLeft(city.growth, city.yields, 'Food'),\n      })}</div>`\n    ),\n    s(\n      `<div class=\"build\">${productionIcon}  ${t('CityStatus.build', {\n        free: production[2],\n        total: production[0],\n        context: city.build.building ? 'nonempty' : 'empty',\n        totals_context: production[0] === production[2] ? 'equal' : 'unequal',\n        buildable: getLabelForBuildable(city.build.building),\n        turns: city.build.building\n          ? turnsLeft(city.build, city.yields, 'Production')\n          : Infinity,\n      })}</div>`\n    ),\n    s(\n      `<div class=\"yields\">${(\n        [\n          [trade, tradeIcon],\n          [research, researchIcon],\n          [gold, goldIcon],\n          [luxuries, luxuriesIcon],\n        ] as [[number, number, number], string][]\n      )\n        .filter(([[total]]) => total !== 0)\n        .map(\n          ([[total, , free], icon]) =>\n            `${icon} ${t('CityStatus.totals', {\n              free,\n              total,\n              context: free === total ? 'equal' : 'unequal',\n            })}`\n        )\n        .join(', ')}</div>`\n    ),\n  ];\n};\n\nexport class CityStatus extends Window {\n  #cities: CityData[];\n  #dataObserver: DataObserver;\n  #portal: Portal;\n  #transport: Transport;\n\n  constructor(player: Player, portal: Portal, transport: Transport) {\n    super(t('CityStatus.title'), s('<div class=\"loading\"></div>'), {\n      classes: 'city-status',\n    });\n\n    this.#cities = player.cities;\n    this.#dataObserver = new DataObserver(\n      [\n        player.id,\n        ...player.cities.flatMap(({ id, build, growth }: CityData) => [\n          id,\n          growth.id,\n          build.id,\n        ]),\n      ],\n      (data) => {\n        const player = (data as GameData).player;\n\n        this.#cities = player.cities;\n\n        this.#dataObserver.setIds([\n          player.id,\n          ...player.cities.flatMap(({ id, build, growth }: CityData) => [\n            id,\n            growth.id,\n            build.id,\n          ]),\n        ]);\n\n        this.update();\n      }\n    );\n    this.#portal = portal;\n    this.#transport = transport;\n\n    this.update();\n  }\n\n  close() {\n    this.#dataObserver.dispose();\n\n    return super.close();\n  }\n\n  update() {\n    Promise.all(this.#cities.map((city) => buildCityRow(city))).then((rows) =>\n      super.update(\n        s(\n          '<table></table>',\n          ...rows.map(([name, growth, build, yields], index) => {\n            const row = document.createElement('tr');\n\n            row.append(\n              ...(\n                [\n                  [name, 'th'],\n                  [growth, 'td'],\n                  [build, 'td'],\n                  [yields, 'td'],\n                ] as [HTMLElement, string][]\n              ).map(([element, containerNodeName]) => {\n                const container = document.createElement(containerNodeName);\n\n                container.append(element);\n\n                return container;\n              })\n            );\n\n            return h(row, {\n              click: () =>\n                new City(this.#cities[index], this.#portal, this.#transport),\n            });\n          })\n        )\n      )\n    );\n  }\n}\n\nexport default CityStatus;\n", "import { Element, s } from '@dom111/element';\nimport { Yield } from '../types';\nimport { t } from 'i18next';\n\nexport class GameDetails extends Element {\n  #turn: Yield;\n  #year: Yield;\n\n  constructor(element: HTMLElement, turn: Yield, year: Yield) {\n    super(element);\n\n    this.#turn = turn;\n    this.#year = year;\n  }\n\n  build(): void {\n    this.empty();\n\n    this.append(\n      s(\n        `<h3><span class=\"year\">${this.year()}</span><span class=\"turn\">${t(\n          'GameDetails.turn',\n          {\n            turn: this.#turn.value,\n          }\n        )}</span></h3>`\n      )\n    );\n  }\n\n  year(year = this.#year.value): string {\n    return t('GameDetails.year', {\n      year: Math.abs(year) || 1, // This ensures we show 1 CE, instead of 0 CE\n      context: year < 0 ? 'bce' : 'ce',\n    });\n  }\n}\n\nexport default GameDetails;\n", "import { Element, s } from '@dom111/element';\nimport { GameData, Player } from '../types';\nimport CityStatus from './CityStatus';\nimport DataObserver from '../DataObserver';\nimport GameOptions from './GameOptions';\nimport HappinessReport from './HappinessReport';\nimport PopupMenu from './PopupMenu';\nimport Portal from './Portal';\nimport ScienceReport from './ScienceReport';\nimport TradeReport from './TradeReport';\nimport Transport from '../Transport';\nimport { h } from '../lib/html';\nimport menuIcon from 'feather-icons/dist/icons/menu.svg';\nimport { t } from 'i18next';\n\nexport class GameMenu extends Element {\n  #dataObserver: DataObserver;\n  #player: Player;\n  #portal: Portal;\n  #transport: Transport;\n\n  constructor(\n    element: HTMLElement,\n    player: Player,\n    portal: Portal,\n    transport: Transport\n  ) {\n    super(element);\n\n    this.#player = player;\n    this.#portal = portal;\n    this.#transport = transport;\n\n    this.#dataObserver = new DataObserver(\n      [player.id],\n      (data: GameData) => (this.#player = data.player)\n    );\n  }\n  build(): void {\n    const button = s(`<button><img src=\"${menuIcon}\"></button>`);\n\n    this.append(\n      h(button, {\n        click: () => {\n          const { offsetLeft: parentX, offsetTop: parentY } = this.element(),\n            { offsetLeft: x, offsetTop: y } = button;\n\n          new PopupMenu(\n            this,\n            parentX + x,\n            parentY + y,\n            [\n              {\n                label: t('GameMenu.options'),\n                action() {\n                  new GameOptions();\n                },\n              },\n              {\n                label: t('GameMenu.city-status'),\n                action: () => {\n                  new CityStatus(this.#player, this.#portal, this.#transport);\n                },\n              },\n              {\n                label: t('GameMenu.happiness-report'),\n                action: () => {\n                  new HappinessReport(\n                    this.#player,\n                    this.#portal,\n                    this.#transport\n                  );\n                },\n              },\n              {\n                label: t('GameMenu.trade-report'),\n                action: () => {\n                  new TradeReport(this.#player, this.#portal, this.#transport);\n                },\n              },\n              {\n                label: t('GameMenu.science-report'),\n                action: () => {\n                  new ScienceReport(this.#player);\n                },\n              },\n            ],\n            {\n              align: 'right',\n              fullWidth: true,\n            }\n          );\n        },\n      })\n    );\n  }\n}\n\nexport default GameMenu;\n", "import { IRegistry, IRegistryIterator, IConstructor } from './Registry';\n\nexport interface IEntityRegistry<T> extends IRegistry<T> {\n  accepts(entity: T): boolean;\n  entries(): T[];\n  every(iterator: IRegistryIterator<T>): boolean;\n  filter(iterator: IRegistryIterator<T>): T[];\n  forEach(iterator: (item: T, i: number) => void): void;\n  getBy<K extends keyof T>(\n    key: K,\n    value: T[K] extends (...args: any[]) => any ? ReturnType<T[K]> : T[K]\n  ): T[];\n  includes(item: T): boolean;\n  indexOf(item: T): number;\n  map(iterator: (item: T, i: number) => any): any[];\n  register(...entities: T[]): void;\n  some(iterator: IRegistryIterator<T>): boolean;\n  unregister(...entities: T[]): void;\n}\n\nexport class EntityRegistry<T = any> implements IEntityRegistry<T> {\n  #acceptedTypes: IConstructor<T>[] = [];\n  #entries: T[] = [];\n\n  constructor(...acceptedTypes: IConstructor<T>[]) {\n    this.#acceptedTypes.push(...acceptedTypes);\n  }\n\n  accepts(entity: T): boolean {\n    return this.#acceptedTypes.some(\n      (acceptedType: IConstructor<T>): boolean => entity instanceof acceptedType\n    );\n  }\n\n  entries(): T[] {\n    return this.#entries.slice();\n  }\n\n  every(iterator: IRegistryIterator<T>): boolean {\n    return this.entries().every(iterator);\n  }\n\n  filter(iterator: IRegistryIterator<T>): T[] {\n    return this.entries().filter(iterator);\n  }\n\n  forEach(iterator: (item: T, i: number) => void): void {\n    return this.entries().forEach(iterator);\n  }\n\n  getBy<K extends keyof T>(\n    key: K,\n    value: T[K] extends (...args: any[]) => any ? ReturnType<T[K]> : T[K]\n  ): T[] {\n    return this.filter((entity: T): boolean => {\n      const check = entity[key];\n\n      if (check instanceof Function) {\n        return check.bind(entity)() === value;\n      }\n\n      return entity[key] === value;\n    });\n  }\n\n  includes(item: T): boolean {\n    return this.#entries.includes(item);\n  }\n\n  indexOf(entity: T): number {\n    return this.#entries.indexOf(entity);\n  }\n\n  get length(): number {\n    return this.entries().length;\n  }\n\n  map(iterator: (item: T, i: number) => any): any[] {\n    return this.entries().map(iterator);\n  }\n\n  register(...entities: T[]): void {\n    entities.forEach((entity: T): void => {\n      if (!this.accepts(entity)) {\n        throw new TypeError(\n          `Registry#register: Invalid entity attempted to be registered: '${entity}'.`\n        );\n      }\n\n      if (!this.#entries.includes(entity)) {\n        this.#entries.push(entity);\n      }\n    });\n  }\n\n  some(iterator: IRegistryIterator<T>): boolean {\n    return this.entries().some(iterator);\n  }\n\n  unregister(...entities: T[]): void {\n    entities.forEach((entity: T) => {\n      const index = this.#entries.indexOf(entity);\n\n      if (index > -1) {\n        this.#entries.splice(index, 1);\n      }\n    });\n  }\n}\n\nexport default EntityRegistry;\n", "export class GameOption {\n  #key: string;\n  #value: any;\n\n  constructor(key: string, value: any) {\n    this.#key = key;\n    this.#value = value;\n  }\n\n  key(): string {\n    return this.#key;\n  }\n\n  value(): any {\n    return this.#value;\n  }\n}\n\nexport default GameOption;\n", "import EntityRegistry from '@civ-clone/core-registry/EntityRegistry';\nimport GameOption from './GameOption';\n\nexport class GameOptionsRegistry extends EntityRegistry<GameOption> {\n  constructor() {\n    super(GameOption);\n  }\n\n  get(key: string): any {\n    const [option] = this.getBy('key', key);\n\n    if (!option) {\n      return null;\n    }\n\n    return option.value();\n  }\n\n  set(key: string, value: any): void {\n    const existing = this.getBy('key', key);\n    if (existing.length) {\n      this.unregister(...existing);\n    }\n\n    this.register(new GameOption(key, value));\n  }\n}\n\nexport const instance = new GameOptionsRegistry();\n\nexport default GameOptionsRegistry;\n", "import Window from './Window';\nimport { h } from '../lib/html';\nimport { instance as options } from '../GameOptionsRegistry';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class GameOptions extends Window {\n  constructor() {\n    super(\n      'Options',\n      s(\n        `<div></div>`,\n        s(\n          `<label>${t('GameOptions.auto-end-turn')}</label>`,\n          (() => {\n            const input = s<HTMLInputElement>(\n              `<input type=\"checkbox\"${\n                options.get('autoEndOfTurn') ? ' checked' : ''\n              }>`\n            );\n\n            return h(input, {\n              change: () => options.set('autoEndOfTurn', input.checked),\n            });\n          })()\n        )\n      )\n    );\n\n    this.addClass('game-options');\n  }\n}\n\nexport default GameOptions;\n", "import {\n  City as CityData,\n  CityImprovementContent,\n  GameData,\n  MartialLaw,\n  MilitaryUnhappiness,\n  Player,\n} from '../types';\nimport { knownIcons, reduceKnownYield } from '../lib/yieldMap';\nimport City from './City';\nimport DataObserver from '../DataObserver';\nimport Element from '@dom111/element';\nimport Portal from './Portal';\nimport SupportedUnit from './SupportedUnit';\nimport Transport from '../Transport';\nimport Unit from './Unit';\nimport Window from './Window';\nimport { assetStore } from '../AssetStore';\nimport { cityName } from './lib/city';\nimport { h } from '../lib/html';\nimport { instance as localeProvider } from '../LocaleProvider';\nimport instanceOf from '../lib/instanceOf';\nimport { renderPopulation } from './lib/cityYields';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nconst buildCityRow = async (\n  city: CityData,\n  portal: Portal,\n  transport: Transport\n) => {\n  const happinessReasons: {\n    [key: string]: (cityYield: any) => string | HTMLElement | Element;\n  } = {\n    CityImprovementContent: (cityYield: CityImprovementContent) =>\n      cityYield.cityImprovement._,\n    MartialLaw: (cityYield: MartialLaw) => new Unit(cityYield.unit),\n    MilitaryUnhappiness: (cityYield: MilitaryUnhappiness) =>\n      new SupportedUnit(city, cityYield.unit, ['MilitaryUnhappiness']),\n    LuxuryHappiness: () => {\n      const luxuriesElement = s(`<span></span>`);\n\n      assetStore\n        .getScaled(`./assets/${knownIcons.Luxuries}`, 2)\n        .then((image) =>\n          luxuriesElement.append(\n            s(`<img src=\"${image.toDataURL('image/png')}\">`),\n            localeProvider.number(reduceKnownYield(city.yields, 'Luxuries'))\n          )\n        );\n\n      return luxuriesElement;\n    },\n  };\n\n  const happinessYields = city.yields.filter(\n      (cityYield) =>\n        instanceOf(cityYield, 'Happiness', 'Unhappiness') &&\n        cityYield.value !== 0\n    ),\n    reasons = happinessYields.map((cityYield, index) =>\n      s(\n        `<div class=\"reason\"></div>`,\n        renderPopulation(city, happinessYields.slice(0, index + 1)),\n        s(\n          `<div class=\"detail\"></div>`,\n          happinessReasons[cityYield._]\n            ? happinessReasons[cityYield._](cityYield)\n            : cityYield._\n        )\n      )\n    );\n\n  const reasonWrapper = s('<div class=\"reasons hidden\"></div>', ...reasons);\n\n  return h(\n    s(\n      `<div class=\"city${city.celebrateLeader ? ' celebrateLeader' : ''}${\n        city.civilDisorder ? ' civilDisorder' : ''\n      }\"><div class=\"name\">${cityName(city)}</div></div>`,\n      renderPopulation(city),\n      h(\n        s(\n          `<button>${t('HappinessReport.view-city', {\n            cityName: cityName(city),\n          })}</button>`\n        ),\n        {\n          click(event: MouseEvent) {\n            event.stopPropagation();\n\n            new City(city, portal, transport);\n          },\n        }\n      ),\n      reasonWrapper\n    ),\n    {\n      click() {\n        if (reasons.length === 0) {\n          return;\n        }\n\n        reasonWrapper.classList.toggle('hidden');\n      },\n    }\n  );\n};\n\nexport class HappinessReport extends Window {\n  #dataObserver: DataObserver;\n  #player: Player;\n  #portal: Portal;\n  #transport: Transport;\n\n  constructor(player: Player, portal: Portal, transport: Transport) {\n    super('Happiness report', s('<div></div>'), {\n      classes: 'happiness-report',\n    });\n\n    this.element().setAttribute(\n      'data-i18n-breakdown',\n      t('HappinessReport.breakdown')\n    );\n\n    this.#dataObserver = new DataObserver(\n      [player.id, ...player.cities.map((city) => city.id)],\n      (data) => {\n        this.#player = (data as GameData).player;\n\n        this.#dataObserver.setIds([\n          player.id,\n          ...player.cities.map((city) => city.id),\n        ]);\n\n        this.update();\n      }\n    );\n\n    this.#player = player;\n    this.#portal = portal;\n    this.#transport = transport;\n\n    this.update();\n  }\n\n  close() {\n    this.#dataObserver.dispose();\n\n    return super.close();\n  }\n\n  update() {\n    Promise.all(\n      this.#player.cities.map((city) =>\n        buildCityRow(city, this.#portal, this.#transport)\n      )\n    ).then((rows) => super.update(s('<div></div>', ...rows)));\n  }\n}\n\nexport default HappinessReport;\n", "import { Element, off, on, s } from '@dom111/element';\nimport { h } from '../lib/html';\nimport { t } from 'i18next';\n\nconst menuMap = new Map<any, PopupMenu>();\n\nexport interface PopupMenuAction {\n  label: string;\n  action: (menu: PopupMenu) => void;\n}\n\nexport interface PopupMenuOptions {\n  align: 'left' | 'center' | 'right';\n  fullWidth: boolean;\n  target: HTMLElement;\n}\n\nexport class PopupMenu extends Element {\n  #actions: PopupMenuAction[] = [];\n  #targetPointerUpListener: (event: PointerEvent) => void = () => {};\n  #centerX: number;\n  #centerY: number;\n  #options: PopupMenuOptions = {\n    align: 'left',\n    fullWidth: false,\n    target: document.body,\n  };\n\n  constructor(\n    launcher: any,\n    centerX: number,\n    centerY: number,\n    actions: PopupMenuAction[],\n    options: Partial<PopupMenuOptions> = {}\n  ) {\n    super(s(`<div class=\"popup-menu hide\"></div>`));\n\n    if (menuMap.has(launcher)) {\n      const existingMenu = menuMap.get(launcher)!;\n\n      existingMenu.remove();\n    }\n\n    menuMap.set(launcher, this);\n\n    this.#actions = actions;\n    this.#centerX = centerX;\n    this.#centerY = centerY;\n    this.#options = {\n      ...this.#options,\n      ...options,\n    };\n\n    this.build();\n  }\n\n  build() {\n    const actions = this.#actions;\n\n    if (actions.length === 0) {\n      this.remove();\n\n      return;\n    }\n\n    this.element().style.setProperty('left', this.#centerX + 'px');\n    this.element().style.setProperty('top', this.#centerY + 'px');\n\n    this.removeClass('hide');\n\n    this.append(\n      ...actions.map(({ action, label }) => {\n        const button = s(`<button>${label}</button>`);\n\n        on(button, 'pointerup', () => {\n          action(this);\n\n          this.remove();\n        });\n\n        return button;\n      }),\n      h(\n        s(\n          `<button class=\"close\" aria-label=\"${t(\n            'Generic.close'\n          )}\">&times;</button>`\n        ),\n        {\n          pointerup: () => this.remove(),\n        }\n      )\n    );\n\n    this.addClass(this.#options.align);\n\n    if (this.#options.fullWidth) {\n      this.addClass('full-width');\n    }\n\n    this.#targetPointerUpListener = () => this.remove();\n\n    on(this.#options.target, 'pointerup', this.#targetPointerUpListener);\n\n    this.#options.target.append(this.element());\n  }\n\n  remove() {\n    this.addClass('hide');\n\n    setTimeout(() => {\n      super.remove();\n    }, 250);\n\n    off(this.#options.target, 'pointerup', this.#targetPointerUpListener);\n  }\n}\n\nexport default PopupMenu;\n", "import { Player, Yield } from '../../types';\n\nexport const combinedYields = (player: Player) =>\n  player.cities.reduce(\n    (yields: Yield[], city) => yields.concat(city.yields),\n    []\n  );\n", "import { GameData, Player, PlayerResearch, Yield } from '../types';\nimport { knownIcons, reduceKnownYield } from '../lib/yieldMap';\nimport DataObserver from '../DataObserver';\nimport Window from './Window';\nimport { assetStore } from '../AssetStore';\nimport { combinedYields } from './lib/playerYields';\nimport { renderProgress, turnsLeft } from './lib/cityYields';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nconst template = async (playerResearch: PlayerResearch, yields: Yield[]) => {\n  const researchIcon = await assetStore\n    .getScaled(`./assets/${knownIcons.Research}`, 2)\n    .then((image) => `<img src=\"${image.toDataURL('image/png')}\">`);\n\n  return s(\n    `<div><p><strong>${t('ScienceReport.researching', {\n      researching: playerResearch.researching?._,\n      context: playerResearch.researching ? 'researching' : 'notresearching',\n    })}</strong></p><p>${t('ScienceReport.progress', {\n      progress: playerResearch.progress.value,\n      total: playerResearch.cost.value,\n      turns: turnsLeft(playerResearch, yields, 'Research'),\n      context: playerResearch.researching ? 'researching' : 'notresearching',\n    })}</p><p>${researchIcon} ${t('Progress.per-turn', {\n      count: reduceKnownYield(yields, 'Research'),\n    })}</p><div class=\"discovered\">${playerResearch.complete\n      .map(\n        (advance) =>\n          `<div>${t(`${advance._}.name`, {\n            defaultValue: advance._,\n            ns: 'science',\n          })}</div>`\n      )\n      .join('')}</div></div>`\n  );\n};\n\nexport class ScienceReport extends Window {\n  #dataObserver: DataObserver;\n  #player: Player;\n\n  constructor(player: Player) {\n    super(t('ScienceReport.title'), s('<div></div>'), {\n      classes: 'science-report',\n    });\n\n    this.#player = player;\n\n    this.update();\n\n    this.#dataObserver = new DataObserver(\n      [player.id, player.research.id, ...player.cities.map((city) => city.id)],\n      (data) => {\n        const player = (data as GameData).player;\n\n        this.#dataObserver.setIds([\n          player.id,\n          player.research.id,\n          ...player.cities.map((city) => city.id),\n        ]);\n\n        this.#player = player;\n\n        this.update();\n      }\n    );\n  }\n\n  close() {\n    this.#dataObserver.dispose();\n\n    return super.close();\n  }\n\n  update() {\n    template(this.#player.research, combinedYields(this.#player)).then(\n      (template) => super.update(template)\n    );\n  }\n}\n\nexport default ScienceReport;\n", "import {\n  City as CityData,\n  CityImprovementMaintenanceGold,\n  GameData,\n  Player,\n  Yield,\n} from '../types';\nimport City from './City';\nimport DataObserver from '../DataObserver';\nimport Portal from './Portal';\nimport Transport from '../Transport';\nimport Window from './Window';\nimport { assetStore } from '../AssetStore';\nimport { cityName } from './lib/city';\nimport { h } from '../lib/html';\nimport { knownIcons } from '../lib/yieldMap';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\nimport { yieldData } from './lib/cityYields';\n\nexport class TradeReport extends Window {\n  #cities: CityData[];\n  #dataObserver: DataObserver;\n  #portal: Portal;\n  #transport: Transport;\n\n  constructor(player: Player, portal: Portal, transport: Transport) {\n    super(t('TradeReport.title'), s('<div class=\"loading\"></div>'), {\n      classes: 'trade-report',\n    });\n\n    this.#cities = player.cities;\n    this.#dataObserver = new DataObserver(\n      [\n        player.id,\n        ...player.cities.flatMap(({ id, build, growth }: CityData) => [\n          id,\n          growth.id,\n          build.id,\n        ]),\n      ],\n      (data) => {\n        const player = (data as GameData).player;\n\n        this.#cities = player.cities;\n\n        this.#dataObserver.setIds([\n          player.id,\n          ...player.cities.flatMap(({ id, build, growth }: CityData) => [\n            id,\n            growth.id,\n            build.id,\n          ]),\n        ]);\n\n        this.update();\n      }\n    );\n    this.#portal = portal;\n    this.#transport = transport;\n\n    this.update();\n  }\n\n  close() {\n    this.#dataObserver.dispose();\n\n    return super.close();\n  }\n\n  async update() {\n    const goldIcon = await assetStore\n        .getScaled(`./assets/${knownIcons.Gold}`, 2)\n        .then((image) => `<img src=\"${image.toDataURL('image/png')}\">`),\n      cityList = s(`<table class=\"city-list\"></table>`),\n      improvementList = s(`<table class=\"improvement-list\"></table>`),\n      improvements: {\n        [key: string]: {\n          count: number;\n          cost: number;\n        };\n      } = {},\n      [totalIncome, totalSpend, totalGold] = this.#cities.reduce(\n        ([totalIncome, totalSpend, totalGold], city: CityData) => {\n          city.yields.forEach(\n            (cityYield: Yield | CityImprovementMaintenanceGold) => {\n              if (cityYield._ === 'CityImprovementMaintenanceGold') {\n                const improvement = (\n                  cityYield as CityImprovementMaintenanceGold\n                ).cityImprovement;\n\n                if (!(improvement._ in improvements)) {\n                  improvements[improvement._] = {\n                    count: 0,\n                    cost: cityYield.value,\n                  };\n                }\n\n                improvements[improvement._].count++;\n              }\n            }\n          );\n\n          const [cityGold, used, free] = yieldData(city, 'Gold'),\n            row = document.createElement('tr');\n\n          h(row, {\n            click: () => new City(city, this.#portal, this.#transport),\n          });\n\n          row.append(\n            ...[\n              cityName(city),\n              `${goldIcon} ${t('CityStatus.totals', {\n                total: cityGold,\n                free,\n                context: free === cityGold ? 'equal' : 'unequal',\n              })}`,\n            ].map((content) => {\n              const element = document.createElement('td');\n\n              element.innerHTML = content;\n\n              return element;\n            })\n          );\n\n          cityList.append(row);\n\n          return [totalIncome + cityGold, totalSpend + used, totalGold + free];\n        },\n        [0, 0, 0]\n      );\n\n    improvementList.append(\n      ...Object.entries(improvements).map(([name, { count, cost }]) => {\n        const row = document.createElement('tr');\n\n        row.append(\n          ...[\n            t('TradeReport.ImprovementList.item', {\n              count,\n              name,\n            }) as string,\n            t('TradeReport.ImprovementList.cost', {\n              icon: goldIcon,\n              total: Math.abs(count * -cost),\n            }) as string,\n          ].map((content) => {\n            const element = document.createElement('td');\n\n            element.innerHTML = content;\n\n            return element;\n          })\n        );\n\n        return row;\n      })\n    );\n\n    super.update(\n      s(\n        '<div></div>',\n        s(\n          `<div class=\"two-column-wrapper\"></div>`,\n          s('<div></div>', cityList),\n          s(\n            '<div></div>',\n            improvementList,\n            s(`    <dl class=\"totals\">\n      <dt>${t('TradeReport.ImprovementList.income-title')}</dt>\n      <dd>${t('TradeReport.ImprovementList.income-value', {\n        icon: goldIcon,\n        count: totalIncome,\n      })}</dd>\n      <dt>${t('TradeReport.ImprovementList.cost-title')}</dt>\n      <dd>${t('TradeReport.ImprovementList.income-value', {\n        icon: goldIcon,\n        count: Math.abs(totalSpend),\n      })}</dd>\n      <dt>${t('TradeReport.ImprovementList.surplus-title')}</dt>\n      <dd>${t('TradeReport.ImprovementList.income-value', {\n        icon: goldIcon,\n        count: totalGold,\n      })}</dd>\n    </dl>\n`)\n          )\n        )\n      )\n    );\n  }\n}\n\nexport default TradeReport;\n", "import { PopupMenu, PopupMenuAction } from './PopupMenu';\nimport { SneakAttack, Tile, Unit as UnitData, UnitAction } from '../types';\nimport Transport from '../Transport';\nimport { off, on } from '@dom111/element';\nimport ConfirmationWindow from './ConfirmationWindow';\nimport { t } from 'i18next';\n\nconst buildActions = (\n  tile: Tile,\n  unit: UnitData,\n  transport: Transport\n): PopupMenuAction[] => {\n  let actions: UnitAction[] = [];\n\n  if (tile === unit.tile) {\n    actions = unit.actions;\n  }\n\n  const [neighbouringTileDetails] = Object.entries(\n    unit.actionsForNeighbours\n  ).filter(([, actions]) => {\n    const [action] = actions;\n\n    if (!action) {\n      return false;\n    }\n\n    return action.to === tile;\n  });\n\n  const [, neighbouringTileActions] = neighbouringTileDetails ?? [];\n\n  if (neighbouringTileActions) {\n    actions = neighbouringTileActions;\n  }\n\n  // TODO: when GoTo is a thing, set that here\n  // if (actions.length === 0) {\n  //   actions = [];\n  // }\n\n  return actions.map((action) => {\n    const perform = () =>\n      transport.send('action', {\n        name: 'ActiveUnit',\n        id: unit.id,\n        unitAction: action._,\n        target: action.to.id,\n      });\n\n    if (['SneakAttack', 'SneakCaptureCity'].includes(action._)) {\n      return {\n        label: t(`Action.${action._}.name`, {\n          defaultValue: action._,\n          ns: 'unit',\n        }),\n        action: () =>\n          new ConfirmationWindow(\n            t('SneakAttack.title'),\n            t('SneakAttack.body', {\n              nation: t(\n                `${(action as SneakAttack).enemy.civilization._}.nation`,\n                {\n                  defaultValue: (action as SneakAttack).enemy.civilization._,\n                  ns: 'civilization',\n                }\n              ),\n            }),\n            () => perform()\n          ),\n      };\n    }\n\n    return {\n      label: t(`Action.${action._}.name`, {\n        defaultValue: action._,\n        ns: 'unit',\n      }),\n      action: () => perform(),\n    };\n  });\n};\n\n// TODO: This won't work as a private property of UnitActionMenu... Why?\nlet bodyListener: (event: PointerEvent) => void = () => {};\n\nexport class UnitActionMenu extends PopupMenu {\n  constructor(\n    launcher: any,\n    centerX: number,\n    centerY: number,\n    unit: UnitData,\n    tile: Tile,\n    transport: Transport\n  ) {\n    super(launcher, centerX, centerY, buildActions(tile, unit, transport), {\n      align: 'center',\n    });\n\n    this.addClass('unit-actions');\n  }\n\n  build() {\n    bodyListener = (event: PointerEvent) => {\n      const target = document.elementFromPoint(event.pageX, event.pageY);\n\n      if (!target?.matches('.popup-menu button')) {\n        return;\n      }\n\n      event.preventDefault();\n\n      target.dispatchEvent(new PointerEvent('pointerup'));\n    };\n\n    on(document.body, 'pointerup', bodyListener);\n\n    super.build();\n  }\n\n  remove() {\n    super.remove();\n\n    off(document.body, 'pointerup', bodyListener);\n  }\n}\n\nexport default UnitActionMenu;\n", "import { Tile, Unit } from '../types';\nimport City from './City';\nimport UnitSelectionWindow from './UnitSelectionWindow';\nimport Portal from './Portal';\nimport UnitActionMenu from './UnitActionMenu';\nimport { on } from '@dom111/element';\n\nexport class GamePortal extends Portal {\n  #activeUnit: Unit | null = null;\n  #showActionMenuTimeout: number | null = null;\n\n  protected bindEvents(): void {\n    on(this.canvas(), 'pointerup', (event) => {\n      const realTarget = document.elementFromPoint(event.pageX, event.pageY);\n\n      if (realTarget?.matches('.unit-actions *')) {\n        return;\n      }\n\n      this.clearTimeout();\n\n      const tile = this.tileFromOffsets(event.offsetX, event.offsetY),\n        playerTileUnits = tile.units.filter(\n          (unit: Unit) => unit.player.id === this.playerId()\n        );\n\n      if (tile.city && tile.city.player.id === this.playerId()) {\n        new City(tile.city, this, this.transport());\n      } else if (playerTileUnits.length) {\n        new UnitSelectionWindow(\n          playerTileUnits,\n          this.transport(),\n          (unit: Unit) => this.emit('activate-unit', unit)\n        );\n\n        return;\n      }\n\n      this.setCenter(tile.x, tile.y);\n    });\n\n    const showActionMenu = (tile: Tile, x: number, y: number) => {\n      this.clearTimeout();\n\n      if (this.#activeUnit === null) {\n        return;\n      }\n\n      this.#showActionMenuTimeout = window.setTimeout(\n        () =>\n          new UnitActionMenu(\n            this,\n            x,\n            y,\n            this.#activeUnit as Unit,\n            tile,\n            this.transport()\n          ),\n        350\n      );\n    };\n\n    // Prevent dragging address bar down by accident\n    on(this.canvas(), 'touchstart', (event) => event.preventDefault());\n\n    on(this.canvas(), 'pointerdown', (event) => {\n      event.preventDefault();\n\n      showActionMenu(\n        this.tileFromOffsets(event.offsetX, event.offsetY),\n        event.x,\n        event.y\n      );\n    });\n  }\n\n  private clearTimeout() {\n    if (this.#showActionMenuTimeout === null) {\n      return;\n    }\n\n    window.clearTimeout(this.#showActionMenuTimeout);\n\n    this.#showActionMenuTimeout = null;\n  }\n\n  setActiveUnit(unit: Unit | null = null) {\n    this.#activeUnit = unit;\n  }\n\n  private tileFromOffsets(offsetX: number, offsetY: number): Tile {\n    const centerTile = this.center(),\n      canvasCenterOffset = {\n        x: Math.floor(this.canvas().width / 2 - this.tileSize() / 2),\n        y: Math.floor(this.canvas().height / 2 - this.tileSize() / 2),\n      },\n      x =\n        centerTile.x +\n        Math.trunc(\n          ((offsetX - canvasCenterOffset.x) / this.tileSize() +\n            this.world().width()) %\n            this.world().width()\n        ),\n      y =\n        centerTile.y +\n        Math.trunc(\n          ((offsetY - canvasCenterOffset.y) / this.tileSize() +\n            this.world().height()) %\n            this.world().height()\n        );\n\n    return this.world().get(x, y);\n  }\n}\n\nexport default GamePortal;\n", "import TerrainAbstract from './TerrainAbstract';\nimport { Tile } from '../../types';\n\nexport class Terrain extends TerrainAbstract {\n  renderTile(tile: Tile): void {\n    super.renderTile(tile);\n\n    if (tile.terrain._ === 'Unknown') {\n      return;\n    }\n\n    const { x, y } = tile;\n\n    if (tile.goodyHut !== null) {\n      this.drawImage('map/hut', x, y);\n    }\n  }\n}\n\nexport default Terrain;\n", "export interface IIntervalHandler {\n  check(): void;\n  clear(): void;\n  off(handler: () => void): void;\n  on(handler: () => void): void;\n  pause(): void;\n  isPaused(): boolean;\n  resume(): void;\n}\n\nexport class IntervalHandler implements IIntervalHandler {\n  #paused: boolean = false;\n  #stack: (() => void)[] = [];\n\n  constructor(tick: number = 500) {\n    setInterval(() => this.check(), tick);\n  }\n\n  check(): void {\n    if (this.#paused) {\n      return;\n    }\n\n    this.#stack.forEach((item) => item());\n  }\n\n  clear(): void {\n    this.#stack = [];\n  }\n\n  off(handler: () => void): void {\n    this.#stack = this.#stack.filter((item) => item !== handler);\n  }\n\n  on(handler: () => void): void {\n    this.#stack.push(handler);\n  }\n\n  pause(): void {\n    this.#paused = true;\n  }\n\n  isPaused(): boolean {\n    return this.#paused;\n  }\n\n  resume(): void {\n    this.#paused = false;\n  }\n}\n\nexport default IntervalHandler;\n", "import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\n// eslint-disable-next-line no-control-regex\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\nvar serializeCookie = function serializeCookie(name, val, options) {\n  var opt = options || {};\n  opt.path = opt.path || '/';\n  var value = encodeURIComponent(val);\n  var str = \"\".concat(name, \"=\").concat(value);\n  if (opt.maxAge > 0) {\n    var maxAge = opt.maxAge - 0;\n    if (Number.isNaN(maxAge)) throw new Error('maxAge should be a Number');\n    str += \"; Max-Age=\".concat(Math.floor(maxAge));\n  }\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n    str += \"; Domain=\".concat(opt.domain);\n  }\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n    str += \"; Path=\".concat(opt.path);\n  }\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n    str += \"; Expires=\".concat(opt.expires.toUTCString());\n  }\n  if (opt.httpOnly) str += '; HttpOnly';\n  if (opt.secure) str += '; Secure';\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n  return str;\n};\nvar cookie = {\n  create: function create(name, value, minutes, domain) {\n    var cookieOptions = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      path: '/',\n      sameSite: 'strict'\n    };\n    if (minutes) {\n      cookieOptions.expires = new Date();\n      cookieOptions.expires.setTime(cookieOptions.expires.getTime() + minutes * 60 * 1000);\n    }\n    if (domain) cookieOptions.domain = domain;\n    document.cookie = serializeCookie(name, encodeURIComponent(value), cookieOptions);\n  },\n  read: function read(name) {\n    var nameEQ = \"\".concat(name, \"=\");\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1, c.length);\n      }\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  },\n  remove: function remove(name) {\n    this.create(name, '', -1);\n  }\n};\nvar cookie$1 = {\n  name: 'cookie',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      var c = cookie.read(options.lookupCookie);\n      if (c) found = c;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain, options.cookieOptions);\n    }\n  }\n};\n\nvar querystring = {\n  name: 'querystring',\n  lookup: function lookup(options) {\n    var found;\n    if (typeof window !== 'undefined') {\n      var search = window.location.search;\n      if (!window.location.search && window.location.hash && window.location.hash.indexOf('?') > -1) {\n        search = window.location.hash.substring(window.location.hash.indexOf('?'));\n      }\n      var query = search.substring(1);\n      var params = query.split('&');\n      for (var i = 0; i < params.length; i++) {\n        var pos = params[i].indexOf('=');\n        if (pos > 0) {\n          var key = params[i].substring(0, pos);\n          if (key === options.lookupQuerystring) {\n            found = params[i].substring(pos + 1);\n          }\n        }\n      }\n    }\n    return found;\n  }\n};\n\nvar hasLocalStorageSupport = null;\nvar localStorageAvailable = function localStorageAvailable() {\n  if (hasLocalStorageSupport !== null) return hasLocalStorageSupport;\n  try {\n    hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;\n    var testKey = 'i18next.translate.boo';\n    window.localStorage.setItem(testKey, 'foo');\n    window.localStorage.removeItem(testKey);\n  } catch (e) {\n    hasLocalStorageSupport = false;\n  }\n  return hasLocalStorageSupport;\n};\nvar localStorage = {\n  name: 'localStorage',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupLocalStorage && localStorageAvailable()) {\n      var lng = window.localStorage.getItem(options.lookupLocalStorage);\n      if (lng) found = lng;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupLocalStorage && localStorageAvailable()) {\n      window.localStorage.setItem(options.lookupLocalStorage, lng);\n    }\n  }\n};\n\nvar hasSessionStorageSupport = null;\nvar sessionStorageAvailable = function sessionStorageAvailable() {\n  if (hasSessionStorageSupport !== null) return hasSessionStorageSupport;\n  try {\n    hasSessionStorageSupport = window !== 'undefined' && window.sessionStorage !== null;\n    var testKey = 'i18next.translate.boo';\n    window.sessionStorage.setItem(testKey, 'foo');\n    window.sessionStorage.removeItem(testKey);\n  } catch (e) {\n    hasSessionStorageSupport = false;\n  }\n  return hasSessionStorageSupport;\n};\nvar sessionStorage = {\n  name: 'sessionStorage',\n  lookup: function lookup(options) {\n    var found;\n    if (options.lookupSessionStorage && sessionStorageAvailable()) {\n      var lng = window.sessionStorage.getItem(options.lookupSessionStorage);\n      if (lng) found = lng;\n    }\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupSessionStorage && sessionStorageAvailable()) {\n      window.sessionStorage.setItem(options.lookupSessionStorage, lng);\n    }\n  }\n};\n\nvar navigator$1 = {\n  name: 'navigator',\n  lookup: function lookup(options) {\n    var found = [];\n    if (typeof navigator !== 'undefined') {\n      if (navigator.languages) {\n        // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (var i = 0; i < navigator.languages.length; i++) {\n          found.push(navigator.languages[i]);\n        }\n      }\n      if (navigator.userLanguage) {\n        found.push(navigator.userLanguage);\n      }\n      if (navigator.language) {\n        found.push(navigator.language);\n      }\n    }\n    return found.length > 0 ? found : undefined;\n  }\n};\n\nvar htmlTag = {\n  name: 'htmlTag',\n  lookup: function lookup(options) {\n    var found;\n    var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);\n    if (htmlTag && typeof htmlTag.getAttribute === 'function') {\n      found = htmlTag.getAttribute('lang');\n    }\n    return found;\n  }\n};\n\nvar path = {\n  name: 'path',\n  lookup: function lookup(options) {\n    var found;\n    if (typeof window !== 'undefined') {\n      var language = window.location.pathname.match(/\\/([a-zA-Z-]*)/g);\n      if (language instanceof Array) {\n        if (typeof options.lookupFromPathIndex === 'number') {\n          if (typeof language[options.lookupFromPathIndex] !== 'string') {\n            return undefined;\n          }\n          found = language[options.lookupFromPathIndex].replace('/', '');\n        } else {\n          found = language[0].replace('/', '');\n        }\n      }\n    }\n    return found;\n  }\n};\n\nvar subdomain = {\n  name: 'subdomain',\n  lookup: function lookup(options) {\n    // If given get the subdomain index else 1\n    var lookupFromSubdomainIndex = typeof options.lookupFromSubdomainIndex === 'number' ? options.lookupFromSubdomainIndex + 1 : 1;\n    // get all matches if window.location. is existing\n    // first item of match is the match itself and the second is the first group macht which sould be the first subdomain match\n    // is the hostname no public domain get the or option of localhost\n    var language = typeof window !== 'undefined' && window.location && window.location.hostname && window.location.hostname.match(/^(\\w{2,5})\\.(([a-z0-9-]{1,63}\\.[a-z]{2,6})|localhost)/i);\n\n    // if there is no match (null) return undefined\n    if (!language) return undefined;\n    // return the given group match\n    return language[lookupFromSubdomainIndex];\n  }\n};\n\nfunction getDefaults() {\n  return {\n    order: ['querystring', 'cookie', 'localStorage', 'sessionStorage', 'navigator', 'htmlTag'],\n    lookupQuerystring: 'lng',\n    lookupCookie: 'i18next',\n    lookupLocalStorage: 'i18nextLng',\n    lookupSessionStorage: 'i18nextLng',\n    // cache user language\n    caches: ['localStorage'],\n    excludeCacheFor: ['cimode']\n    // cookieMinutes: 10,\n    // cookieDomain: 'myDomain'\n  };\n}\nvar Browser = /*#__PURE__*/function () {\n  function Browser(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Browser);\n    this.type = 'languageDetector';\n    this.detectors = {};\n    this.init(services, options);\n  }\n  _createClass(Browser, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n\n      // backwards compatibility\n      if (this.options.lookupFromUrlIndex) this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex;\n      this.i18nOptions = i18nOptions;\n      this.addDetector(cookie$1);\n      this.addDetector(querystring);\n      this.addDetector(localStorage);\n      this.addDetector(sessionStorage);\n      this.addDetector(navigator$1);\n      this.addDetector(htmlTag);\n      this.addDetector(path);\n      this.addDetector(subdomain);\n    }\n  }, {\n    key: \"addDetector\",\n    value: function addDetector(detector) {\n      this.detectors[detector.name] = detector;\n    }\n  }, {\n    key: \"detect\",\n    value: function detect(detectionOrder) {\n      var _this = this;\n      if (!detectionOrder) detectionOrder = this.options.order;\n      var detected = [];\n      detectionOrder.forEach(function (detectorName) {\n        if (_this.detectors[detectorName]) {\n          var lookup = _this.detectors[detectorName].lookup(_this.options);\n          if (lookup && typeof lookup === 'string') lookup = [lookup];\n          if (lookup) detected = detected.concat(lookup);\n        }\n      });\n      if (this.services.languageUtils.getBestMatchFromCodes) return detected; // new i18next v19.5.0\n      return detected.length > 0 ? detected[0] : null; // a little backward compatibility\n    }\n  }, {\n    key: \"cacheUserLanguage\",\n    value: function cacheUserLanguage(lng, caches) {\n      var _this2 = this;\n      if (!caches) caches = this.options.caches;\n      if (!caches) return;\n      if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;\n      caches.forEach(function (cacheName) {\n        if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);\n      });\n    }\n  }]);\n  return Browser;\n}();\nBrowser.type = 'languageDetector';\n\nexport { Browser as default };\n", "import { Element, s } from '@dom111/element';\nimport CustomiseWorldWindow from './CustomiseWorldWindow';\nimport EarthWindow from './EarthWindow';\nimport ImportAssetsWindow from './ImportAssetsWindow';\nimport NewGameWindow from './NewGameWindow';\nimport ReleaseWindow from './ReleaseWindow';\nimport Transport from '../Transport';\nimport { assetStore } from '../AssetStore';\nimport { h } from '../lib/html';\nimport { mappedKeyFromEvent } from '../lib/mappedKey';\nimport { version } from '../../../../build.json';\nimport { t } from 'i18next';\n\nexport class MainMenu extends Element {\n  #transport: Transport;\n\n  constructor(element: HTMLElement, transport: Transport) {\n    super(element);\n\n    this.#transport = transport;\n\n    this.build();\n\n    this.addClass('active');\n  }\n\n  async build(showQuit = false) {\n    const hasAssets = await assetStore.hasAllAssets();\n\n    if (!hasAssets) {\n      console.log('Missing assets:');\n      console.log(await assetStore.missingAssets());\n    }\n\n    this.append(\n      h(\n        s(\n          '<nav></nav>',\n          h(\n            s(\n              `<button autofocus${hasAssets ? '' : ' hidden'}>${t(\n                'MainMenu.new-game'\n              )}</button>`\n            ),\n            {\n              click: () => {\n                new NewGameWindow(this.#transport, () => this.remove());\n              },\n            }\n          ),\n          h(\n            s(\n              `<button${hasAssets ? '' : ' hidden'}>${t(\n                'MainMenu.earth'\n              )}</button>`\n            ),\n            {\n              click: () =>\n                new EarthWindow(this.#transport, () => this.remove()),\n            }\n          ),\n          h(\n            s(\n              `<button${hasAssets ? '' : ' hidden'}>${t(\n                'MainMenu.customize-world'\n              )}</button>`\n            ),\n            {\n              click: async () =>\n                new CustomiseWorldWindow(this.#transport, () => this.remove()),\n            }\n          ),\n          h(s(`<button>Import Assets</button>`), {\n            click: () => new ImportAssetsWindow(),\n          }),\n          h(\n            s(\n              `<button${showQuit ? '' : ' hidden'}>${t(\n                'MainMenu.quit'\n              )}</button>`\n            ),\n            {\n              click: () => {\n                this.remove();\n\n                this.#transport.send('quit', null);\n              },\n            }\n          )\n        ),\n        {\n          keydown(event: KeyboardEvent) {\n            const currentTarget = document.activeElement,\n              key = mappedKeyFromEvent(event);\n\n            if (\n              currentTarget === null ||\n              !currentTarget.matches('#mainmenu nav button')\n            ) {\n              return;\n            }\n\n            if (key === 'ArrowDown' && currentTarget.nextElementSibling) {\n              (currentTarget.nextElementSibling as HTMLElement).focus();\n            }\n\n            if (key === 'ArrowUp' && currentTarget.previousElementSibling) {\n              (currentTarget.previousElementSibling as HTMLElement).focus();\n            }\n          },\n        }\n      ),\n      s(\n        `<footer></footer>`,\n        h(\n          s(\n            `<a href=\"#releases\">${t('MainMenu.version', {\n              version,\n            })}</a>`\n          ),\n          {\n            click(event) {\n              event.preventDefault();\n\n              new ReleaseWindow();\n            },\n          }\n        )\n      )\n    );\n  }\n\n  remove(): void {\n    this.queryAll('button').forEach((button) =>\n      button.setAttribute('disabled', '')\n    );\n\n    this.removeClass('active');\n\n    setTimeout((): void => super.remove(), 2000);\n  }\n}\n\nexport default MainMenu;\n", "export interface RequestInterface<Args extends any[], Return extends any> {\n  args(): Args;\n  channel(): string;\n}\n\nexport type RequestArgs<RequestType extends Request> =\n  RequestType extends Request<infer Args> ? Args : never;\nexport type RequestReturn<RequestType extends Request> =\n  RequestType extends Request<any[], infer Return> ? Return : never;\n\nexport class Request<Args extends any[] = any[], Return extends any = any>\n  implements RequestInterface<Args, Return>\n{\n  #args: Args;\n  #channel: string;\n\n  constructor(channel: string, ...args: Args) {\n    this.#args = args;\n    this.#channel = channel;\n  }\n\n  args(): Args {\n    return this.#args;\n  }\n\n  channel(): string {\n    return this.#channel;\n  }\n}\n\nexport default Request;\n", "import Request from '../Request';\n\nexport class Options<Key extends string> extends Request<\n  [Key[]],\n  Record<Key, any>\n> {\n  constructor(args: Key[]) {\n    super('getOptions', args);\n  }\n}\n\nexport default Options;\n", "import Options from '../../Engine/Requests/Options';\nimport Request from '../../Engine/Request';\nimport Transport from '../Transport';\nimport Window from './Window';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\ntype FinishedHandler = () => void;\n\nexport class CustomiseWorldWindow extends Window {\n  #onFinished?: FinishedHandler;\n  #transport: Transport;\n\n  constructor(transport: Transport, onFinished?: FinishedHandler) {\n    super(t('CustomizeWorld.title'), s('<div class=\"customise-world\"></div>'));\n\n    this.#onFinished = onFinished;\n    this.#transport = transport;\n\n    this.init();\n  }\n\n  build(): void {\n    super.build();\n\n    this.init();\n  }\n\n  async init(): Promise<void> {\n    const existingValues = await this.#transport.request(\n        new Options([\n          'players',\n          'height',\n          'width',\n          'landCoverage',\n          'landSize',\n          'maxIterations',\n        ])\n      ),\n      playersInput = s<HTMLInputElement>(\n        `<input name=\"players\" type=\"number\" value=\"${\n          existingValues.players ?? 7\n        }\" step=\"1\" min=\"1\" max=\"20\">`\n      ),\n      heightInput = s<HTMLInputElement>(\n        `<input name=\"height\" type=\"number\" value=\"${\n          existingValues.height ?? 60\n        }\" step=\"1\" min=\"1\">`\n      ),\n      widthInput = s<HTMLInputElement>(\n        `<input name=\"width\" type=\"number\" value=\"${\n          existingValues.width ?? 80\n        }\" step=\"1\" min=\"1\">`\n      ),\n      landCoverageInput = s<HTMLInputElement>(\n        `<input name=\"landCoverage\" type=\"number\" value=\"${\n          existingValues.landCoverage ?? 0.4\n        }\" step=\"0.01\" min=\"0\">`\n      ),\n      landSizeInput = s<HTMLInputElement>(\n        `<input name=\"landSize\" type=\"number\" value=\"${\n          existingValues.landSize ?? 0.2\n        }\" step=\"0.01\" min=\"0\">`\n      ),\n      maxIterationsInput = s<HTMLInputElement>(\n        `<input name=\"maxIterations\" type=\"number\" value=\"${\n          existingValues.maxIterations ?? 20\n        }\" step=\"1\" min=\"1\">`\n      ),\n      submit = async () => {\n        this.close();\n\n        await this.#transport.request(\n          new Request('setOptions', {\n            players: playersInput.value,\n            height: heightInput.value,\n            width: widthInput.value,\n            landCoverage: landCoverageInput.value,\n            landSize: landSizeInput.value,\n            maxIterations: maxIterationsInput.value,\n          })\n        );\n\n        this.#transport.send('start', null);\n\n        if (this.#onFinished) {\n          this.#onFinished();\n        }\n      };\n\n    this.update(\n      s(\n        '<div class=\"customise-world\"></div>',\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.players'\n          )}</label></div>`,\n          playersInput\n        ),\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.height'\n          )}</label></div>`,\n          heightInput\n        ),\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.width'\n          )}</label></div>`,\n          widthInput\n        ),\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.land-coverage'\n          )}</label></div>`,\n          landCoverageInput\n        ),\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.land-size'\n          )}</label></div>`,\n          landSizeInput\n        ),\n        s(\n          `<div class=\"option\"><label>${t(\n            'CustomizeWorld.max-iterations'\n          )}</label></div>`,\n          maxIterationsInput\n        ),\n        h(s(`<button>${t('CustomizeWorld.build')}</button>`), {\n          click: () => submit(),\n        })\n      )\n    );\n\n    this.on('keydown', (event) => {\n      if (event.key === 'Enter') {\n        submit();\n      }\n    });\n  }\n}\n\nexport default CustomiseWorldWindow;\n", "import {\n  SelectionWindow,\n  SelectionWindowOption,\n  SelectionWindowOptions,\n} from './SelectionWindow';\nimport { t } from 'i18next';\n\ndeclare global {\n  interface GlobalEventHandlersEventMap {\n    selection: CustomEvent<string>;\n  }\n}\n\nexport class MandatorySelection extends SelectionWindow {\n  constructor(\n    title: string,\n    optionList: SelectionWindowOption[],\n    onChoose: (selection: string) => void,\n    body: string | Node | null = t('MandatorySelection.default-body'),\n    options: SelectionWindowOptions = {\n      canClose: false,\n    }\n  ) {\n    super(title, optionList, onChoose, body, {\n      ...options,\n      displayAll: true,\n      modal: true,\n    });\n  }\n\n  display(): Promise<string> {\n    return new Promise<string>((resolve) => {\n      this.on('selection', ({ detail }) => resolve(detail));\n\n      super.display();\n    });\n  }\n}\n\nexport default MandatorySelection;\n", "import MandatorySelection from './MandatorySelection';\nimport Transport from '../Transport';\nimport Request from '../../Engine/Request';\nimport { t } from 'i18next';\n\nexport type FinishedHandler = () => void;\n\nexport class NewGameWindow extends MandatorySelection {\n  constructor(transport: Transport, onFinished?: FinishedHandler) {\n    super(\n      t('NewGameWindow.number-of-players'),\n      [7, 6, 5, 4, 3].map((value) => ({\n        label: t('NewGameWindow.civilizations', {\n          count: value,\n        }) as string,\n        value,\n      })),\n      async (selection) => {\n        this.close();\n\n        await transport.request(\n          new Request('setOptions', {\n            width: 80,\n            height: 60,\n            players: parseInt(selection, 10),\n          })\n        );\n\n        if (onFinished) {\n          await onFinished();\n        }\n\n        transport.send('start', null);\n      },\n      undefined,\n      {\n        modal: true,\n      }\n    );\n  }\n}\n\nexport default NewGameWindow;\n", "import { FinishedHandler, NewGameWindow } from './NewGameWindow';\nimport Transport from '../Transport';\nimport Request from '../../Engine/Request';\n\nexport class EarthWindow extends NewGameWindow {\n  constructor(transport: Transport, onFinished?: FinishedHandler) {\n    super(transport, async () => {\n      if (onFinished) {\n        await onFinished();\n      }\n\n      await transport.request(\n        new Request('setOptions', {\n          width: 80,\n          height: 50,\n          earth: true,\n        })\n      );\n    });\n  }\n}\n\nexport default EarthWindow;\n", "export class BinFile {\n  private blob: string | null = null;\n  private ptr: number = -1;\n\n  fromString(content: string, callback: (...args: any[]) => any) {\n    this.blob = content;\n    this.ptr = 0;\n    this.decode(callback);\n  }\n\n  getUByte() {\n    return (this.blob as string).charCodeAt(this.ptr++);\n  }\n\n  getUShort() {\n    const b1 = this.getUByte(),\n      b2 = this.getUByte();\n\n    return (b2 << 8) + b1;\n  }\n\n  getShort() {\n    return ((this.getUShort() + 0x8000) % 0x10000) - 0x8000;\n  }\n\n  getString(length: number) {\n    const start = this.ptr;\n    this.ptr += length;\n\n    return (this.blob as string).substr(start, length);\n  }\n\n  decode(callback: (...args: any[]) => any): void {\n    if (this.blob === null) {\n      console.warn('file has not been loaded!');\n\n      return;\n    }\n\n    console.warn('The decode function should be overwritten');\n    if (callback) callback();\n  }\n}\n\nexport default BinFile;\n", "export class LZWDictionary {\n  private dicTable: number[][] | null[] = [];\n  private dicSize: number;\n  private curPos: number;\n\n  constructor(maxBits: number) {\n    this.dicTable = [];\n    this.dicSize = 0x1 << maxBits;\n\n    for (let i = 0; i < this.dicSize; i++) {\n      if (i < 256) {\n        this.dicTable[i] = [i];\n      } else {\n        this.dicTable[i] = null;\n      }\n    }\n\n    this.curPos = 0x0101;\n  }\n\n  getEntry(pos: number): number[] | null {\n    return pos < this.curPos ? this.dicTable[pos] : null;\n  }\n\n  isFull() {\n    return this.curPos === this.dicTable.length;\n  }\n\n  getCurPos() {\n    return this.curPos;\n  }\n\n  addEntry(entry: number[]) {\n    if (this.curPos < this.dicTable.length) {\n      this.dicTable[this.curPos] = entry;\n      this.curPos++;\n    }\n\n    return this.curPos - 1;\n  }\n}\n\nexport default LZWDictionary;\n", "import LZWDictionary from './LZWDictionary';\n\nexport class LZW {\n  //Extracts a series of integers from the byte array\n  static parseByteStreamToIndexes(\n    binFile: { getUByte: () => number },\n    remainingCodedBytes: number,\n    uByteMode: number\n  ) {\n    const parsedIndexes = []; //ArrayList<Integer> parsedIndexes = new ArrayList<Integer>();\n\n    let usableBits = 0,\n      usableBitCount = 0,\n      indicatorLength = 1 /* to increment with ++; rule is that 8+indicatorLength must be <= uByteMode, otherwise reset */,\n      indicatorFlag = 0x001 /* to increment with <<=1 followed by |= 1 */,\n      nextThreshold = 0x0100 /*256*/ /* to increment with <<=1, or *=2 */,\n      decodedCounter = 0,\n      index = 0;\n\n    while (remainingCodedBytes > 0) {\n      /* get enough coded bits to work with */\n      while (usableBitCount < 8 + indicatorLength) {\n        usableBits |= binFile.getUByte() << usableBitCount;\n        remainingCodedBytes--;\n        usableBitCount += 8;\n      }\n\n      /* decode bytes and indicators */\n      while (usableBitCount >= 8 + indicatorLength) {\n        //Builds out a bit screen that is of size 8 + the number of indicator bits and ors it with current set of usable bits\n        index = usableBits & (((indicatorFlag << 8) & 0xff00) | 0x00ff);\n\n        usableBits >>= 8 + indicatorLength; //Right-shift out the used bits\n        usableBitCount -= 8 + indicatorLength; //Decrement the usableBitCount by the number of bits used\n\n        decodedCounter++; //Keep track of how many things we have decoded to ensure threshold isn't reached\n\n        if (decodedCounter == nextThreshold) {\n          //If threshold is reached...\n          decodedCounter = 0;\n          indicatorLength += 1; // to increment with ++; rule is that 8+indicatorLength must be <= uByteMode, otherwise reset\n          indicatorFlag <<= 1;\n          indicatorFlag |= 1; // left-shift bitmask and add another 1 (e.g. 0001 > 0011 > 0111)\n          nextThreshold <<= 1; //Double the next threshold\n\n          if (8 + indicatorLength > uByteMode) {\n            decodedCounter = 0;\n            indicatorLength = 1;\n            indicatorFlag = 0x001;\n            nextThreshold = 0x0100 /*256*/;\n          }\n        }\n        parsedIndexes.push(index);\n      }\n    }\n\n    return parsedIndexes;\n  }\n\n  //Decodes the integers into byte-level data using a dictionary look-up\n  static decode(inputData: any, dicIndexMaxBits: number) {\n    dicIndexMaxBits = dicIndexMaxBits || 0x0b;\n\n    let codedData = inputData; //stringToNumArray(inputData); //Convert string to an array of numbers\n\n    const decodedData: number[] = [];\n\n    while (codedData.length > 0) {\n      const dic = new LZWDictionary(dicIndexMaxBits),\n        plainData = [codedData[0]];\n\n      let oldCode = codedData[0],\n        buffer = dic.getEntry(oldCode),\n        character = oldCode,\n        newCode;\n\n      let i = 0;\n      while (!dic.isFull() && i++ < codedData.length - 1) {\n        newCode = codedData[i];\n\n        let p: number[] | null = [];\n\n        if (newCode >= dic.getCurPos()) {\n          p = dic.getEntry(oldCode);\n\n          if (p === null) {\n            console.error(\n              `No dictionary entry in LZW special case: oldCode=${oldCode}; newCode=${newCode}; i=${i}; buffer=${buffer}`\n            );\n          }\n\n          p = [...(p ?? []), character]; //create a copy of the array p to not overwrite the dic entry and append character=\n        } else {\n          // Get entry p for coded index codedData[i]\n          p = dic.getEntry(codedData[i]);\n        }\n\n        plainData.push.apply(plainData, p as number[]); //Merge entry p onto the plainData output\n        character = (p as number[])[0]; // Get first char of p\n        dic.addEntry((buffer as number[]).concat(character)); // Add new entry to dictionary as buffer+c\n        oldCode = newCode;\n        buffer = dic.getEntry(oldCode);\n      }\n\n      decodedData.push.apply(decodedData, plainData); //First append plainData to decodedData\n      codedData = codedData.slice(i + 1); //Second truncate codedData to keep only undecoded stuff before continuing the loop\n    }\n\n    return decodedData;\n  }\n\n  //Run-length decodes around special character 0x90\n  static RLEDecode(byteArr: number[]) {\n    const opt = [];\n\n    let lastChr = 0,\n      isFlag = false;\n\n    for (let i = 0; i < byteArr.length; i++) {\n      const chr = byteArr[i];\n\n      if (isFlag) {\n        if (chr == 0x00) {\n          lastChr = 0x90;\n          opt.push(0x90);\n        } else {\n          for (let j = 0; j < chr - 1; j++) {\n            opt.push(lastChr);\n          }\n        }\n        isFlag = false;\n      } else {\n        if (chr == 0x90) {\n          isFlag = true;\n        } else {\n          opt.push(chr);\n          lastChr = chr;\n        }\n      }\n    }\n\n    return opt;\n  }\n}\n\nexport default LZW;\n", "export const lowerNibble = (byte: number): number => byte & 0xf;\n\nexport default lowerNibble;\n", "export const upperNibble = (byte: number): number => (byte & 0xf0) >> 4;\n\nexport default upperNibble;\n", "import BinFile from './BinFile';\nimport LZW from './LZW';\nimport lowerNibble from './lib/lowerNibble';\nimport upperNibble from './lib/upperNibble';\n\ndeclare type RGBA = {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n};\n\nexport class PicImage extends BinFile {\n  private palette: RGBA[] = [];\n  private palette16: RGBA[] = [\n    { r: 0xff, g: 0xff, b: 0xff, a: 0x00 }, // 0 - transparent\n    { r: 0xaa, g: 0x00, b: 0x00, a: 0xff }, // 1\n    { r: 0x00, g: 0xaa, b: 0x00, a: 0xff }, // 2\n    { r: 0xaa, g: 0xaa, b: 0x00, a: 0xff }, // 3\n    { r: 0x00, g: 0x00, b: 0xaa, a: 0xff }, // 4\n    { r: 0x00, g: 0x00, b: 0x00, a: 0xff }, // 5\n    { r: 0x00, g: 0x55, b: 0xaa, a: 0xff }, // 6\n    { r: 0xaa, g: 0xaa, b: 0xaa, a: 0xff }, // 7\n    { r: 0x55, g: 0x55, b: 0x55, a: 0xff }, // 8\n    { r: 0xff, g: 0x55, b: 0x55, a: 0xff }, // 9\n    { r: 0x55, g: 0xff, b: 0x55, a: 0xff }, // A\n    { r: 0xff, g: 0xff, b: 0x55, a: 0xff }, // B\n    { r: 0x55, g: 0x55, b: 0xff, a: 0xff }, // C\n    { r: 0xff, g: 0x55, b: 0xff, a: 0xff }, // D\n    { r: 0x55, g: 0xff, b: 0xff, a: 0xff }, // E\n    { r: 0xff, g: 0xff, b: 0xff, a: 0xff }, // F\n  ];\n\n  private imageData: null | number[] = null;\n  private imageHeight = 0;\n  private imageWidth = 0;\n  private byteMode = 0xb;\n\n  decode(callback: (...args: any[]) => any): void {\n    let id = this.getString(2),\n      length = this.getShort();\n\n    if (id == 'M0') {\n      //Second part could be the VGA Palette information\n      this.getPaletteData();\n      id = this.getString(2);\n      length = this.getShort();\n    } else {\n      //If no palette information, let's create a random one\n      console.log('Creating a random color palette...');\n      for (let i = 0; i < 256; i++) {\n        if (i < 16) {\n          this.palette.push(this.palette16[i]);\n        } else {\n          this.palette.push({\n            r: Math.floor(Math.random() * 256),\n            g: Math.floor(Math.random() * 256),\n            b: Math.floor(Math.random() * 256),\n            a: 0xff,\n          });\n        }\n      }\n    }\n\n    if (id == 'X0') {\n      //Final part is image data, in this case VGA\n      this.getX0ImageData(length);\n    } else if (id == 'X1') {\n      //Final part is image data, in this case EGA\n      this.getX1ImageData(length);\n    } else {\n      //Data chunk is of an unknown type\n      console.error('\"' + id + '\" is an unknown chunk type');\n    }\n\n    if (callback) callback();\n  }\n\n  getPaletteData() {\n    const firstIndex = this.getUByte(),\n      lastIndex = this.getUByte(),\n      paletteLength = lastIndex - firstIndex + 1;\n\n    let seenBlack = false;\n\n    for (let i = 0; i < paletteLength; i++) {\n      const colour: RGBA = {\n        r: this.getUByte() * 4, // Each color is between 0 and 64, so to make it use entire\n        g: this.getUByte() * 4, // color space, multiply by 4. The higher-order bits may be used\n        b: this.getUByte() * 4, // for transparency flags, but that's unclear for now...\n        a: 0xff,\n      };\n\n      this.palette.push(colour);\n\n      if (colour.r === colour.g && colour.g === colour.b && colour.r === 0) {\n        // The first black is \"real\" black, the others are (or at least can be) transparency\n        if (!seenBlack) {\n          colour.a = 0;\n        }\n\n        seenBlack = true;\n      }\n    }\n\n    this.palette.push({\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n    });\n  }\n\n  getX0ImageData(length: number) {\n    this.imageWidth = this.getShort();\n    this.imageHeight = this.getShort();\n    this.byteMode = this.getUByte();\n\n    //Step #1: parse the remainder of the chunk into a set of integers with flags\n    const decompSourceData = LZW.parseByteStreamToIndexes(\n        this,\n        length - 5,\n        this.byteMode\n      ),\n      //Step #2: decode the data using the LZW algorithm\n      decompData = LZW.decode(decompSourceData, this.byteMode);\n\n    //Step #3: decode the final image data using Run-length decoding\n    this.imageData = LZW.RLEDecode(decompData);\n  }\n\n  getX1ImageData(length: number) {\n    this.getX0ImageData(length); //This works the same as x0 data, but each byte includes an upper and lower nibble entry with max 16\n\n    //Loop through each entry and separate into upper and lower nibbles\n    const oldImageData = this.imageData as number[];\n\n    this.imageData = [];\n\n    for (let i = 0; i < oldImageData.length; i++) {\n      this.imageData.push(lowerNibble(oldImageData[i]));\n      this.imageData.push(upperNibble(oldImageData[i]));\n    }\n\n    //set the palette to the hard-coded 16-color palette\n    this.palette = this.palette16;\n  }\n\n  draw(\n    ctx: CanvasRenderingContext2D,\n    destinationX: number = 0,\n    destinationY: number = 0\n  ) {\n    const canvasData = ctx.getImageData(\n      0,\n      0,\n      this.imageWidth,\n      this.imageHeight\n    );\n\n    let index = 0;\n\n    for (let y = 0; y < this.imageHeight; y++) {\n      for (let x = 0; x < this.imageWidth; x++) {\n        const colorIndex = (this.imageData as number[])[index],\n          canvasIndex = (x + y * this.imageWidth) * 4;\n\n        canvasData.data[canvasIndex] = this.palette[colorIndex].r;\n        canvasData.data[canvasIndex + 1] = this.palette[colorIndex].g;\n        canvasData.data[canvasIndex + 2] = this.palette[colorIndex].b;\n        canvasData.data[canvasIndex + 3] = this.palette[colorIndex].a;\n        index++;\n      }\n    }\n\n    ctx.putImageData(canvasData, destinationX, destinationY);\n  }\n\n  getPixel(x: number, y: number): number {\n    if (!this.imageData) {\n      return 0;\n    }\n\n    return this.imageData[x + this.imageWidth * y];\n  }\n}\n\nexport default PicImage;\n", "import { Canvas, CanvasRenderingContext2D } from 'canvas';\nimport PicImage from './PicImage';\n\ntype DefinitionData = {\n  height?: number;\n  width?: number;\n  x?: number;\n  y?: number;\n};\n\ntype DefinitionChild = DefinitionData & { name: string };\n\ntype DefinitionParent = DefinitionData & {\n  contents: DefinitionChild[];\n};\n\ntype Definition = {\n  [filename: string]: DefinitionParent[];\n};\n\ntype DefaultData = {\n  height: number;\n  width: number;\n  clear: {\n    r: number;\n    g: number;\n    b: number;\n  };\n};\n\nexport type ExtractData = {\n  defaults: DefaultData;\n  files: {\n    [filename: string]: Definition;\n  };\n};\n\ntype ImageMap = {\n  name: string;\n  uri: string;\n};\n\nexport const extractSprites = (\n  content: string,\n  extractData: Definition,\n  defaults: DefaultData,\n  canvasProvider: (width: number, height: number) => Canvas | HTMLCanvasElement,\n  logger: (message: string) => void = (message) => console.log(message)\n): ImageMap[] => {\n  const canvas = canvasProvider(320, 200),\n    image = new PicImage(),\n    result: ImageMap[] = [];\n\n  image.fromString(content, () => {\n    image.draw(\n      canvas.getContext('2d', {\n        // @ts-ignore\n        willReadFrequently: true,\n      }) as CanvasRenderingContext2D\n    );\n\n    Object.entries(extractData).forEach(([path, definitionParents]) =>\n      definitionParents.forEach((definition) =>\n        definition.contents.forEach((content) => {\n          const object: { [key: string]: any } = {\n              ...defaults,\n              ...definition,\n              ...content,\n            },\n            filename = `./assets/${path + object.name}.png`,\n            contentCanvas = canvasProvider(object.width, object.height),\n            context = contentCanvas.getContext('2d', {\n              // @ts-ignore\n              willReadFrequently: true,\n            }) as CanvasRenderingContext2D;\n\n          context.clearRect(0, 0, object.width, object.height);\n          context.drawImage(\n            canvas,\n            object.x,\n            object.y,\n            object.width,\n            object.height,\n            0,\n            0,\n            object.width,\n            object.height\n          );\n\n          for (let x = 0; x < canvas.width; x++) {\n            for (let y = 0; y < canvas.height; y++) {\n              let imageData = context.getImageData(x, y, 1, 1).data;\n\n              if (\n                imageData[0] == object.clear.r &&\n                imageData[1] == object.clear.g &&\n                imageData[2] == object.clear.b\n              ) {\n                context.clearRect(x, y, 1, 1);\n              }\n            }\n          }\n\n          logger(`Processing ${filename}...`);\n          result.push({\n            name: filename,\n            uri: contentCanvas.toDataURL('image/png'),\n          });\n        })\n      )\n    );\n  });\n\n  return result;\n};\n\nexport default extractSprites;\n", "import {\n  ExtractData,\n  extractSprites,\n} from '@civ-clone/civ1-asset-extractor/extractSprites';\nimport Window from './Window';\nimport { assetStore } from '../AssetStore';\nimport extractData from '@civ-clone/civ1-asset-extractor/extract-data.json';\nimport { h } from '../lib/html';\nimport { s } from '@dom111/element';\nimport { t } from 'i18next';\n\nexport class ImportAssetsWindow extends Window {\n  #fileInput: HTMLInputElement;\n  #progressInformation: HTMLParagraphElement;\n\n  constructor() {\n    const fileInput = s<HTMLInputElement>('<input type=\"file\" multiple>'),\n      progressInformation = s<HTMLParagraphElement>(\n        '<p class=\"loading\" hidden></p>'\n      );\n\n    super(\n      t('ImportAssetsWindow.title'),\n      s(\n        `<div class=\"import-assets\"><p>${t('ImportAssetsWindow.instructions', {\n          files: Object.keys(extractData.files),\n        })}</p><div class=\"brave\" ${\n          // @ts-ignore\n          navigator?.brave ? '' : ' hidden'\n        }>${t('ImportAssetsWindow.brave')}</div></div>`,\n        s(\n          '<p></p>',\n          h(fileInput, {\n            change: (event) => this.handleFileUpload(event),\n          })\n        ),\n        progressInformation\n      )\n    );\n\n    this.#fileInput = fileInput;\n    this.#progressInformation = progressInformation;\n  }\n\n  async handleFileUpload(event: InputEvent) {\n    this.#progressInformation.removeAttribute('hidden');\n    this.#progressInformation.style.color = 'inherit';\n\n    const files = Array.from(\n        (event.target as HTMLInputElement).files ?? []\n      ) as File[],\n      filenames: string[] = files.map((file: File) => file.name),\n      expectedFilenames = Object.keys(extractData.files),\n      expectedMatches = expectedFilenames.map((key) => new RegExp(key, 'i'));\n\n    if (\n      !expectedMatches.every((expectedMatch) =>\n        filenames.some((filename) => filename.match(expectedMatch))\n      )\n    ) {\n      this.#progressInformation.style.color = '#f00';\n      this.#progressInformation.innerText = t(\n        'ImportAssetsWindow.missing-files',\n        {\n          files: expectedFilenames,\n        }\n      );\n\n      return;\n    }\n\n    this.#fileInput.setAttribute('disabled', '');\n    this.#progressInformation.innerText = t(\n      'ImportAssetsWindow.progress-building'\n    );\n\n    const results: { name: string; uri: string }[] = [];\n\n    // Wait for...\n    await Promise.all(\n      // ...all files...\n      files.map(\n        async (file: File) =>\n          // ...to have been...\n          new Promise<void>((resolve) => {\n            const definitions = (extractData as ExtractData).files[\n              file.name.toUpperCase()\n            ];\n\n            if (!definitions) {\n              console.warn(`No definitions found for ${file.name}, skipping.`);\n\n              return;\n            }\n\n            const reader = new FileReader();\n\n            // ...loaded...\n            reader.addEventListener('load', async (event) => {\n              // ...the sprites extracted...\n              extractSprites(\n                event.target!.result as string,\n                definitions,\n                extractData.defaults,\n                (width, height) => {\n                  const canvas = document.createElement(\n                    'canvas'\n                  ) as HTMLCanvasElement;\n\n                  canvas.width = width;\n                  canvas.height = height;\n\n                  return canvas;\n                },\n                (message) => {\n                  this.#progressInformation.innerText = message;\n                }\n              ).forEach((record) => results.push(record));\n\n              resolve();\n            });\n\n            reader.readAsBinaryString(file);\n          })\n      )\n    );\n\n    this.#progressInformation.innerText = t(\n      'ImportAssetsWindow.progress-writing'\n    );\n\n    // ...and all results stored in IDB.\n    await Promise.all(results.map((record) => assetStore.set(record)));\n\n    if (!(await assetStore.hasAllAssets())) {\n      console.error('Something went wrong...');\n\n      this.#progressInformation.style.color = '#f00';\n      this.#progressInformation.innerText = t(\n        'ImportAssetsWindow.missing-data',\n        {\n          files: await assetStore.missingAssets(),\n        }\n      );\n\n      this.#fileInput.removeAttribute('disabled');\n\n      return;\n    }\n\n    this.#progressInformation.innerText = t('ImportAssetsWindow.done');\n\n    // We need to reprocess everything and this is the lazy way...\n    location.reload();\n  }\n}\n\nexport default ImportAssetsWindow;\n", "import Window from './Window';\nimport { s } from '@dom111/element';\nimport releases from '../../../../changelog/releases.json';\nimport { instance as localeProvider } from '../LocaleProvider';\nimport { marked } from 'marked';\n\ninterface Release {\n  version: string;\n  date: string;\n  localChanges: string[];\n  externalChanges: {\n    [key: string]: {\n      status: 'added' | 'removed' | 'updated';\n      log: string[];\n    };\n  };\n}\n\nconst firstParentMatching = (\n  target: HTMLElement,\n  targetSelector: string\n): HTMLElement => {\n  while (!target?.matches(targetSelector)) {\n    if (!(target instanceof HTMLElement)) {\n      throw new TypeError(`Can't find a match for ${targetSelector}`);\n    }\n\n    target = target.parentElement as HTMLElement;\n  }\n\n  return target;\n};\n\nconst toggleExpanded = (target: Node | null, expectedSelector: string) => {\n  if (!(target instanceof HTMLElement) || !target.matches(expectedSelector)) {\n    return;\n  }\n\n  const targetIsVisible = target.getAttribute('aria-expanded') === 'true';\n\n  target.setAttribute('aria-expanded', targetIsVisible ? 'false' : 'true');\n};\n\nexport class ReleaseWindow extends Window {\n  constructor() {\n    super(\n      'Releases',\n      s(\n        `<section></section>`,\n        s(\n          `<div class=\"release-list\"></div>`,\n          ...(releases as Release[]).map((release, i) => {\n            const releaseDate = new Date(release.date);\n\n            return s(\n              `<div class=\"release\">\n  <h2>${\n    release.version\n  } - <time title=\"${releaseDate.toLocaleString()}\">${localeProvider.timeSince(\n                releaseDate\n              )}</time></h2>\n  \n  <div aria-expanded=\"${i === 0 ? 'true' : 'false'}\">\n    ${\n      release.localChanges.length > 0\n        ? `\n    <ul>\n      ${release.localChanges\n        .map(\n          (line) =>\n            `<li>${marked(line.replace(/^\\s*-\\s*/, '').trim(), {\n              sanitize: true,\n            })}</li>`\n        )\n        .join('\\n      ')}\n    </ul>\n  `\n        : ''\n    }\n    \n    ${\n      Object.keys(release.externalChanges).length > 0\n        ? `\n    <h3>External changes</h3>\n    \n    <dl>\n      ${Object.entries(release.externalChanges)\n        .map(\n          ([module, { status, log: changes }]) => `<dd>${status} ${module}</dd>\n      <dt aria-expanded=\"false\">\n        <ul>\n          ${(changes ?? [])\n            .map(\n              (change) =>\n                `<li>${marked(change.replace(/^\\s*-\\s*/, '').trim(), {\n                  sanitize: true,\n                })}</li>`\n            )\n            .join('\\n          ')}\n        </ul>\n      </dt>`\n        )\n        .join('\\n    ')}\n    </dl>\n  </div>\n`\n        : ''\n    }\n</div>`\n            );\n          })\n        )\n      ),\n      {\n        canMaximise: true,\n        canResize: true,\n        classes: 'releases',\n      }\n    );\n\n    this.on('click', (event) => {\n      if (!(event.target instanceof HTMLElement)) {\n        return;\n      }\n\n      if (event.target.matches('dd, dd *')) {\n        toggleExpanded(\n          firstParentMatching(event.target, 'dd').nextElementSibling,\n          'dt'\n        );\n      }\n\n      if (event.target.matches('.release h2, .release h2 *')) {\n        toggleExpanded(\n          firstParentMatching(event.target, 'h2').nextElementSibling,\n          'div'\n        );\n      }\n    });\n  }\n}\n\nexport default ReleaseWindow;\n", "/**\n * marked v4.3.0 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    hooks: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\nconst escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n      const top = this.lexer.state.top;\n      this.lexer.state.top = true;\n      const tokens = this.lexer.blockTokens(text);\n      this.lexer.state.top = top;\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens,\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, (t) => ' '.repeat(3 * t.length));\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            nextLine = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\n              itemContents += '\\n' + nextLine.slice(indent);\n            } else {\n              // not enough indentation\n              if (blankLine) {\n                break;\n              }\n\n              // paragraph continuation unless last line was a different block level element\n              if (line.search(/[^ ]/) >= 4) { // indented code block\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n\n              itemContents += '\\n' + nextLine;\n            }\n\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n            line = nextLine.slice(indent);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n\n        if (!list.loose) {\n          // Check if list should be loose\n          const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\n.*\\n/.test(t.raw));\n\n          list.loose = hasMultipleLineBreaks;\n        }\n      }\n\n      // Set all items to loose if list is loose\n      if (list.loose) {\n        for (i = 0; i < l; i++) {\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href,\n        title\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        const raw = src.slice(0, lLength + match.index + (match[0].length - rDelim.length) + rLength);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = raw.slice(1, -1);\n          return {\n            type: 'em',\n            raw,\n            text,\n            tokens: this.lexer.inlineTokens(text)\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = raw.slice(2, -2);\n        return {\n          type: 'strong',\n          raw,\n          text,\n          tokens: this.lexer.inlineTokens(text)\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + cap[0];\n        } else {\n          href = cap[0];\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^((?:.|\\n(?!\\n))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = { ...block };\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = {\n  ...block.normal,\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n};\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.gfm.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = {\n  ...block.normal,\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n};\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n  nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //          () Skip orphan inside strong                                      () Consume to delim     (1) #***                (2) a***#, a***                             (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^(?:[^_*\\\\]|\\\\.)*?\\_\\_(?:[^_*\\\\]|\\\\.)*?\\*(?:[^_*\\\\]|\\\\.)*?(?=\\_\\_)|(?:[^*\\\\]|\\\\.)+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|(?:[^punct*_\\s\\\\]|\\\\.)(\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|(?:[^punct*_\\s\\\\]|\\\\.)(\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^(?:[^_*\\\\]|\\\\.)*?\\*\\*(?:[^_*\\\\]|\\\\.)*?\\_(?:[^_*\\\\]|\\\\.)*?(?=\\*\\*)|(?:[^_\\\\]|\\\\.)+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|(?:[^punct*_\\s\\\\]|\\\\.)(\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n// lookbehind is not available on Safari as of version 16\n// inline.escapedEmSt = /(?<=(?:^|[^\\\\)(?:\\\\[^])*)\\\\[*_]/g;\ninline.escapedEmSt = /(?:^|[^\\\\])(?:\\\\\\\\)*\\\\[*_]/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.nolink = edit(inline.nolink)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = { ...inline };\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = {\n  ...inline.normal,\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n};\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = {\n  ...inline.normal,\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n};\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = {\n  ...inline.gfm,\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n};\n\n/**\n * smartypants text replacement\n * @param {string} text\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n * @param {string} text\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n');\n\n    this.blockTokens(src, this.tokens);\n\n    let next;\n    while (next = this.inlineQueue.shift()) {\n      this.inlineTokens(next.src, next.tokens);\n    }\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src, tokens = []) {\n    if (this.options.pedantic) {\n      src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n    } else {\n      src = src.replace(/^( *)(\\t+)/gm, (_, leading, tabs) => {\n        return leading + '    '.repeat(tabs.length);\n      });\n    }\n\n    let token, lastToken, cutSrc, lastParagraphClipped;\n\n    while (src) {\n      if (this.options.extensions\n        && this.options.extensions.block\n        && this.options.extensions.block.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.length === 1 && tokens.length > 0) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unecessary paragraph tags\n          tokens[tokens.length - 1].raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        lastToken = tokens[tokens.length - 1];\n        if (lastParagraphClipped && lastToken.type === 'paragraph') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = (cutSrc.length !== src.length);\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src, tokens = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = []) {\n    let token, lastToken, cutSrc;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n    let keepPrevChar, prevChar;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out escaped em & strong delimiters\n    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index + match[0].length - 2) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      this.tokenizer.rules.inline.escapedEmSt.lastIndex--;\n    }\n\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      // extensions\n      if (this.options.extensions\n        && this.options.extensions.inline\n        && this.options.extensions.inline.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n\n/**\n * Renderer\n */\nclass Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    code = code.replace(/\\n$/, '') + '\\n';\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  }\n\n  /**\n   * @param {string} quote\n   */\n  blockquote(quote) {\n    return `<blockquote>\\n${quote}</blockquote>\\n`;\n  }\n\n  html(html) {\n    return html;\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} level\n   * @param {string} raw\n   * @param {any} slugger\n   */\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      const id = this.options.headerPrefix + slugger.slug(raw);\n      return `<h${level} id=\"${id}\">${text}</h${level}>\\n`;\n    }\n\n    // ignore IDs\n    return `<h${level}>${text}</h${level}>\\n`;\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  /**\n   * @param {string} text\n   */\n  listitem(text) {\n    return `<li>${text}</li>\\n`;\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  /**\n   * @param {string} text\n   */\n  paragraph(text) {\n    return `<p>${text}</p>\\n`;\n  }\n\n  /**\n   * @param {string} header\n   * @param {string} body\n   */\n  table(header, body) {\n    if (body) body = `<tbody>${body}</tbody>`;\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  /**\n   * @param {string} content\n   */\n  tablerow(content) {\n    return `<tr>\\n${content}</tr>\\n`;\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? `<${type} align=\"${flags.align}\">`\n      : `<${type}>`;\n    return tag + content + `</${type}>\\n`;\n  }\n\n  /**\n   * span level renderer\n   * @param {string} text\n   */\n  strong(text) {\n    return `<strong>${text}</strong>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  em(text) {\n    return `<em>${text}</em>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  codespan(text) {\n    return `<code>${text}</code>`;\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  /**\n   * @param {string} text\n   */\n  del(text) {\n    return `<del>${text}</del>`;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + href + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${title}\"`;\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n}\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nclass TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n}\n\n/**\n * Slugger generates header id\n */\nclass Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * @param {string} value\n   */\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   * @param {string} originalSlug\n   * @param {boolean} isDryRun\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} [options]\n   * @param {boolean} [options.dryrun] Generates the next unique slug without\n   * updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n}\n\n/**\n * Parsing & Compiling\n */\nclass Parser {\n  constructor(options) {\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer();\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.header[j].tokens),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.rows.length;\n          for (j = 0; j < l2; j++) {\n            row = token.rows[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k].tokens),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n}\n\nclass Hooks {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  static passThroughHooks = new Set([\n    'preprocess',\n    'postprocess'\n  ]);\n\n  /**\n   * Process markdown before marked\n   */\n  preprocess(markdown) {\n    return markdown;\n  }\n\n  /**\n   * Process HTML after marked is finished\n   */\n  postprocess(html) {\n    return html;\n  }\n}\n\nfunction onError(silent, async, callback) {\n  return (e) => {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n    if (silent) {\n      const msg = '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n      if (async) {\n        return Promise.resolve(msg);\n      }\n      if (callback) {\n        callback(null, msg);\n        return;\n      }\n      return msg;\n    }\n\n    if (async) {\n      return Promise.reject(e);\n    }\n    if (callback) {\n      callback(e);\n      return;\n    }\n    throw e;\n  };\n}\n\nfunction parseMarkdown(lexer, parser) {\n  return (src, opt, callback) => {\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    const origOpt = { ...opt };\n    opt = { ...marked.defaults, ...origOpt };\n    const throwError = onError(opt.silent, opt.async, callback);\n\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      return throwError(new Error('marked(): input parameter is undefined or null'));\n    }\n    if (typeof src !== 'string') {\n      return throwError(new Error('marked(): input parameter is of type '\n        + Object.prototype.toString.call(src) + ', string expected'));\n    }\n\n    checkSanitizeDeprecation(opt);\n\n    if (opt.hooks) {\n      opt.hooks.options = opt;\n    }\n\n    if (callback) {\n      const highlight = opt.highlight;\n      let tokens;\n\n      try {\n        if (opt.hooks) {\n          src = opt.hooks.preprocess(src);\n        }\n        tokens = lexer(src, opt);\n      } catch (e) {\n        return throwError(e);\n      }\n\n      const done = function(err) {\n        let out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n            out = parser(tokens, opt);\n            if (opt.hooks) {\n              out = opt.hooks.postprocess(out);\n            }\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n\n        return err\n          ? throwError(err)\n          : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n\n      if (!tokens.length) return done();\n\n      let pending = 0;\n      marked.walkTokens(tokens, function(token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(() => {\n            highlight(token.text, token.lang, function(err, code) {\n              if (err) {\n                return done(err);\n              }\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    if (opt.async) {\n      return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src)\n        .then(src => lexer(src, opt))\n        .then(tokens => opt.walkTokens ? Promise.all(marked.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens)\n        .then(tokens => parser(tokens, opt))\n        .then(html => opt.hooks ? opt.hooks.postprocess(html) : html)\n        .catch(throwError);\n    }\n\n    try {\n      if (opt.hooks) {\n        src = opt.hooks.preprocess(src);\n      }\n      const tokens = lexer(src, opt);\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n      let html = parser(tokens, opt);\n      if (opt.hooks) {\n        html = opt.hooks.postprocess(html);\n      }\n      return html;\n    } catch (e) {\n      return throwError(e);\n    }\n  };\n}\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  return parseMarkdown(Lexer.lex, Parser.parse)(src, opt, callback);\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  marked.defaults = { ...marked.defaults, ...opt };\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args) {\n  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };\n\n  args.forEach((pack) => {\n    // copy options to new object\n    const opts = { ...pack };\n\n    // set async to true if it was set to true before\n    opts.async = marked.defaults.async || opts.async || false;\n\n    // ==-- Parse \"addon\" extensions --== //\n    if (pack.extensions) {\n      pack.extensions.forEach((ext) => {\n        if (!ext.name) {\n          throw new Error('extension name required');\n        }\n        if (ext.renderer) { // Renderer extensions\n          const prevRenderer = extensions.renderers[ext.name];\n          if (prevRenderer) {\n            // Replace extension with func to run new extension but fall back if false\n            extensions.renderers[ext.name] = function(...args) {\n              let ret = ext.renderer.apply(this, args);\n              if (ret === false) {\n                ret = prevRenderer.apply(this, args);\n              }\n              return ret;\n            };\n          } else {\n            extensions.renderers[ext.name] = ext.renderer;\n          }\n        }\n        if (ext.tokenizer) { // Tokenizer Extensions\n          if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n            throw new Error(\"extension level must be 'block' or 'inline'\");\n          }\n          if (extensions[ext.level]) {\n            extensions[ext.level].unshift(ext.tokenizer);\n          } else {\n            extensions[ext.level] = [ext.tokenizer];\n          }\n          if (ext.start) { // Function to check for start of token\n            if (ext.level === 'block') {\n              if (extensions.startBlock) {\n                extensions.startBlock.push(ext.start);\n              } else {\n                extensions.startBlock = [ext.start];\n              }\n            } else if (ext.level === 'inline') {\n              if (extensions.startInline) {\n                extensions.startInline.push(ext.start);\n              } else {\n                extensions.startInline = [ext.start];\n              }\n            }\n          }\n        }\n        if (ext.childTokens) { // Child tokens to be visited by walkTokens\n          extensions.childTokens[ext.name] = ext.childTokens;\n        }\n      });\n      opts.extensions = extensions;\n    }\n\n    // ==-- Parse \"overwrite\" extensions --== //\n    if (pack.renderer) {\n      const renderer = marked.defaults.renderer || new Renderer();\n      for (const prop in pack.renderer) {\n        const prevRenderer = renderer[prop];\n        // Replace renderer with func to run extension, but fall back if false\n        renderer[prop] = (...args) => {\n          let ret = pack.renderer[prop].apply(renderer, args);\n          if (ret === false) {\n            ret = prevRenderer.apply(renderer, args);\n          }\n          return ret;\n        };\n      }\n      opts.renderer = renderer;\n    }\n    if (pack.tokenizer) {\n      const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n      for (const prop in pack.tokenizer) {\n        const prevTokenizer = tokenizer[prop];\n        // Replace tokenizer with func to run extension, but fall back if false\n        tokenizer[prop] = (...args) => {\n          let ret = pack.tokenizer[prop].apply(tokenizer, args);\n          if (ret === false) {\n            ret = prevTokenizer.apply(tokenizer, args);\n          }\n          return ret;\n        };\n      }\n      opts.tokenizer = tokenizer;\n    }\n\n    // ==-- Parse Hooks extensions --== //\n    if (pack.hooks) {\n      const hooks = marked.defaults.hooks || new Hooks();\n      for (const prop in pack.hooks) {\n        const prevHook = hooks[prop];\n        if (Hooks.passThroughHooks.has(prop)) {\n          hooks[prop] = (arg) => {\n            if (marked.defaults.async) {\n              return Promise.resolve(pack.hooks[prop].call(hooks, arg)).then(ret => {\n                return prevHook.call(hooks, ret);\n              });\n            }\n\n            const ret = pack.hooks[prop].call(hooks, arg);\n            return prevHook.call(hooks, ret);\n          };\n        } else {\n          hooks[prop] = (...args) => {\n            let ret = pack.hooks[prop].apply(hooks, args);\n            if (ret === false) {\n              ret = prevHook.apply(hooks, args);\n            }\n            return ret;\n          };\n        }\n      }\n      opts.hooks = hooks;\n    }\n\n    // ==-- Parse WalkTokens extensions --== //\n    if (pack.walkTokens) {\n      const walkTokens = marked.defaults.walkTokens;\n      opts.walkTokens = function(token) {\n        let values = [];\n        values.push(pack.walkTokens.call(this, token));\n        if (walkTokens) {\n          values = values.concat(walkTokens.call(this, token));\n        }\n        return values;\n      };\n    }\n\n    marked.setOptions(opts);\n  });\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  let values = [];\n  for (const token of tokens) {\n    values = values.concat(callback.call(marked, token));\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.header) {\n          values = values.concat(marked.walkTokens(cell.tokens, callback));\n        }\n        for (const row of token.rows) {\n          for (const cell of row) {\n            values = values.concat(marked.walkTokens(cell.tokens, callback));\n          }\n        }\n        break;\n      }\n      case 'list': {\n        values = values.concat(marked.walkTokens(token.items, callback));\n        break;\n      }\n      default: {\n        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) { // Walk any extensions\n          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {\n            values = values.concat(marked.walkTokens(token[childTokens], callback));\n          });\n        } else if (token.tokens) {\n          values = values.concat(marked.walkTokens(token.tokens, callback));\n        }\n      }\n    }\n  }\n  return values;\n};\n\n/**\n * Parse Inline\n * @param {string} src\n */\nmarked.parseInline = parseMarkdown(Lexer.lexInline, Parser.parseInline);\n\n/**\n * Expose\n */\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\nmarked.Tokenizer = Tokenizer;\nmarked.Slugger = Slugger;\nmarked.Hooks = Hooks;\nmarked.parse = marked;\n\nconst options = marked.options;\nconst setOptions = marked.setOptions;\nconst use = marked.use;\nconst walkTokens = marked.walkTokens;\nconst parseInline = marked.parseInline;\nconst parse = marked;\nconst parser = Parser.parse;\nconst lexer = Lexer.lex;\n\nexport { Hooks, Lexer, Parser, Renderer, Slugger, TextRenderer, Tokenizer, defaults, getDefaults, lexer, marked, options, parse, parseInline, parser, setOptions, use, walkTokens };\n", "import Map from './Map';\nimport Portal from './Portal';\nimport World from './World';\nimport { on } from '@dom111/element';\n\nexport class Minimap {\n  #context: CanvasRenderingContext2D;\n  #element: HTMLCanvasElement;\n  #layers: Map[];\n  #portal: Portal;\n  #world: World;\n\n  constructor(\n    element: HTMLCanvasElement,\n    world: World,\n    portal: Portal,\n    ...layers: Map[]\n  ) {\n    this.#element = element;\n    this.#world = world;\n    this.#portal = portal;\n    this.#layers = layers;\n\n    this.#context = this.#element.getContext('2d')!;\n\n    on(this.#element, 'click', (event) => {\n      const x = event.offsetX - this.#element.offsetLeft,\n        y = event.offsetY - this.#element.offsetTop,\n        tileX = Math.ceil(\n          (x / this.#element.offsetWidth) * this.#world.width()\n        ),\n        tileY = Math.ceil(\n          (y / this.#element.offsetHeight) * this.#world.height()\n        );\n\n      this.#portal.setCenter(tileX, tileY);\n      this.update();\n    });\n  }\n\n  update(): void {\n    const targetHeight =\n      this.#layers[0].canvas().height * (190 / this.#layers[0].canvas().width);\n\n    this.#element.height = targetHeight;\n    this.#context.clearRect(0, 0, 190, targetHeight);\n\n    this.#layers.forEach((layer) =>\n      this.#context.drawImage(layer.canvas(), 0, 0, 190, targetHeight)\n    );\n\n    const [start, end] = this.#portal.rawVisibleRange();\n\n    // TODO: draw the rectangle replicated when close to the sides\n    this.#context.lineWidth = 1;\n    this.#context.strokeStyle = '#fff';\n    this.#context.fillStyle = 'rgba(255, 255, 255, .2)';\n    this.#context.rect(\n      Math.floor((190 / this.#world.width()) * start.x),\n      Math.floor((targetHeight / this.#world.height()) * start.y),\n      Math.floor((190 / this.#world.width()) * (end.x - start.x)),\n      Math.floor((targetHeight / this.#world.height()) * (end.y - start.y))\n    );\n    this.#context.stroke();\n    this.#context.fill();\n  }\n}\n\nexport default Minimap;\n", "import NotificationWindow from './NotificationWindow';\nimport { t } from 'i18next';\n\n// TODO: add in key specifically\nexport interface Notification {\n  data: any;\n  key: string;\n}\n\nexport class Notifications {\n  #container: HTMLElement;\n  #notifications: Notification[] = [];\n  #interval: number | null = null;\n\n  constructor(container: HTMLElement = document.body) {\n    this.#container = container;\n  }\n\n  receive(notification: Notification): void {\n    this.#notifications.push(notification);\n\n    this.check();\n  }\n\n  private check(): void {\n    const active = document.querySelector('.notificationWindow');\n\n    if (!this.#notifications.length || active) {\n      return;\n    }\n\n    const notification = this.#notifications.shift() as Notification;\n\n    this.publish(notification);\n  }\n\n  private periodicChecker(remove: boolean = false): void {\n    this.check();\n\n    if (remove) {\n      if (this.#interval === null) {\n        return;\n      }\n\n      window.clearInterval(this.#interval);\n\n      this.#interval = null;\n\n      return;\n    }\n\n    if (this.#interval !== null || this.#notifications.length === 0) {\n      return;\n    }\n\n    this.#interval = window.setInterval(() => this.check(), 500);\n  }\n\n  private publish(notification: Notification): void {\n    const message = t(`${notification.key}.body`, {\n        ...notification.data,\n        ns: 'notification',\n        skipOnVariables: false,\n      }) as unknown as string,\n      title = t(`${notification.key}.title`, {\n        ...notification.data,\n        defaultValue: t('Notification.title'),\n        ns: 'notification',\n        skipOnVariables: false,\n      }) as unknown as string,\n      notificationWindow = new NotificationWindow(title, message, {\n        modal: true,\n        parent: this.#container,\n      });\n\n    notificationWindow.on('close', () => this.periodicChecker());\n  }\n}\n\nexport default Notifications;\n", "import { City, Player } from '../types';\nimport { Element, s } from '@dom111/element';\nimport { reduceKnownYields } from '../lib/yieldMap';\nimport { t } from 'i18next';\n\nexport class PlayerDetails extends Element {\n  #player: Player;\n\n  constructor(element: HTMLElement, player: Player) {\n    super(element);\n\n    this.#player = player;\n  }\n\n  build(): void {\n    this.empty();\n\n    const { civilization, treasuries, research, cities } = this.#player,\n      [goldTreasury] = treasuries.filter(\n        (treasury) => treasury.yield._ === 'Gold'\n      );\n\n    const [totalGold, totalResearch] = cities.reduce(\n        ([totalGold, totalResearch], city: City): [number, number] => {\n          // TODO: There must be a way to specify that the return array has the same number of elements as the arguments...\n          const [cityGold, cityResearch] = reduceKnownYields(\n            city.yields,\n            'Gold',\n            'Research'\n          );\n\n          return [totalGold + cityGold, totalResearch + cityResearch];\n        },\n        [0, 0]\n      ),\n      researchTurns = Math.ceil(\n        (research.cost.value - research.progress.value) / totalResearch\n      );\n\n    this.append(\n      s(\n        `<h3>${t('PlayerDetails.header', {\n          leader: t(`Leader.${civilization.leader._}.name`, {\n            defaultValue: civilization.leader._,\n            ns: 'civilization',\n          }),\n          nation: t(`${civilization._}.plural`, {\n            defaultValue: civilization._,\n            ns: 'civilization',\n          }),\n        })}</h3>`\n      ),\n      s(\n        `<p><strong>${t('PlayerDetails.Researching.title')}</strong><br/>${t(\n          'PlayerDetails.Researching.body',\n          {\n            progress: research.progress.value,\n            cost: research.cost.value,\n            perTurn: totalResearch,\n            researching: t(`${research.researching?._}.name`, {\n              defaultValue: research.researching?._,\n              ns: 'science',\n            }),\n            turns: Number.isFinite(researchTurns) ? researchTurns : 0,\n            context: research.researching ? 'researching' : 'notresearching',\n          }\n        )}</p>`\n      ),\n      s(\n        `<p><strong>${t('PlayerDetails.Treasury.title')}</strong><br/>${t(\n          'PlayerDetails.Treasury.body',\n          {\n            value: goldTreasury.value,\n            perTurn: totalGold,\n          }\n        )}</p>`\n      )\n    );\n  }\n}\n\nexport default PlayerDetails;\n", "import { Element, s } from '@dom111/element';\nimport { t } from 'i18next';\nimport { Unit as UnitData } from '../types';\nimport { cityName } from './lib/city';\nimport Unit from './Unit';\n\nexport class UnitDetails extends Element {\n  #activeUnit: UnitData | null;\n\n  constructor(element: HTMLElement, activeUnit: UnitData | null) {\n    super(element);\n\n    this.#activeUnit = activeUnit;\n\n    this.build();\n  }\n\n  build(): void {\n    this.empty();\n\n    if (this.#activeUnit === null) {\n      return;\n    }\n\n    this.append(\n      s(\n        `<p>${t('UnitDetails.header', {\n          unitName: t(`${this.#activeUnit._}.name`, {\n            defaultValue: this.#activeUnit._,\n            ns: 'unit',\n          }),\n          x: this.#activeUnit.tile.x,\n          y: this.#activeUnit.tile.y,\n        })}</p>`\n      ),\n      s(`<p>${cityName(this.#activeUnit.city)}</p>`),\n      s(\n        `<p>${t('UnitDetails.moves', {\n          remaining: this.#activeUnit.moves.value,\n          total: this.#activeUnit.movement.value,\n        })}</p>`\n      ),\n      s(\n        `<p>${t('UnitDetails.stats', {\n          attack: this.#activeUnit.attack.value,\n          defence: this.#activeUnit.defence.value,\n          visibility: this.#activeUnit.visibility.value,\n        })}</p>`\n      ),\n      s(\n        `<p>${t('UnitDetails.improvements', {\n          improvements: this.#activeUnit.improvements.map((improvement) =>\n            t(`Improvement.${improvement._}.name`, {\n              defaultValue: improvement._,\n              ns: 'unit',\n            })\n          ),\n        })}</p>`\n      ),\n      s(\n        `<p>${t('UnitDetails.terrain', {\n          terrain: t(`${this.#activeUnit.tile.terrain._}.name`, {\n            defaultValue: this.#activeUnit.tile.terrain._,\n            ns: 'world',\n          }),\n          features: this.#activeUnit.tile.terrain.features.map((feature) =>\n            t(`Feature.${feature._}.name`, {\n              defaultValue: feature._,\n              ns: 'world',\n            })\n          ),\n          improvements: this.#activeUnit.tile.improvements.map((improvement) =>\n            t(`Improvement.${improvement._}.name`, {\n              defaultValue: improvement._,\n              ns: 'world',\n            })\n          ),\n        })}</p>`\n      ),\n      // TODO: These could be clickable?\n      s(\n        `<p></p>`,\n        ...this.#activeUnit.tile.units\n          .filter((unit) => unit !== this.#activeUnit)\n          .map((unit) => new Unit(unit))\n      )\n    );\n  }\n}\n\nexport default UnitDetails;\n", "import { Request, RequestArgs, RequestReturn } from './Request';\nimport {\n  Transport,\n  TransportData,\n  TransportReceiveHandler,\n  TransportSendArgs,\n} from './Transport';\n\nexport abstract class AbstractTransport<\n  DataMap extends {\n    [key: string]: TransportData;\n  }\n> implements Transport<DataMap>\n{\n  abstract receive<Channel extends keyof DataMap>(\n    channel: Channel,\n    handler: TransportReceiveHandler<DataMap[Channel]>\n  ): void;\n\n  abstract receiveOnce<Channel extends keyof DataMap>(\n    channel: Channel,\n    handler: TransportReceiveHandler<DataMap[Channel]>\n  ): void;\n\n  async request<\n    RequestType extends Request,\n    Args extends any[] = RequestArgs<RequestType>,\n    Return extends any = RequestReturn<RequestType>\n  >(request: Request): Promise<Return> {\n    return new Promise<Return>((resolve) => {\n      this.send(request.channel(), request.args()[0]);\n\n      this.receiveOnce(request.channel(), (value: Return) => resolve(value));\n    });\n  }\n\n  abstract send<Channel extends keyof DataMap>(\n    channel: Channel,\n    data: TransportSendArgs<DataMap[Channel]>\n  ): void;\n}\n\nexport default AbstractTransport;\n", "import { IConstructor } from '@civ-clone/core-registry/Registry';\n\nexport interface IAdditionalData {\n  data(...args: any[]): any;\n  key(): string;\n  type(): IConstructor;\n}\n\nexport class AdditionalData implements IAdditionalData {\n  #key: string;\n  #provider: (...args: any[]) => any;\n  #type: IConstructor;\n\n  constructor(\n    type: IConstructor,\n    key: string,\n    provider: (...args: any[]) => any\n  ) {\n    this.#key = key;\n    this.#provider = provider;\n    this.#type = type;\n  }\n\n  data(...args: any[]): any {\n    return this.#provider(...args);\n  }\n\n  key(): string {\n    return this.#key;\n  }\n\n  type(): IConstructor {\n    return this.#type;\n  }\n}\n\nexport default AdditionalData;\n", "import {\n  EntityRegistry,\n  IEntityRegistry,\n} from '@civ-clone/core-registry/EntityRegistry';\nimport AdditionalData from './AdditionalData';\nimport { IConstructor } from '@civ-clone/core-registry/Registry';\n\nexport interface IAdditionalDataRegistry\n  extends IEntityRegistry<AdditionalData> {\n  getByType(type: IConstructor): AdditionalData[];\n}\n\nexport class AdditionalDataRegistry\n  extends EntityRegistry<AdditionalData>\n  implements IAdditionalDataRegistry\n{\n  constructor() {\n    super(AdditionalData);\n  }\n\n  getByType(type: IConstructor): AdditionalData[] {\n    return this.filter(\n      (additionalData: AdditionalData): boolean =>\n        additionalData.type() === type ||\n        Object.prototype.isPrototypeOf.call(additionalData.type(), type) ||\n        Object.prototype.isPrototypeOf.call(\n          additionalData.type().prototype,\n          type\n        )\n    );\n  }\n}\n\nexport const instance: AdditionalDataRegistry = new AdditionalDataRegistry();\n\nexport default AdditionalDataRegistry;\n", "import DataObject from '../DataObject';\n\nexport const generateInheritance = (object: DataObject | typeof DataObject) => {\n  let constructor =\n    object instanceof DataObject\n      ? object.sourceClass<typeof DataObject>()\n      : object;\n\n  const stack: (typeof DataObject)[] = [];\n\n  while (constructor instanceof Function) {\n    stack.push(constructor);\n\n    constructor = Object.getPrototypeOf(constructor);\n  }\n\n  return stack.map((constructor) => constructor.name);\n};\n\nexport default generateInheritance;\n", "import {\n  AdditionalDataRegistry,\n  instance as additionalDataRegistryInstance,\n} from './AdditionalDataRegistry';\nimport AdditionalData from './AdditionalData';\nimport EntityRegistry from '@civ-clone/core-registry/EntityRegistry';\nimport { IConstructor } from '@civ-clone/core-registry/Registry';\nimport generateInheritance from './lib/generateInheritance';\n\nexport type DataObjectFilter = (object: DataObject) => any;\n\nexport type PlainObject = {\n  [key: string | symbol | number]: any;\n};\n\nexport type ObjectStore = {\n  [key: string]: PlainObject;\n};\n\nexport type ObjectMap = {\n  hierarchy: PlainObject;\n  objects: ObjectStore;\n};\n\nexport interface IDataObject {\n  addKey(...keys: (string | number | symbol)[]): void;\n  id(): string;\n  keys(): (string | number | symbol)[];\n  sourceClass(): IConstructor<this>;\n  toPlainObject(): PlainObject;\n}\n\nconst idCache: { [key: string]: number | bigint } = {},\n  idProvider = (object: DataObject) => {\n    const className = object.sourceClass().name,\n      current = idCache[className];\n\n    if (!current) {\n      idCache[className] = 0;\n    }\n\n    if (current >= Number.MAX_SAFE_INTEGER) {\n      idCache[className] = BigInt(current);\n    }\n\n    return className + '-' + (++idCache[className]).toString(36);\n  },\n  toPlainObject = (\n    value: any,\n    objects: ObjectStore,\n    filter: (object: any) => any = (object) => object,\n    additionalDataRegistry: AdditionalDataRegistry = additionalDataRegistryInstance\n  ): PlainObject | PlainObject[] => {\n    value = filter(value);\n\n    if (value instanceof EntityRegistry) {\n      value = value.entries();\n    }\n\n    if (Array.isArray(value)) {\n      return value.map(\n        (item: any): PlainObject =>\n          toPlainObject(item, objects, filter, additionalDataRegistry)\n      );\n    }\n\n    if (value instanceof DataObject) {\n      const id = value.id();\n\n      if (!(id in objects)) {\n        const plainObject: PlainObject = {\n          _: value.sourceClass().name,\n          __: generateInheritance(value),\n        };\n\n        objects[id] = plainObject;\n\n        value.keys().forEach((key: string): void => {\n          const keyValue: any =\n            value[key] instanceof Function\n              ? (value[key] as unknown as Function)()\n              : value[key];\n\n          plainObject[key] = toPlainObject(\n            keyValue,\n            objects,\n            filter,\n            additionalDataRegistry\n          );\n        });\n\n        additionalDataRegistry\n          .getByType(value.sourceClass())\n          .forEach((additionalData: AdditionalData): void => {\n            plainObject[additionalData.key()] = toPlainObject(\n              additionalData.data(value),\n              objects,\n              filter,\n              additionalDataRegistry\n            );\n          });\n      }\n\n      return {\n        '#ref': id,\n      };\n    }\n\n    if (value instanceof Function) {\n      return {\n        _: value.name,\n        __: generateInheritance(value),\n      };\n    }\n\n    if (value && value instanceof Object) {\n      return Object.entries(value).reduce(\n        (object: PlainObject, [key, value]) => {\n          object[key] = toPlainObject(\n            value,\n            objects,\n            filter,\n            additionalDataRegistry\n          );\n\n          return object;\n        },\n        {}\n      );\n    }\n\n    return value;\n  };\n\nexport class DataObject implements IDataObject {\n  #id: string;\n  #keys: (keyof this)[] = ['id'];\n\n  constructor() {\n    this.#id = idProvider(this);\n  }\n\n  addKey(...keys: (keyof this)[]): void {\n    this.#keys.push(...keys);\n  }\n\n  id(): string {\n    return this.#id;\n  }\n\n  keys(): (keyof this)[] {\n    return this.#keys;\n  }\n\n  sourceClass<T extends NewableFunction>(): T {\n    return this.constructor as T;\n  }\n\n  toPlainObject(\n    dataObjectFilter: DataObjectFilter = (object) => object,\n    additionalDataRegistry: AdditionalDataRegistry = additionalDataRegistryInstance\n  ): ObjectMap {\n    const objects = {};\n\n    return {\n      hierarchy: toPlainObject(\n        this,\n        objects,\n        dataObjectFilter,\n        additionalDataRegistry\n      ),\n      objects,\n    };\n  }\n}\n\nexport default DataObject;\n", "import {\n  TransportData,\n  TransportMessage,\n  TransportReceiveArgs,\n  TransportReceiveHandler,\n  TransportSendArgs,\n} from './Transport';\nimport AbstractTransport from './AbstractTransport';\nimport DataObject from '@civ-clone/core-data-object/DataObject';\nimport reconstituteData from '../UI/lib/reconstituteData';\n\nexport class WorkerTransport<\n  DataMap extends {\n    [key: string]: TransportData;\n  }\n> extends AbstractTransport<DataMap> {\n  #worker;\n\n  constructor(worker: Worker) {\n    super();\n\n    this.#worker = worker;\n  }\n\n  receive<Channel extends keyof DataMap>(\n    channel: Channel,\n    handler: TransportReceiveHandler<DataMap[Channel]>\n  ): void {\n    this.#worker.addEventListener(\n      'message',\n      ({ data: { channel: receivingChannel, data } }) => {\n        const handlerData = data?.hierarchy\n          ? (reconstituteData(data) as TransportReceiveArgs<DataMap[Channel]>)\n          : data;\n\n        if (channel === receivingChannel) {\n          handler(handlerData, data);\n        }\n      }\n    );\n  }\n\n  receiveOnce<Channel extends keyof DataMap>(\n    channel: Channel,\n    handler: TransportReceiveHandler<DataMap[Channel]>\n  ): void {\n    const onceHandler = ({\n      data: { channel: receivingChannel, data },\n    }: MessageEvent<TransportMessage>) => {\n      const handlerData = data?.hierarchy\n        ? (reconstituteData(data) as TransportReceiveArgs<DataMap[Channel]>)\n        : data;\n\n      if (channel === receivingChannel) {\n        handler(handlerData, data);\n\n        this.#worker.removeEventListener('message', onceHandler);\n      }\n    };\n\n    this.#worker.addEventListener('message', onceHandler);\n  }\n\n  send<Channel extends keyof DataMap>(\n    channel: Channel,\n    data: TransportSendArgs<DataMap[Channel]>\n  ): void {\n    if ((data as any) instanceof DataObject) {\n      data = data.toPlainObject();\n    }\n\n    this.#worker.postMessage({\n      channel,\n      data,\n    });\n  }\n}\n\nexport default WorkerTransport;\n", "import Renderer from './UI/Renderer';\nimport WorkerTransport from './Engine/WorkerTransport';\n\nconst renderer = new Renderer(\n  new WorkerTransport(new Worker('dist/backend.js'))\n);\n\nrenderer.init();\n"],
  "mappings": "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A,YCXK,IAAMc,GAAaC,EAAA,CACxBC,EACAC,EACAC,IACsB,CACtB,IAAMC,EAAY,SAAS,cAAc,QAAQ,EAC/CC,EAAUD,EAAU,WAAW,IAAI,EAErC,OAAAA,EAAU,MAASH,EAAM,MAAmBC,EAC5CE,EAAU,OAAUH,EAAM,OAAoBC,EAEzCC,GAAA,MAAAA,EAAS,YACZE,EAAQ,sBAAwB,IAGlCA,EAAQ,UAAUJ,EAAO,EAAG,EAAGG,EAAU,MAAOA,EAAU,MAAM,EAEzDA,CACT,EAlB0B,cAoBnBE,GAAQP,GCxBf,IAAAQ,GAAAC,GAAAC,GAAAC,GAQaC,GAAN,cAAyBC,EAK7B,CAqSD,aAAc,CACZ,MAAM,mBAAoB,SAAU,CAClC,QAAS,MACX,CAAC,EAvSHC,EAAA,KAAAN,GAAgB,IAAI,KACpBM,EAAA,KAAAL,GAAgB,IAAI,KACpBK,EAAA,KAAAJ,GAAsB,IAAI,KAC1BI,EAAA,KAAAH,GAA4B,CAC1B,yBACA,yBACA,yBACA,2BACA,qCACA,qCACA,mCACA,mCACA,kCACA,mCACA,+BACA,qCACA,qCACA,8BACA,wBACA,+BACA,0BACA,yBACA,4BACA,iCACA,iCACA,uCACA,iCACA,sCACA,uCACA,wCACA,uCACA,wCACA,wCACA,uCACA,wCACA,uCACA,mCACA,mCACA,oCACA,oCACA,mCACA,oCACA,oCACA,mCACA,wBACA,yBACA,yBACA,yBACA,yBACA,wBACA,2BACA,uBACA,kCACA,mCACA,mCACA,mCACA,gCACA,iCACA,iCACA,iCACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,4BACA,oCACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,2BACA,4BACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,4BACA,4BACA,iCACA,mCACA,oCACA,qCACA,oCACA,mCACA,oCACA,qCACA,sCACA,qCACA,oCACA,qCACA,oCACA,mCACA,oCACA,mCACA,6BACA,+BACA,gCACA,iCACA,gCACA,+BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,+BACA,gCACA,+BACA,6BACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,4BACA,iCACA,mCACA,oCACA,qCACA,oCACA,mCACA,oCACA,qCACA,sCACA,qCACA,oCACA,qCACA,oCACA,mCACA,oCACA,mCACA,6BACA,6BACA,2BACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,+BACA,gCACA,iCACA,gCACA,qCACA,qCACA,qCACA,qCACA,6BACA,+BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,+BACA,gCACA,+BACA,4BACA,8BACA,4BACA,6BACA,+BACA,gCACA,iCACA,gCACA,+BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,+BACA,gCACA,+BACA,8BACA,gCACA,iCACA,kCACA,iCACA,gCACA,iCACA,kCACA,mCACA,kCACA,iCACA,kCACA,iCACA,gCACA,iCACA,gCACA,0BACA,+BACA,gCACA,4BACA,4BACA,6BACA,6BACA,8BACA,8BACA,6BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,6BACA,8BACA,6BACA,6BACA,8BACA,4BACA,8BACA,wCACA,6BACA,+BACA,6BACA,8BACA,8BACA,0BACA,8BACA,+BACA,+BACA,4BACF,EAMA,CAEA,MAAM,IAAII,EAA8B,CACtC,OAAKC,EAAA,KAAKR,IAAc,IAAIO,CAAI,GAC9BC,EAAA,KAAKR,IAAc,IAAIO,EAAO,MAAM,MAAM,IAAIA,CAAI,CAAG,EAGhDC,EAAA,KAAKR,IAAc,IAAIO,C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",
  "names": ["require_Element", "__commonJSMin", "exports", "e", "t", "s", "o", "r", "__name", "_typeof", "obj", "init_typeof", "__esmMin", "__name", "_classCallCheck", "instance", "Constructor", "init_classCallCheck", "__esmMin", "__name", "_toPrimitive", "input", "hint", "_typeof", "prim", "res", "init_toPrimitive", "__esmMin", "init_typeof", "__name", "_toPropertyKey", "arg", "key", "_toPrimitive", "_typeof", "init_toPropertyKey", "__esmMin", "init_typeof", "init_toPrimitive", "__name", "_defineProperties", "target", "props", "i", "descriptor", "_toPropertyKey", "_createClass", "Constructor", "protoProps", "staticProps", "init_createClass", "__esmMin", "init_toPropertyKey", "__name", "_assertThisInitialized", "self", "init_assertThisInitialized", "__esmMin", "__name", "_setPrototypeOf", "o", "p", "__name", "init_setPrototypeOf", "__esmMin", "_inherits", "subClass", "superClass", "_setPrototypeOf", "init_inherits", "__esmMin", "init_setPrototypeOf", "__name", "_possibleConstructorReturn", "self", "call", "_typeof", "_assertThisInitialized", "init_possibleConstructorReturn", "__esmMin", "init_typeof", "init_assertThisInitialized", "__name", "_getPrototypeOf", "o", "__name", "init_getPrototypeOf", "__esmMin", "_defineProperty", "obj", "key", "value", "_toPropertyKey", "init_defineProperty", "__esmMin", "init_toPropertyKey", "__name", "_arrayWithHoles", "arr", "init_arrayWithHoles", "__esmMin", "__name", "_iterableToArray", "iter", "init_iterableToArray", "__esmMin", "__name", "_arrayLikeToArray", "arr", "len", "i", "arr2", "init_arrayLikeToArray", "__esmMin", "__name", "_unsupportedIterableToArray", "o", "minLen", "_arrayLikeToArray", "n", "init_unsupportedIterableToArray", "__esmMin", "init_arrayLikeToArray", "__name", "_nonIterableRest", "init_nonIterableRest", "__esmMin", "__name", "_toArray", "arr", "_arrayWithHoles", "_iterableToArray", "_unsupportedIterableToArray", "_nonIterableRest", "init_toArray", "__esmMin", "init_arrayWithHoles", "init_iterableToArray", "init_unsupportedIterableToArray", "init_nonIterableRest", "__name", "ownKeys$6", "object", "enumerableOnly", "keys", "symbols", "sym", "_objectSpread$6", "target", "i", "source", "key", "_defineProperty", "defer", "res", "rej", "promise", "resolve", "reject", "makeString", "copy", "a", "s", "t", "m", "getLastOfPath", "path", "Empty", "cleanKey", "__name", "canNotTraverseDeeper", "stack", "setPath", "newValue", "_getLastOfPath", "obj", "k", "pushPath", "concat", "_getLastOfPath2", "getPath", "_getLastOfPath3", "getPathWithDefaults", "data", "defaultData", "value", "deepExtend", "overwrite", "prop", "regexEscape", "str", "escape", "_entityMap", "looksLikeObjectPath", "nsSeparator", "keySeparator", "possibleChars", "chars", "c", "r", "matched", "ki", "deepFind", "paths", "current", "j", "p", "mix", "joinedPath", "ownKeys$5", "_objectSpread$5", "_createSuper$3", "Derived", "hasNativeReflectConstruct", "_isNativeReflectConstruct$3", "Super", "_getPrototypeOf", "result", "NewTarget", "_possibleConstructorReturn", "ownKeys$4", "_objectSpread$4", "_createSuper$2", "_isNativeReflectConstruct$2", "capitalize", "string", "createRules", "rules", "sets", "set", "l", "_rulesPluralsTypes", "ownKeys$3", "_objectSpread$3", "deepFindWithDefaults", "ignoreJSONStructure", "ownKeys$2", "_objectSpread$2", "parseFormatStr", "formatStr", "formatName", "formatOptions", "optStr", "opts", "opt", "_opt$split", "_opt$split2", "_toArray", "rest", "val", "createCachedFormatter", "fn", "cache", "lng", "options", "formatter", "ownKeys$1", "_objectSpread$1", "_createSuper$1", "_isNativeReflectConstruct$1", "removePending", "q", "name", "get", "args", "ret", "_typeof", "_format", "transformOptions", "ownKeys", "_objectSpread", "_createSuper", "_isNativeReflectConstruct", "noop", "bindMemberFunctions", "inst", "mems", "mem", "consoleLogger", "Logger", "baseLogger", "EventEmitter", "isIE10", "ResourceStore", "postProcessor", "checkedLoadedFor", "Translator", "LanguageUtil", "deprecatedJsonVersions", "suffixesOrder", "PluralResolver", "Interpolator", "Formatter", "Connector", "I18n", "instance", "createInstance", "dir", "init", "loadResources", "reloadResources", "use", "changeLanguage", "getFixedT", "exists", "setDefaultNamespace", "hasLoadedNamespace", "loadNamespaces", "loadLanguages", "init_i18next", "__esmMin", "init_typeof", "init_classCallCheck", "init_createClass", "init_assertThisInitialized", "init_inherits", "init_possibleConstructorReturn", "init_getPrototypeOf", "init_defineProperty", "init_toArray", "type", "concreteLogger", "_classCallCheck", "_createClass", "bool", "_len", "_key", "_len2", "_key2", "_len3", "_key3", "_len4", "_key4", "lvl", "prefix", "debugOnly", "moduleName", "events", "listener", "_this", "event", "cloned", "observer", "_cloned", "_EventEmitter", "_inherits", "_super", "_assertThisInitialized", "ns", "index", "resources", "deep", "pack", "n", "v", "module", "processors", "translator", "processor", "services", "resolved", "namespaces", "wouldCheckForNsInKey", "seemsNaturalLanguage", "parts", "lastKey", "_this2", "returnDetails", "_this$extractFromKey", "namespace", "appendNamespaceToCIMode", "resUsedKey", "resExactUsedKey", "resType", "noObject", "joinArrays", "handleAsObjectInI18nFormat", "handleAsObject", "resTypeIsArray", "newKeyToUse", "deepKey", "usedDefault", "usedKey", "needsPluralHandling", "hasDefaultValue", "defaultValueSuffix", "defaultValue", "missingKeyNoValueFallbackToKey", "resForMissing", "updateMissing", "fk", "lngs", "fallbackLngs", "send", "specificDefaultValue", "defaultForMissing", "language", "suffix", "_this3", "skipOnVariables", "nestBef", "nb", "na", "nestAft", "postProcess", "postProcessorNames", "_this4", "found", "exactUsedKey", "usedLng", "usedNS", "extracted", "needsZeroSuffixLookup", "needsContextHandling", "codes", "code", "finalKeys", "pluralSuffix", "zeroSuffix", "contextKey", "possibleKey", "option", "specialCases", "part", "cleanedLng", "lngOnly", "supportedLng", "fallbacks", "fallbackCode", "fallbackCodes", "addCode", "fc", "languageUtils", "rule", "pluralCategory1", "pluralCategory2", "pluralCategory", "number", "count", "idx", "returnSuffix", "iOpts", "regexpStr", "regexpUnescapeStr", "nestingRegexpStr", "match", "replaces", "regexSafe", "handleFormat", "f", "missingInterpolationHandler", "todos", "todo", "matchedVar", "temp", "safeValue", "clonedOptions", "handleHasOptions", "inheritedOptions", "sep", "optionsString", "matchedSingleQuotes", "matchedDoubleQuotes", "e", "formatters", "doReduce", "elem", "formats", "_parseFormatStr", "formatted", "valOptions", "error", "backend", "store", "languages", "callback", "toLoad", "pending", "toLoadLanguages", "toLoadNamespaces", "hasAllNamespaces", "err", "loaded", "loadedKeys", "fcName", "tried", "wait", "resolver", "next", "_this5", "fallbackValue", "isUpdate", "clb", "defOpts", "createClassOnDemand", "ClassOrObject", "lu", "storeApi", "_this2$store", "storeApiChained", "_this2$store2", "deferred", "load", "finish", "usedCallback", "append", "li", "lngInLngs", "setLngProps", "done", "setLng", "keyPrefix", "fixedT", "resultKey", "_this$translator", "_this$translator2", "_this6", "fallbackLng", "lastLng", "loadNotPending", "loadState", "preResult", "_this7", "preloaded", "newLngs", "rtlLngs", "_this8", "mergedOptions", "clone", "membersToCopy", "require_EventEmitter", "__commonJSMin", "exports", "t", "e", "i", "s", "__name", "r", "init_en_GB", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en_GB", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en_GB", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en_GB", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "init_en_GB", "__esmMin", "init_i18next", "instance", "init_en", "__esmMin", "init_i18next", "instance", "translations_exports", "init_translations", "__esmMin", "init_en_GB", "init_en", "import_element", "init_i18next", "reconstituteData", "__name", "hierarchy", "objects", "orphanIds", "seenObjects", "id", "getReferences", "value", "updated", "key", "childValue", "reconstituteData_default", "import_element", "import_element", "_action", "_transport", "Action", "action", "transport", "__privateAdd", "__privateSet", "event", "__privateGet", "__name", "Action_default", "import_element", "init_i18next", "template", "__name", "label", "value", "t", "_key", "_label", "_range", "_number", "_lock", "_listeners", "LockedSlider", "key", "currentValue", "__privateAdd", "__privateSet", "__privateGet", "handler", "listener", "LockedSlider_default", "_sliders", "LockedSliderGroup", "sliders", "__privateAdd", "__privateSet", "__privateGet", "slider", "otherSliders", "otherSlider", "otherActiveSliders", "overage", "chunk", "remaining", "total", "__name", "LockedSliderGroup_default", "import_element", "_parent", "TransientElement", "parent", "element", "__privateAdd", "event", "__privateSet", "__privateGet", "__name", "import_element", "h", "__name", "element", "handlers", "eventName", "handler", "init_i18next", "defaultOptions", "_body", "_title", "Window", "TransientElement", "title", "body", "options", "_a", "__privateAdd", "event", "__privateSet", "dimension", "value", "axis", "property", "headerActions", "h", "t", "show", "element", "isDragging", "__privateGet", "moveHandler", "__name", "windows", "focus", "x", "y", "elementComputedStyle", "currentTop", "currentLeft", "content", "Window_default", "instanceOfAny", "__name", "object", "constructors", "c", "idbProxyableTypes", "cursorAdvanceMethods", "getIdbProxyableTypes", "getCursorAdvanceMethods", "cursorRequestMap", "transactionDoneMap", "transactionStoreNamesMap", "transformCache", "reverseTransformCache", "promisifyRequest", "request", "promise", "resolve", "reject", "unlisten", "success", "error", "wrap", "value", "cacheDonePromiseForTransaction", "tx", "done", "complete", "idbProxyTraps", "target", "prop", "receiver", "replaceTraps", "callback", "wrapFunction", "func", "storeNames", "args", "unwrap", "transformCachableValue", "newValue", "openDB", "name", "version", "blocked", "upgrade", "blocking", "terminated", "request", "openPromise", "wrap", "event", "db", "__name", "readMethods", "writeMethods", "cachedMethods", "getMethod", "target", "prop", "targetFuncName", "useIndex", "isWrite", "method", "__name", "storeName", "args", "tx", "replaceTraps", "oldTraps", "receiver", "_connection", "_store", "Store", "db", "store", "options", "__privateAdd", "__privateSet", "openDB", "__privateGet", "key", "query", "count", "record", "__name", "scaleImage", "__name", "image", "scale", "options", "newCanvas", "context", "scaleImage_default", "_cachedAssets", "_cachedImages", "_cachedScaledImages", "_requiredAssets", "AssetStore", "Store", "__privateAdd", "path", "__privateGet", "asset", "image", "scale", "scaleImage_default", "dbAssets", "requiredAsset", "__name", "assetStore", "import_element", "init_i18next", "_sliderGroup", "AdjustTradeRates", "Action_default", "__privateAdd", "sliders", "Window_default", "t", "tradeRate", "slider", "LockedSlider_default", "value", "__privateGet", "__privateSet", "LockedSliderGroup_default", "assetStore", "asset", "__name", "AdjustTradeRates_default", "notificationQueue", "hasOpenWindow", "__name", "_options", "NotificationWindow", "Window", "title", "body", "passedOptions", "options", "__privateAdd", "__privateSet", "event", "__privateGet", "notification", "focus", "resolve", "NotificationWindow_default", "import_element", "ActionWindow", "NotificationWindow", "title", "body", "options", "_a", "_b", "actionWindow", "label", "action", "h", "event", "__name", "ActionWindow_default", "import_element", "numpadMap", "mappedKeyFromEvent", "__name", "event", "numpadAsArrows", "init_i18next", "_resizeHandler", "_selectionList", "SelectionWindow", "ActionWindow", "title", "optionList", "onChoose", "body", "t", "options", "_a", "_b", "chooseHandler", "__name", "selection", "selectionList", "h", "option", "event", "key", "mappedKeyFromEvent", "currentIndex", "targetIndex", "__privateAdd", "__privateSet", "__privateGet", "select", "_c", "_d", "_e", "e", "SelectionWindow_default", "import_element", "init_i18next", "ChooseResearch", "Action_default", "chooseWindow", "SelectionWindow_default", "t", "advance", "selection", "assetStore", "asset", "__name", "ChooseResearch_default", "init_i18next", "cityName", "__name", "city", "t", "init_i18next", "getLabelForBuildable", "__name", "buildable", "getLabelForBuildableEntity", "t", "init_i18next", "instanceOf", "__name", "object", "classNames", "_a", "entityClassName", "instanceOf_default", "instanceOf", "knownGroups", "knownGroupLookup", "object", "yieldName", "group", "reduceKnownYields", "__name", "yields", "yieldNames", "cityYield", "index", "instanceOf_default", "reduceKnownYield", "knownIcons", "import_element", "init_i18next", "renderPopulation", "__name", "city", "yields", "growth", "mask", "state", "population", "happiness", "unhappiness", "reduceKnownYields", "currentIndex", "status", "index", "assetStore", "image", "renderProgress", "cityData", "yieldName", "t", "turnsLeft", "data", "remainingTurns", "reduceKnownYield", "yieldData", "__name", "city", "yieldName", "total", "used", "free", "cityYield", "_a", "isKnown", "knownGroupLookup", "yieldImages", "icon", "assetStore", "knownIcons", "knownGroups", "image", "_onComplete", "_transport", "CityBuildSelectionWindow", "SelectionWindow_default", "cityBuild", "transport", "onComplete", "additionalActions", "t", "cityName", "buildItem", "getLabelForBuildable", "turnsLeft", "selection", "__privateAdd", "__privateSet", "hasSelected", "__privateGet", "__name", "CityBuildSelectionWindow_default", "import_element", "import_element", "import_element", "preloadContainer", "setPreloadContainer", "__name", "preloadContainerElement", "getPreloadedImage", "path", "image", "getPreloadedImage_default", "import_element", "recolouredImageCache", "replaceColours", "__name", "image", "source", "replacement", "key", "canvas", "clone", "context", "imageData", "getColor", "input", "_a", "match", "color", "sourceColors", "replaceColors", "i", "n", "replaceColours_default", "import_element", "_canvas", "_context", "_visible", "_scale", "_tileSize", "_world", "Map", "world", "scale", "tileSize", "canvas", "__privateAdd", "__privateSet", "__privateGet", "setPreloadContainer", "tiles", "x", "y", "size", "offsetX", "offsetY", "tilesToUpdate", "path", "options", "_a", "_b", "image", "tile", "filter", "directions", "direction", "getPreloadedImage", "source", "replacement", "replaceColours_default", "visible", "__name", "Map_default", "Cities", "Map", "tile", "x", "y", "size", "offsetX", "offsetY", "city", "player", "civilization", "colors", "attribute", "image", "__name", "Cities_default", "import_element", "init_i18next", "ConfirmationWindow", "NotificationWindow", "title", "details", "onOK", "options", "_a", "_b", "confirmationButton", "h", "t", "event", "__name", "ConfirmationWindow_default", "_handler", "_ids", "DataObserver", "ids", "handler", "__privateAdd", "__privateSet", "event", "detail", "objects", "__privateGet", "id", "__name", "DataObserver_default", "TerrainAbstract", "Map", "tilesToUpdate", "extendedTilesToUpdate", "tile", "direction", "target", "__name", "TerrainAbstract_default", "Feature", "TerrainAbstract_default", "tile", "x", "y", "feature", "__name", "Feature_default", "Fog", "TerrainAbstract_default", "tile", "x", "y", "direction", "__name", "Fog_default", "Terrain", "TerrainAbstract_default", "tile", "x", "y", "improvements", "state", "improvement", "improvementType", "improvementName", "neighbouringRoad", "adjoiningTile", "neighbouringRailroad", "direction", "size", "offsetX", "offsetY", "center", "__name", "Improvements_default", "Terrain", "TerrainAbstract_default", "tile", "x", "y", "improvement", "__name", "Irrigation_default", "import_element", "Land", "TerrainAbstract_default", "tile", "x", "y", "size", "offsetX", "offsetY", "sprite", "bitmask", "topLeftSubtileOffset", "topRightSubtileOffset", "bottomRightSubtileOffset", "bottomLeftSubtileOffset", "image", "imageContext", "direction", "__name", "Land_default", "import_typed_event_emitter", "import_element", "defaultPortalOptions", "_canvas", "_center", "_context", "_layers", "_playerId", "_scale", "_tileSize", "_transport", "_world", "Portal", "world", "transport", "canvas", "options", "layers", "settings", "__privateAdd", "__privateSet", "MapType", "__privateGet", "updatedTiles", "layer", "LayerType", "_a", "x", "y", "visibleHorizontal", "visibleVertical", "xLowerBound", "xUpperBound", "yLowerBound", "yUpperBound", "tileSize", "layerWidth", "centerX", "portalCenterX", "layerHeight", "centerY", "portalCenterY", "startX", "endX", "startY", "endY", "tileRangeX", "tileRangeY", "__name", "Portal_default", "import_element", "import_element", "init_i18next", "entityName", "__name", "entity", "namespace", "prefix", "key", "fallback", "t", "renderUnit", "__name", "unit", "tileSize", "_a", "player", "civilization", "colors", "attribute", "unitCanvas", "replaceColours_default", "getPreloadedImage_default", "context", "improvement", "sizeOffsetX", "sizeOffsetY", "identifier", "entityName", "renderUnit_default", "_scale", "Unit", "unit", "scale", "__privateAdd", "__privateSet", "unitCanvas", "renderUnit_default", "context", "sizeX", "sizeY", "offsetX", "offsetY", "size", "__privateGet", "__name", "Unit_default", "SupportedUnit", "city", "unit", "yieldsToInclude", "Unit_default", "cityYield", "yieldImages", "__name", "SupportedUnit_default", "Terrain", "TerrainAbstract_default", "tile", "x", "y", "adjoining", "adjoiningTile", "__name", "Terrain_default", "import_element", "init_i18next", "build", "__name", "units", "transport", "onComplete", "unit", "icon", "Unit_default", "h", "_dataObserver", "UnitSelectionWindow", "Window_default", "t", "__privateAdd", "unitIds", "__privateSet", "DataObserver_default", "data", "_a", "_b", "updatedUnits", "UnitSelectionWindow_default", "_activeUnit", "Units", "Map", "__privateAdd", "tile", "x", "y", "size", "offsetX", "offsetY", "__privateGet", "unit", "a", "b", "_a", "_b", "image", "renderUnit_default", "__privateSet", "__name", "Units_default", "_city", "Unworkable", "Map_default", "__privateAdd", "city", "__privateSet", "tile", "x", "y", "size", "offsetX", "offsetY", "__privateGet", "__name", "Unworkable_default", "_unknown", "_lookupCache", "_tiles", "_height", "_width", "World", "world", "__privateAdd", "__name", "x", "y", "__privateSet", "__privateGet", "key", "index", "tile", "direction", "tiles", "World_default", "Yields", "Map_default", "tile", "x", "y", "size", "offsetX", "offsetY", "total", "tileYield", "yields", "a", "b", "i", "offsets", "n", "__name", "Yields_default", "_defaultLocale", "_locale", "_locales", "LocaleProvider", "locale", "locales", "defaultLocale", "__privateAdd", "__privateSet", "__privateGet", "list", "options", "number", "date", "timeFormatter", "secondsDifference", "value", "unit", "resolved", "limit", "currentUnit", "__name", "instance", "init_i18next", "reduceYield", "__name", "type", "cityYields", "cityYield", "knownGroupLookup", "used", "free", "renderYields", "city", "cityYieldNames", "cityYieldName", "n", "i", "yieldImages", "knownGroups", "yieldObject", "key", "value", "t", "resizeYields", "element", "yieldWrappers", "container", "currentMaxWidth", "renderMap", "portal", "transport", "portalCanvas", "cityPortal", "Portal_default", "World_default", "Land_default", "Irrigation_default", "Terrain_default", "Improvements_default", "Feature_default", "Fog_default", "Cities_default", "Units_default", "Yields_default", "Unworkable_default", "tile", "unit", "unworkable", "h", "renderBuild", "chooseProduction", "completeProduction", "instanceOf_default", "Unit_default", "getLabelForBuildable", "spendCost", "renderProgress", "renderGrowth", "instance", "renderImprovements", "improvement", "renderGarrisonedUnits", "cityPlayerUnits", "UnitSelectionWindow_default", "renderSupportedUnits", "SupportedUnit_default", "cityDetails", "renderPopulation", "getTreasuryForYield", "player", "yieldName", "treasury", "_city", "_dataObserver", "_portal", "_transport", "_treasury", "City", "Window_default", "cityName", "__privateAdd", "__privateSet", "DataObserver_default", "data", "_a", "_b", "updatedCity", "cityData", "__privateGet", "event", "buyButtons", "resizeHandler", "CityBuildSelectionWindow_default", "cityBuild", "ConfirmationWindow_default", "getLabelForBuildableEntity", "City_default", "init_i18next", "showCityAction", "__name", "city", "portal", "transport", "t", "cityName", "selectionWindow", "City_default", "showCityAction_default", "init_i18next", "showCityOnMapAction", "__name", "city", "portal", "t", "cityName", "selectionWindow", "showCityOnMap_default", "init_i18next", "_portal", "CityBuild", "Action_default", "action", "portal", "transport", "__privateAdd", "__privateSet", "CityBuildSelectionWindow_default", "showCityAction_default", "__privateGet", "showCityOnMap_default", "cityBuild", "assetStore", "asset", "t", "cityName", "__name", "CityBuild_default", "import_element", "init_i18next", "_portal", "CivilDisorder", "Action_default", "action", "portal", "transport", "__privateAdd", "__privateSet", "city", "ActionWindow_default", "t", "cityName", "showCityAction_default", "__privateGet", "showCityOnMap_default", "assetStore", "asset", "__name", "CivilDisorder_default", "import_element", "init_i18next", "EndTurn", "Action_default", "t", "check_circle_default", "__name", "EndTurn_default", "import_element", "init_i18next", "Revolution", "Action_default", "chooseWindow", "SelectionWindow_default", "t", "government", "selection", "assetStore", "asset", "__name", "Revolution_default", "import_element", "init_i18next", "Spaceship", "Action_default", "spaceship", "yields", "yieldMap", "spaceshipYield", "activeParts", "partMap", "part", "inactiveParts", "values", "t", "instance", "launch", "__name", "window", "Window_default", "key", "value", "label", "h", "event", "globe_default", "Spaceship_default", "_portal", "_transport", "Actions", "container", "portal", "transport", "__privateAdd", "__privateSet", "event", "_a", "currentChild", "key", "mappedKeyFromEvent", "children", "currentAction", "currentIndex", "actions", "playerAction", "action", "AdjustTradeRates_default", "__privateGet", "ChooseResearch_default", "CityBuild_default", "CivilDisorder_default", "EndTurn_default", "Spaceship_default", "Revolution_default", "h", "__name", "Actions_default", "ActiveUnit", "Units_default", "activeUnit", "x", "y", "tile", "size", "offsetX", "offsetY", "image", "__name", "ActiveUnit_default", "CityNames", "Map", "tile", "x", "y", "size", "offsetX", "offsetY", "city", "sizeOffsetX", "sizeOffsetY", "textOffsetX", "textOffsetY", "instance", "cityName", "__name", "CityNames_default", "import_element", "init_i18next", "buildCityRow", "__name", "city", "food", "production", "trade", "research", "gold", "luxuries", "yieldName", "yieldData", "foodIcon", "productionIcon", "tradeIcon", "researchIcon", "goldIcon", "luxuriesIcon", "assetStore", "knownIcons", "image", "cityName", "t", "turnsLeft", "getLabelForBuildable", "total", "free", "icon", "_cities", "_dataObserver", "_portal", "_transport", "CityStatus", "Window_default", "player", "portal", "transport", "__privateAdd", "__privateSet", "DataObserver_default", "id", "build", "growth", "data", "__privateGet", "rows", "name", "yields", "index", "row", "element", "containerNodeName", "container", "h", "City_default", "CityStatus_default", "import_element", "init_i18next", "_turn", "_year", "GameDetails", "element", "turn", "year", "__privateAdd", "__privateSet", "t", "__privateGet", "__name", "GameDetails_default", "import_element", "EntityRegistry", "#acceptedTypes", "#entries", "acceptedTypes", "entity", "acceptedType", "iterator", "key", "value", "check", "item", "entities", "index", "__name", "EntityRegistry_default", "_key", "_value", "GameOption", "key", "value", "__privateAdd", "__privateSet", "__privateGet", "__name", "GameOption_default", "GameOptionsRegistry", "EntityRegistry_default", "GameOption_default", "key", "option", "value", "existing", "__name", "instance", "import_element", "init_i18next", "GameOptions", "Window_default", "t", "input", "instance", "h", "__name", "GameOptions_default", "import_element", "init_i18next", "buildCityRow", "__name", "city", "portal", "transport", "happinessReasons", "cityYield", "Unit_default", "SupportedUnit_default", "luxuriesElement", "assetStore", "knownIcons", "image", "instance", "reduceKnownYield", "happinessYields", "instanceOf_default", "reasons", "index", "renderPopulation", "reasonWrapper", "h", "cityName", "t", "event", "City_default", "_dataObserver", "_player", "_portal", "_transport", "HappinessReport", "Window_default", "player", "__privateAdd", "__privateSet", "DataObserver_default", "data", "__privateGet", "rows", "HappinessReport_default", "import_element", "init_i18next", "menuMap", "_actions", "_targetPointerUpListener", "_centerX", "_centerY", "_options", "PopupMenu", "launcher", "centerX", "centerY", "actions", "options", "__privateAdd", "__name", "__privateSet", "__privateGet", "action", "label", "button", "h", "t", "PopupMenu_default", "combinedYields", "__name", "player", "yields", "city", "import_element", "init_i18next", "template", "__name", "playerResearch", "yields", "_a", "researchIcon", "assetStore", "knownIcons", "image", "t", "turnsLeft", "reduceKnownYield", "advance", "_dataObserver", "_player", "ScienceReport", "Window_default", "player", "__privateAdd", "__privateSet", "DataObserver_default", "city", "data", "__privateGet", "combinedYields", "ScienceReport_default", "import_element", "init_i18next", "_cities", "_dataObserver", "_portal", "_transport", "TradeReport", "Window_default", "player", "portal", "transport", "t", "__privateAdd", "__privateSet", "DataObserver_default", "id", "build", "growth", "data", "__privateGet", "goldIcon", "assetStore", "knownIcons", "image", "cityList", "improvementList", "improvements", "totalIncome", "totalSpend", "totalGold", "city", "cityYield", "improvement", "cityGold", "used", "free", "yieldData", "row", "h", "City_default", "cityName", "content", "element", "name", "count", "cost", "__name", "TradeReport_default", "init_i18next", "_dataObserver", "_player", "_portal", "_transport", "GameMenu", "element", "player", "portal", "transport", "__privateAdd", "__privateSet", "DataObserver_default", "data", "button", "menu_default", "h", "parentX", "parentY", "x", "y", "PopupMenu_default", "t", "GameOptions_default", "CityStatus_default", "__privateGet", "HappinessReport_default", "TradeReport_default", "ScienceReport_default", "__name", "GameMenu_default", "import_element", "init_i18next", "buildActions", "__name", "tile", "unit", "transport", "actions", "neighbouringTileDetails", "action", "neighbouringTileActions", "perform", "t", "ConfirmationWindow_default", "bodyListener", "UnitActionMenu", "PopupMenu", "launcher", "centerX", "centerY", "event", "target", "UnitActionMenu_default", "import_element", "_activeUnit", "_showActionMenuTimeout", "GamePortal", "Portal_default", "__privateAdd", "event", "realTarget", "tile", "playerTileUnits", "unit", "City_default", "UnitSelectionWindow_default", "showActionMenu", "__name", "x", "y", "__privateGet", "__privateSet", "UnitActionMenu_default", "offsetX", "offsetY", "centerTile", "canvasCenterOffset", "GamePortal_default", "Terrain", "TerrainAbstract_default", "tile", "x", "y", "__name", "GoodyHuts_default", "_paused", "_stack", "IntervalHandler", "tick", "__privateAdd", "__privateGet", "item", "__privateSet", "handler", "__name", "IntervalHandler_default", "init_classCallCheck", "init_createClass", "arr", "each", "slice", "defaults", "obj", "source", "prop", "__name", "fieldContentRegExp", "serializeCookie", "name", "val", "options", "opt", "value", "str", "maxAge", "sameSite", "cookie", "minutes", "domain", "cookieOptions", "nameEQ", "ca", "i", "c", "cookie$1", "found", "lng", "querystring", "search", "query", "params", "pos", "key", "hasLocalStorageSupport", "localStorageAvailable", "testKey", "localStorage", "hasSessionStorageSupport", "sessionStorageAvailable", "sessionStorage", "navigator$1", "htmlTag", "path", "language", "subdomain", "lookupFromSubdomainIndex", "getDefaults", "Browser", "services", "_classCallCheck", "_createClass", "i18nOptions", "detector", "detectionOrder", "_this", "detected", "detectorName", "lookup", "caches", "_this2", "cacheName", "import_element", "_args", "_channel", "Request", "channel", "args", "__privateAdd", "__privateSet", "__privateGet", "__name", "Request_default", "Options", "Request_default", "args", "__name", "Options_default", "import_element", "init_i18next", "_onFinished", "_transport", "CustomiseWorldWindow", "Window_default", "transport", "onFinished", "t", "__privateAdd", "__privateSet", "_a", "_b", "_c", "_d", "_e", "_f", "existingValues", "__privateGet", "Options_default", "playersInput", "heightInput", "widthInput", "landCoverageInput", "landSizeInput", "maxIterationsInput", "submit", "__name", "Request_default", "h", "event", "CustomiseWorldWindow_default", "init_i18next", "MandatorySelection", "SelectionWindow", "title", "optionList", "onChoose", "body", "t", "options", "resolve", "detail", "__name", "MandatorySelection_default", "init_i18next", "NewGameWindow", "MandatorySelection_default", "transport", "onFinished", "t", "value", "selection", "Request_default", "__name", "NewGameWindow_default", "EarthWindow", "NewGameWindow", "transport", "onFinished", "Request_default", "__name", "EarthWindow_default", "BinFile", "content", "callback", "b1", "length", "start", "__name", "BinFile_default", "LZWDictionary", "maxBits", "i", "pos", "entry", "__name", "LZWDictionary_default", "LZW", "binFile", "remainingCodedBytes", "uByteMode", "parsedIndexes", "usableBits", "usableBitCount", "indicatorLength", "indicatorFlag", "nextThreshold", "decodedCounter", "index", "inputData", "dicIndexMaxBits", "codedData", "decodedData", "dic", "LZWDictionary_default", "plainData", "oldCode", "buffer", "character", "newCode", "i", "p", "byteArr", "opt", "lastChr", "isFlag", "chr", "j", "__name", "LZW_default", "lowerNibble", "__name", "byte", "lowerNibble_default", "upperNibble", "__name", "byte", "upperNibble_default", "PicImage", "BinFile_default", "callback", "id", "length", "i", "firstIndex", "lastIndex", "paletteLength", "seenBlack", "colour", "decompSourceData", "LZW_default", "decompData", "oldImageData", "lowerNibble_default", "upperNibble_default", "ctx", "destinationX", "destinationY", "canvasData", "index", "y", "x", "colorIndex", "canvasIndex", "__name", "PicImage_default", "extractSprites", "__name", "content", "extractData", "defaults", "canvasProvider", "logger", "message", "canvas", "image", "PicImage_default", "result", "path", "definitionParents", "definition", "object", "filename", "contentCanvas", "context", "x", "y", "imageData", "import_element", "init_i18next", "_fileInput", "_progressInformation", "ImportAssetsWindow", "Window_default", "fileInput", "progressInformation", "t", "extract_data_default", "h", "event", "__privateAdd", "__privateSet", "_a", "__privateGet", "files", "filenames", "file", "expectedFilenames", "key", "expectedMatch", "filename", "results", "resolve", "definitions", "reader", "extractSprites", "width", "height", "canvas", "message", "record", "assetStore", "__name", "ImportAssetsWindow_default", "import_element", "getDefaults", "__name", "defaults", "changeDefaults", "newDefaults", "escapeTest", "escapeReplace", "escapeTestNoEncode", "escapeReplaceNoEncode", "escapeReplacements", "getEscapeReplacement", "ch", "escape", "html", "encode", "unescapeTest", "unescape", "_", "n", "caret", "edit", "regex", "opt", "obj", "name", "val", "nonWordAndColonTest", "originIndependentUrl", "cleanUrl", "sanitize", "base", "href", "prot", "resolveUrl", "baseUrls", "justDomain", "protocol", "domain", "rtrim", "relativeBase", "noopTest", "splitCells", "tableRow", "count", "row", "match", "offset", "str", "escaped", "curr", "cells", "i", "c", "invert", "l", "suffLen", "currChar", "findClosingBracket", "b", "level", "checkSanitizeDeprecation", "repeatString", "pattern", "result", "outputLink", "cap", "link", "raw", "lexer", "title", "text", "token", "indentCodeCompensation", "matchIndentToCode", "indentToCode", "node", "matchIndentInNode", "indentInNode", "Tokenizer", "options", "src", "trimmed", "top", "tokens", "istask", "ischecked", "indent", "blankLine", "endsWithBlankLine", "line", "nextLine", "rawLine", "itemContents", "endEarly", "bull", "isordered", "list", "itemRegex", "t", "nextBulletRegex", "hrRegex", "fencesBeginRegex", "headingBeginRegex", "spacers", "hasMultipleLineBreaks", "tag", "item", "j", "k", "trimmedUrl", "rtrimSlash", "lastParenIndex", "linkLen", "links", "maskedSrc", "prevChar", "nextChar", "lLength", "rDelim", "rLength", "delimTotal", "midDelimTotal", "endReg", "hasNonSpaceChars", "hasSpaceCharsOnBothEnds", "mangle", "prevCapZero", "smartypants", "block", "inline", "out", "Lexer", "rules", "next", "leading", "tabs", "lastToken", "cutSrc", "lastParagraphClipped", "extTokenizer", "startIndex", "tempSrc", "tempStart", "getStartIndex", "errMsg", "keepPrevChar", "Renderer", "code", "infostring", "lang", "quote", "slugger", "id", "body", "ordered", "start", "type", "startatt", "checked", "header", "content", "flags", "TextRenderer", "Slugger", "value", "originalSlug", "isDryRun", "slug", "occurenceAccumulator", "Parser", "l2", "l3", "cell", "loose", "itemBody", "task", "checkbox", "ret", "renderer", "Hooks", "markdown", "__publicField", "onError", "silent", "async", "callback", "e", "msg", "parseMarkdown", "parser", "origOpt", "marked", "throwError", "highlight", "done", "err", "pending", "args", "extensions", "pack", "opts", "ext", "prevRenderer", "prop", "tokenizer", "prevTokenizer", "hooks", "prevHook", "arg", "walkTokens", "values", "childTokens", "setOptions", "use", "parseInline", "parser", "Parser", "lexer", "Lexer", "firstParentMatching", "__name", "target", "targetSelector", "toggleExpanded", "expectedSelector", "targetIsVisible", "ReleaseWindow", "Window_default", "releases_default", "release", "i", "releaseDate", "instance", "line", "marked", "module", "status", "changes", "change", "event", "ReleaseWindow_default", "init_i18next", "_transport", "MainMenu", "element", "transport", "__privateAdd", "__privateSet", "showQuit", "hasAssets", "assetStore", "h", "t", "NewGameWindow_default", "__privateGet", "EarthWindow_default", "CustomiseWorldWindow_default", "ImportAssetsWindow_default", "event", "currentTarget", "key", "mappedKeyFromEvent", "version", "ReleaseWindow_default", "button", "__name", "MainMenu_default", "import_element", "_context", "_element", "_layers", "_portal", "_world", "Minimap", "element", "world", "portal", "layers", "__privateAdd", "__privateSet", "__privateGet", "event", "x", "y", "tileX", "tileY", "targetHeight", "layer", "start", "end", "__name", "Minimap_default", "init_i18next", "_container", "_notifications", "_interval", "Notifications", "container", "__privateAdd", "__privateSet", "notification", "__privateGet", "active", "remove", "message", "t", "title", "NotificationWindow_default", "__name", "Notifications_default", "import_element", "init_i18next", "_player", "PlayerDetails", "element", "player", "__privateAdd", "__privateSet", "_a", "_b", "civilization", "treasuries", "research", "cities", "__privateGet", "goldTreasury", "treasury", "totalGold", "totalResearch", "city", "cityGold", "cityResearch", "reduceKnownYields", "researchTurns", "t", "__name", "PlayerDetails_default", "import_element", "init_i18next", "_activeUnit", "UnitDetails", "element", "activeUnit", "__privateAdd", "__privateSet", "__privateGet", "t", "cityName", "improvement", "feature", "unit", "Unit_default", "__name", "UnitDetails_default", "_transport", "Renderer", "transport", "__privateAdd", "__privateSet", "__privateGet", "assetStore", "scaledCursor", "instance", "Browser", "event", "ConfirmationWindow_default", "notificationArea", "mainMenuElement", "actionArea", "secondaryActionArea", "gameMenu", "gameArea", "mapWrapper", "mapPortal", "gameInfo", "playerInfo", "minimapCanvas", "unitInfo", "preloadContainer", "notifications", "Notifications_default", "mainMenu", "MainMenu_default", "setActiveUnit", "__name", "unit", "portal", "unitsMap", "activeUnitsMap", "unitDetails", "UnitDetails_default", "activeUnit", "lastUnit", "records", "record", "h", "tilesToRender", "globalNotificationTimer", "data", "interactionLabel", "interaction", "instanceOf_default", "t", "proposal", "negotiationLabel", "negotiation", "currentInteraction", "choices", "key", "title", "window", "ActionWindow_default", "actionWindow", "body", "SelectionWindow_default", "id", "value", "choice", "objectMap", "NotificationWindow_default", "advance", "activeUnits", "scale", "world", "World_default", "intervalHandler", "IntervalHandler_default", "GamePortal_default", "Land_default", "Irrigation_default", "Terrain_default", "Improvements_default", "Feature_default", "GoodyHuts_default", "Fog_default", "Yields_default", "Units_default", "Cities_default", "CityNames_default", "ActiveUnit_default", "landMap", "yieldsMap", "citiesMap", "cityNamesMap", "minimap", "Minimap_default", "primaryActions", "Actions_default", "secondaryActions", "GameMenu_default", "handler", "reconstituteData", "primaryActionList", "ignoredActionList", "primaryActionPriority", "action", "a", "b", "_a", "_b", "GameDetails_default", "PlayerDetails_default", "activeUnitAction", "unitA", "unitB", "rawData", "pathToParts", "path", "getPenultimateObject", "object", "parts", "lastPart", "tmpObj", "part", "setObjectPath", "removeObjectPath", "patch", "type", "index", "keyToActionsMap", "directionKeyMap", "leaderScreensMap", "CityStatus_default", "HappinessReport_default", "TradeReport_default", "ScienceReport_default", "lastKey", "mappedKeyFromEvent", "modalWindow", "actions", "actionName", "unitAction", "perform", "topAction", "units", "current", "e", "Renderer_default", "AbstractTransport", "request", "resolve", "value", "__name", "AbstractTransport_default", "AdditionalData", "#key", "#provider", "#type", "type", "key", "provider", "args", "__name", "AdditionalData_default", "AdditionalDataRegistry", "EntityRegistry", "AdditionalData_default", "type", "additionalData", "__name", "instance", "generateInheritance", "__name", "object", "constructor", "DataObject_default", "stack", "generateInheritance_default", "idCache", "idProvider", "__name", "object", "className", "current", "toPlainObject", "value", "objects", "filter", "additionalDataRegistry", "instance", "EntityRegistry_default", "item", "DataObject", "id", "plainObject", "generateInheritance_default", "key", "keyValue", "additionalData", "#id", "#keys", "keys", "dataObjectFilter", "DataObject_default", "_worker", "WorkerTransport", "AbstractTransport_default", "worker", "__privateAdd", "__privateSet", "channel", "handler", "__privateGet", "receivingChannel", "data", "handlerData", "reconstituteData_default", "onceHandler", "__name", "DataObject_default", "WorkerTransport_default", "renderer", "Renderer_default", "WorkerTransport_default"]
}
